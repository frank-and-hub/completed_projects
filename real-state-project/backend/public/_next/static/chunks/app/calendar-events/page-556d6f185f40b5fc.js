(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9906],{70600:function(e,t,n){Promise.resolve().then(n.bind(n,56325))},68431:function(e,t,n){"use strict";n.d(t,{A$:function(){return a},HI:function(){return l},Nz:function(){return c},ig:function(){return s},rc:function(){return o},tf:function(){return i}});var r=n(81296);let i=async e=>(0,r.J$)("property-request-all",{params:e}),l=async e=>(0,r.vw)("property-request-data/".concat(null==e?void 0:e.id),{params:e}),o=e=>(0,r.vw)("invite/accept/".concat(e,"/").concat(e)),a=e=>(0,r.g_)("invite/decline/".concat(e,"/").concat(e)),s=e=>(0,r.g_)("property-request/report/status",e),c=(e,t)=>(0,r.g_)("invite/reschedule/".concat(e,"/").concat(e),t)},81296:function(e,t,n){"use strict";n.d(t,{vw:function(){return s},J$:function(){return c},g_:function(){return u},tn:function(){return d}});var r=n(83464),i=n(41607),l=n(76772);let o=async e=>{if(r.Z.isCancel(e))throw console.warn("Request canceled:",e.message),e;if(e.response){var t,n,o;(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===401?((0,l.t6)({title:"Session Expired!",message:"Your login session has expired. Please login again to continue.",type:"error"}),i.h.dispatch({type:"LOGOUT"})):404===e.response.status?(0,l.t6)({title:"Error",message:"Resource not found.",type:"error"}):(0,l.t6)({title:"Error",message:null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message,type:"error"})}else e.request?(0,l.t6)({title:"Server Error!",message:"No response received from the server. Please try again later.",type:"error"}):(0,l.t6)({title:"Error",message:"An error occurred while setting up the request.",type:"error"});throw e},a=r.Z.create({timeout:3e4,timeoutErrorMessage:"Network request timed out. The app could not connect to the server. Please make sure you are connected with a good network.",headers:{"Content-Type":"application/json",Accept:"application/json","ngrok-skip-browser-warning":"hello"}});a.interceptors.request.use(e=>{try{var t;let n=null===(t=i.h.getState())||void 0===t?void 0:t.userReducer,r=null==n?void 0:n.token;return e.baseURL="http://127.0.0.1:8000/api/v1/",e.headers&&!e.headers.Authorization&&(e.headers.Authorization="Bearer ".concat(r)),e}catch(e){console.error("error",e)}},e=>{throw e}),a.interceptors.response.use(e=>{if([200,201].includes(e.status))return e;throw Error},e=>o(e));let s=(e,t)=>a.get(e,t).then(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data}),c=(e,t)=>a.get(e,t).then(e=>null==e?void 0:e.data),u=(e,t,n)=>a.post(e,t,n).then(e=>null==e?void 0:e.data),d=(e,t,n)=>a.post(e,t,{headers:{"Content-Type":"multipart/form-data"},...n}).then(e=>null==e?void 0:e.data)},56325:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(57437);n(71257);var i=n(46341),l=n(99655),o=n(91653),a=n(2874),s=n(2289),c={src:"/_next/static/media/calender_event.077b530e.svg",height:572,width:590,blurWidth:0,blurHeight:0},u=n(14629),d=n(42982),p=n(118),h=n(82904),v=n(76846),f=n(30445),m=n(17031),g=n(6023),x=n(33145),y=n(34605),j={src:"/_next/static/media/agent-user.3a68f815.png",height:200,width:200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AFV3h1Z3h1Z5iE9ufFBvflN0hU1vfklqegBYe4xZfY5VcHwyNzQoMjVIZ3VSdIVOb4AAW3+SW4CSK0FIkntre2RVADpIVXeJT3CCAF6DllR/k3dwbK+WiIZuX0JQWFN5jE9yhQBgg5dQfZOQj5HGqp2Td2lTZW9SeYxRc4cAUX+ZSnyYgIGAwaSUeWBUPF1sRHWQSXKLAIGLiLGhaMWpX8ismJN2UHxqJouCYGd3ewC1nFTLqUG9mz+5nFarjkGpii61lCOVgUUf9VaSQ9acbwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8};n(60649);var w=n(22959),b=n(71096),A=n.n(b),C=n(28107),_=n(25969),N=n(83902),S=n(68431),M=n(76772),k=n(29827),P=n(21770),E=()=>{let e=(0,k.useQueryClient)(),{mutate:t,isPending:n}=(0,P.useMutation)({mutationFn:S.rc,onSuccess:async t=>{await e.invalidateQueries({queryKey:["calendarEventList","future"]}),(0,M.t6)({message:"Your request has been Accepted."})}}),{mutate:r,isPending:i}=(0,P.useMutation)({mutationFn:S.A$,onSuccess:async t=>{await e.invalidateQueries({queryKey:["calendarEventList","future"]}),(0,M.t6)({message:"Your request has been Declined."})}});return{declineInviteMutate:r,declinePending:i,acceptInviteMutate:t,acceptPending:n}},F=n(99376),D=n(2265);let I={expired:{label:"Expired",color:"var(--mantine-color-red-filled)",value:"expired"},accepted:{label:"Scheduled",color:"var(--mantine-color-blue-filled)",value:"accepted"},pending:{label:"Not Accepted Yet",color:"var(--mantine-color-yellow-filled)",value:"pending"},completed:{label:"Competed",color:"var(--mantine-color-teal-filled)",value:"completed"},cancelled:{label:"Cancelled",color:"var(--mantine-color-red-filled)",value:"cancelled"},"re-schedule":{label:"Rescheduled",color:"var(--mantine-color-blue-filled)",value:"re-schedule"}};var U=function(e){var t,n,i,l,o,a,s,c;let{item:u}=e,b=(0,F.useRouter)(),[S,M]=(0,D.useState)(u),{id:k,title:P,admin:{image:U,name:Z},description:Y,time:T,date:J,status:q,property:{address:R,id:B}}=S;(0,D.useEffect)(()=>{M(u)},[u]);let{acceptInviteMutate:z,declineInviteMutate:L}=E();A().locale("en");let O=A()().diff(A()(J),"second");return(0,r.jsxs)("div",{className:"card_house_event",children:[(0,r.jsx)("figure",{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:[" ",null===(t=(0,_.s2)(J).split(" "))||void 0===t?void 0:t[0]," "]}),(0,r.jsxs)("h2",{children:[null===_.aF||void 0===_.aF?void 0:_.aF[null===(n=(0,_.s2)(J).split(" "))||void 0===n?void 0:n[1]]," ",null===(i=(0,_.s2)(J).split(" "))||void 0===i?void 0:i[2]]}),(0,r.jsx)(w.default,{size:"lg",fw:"bold",c:"white",children:A()(J).format("hh:mm A")})]})}),(0,r.jsxs)("figcaption",{className:"event_fig_caption",children:[(0,r.jsxs)(d.Flex,{wrap:"nowrap",children:[(0,r.jsx)("h3",{style:{flex:1},children:(0,C.fm)(P)}),(null==I?void 0:null===(l=I[q])||void 0===l?void 0:l.label)?(0,r.jsx)(p.A,{checked:!1,style:{width:"auto"},styles:{label:{background:null==I?void 0:null===(o=I[q])||void 0===o?void 0:o.color,color:"#FFF"}},value:"filled",children:(0,r.jsx)(h.Title,{fw:"500",size:"sm",order:5,c:"#FFF",mb:0,children:null==I?void 0:null===(a=I[q])||void 0===a?void 0:a.label})}):null]}),(0,r.jsx)(w.default,{color:"dimmed",size:"sm",my:"xs",style:{flex:1},lineClamp:3,children:Y}),(0,r.jsx)(v.i,{size:"1.5px",mb:"7px",mt:"7px"}),(0,r.jsxs)("div",{style:{marginTop:10},children:[(0,r.jsx)("div",{style:{flex:1},children:(null==u?void 0:null===(s=u.property)||void 0===s?void 0:s.complete_address)&&(0,r.jsxs)("h5",{className:"location-text",children:[(0,r.jsx)(x.default,{src:y.Z,alt:"no-image",width:20,height:20,className:"location-pin-image"}),null==u?void 0:null===(c=u.property)||void 0===c?void 0:c.complete_address]})}),(0,r.jsxs)("h6",{children:[(0,r.jsx)(x.default,{src:U||j,alt:"no-image",width:25,height:25}),(0,C.fm)(Z)]})]}),O<0&&"pending"===q?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.i,{size:"1.5px",mb:"7px",mt:"7px"}),(0,r.jsxs)(d.Flex,{columnGap:"xl",rowGap:"sm",direction:"row",wrap:{base:"wrap",md:"unset",sm:"unset",lg:"unset",xl:"unset"},children:[(0,r.jsx)(f.u,{label:"Accept event",withArrow:!0,children:(0,r.jsx)(m.Button,{onClick:e=>{e.stopPropagation(),e.preventDefault(),N.modals.openConfirmModal({title:"Accept Property",children:(0,r.jsx)(g.Text,{size:"xs",children:"You want to accept this property?"}),labels:{confirm:"Accept",cancel:"Cancel"},onCancel:()=>console.log("Cancel"),onConfirm:()=>z(k,{onSuccess:()=>{M(e=>({...e,status:"accepted"}))}}),centered:!0})},className:"propertiesCardBtn",w:"100%",bg:"green",children:(0,r.jsx)("div",{className:"contract_link",children:(0,r.jsx)("span",{children:"Accept"})})})}),(0,r.jsx)(f.u,{label:"Decline event",withArrow:!0,children:(0,r.jsx)(m.Button,{onClick:e=>{e.stopPropagation(),e.preventDefault(),N.modals.openConfirmModal({title:"Decline Property",children:(0,r.jsx)(g.Text,{size:"xs",children:"You want to decline this property ?"}),labels:{confirm:"Decline",cancel:"Cancel"},onCancel:()=>console.log("Cancel"),onConfirm:()=>L(k,{onSuccess:()=>{M(e=>({...e,status:"cancelled"}))}}),centered:!0})},className:"propertiesCardBtn",w:"100%",children:(0,r.jsx)("div",{className:"contract_link",children:(0,r.jsx)("span",{children:"Decline"})})})}),(0,r.jsx)(f.u,{label:"Reschedule event",withArrow:!0,children:(0,r.jsx)(m.Button,{onClick:e=>{e.stopPropagation(),e.preventDefault(),b.push("/reschedule?id="+k+"&property="+B)},className:"propertiesCardBtn",w:"100%",bg:"yellow",children:(0,r.jsx)("div",{className:"contract_link",children:(0,r.jsx)("span",{children:"Reschedule"})})})})]})]}):(0,r.jsx)(r.Fragment,{})]})]},k)},Z=n(81296);let Y=e=>{let{page:t=1,is_upcoming:n}=e;return(0,Z.J$)("calendar",{params:{page:t,is_upcoming:n}})};var T=n(2868),J=()=>{let[e,t]=(0,D.useState)("future"),n=(0,T.useInfiniteQuery)({queryKey:["calendarEventList",e],queryFn:t=>{let{pageParam:n}=t;return Y({page:n,is_upcoming:"past"===e?0:1})},initialPageParam:1,getNextPageParam:e=>{var t,n,r;return(null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.total_page)>(null==e?void 0:null===(n=e.meta)||void 0===n?void 0:n.current_page)?(null==e?void 0:null===(r=e.meta)||void 0===r?void 0:r.current_page)+1:void 0},enabled:!!e});return{activeEvents:e,setActiveEvents:t,eventListQuery:n}},q=e=>{var t,n,d,p;let{activeEvents:h,setActiveEvents:v,eventListQuery:f}=J(),{data:m,isLoading:g,isPending:x}=f;return(0,r.jsxs)("div",{className:"portals_sec",children:[(0,r.jsx)(u.Z,{title:"Property Viewing Schedule",description:"Keep track of all your property viewings in one place.",image:c}),(0,r.jsx)("div",{className:"portals_sec_outer_event",children:(0,r.jsxs)(i.Container,{className:"portals_sec_inner",size:"lg",children:[(0,r.jsx)(l.Center,{children:(0,r.jsxs)(o.Group,{className:"button_container",style:{flexDirection:"row-reverse"},children:[(0,r.jsx)("div",{onClick:()=>{v("past")},className:"past"===h?"active_button":"event_buttons",children:(0,r.jsx)("span",{children:"Past Events"})}),(0,r.jsx)("div",{onClick:()=>{v("future")},className:"future"===h?"active_button":"event_buttons",children:(0,r.jsx)("span",{children:"Upcoming Events"})})]})}),g||x?(0,r.jsx)(a.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(50%, 0)"}}):(null==m?void 0:null===(n=m.pages)||void 0===n?void 0:null===(t=n.map(e=>null==e?void 0:e.data).flat())||void 0===t?void 0:t.length)?(0,r.jsx)(s.r,{children:(0,r.jsx)(s.r.Col,{span:12,children:null==m?void 0:null===(p=m.pages)||void 0===p?void 0:null===(d=p.map(e=>null==e?void 0:e.data).flat())||void 0===d?void 0:d.map(e=>(0,r.jsx)(U,{item:e}))})}):(0,r.jsx)("p",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, 0)",padding:0},children:"No data found"})]})})]})}},14629:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(5660),l=n(46341),o=n(33145);t.Z=function(e){let{description:t,image:n,title:a}=e;return(0,r.jsx)("div",{className:"inner_header_pages",children:(0,r.jsx)(l.Container,{size:"lg",children:(0,r.jsxs)(i.SimpleGrid,{cols:2,spacing:"sm",verticalSpacing:"sm",children:[(0,r.jsxs)("div",{className:"property_header",children:[(0,r.jsx)("h1",{children:a}),(0,r.jsx)("p",{children:t})]}),(0,r.jsx)("div",{className:"property_header_img",children:(0,r.jsx)(o.default,{src:n,alt:"no-image"})})]})})})}},22959:function(e,t,n){"use strict";n.r(t);var r=n(57437),i=n(6023);n(2265),t.default=function(e){let{children:t,...n}=e;return(0,r.jsx)(i.Text,{...n,children:t})}},28700:function(e,t,n){"use strict";n.d(t,{HM:function(){return a},Tj:function(){return l},_u:function(){return o},iU:function(){return s},jM:function(){return i}});let r=(0,n(20301).oM)({initialState:{token:void 0,userDetail:void 0,propertySearchData:void 0,isPropertySearch:!1,isShowMap:0},name:"user",reducers:{updateToken(e,t){var n;e.token=t.payload.token,e.userDetail=null===(n=t.payload)||void 0===n?void 0:n.user},updateUserInformation(e,t){e.userDetail=t.payload},updatePropertyInformation(e,t){e.propertySearchData=t.payload},updatePropertySearch(e,t){e.isPropertySearch=t.payload},updateIsShowMap(e,t){e.isShowMap=t.payload}}}),{updateToken:i,updateUserInformation:l,updatePropertyInformation:o,updatePropertySearch:a,updateIsShowMap:s}=r.actions;t.ZP=r.reducer},41607:function(e,t,n){"use strict";n.d(t,{h:function(){return d}});var r=n(99090),i=n(20301),l=n(9628),o=n(59688),a=n(28700);let s=(0,o.UY)({userReducer:a.ZP}),c={key:"PocketProperty",storage:r.Z},u=(e,t)=>{let n=e;if("LOGOUT"===t.type&&e){for(let[e,t]of Object.entries(n))"baseUrlReducer"===e?n[e]=t:n[e]=void 0;e=n}return s(e,t)},d=(()=>{let e=(0,l.OJ)(c,u);return(0,i.xC)({reducer:e})})();(0,l.p5)(d)},28107:function(e,t,n){"use strict";function r(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function i(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2")}function l(e){if(e){let[t="00",n="00",r="00"]=e.split(":");return[t.padStart(2,"0"),n.padStart(2,"0")].join(":")}}n.d(t,{Hp:function(){return i},Vu:function(){return l},fm:function(){return r}})},25969:function(e,t,n){"use strict";n.d(t,{ZP:function(){return l},aF:function(){return a},s2:function(){return o}});var r=n(71096),i=n.n(r);function l(e,t){try{let n=null==e?void 0:e.replace(/(st|nd|rd|th|o)/,""),r=n?n.split(" "):[];if(3!==r.length)throw Error('Invalid date format. Expected format: "DDth MMMM YYYY"');let i=parseInt(r[0],10),l=r[1],o=parseInt(r[2],10),a=["January","February","March","April","May","June","July","August","September","October","November","December"].findIndex(e=>e.toLowerCase()===l.toLowerCase());if(-1===a)throw Error("Invalid month name");let s=t.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!s)throw Error('Invalid time format. Expected format: "HH:MM AM/PM"');let c=parseInt(s[1],10),u=parseInt(s[2],10),d=s[3].toUpperCase();"PM"===d&&12!==c?c+=12:"AM"===d&&12===c&&(c=0);let p=new Date(o,a,i,c,u),h=new Date;return console.log(p.getTime(),null==h?void 0:h.getTime()),p.getTime()<=(null==h?void 0:h.getTime())}catch(e){throw Error("Failed to parse date or time: ".concat(e.message))}}let o=e=>{let t=i()(e).date();return"".concat(t).concat(t%10==1&&11!==t?"st":t%10==2&&12!==t?"nd":t%10==3&&13!==t?"rd":"th"," ").concat(i()(e).format("MMMM YYYY"))},a={January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec"}},76772:function(e,t,n){"use strict";n.d(t,{t6:function(){return a},vU:function(){return s}});var r=n(57437),i=n(72019),l=n(16393),o=n(91443);let a=e=>{let{message:t,title:n,onClose:a,onOpen:s,type:c="success",color:u,icon:d,autoClose:p=5e3,id:h}=e;return"success"===c?i.notifications.show({id:h,withCloseButton:!0,onClose:a,onOpen:s,autoClose:p,title:null!=n?n:"Success",message:t,icon:null!=d?d:(0,r.jsx)(l.Z,{size:"1rem"}),className:"my-notification-class",color:null!=u?u:"teal"}):"error"===c?i.notifications.show({id:null!=h?h:"error-notification",withCloseButton:!0,onClose:a,onOpen:s,autoClose:p,title:null!=n?n:"Error",message:t,color:null!=u?u:"red",icon:null!=d?d:(0,r.jsx)(o.Z,{}),className:"my-notification-class"}):i.notifications.show({id:null!=h?h:"loading-notification",withCloseButton:!0,onClose:a,onOpen:s,title:null!=n?n:"Loading...",message:t,color:u,icon:null!=d?d:(0,r.jsx)(o.Z,{}),className:"my-notification-class",loading:!0})},s=()=>{i.notifications.clean()}},60649:function(){},71257:function(){},34605:function(e,t){"use strict";t.Z={src:"/_next/static/media/locationIconYellow.c372f397.svg",height:50,width:39,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[959,5501,3939,9145,384,7031,2174,8388,8649,4130,8099,2971,2117,1744],function(){return e(e.s=70600)}),_N_E=e.O()}]);