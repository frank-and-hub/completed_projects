(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[728],{51206:function(e,t,n){Promise.resolve().then(n.bind(n,76863))},68431:function(e,t,n){"use strict";n.d(t,{A$:function(){return u},HI:function(){return i},Nz:function(){return l},ig:function(){return o},rc:function(){return s},tf:function(){return a}});var r=n(81296);let a=async e=>(0,r.J$)("property-request-all",{params:e}),i=async e=>(0,r.vw)("property-request-data/".concat(null==e?void 0:e.id),{params:e}),s=e=>(0,r.vw)("invite/accept/".concat(e,"/").concat(e)),u=e=>(0,r.g_)("invite/decline/".concat(e,"/").concat(e)),o=e=>(0,r.g_)("property-request/report/status",e),l=(e,t)=>(0,r.g_)("invite/reschedule/".concat(e,"/").concat(e),t)},76863:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(57437),a=n(60113),i=n(99655),s=n(2874),u=n(82904),o=n(50028),l=n(50208),d=n(60380),c=n(71632),m=n(99376),f=n(2265);n(651);var p=n(58760),y=n(28107),v=n(44275),h=n(15867),_=n(50422),g=n(13993),b=n(95775),x=n(34422),w=(e,t,n)=>{let r={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},a=e=>(0,_.Qc)(e,"HH:mm",new Date),i=[];try{i=Array.isArray(e.days_in_week)?e.days_in_week:JSON.parse(e.days_in_week||"[]")}catch(t){console.error("Invalid days_in_week format:",e.days_in_week)}return{form:(0,v.c)({initialValues:{date:"",time:"",message:"",property_id:n},validate:(0,h.X)((e=>{let{allowedWeekdays:n=["Monday"],timeStart:i="00:00",timeEnd:s="23:00",eventDetails:u=t}=e,o=x.hT().typeError("Invalid date format").required("Date is required").test("max-date-if-timeslot",function(e){if(!e)return!1;if(null==u?void 0:u.time_limit){let t=new Date(u.time_limit);if(e>t)return this.createError({message:"Date must be on or before ".concat(t.toLocaleDateString())})}return!0}).test("is-valid-day","Date must be one of: ".concat(n.join(", ")),e=>{if(!e)return!1;let t=(0,g.w)(e);return n.map(e=>r[e]).includes(t)});return x.Ry().shape({date:o,time:x.Z_().required("Time is required").test("is-valid-time","Time must be between ".concat(i," and ").concat(s),e=>{if(!e)return!1;try{let t=a(e);return(0,b._)(t,{start:a(i),end:a(s)})}catch(e){return!1}}),message:x.Z_().nullable().notRequired().transform(e=>""===e?null:e)})})({allowedWeekdays:i,timeStart:(0,y.Vu)(e.start_time),timeEnd:(0,y.Vu)(e.end_time),eventDetails:t}))})}},j=n(88149),k=n(68431),S=n(4929),q=n(76772),E=n(40525),D=n(10245),N=n(1985),T=function(){var e,t,n,y;let v=(0,m.useRouter)(),h=(0,m.useSearchParams)(),_=h.get("property"),g=h.get("id"),{data:b,isLoading:x}=(0,c.useQuery)({queryKey:["thank_you",_],queryFn:()=>(0,j.IP)({id:_}),enabled:!!(g&&_)}),T=null!==(n=null==b?void 0:null===(e=b.data)||void 0===e?void 0:e.timeSlot)&&void 0!==n?n:{},I=null!==(y=null==b?void 0:null===(t=b.data)||void 0===t?void 0:t.event)&&void 0!==y?y:{},{form:P}=w(T,I,_),[C,R]=(0,f.useState)(!1),z=(0,E.CG)(e=>{var t;return null==e?void 0:null===(t=e.userReducer)||void 0===t?void 0:t.token}),A=P.onSubmit(async e=>{R(!0);try{(await (0,k.Nz)(g,e)).status&&(v.push("/calendar-events"),(0,q.t6)({message:"Your property requests event has been resheduled."}))}catch(e){console.error("Submission error:",e)}finally{R(!1),v.push("/calendar-events")}});return(S.Z,z)?((0,f.useEffect)(()=>{I&&null===I.status&&"pending"!==I.status&&(v.push("/calendar-events"),(0,q.t6)({title:"Error",message:"Property request event not found.",type:"error"}))},[I,v]),(0,r.jsx)("section",{className:"main_section",children:(0,r.jsx)(a.X,{className:"content_box",shadow:"md",radius:"md",children:x?(0,r.jsx)(i.Center,{children:(0,r.jsx)(s.a,{size:36})}):I.id&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Title,{ta:"center",px:"xl",children:"Reschedule Event"}),(0,r.jsx)(o.o,{label:"Date",type:"date",mt:"lg",variant:"filled",...P.getInputProps("date")}),(0,r.jsx)(o.o,{label:"Time",type:"time",mt:"lg",variant:"filled",step:"0",...P.getInputProps("time")}),(0,r.jsx)(l.g,{label:"Message",placeholder:"Optional message",mt:"lg",autosize:!0,minRows:5,variant:"filled",...P.getInputProps("message")}),(0,r.jsx)(d.Box,{mt:"sm",children:(0,r.jsx)(p.default,{loading:C,onClick:()=>A(),children:"Submit"})})]})})})):(0,r.jsx)(D.default,{actionButton:null,isOpen:!0,children:(0,r.jsx)(N.default,{type:"chooseUserType"})},z)}},28107:function(e,t,n){"use strict";function r(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function a(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2")}function i(e){if(e){let[t="00",n="00",r="00"]=e.split(":");return[t.padStart(2,"0"),n.padStart(2,"0")].join(":")}}n.d(t,{Hp:function(){return a},Vu:function(){return i},fm:function(){return r}})},651:function(){}},function(e){e.O(0,[2032,1356,1828,9913,1559,5501,3939,9145,4407,7031,8370,225,7438,8575,8649,5072,6858,6255,8789,2971,2117,1744],function(){return e(e.s=51206)}),_N_E=e.O()}]);