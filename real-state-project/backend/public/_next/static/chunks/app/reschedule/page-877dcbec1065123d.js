(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[728],{51206:function(e,t,r){Promise.resolve().then(r.bind(r,76863))},88149:function(e,t,r){"use strict";r.d(t,{AK:function(){return a},Bq:function(){return d},IP:function(){return i},Qj:function(){return f},Ur:function(){return l},af:function(){return s},bm:function(){return u},sw:function(){return v},u:function(){return m},v2:function(){return o},v9:function(){return c},vz:function(){return p}});var n=r(81296);let o=e=>(0,n.J$)("property-details/".concat(e)),i=e=>{let{id:t}=e;return(0,n.J$)("internal-property-details/".concat(t))},a=e=>{let{id:t}=e;return(0,n.J$)("calendar-details/".concat(t))},s=e=>(0,n.g_)("set-message-schedule-time",e),u=e=>(0,n.g_)("sent-client-mail",e),l=e=>(0,n.g_)("advanced-filter",e),c=e=>{let{page:t=1,search:r}=e;return(0,n.J$)("countries",{params:{page:t,search:r}})},d=e=>{let{countryId:t,page:r,search:o}=e;return(0,n.J$)("states/".concat(t),{params:{page:r,search:o}})},p=e=>{let{provinceId:t,page:r,search:o}=e;return(0,n.J$)("cities/".concat(t),{params:{page:r,search:o}})},f=e=>{let{page:t,search:r,cityId:o}=e;return(0,n.J$)("suburbs/".concat(o),{params:{page:t,search:r}})},m=()=>(0,n.J$)("columns"),v=()=>(0,n.vw)("top-city-rent-count").then(e=>{let t={};return(null==e?void 0:e.length)&&(null==e||e.map(e=>{t={...t,[h(null==e?void 0:e.town)]:null==e?void 0:e.total}})),t}),h=e=>e?e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""):""},68431:function(e,t,r){"use strict";r.d(t,{A$:function(){return s},HI:function(){return i},Nz:function(){return l},ig:function(){return u},rc:function(){return a},tf:function(){return o}});var n=r(81296);let o=async e=>(0,n.J$)("property-request-all",{params:e}),i=async e=>(0,n.vw)("property-request-data/".concat(null==e?void 0:e.id),{params:e}),a=e=>(0,n.vw)("invite/accept/".concat(e,"/").concat(e)),s=e=>(0,n.g_)("invite/decline/".concat(e,"/").concat(e)),u=e=>(0,n.g_)("property-request/report/status",e),l=(e,t)=>(0,n.g_)("invite/reschedule/".concat(e,"/").concat(e),t)},81296:function(e,t,r){"use strict";r.d(t,{vw:function(){return l},J$:function(){return c},g_:function(){return d},tn:function(){return p}});var n=r(83464),o=r(41607),i=r(76772);let a=async e=>{if(n.Z.isCancel(e))throw console.warn("Request canceled:",e.message),e;if(e.response){var t,r,a;(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===401?((0,i.t6)({title:"Session Expired!",message:"Your login session has expired. Please login again to continue.",type:"error"}),o.h.dispatch({type:"LOGOUT"})):404===e.response.status?(0,i.t6)({title:"Error",message:"Resource not found.",type:"error"}):(0,i.t6)({title:"Error",message:null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message,type:"error"})}else e.request?(0,i.t6)({title:"Server Error!",message:"No response received from the server. Please try again later.",type:"error"}):(0,i.t6)({title:"Error",message:"An error occurred while setting up the request.",type:"error"});throw e};var s=r(89628);let u=n.Z.create({timeout:3e4,timeoutErrorMessage:"Network request timed out. The app could not connect to the server. Please make sure you are connected with a good network.",headers:{"Content-Type":"application/json",Accept:"application/json","ngrok-skip-browser-warning":"hello"}});u.interceptors.request.use(e=>{try{var t;let r=null===(t=o.h.getState())||void 0===t?void 0:t.userReducer,n=null==r?void 0:r.token,i=(0,s.h5)()+"/api/v1/";return e.baseURL=i,e.headers&&!e.headers.Authorization&&(e.headers.Authorization="Bearer ".concat(n)),e}catch(e){console.error("error",e)}},e=>{throw e}),u.interceptors.response.use(e=>{if([200,201].includes(e.status))return e;throw Error},e=>a(e));let l=(e,t)=>u.get(e,t).then(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data}),c=(e,t)=>u.get(e,t).then(e=>null==e?void 0:e.data),d=(e,t,r)=>u.post(e,t,r).then(e=>null==e?void 0:e.data),p=(e,t,r)=>u.post(e,t,{headers:{"Content-Type":"multipart/form-data"},...r}).then(e=>null==e?void 0:e.data)},76863:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(57437),o=r(5659),i=r(60113),a=r(99655),s=r(2874),u=r(82904),l=r(50028),c=r(50208),d=r(60380),p=r(71632),f=r(99376),m=r(2265);r(651);var v=r(58760),h=r(28107),y=r(44275),g=r(15867),w=r(13993),k=r(95775),_=r(34422),S=(e,t,r)=>{let n={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},o=e=>{let[t,r]=e.split(":").map(Number),n=new Date;return n.setUTCHours(t),n.setUTCMinutes(r),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n},i=[];try{i=Array.isArray(e.days_in_week)?e.days_in_week:JSON.parse(e.days_in_week||"[]")}catch(t){console.error("Invalid days_in_week format:",e.days_in_week)}return{form:(0,y.c)({initialValues:{date:"",time:"",message:"",property_id:r},validate:(0,g.X)((e=>{let{allowedWeekdays:r=["Monday"],timeStart:i="00:00",timeEnd:a="23:00",eventDetails:s=t}=e,u=_.hT().typeError("Invalid date format").required("Date is required").test("min-date-from-event",function(e){if(!e)return!1;console.log(s);let t=(null==s?void 0:s.date)?new Date(s.date):null,r=null==t?void 0:t.toLocaleDateString(),n=new Date(e);return!t||!(n<t)||this.createError({message:"Date must be on or after ".concat(r)})}).test("max-date-if-timeslot",function(e){if(!e)return!1;if(null==s?void 0:s.time_limit){let t=new Date(s.time_limit);if(e>t)return this.createError({message:"Date must be on or before ".concat(t.toLocaleDateString())})}return!0}).test("is-valid-day","Date must be one of: ".concat(r.join(", ")),e=>{if(!e)return!1;let t=(0,w.w)(e);return r.map(e=>n[e]).includes(t)});return _.Ry().shape({date:u,time:_.Z_().required("Time is required").test("is-valid-time","Time must be between ".concat(i," and ").concat(a),e=>{if(!e)return!1;try{let t=o(e);return(0,k._)(t,{start:o(i),end:o(a)})}catch(e){return!1}}),message:_.Z_().nullable().notRequired().transform(e=>""===e?null:e)})})({allowedWeekdays:i,timeStart:(0,h.Vu)(e.start_time),timeEnd:(0,h.Vu)(e.end_time),eventDetails:t}))})}},b=r(88149),x=r(68431),j=r(4929),T=r(41695),C=r(76772),P=r(93388),q=r(40525),E=function(){var e,t,r,h;let y=(0,f.useRouter)(),g=(0,f.useSearchParams)(),w=g.get("property"),k=g.get("id"),{data:_,isLoading:E}=(0,p.useQuery)({queryKey:["thank_you",w],queryFn:()=>(0,b.AK)({id:k}),enabled:!!(k&&w)}),D=null!==(t=null==_?void 0:null===(e=_.data)||void 0===e?void 0:e.timeSlot)&&void 0!==t?t:{},Z=null!==(r=null==_?void 0:_.data)&&void 0!==r?r:{},N=null!==(h=(0,q.CG)(e=>{var t;return null==e?void 0:null===(t=e.userReducer)||void 0===t?void 0:t.token}))&&void 0!==h?h:null,{form:A}=S(D,Z,w),[I,R]=(0,m.useState)(!1),U=A.onSubmit(async e=>{R(!0);try{let t=new Date("".concat(e.date,"T").concat(e.time));e.time=t.toISOString().slice(11,16),(await (0,x.Nz)(k,e)).status&&(0,C.t6)({message:"Your property requests event has been resheduled."})}catch(e){console.error("Submission error:",e)}finally{N?y.push("/calendar-events"):y.push("/")}});j.Z,(0,m.useEffect)(()=>{N&&(Z&&null===Z.status&&"pending"!==Z.status?(0,C.t6)({title:"Error",message:"Property request event not found.",type:"error"}):"re-schedule"===Z.status&&(y.push("/calendar-events"),(0,C.t6)({title:"Information",message:"The property request event has already been rescheduled.",type:"success"}))),console.log(Z,N),console.clear()},[Z,y,N]);let M=(0,m.useRef)(null),$=(0,n.jsx)(o.ActionIcon,{variant:"subtle",color:"gray",onClick:()=>{var e;return null===(e=M.current)||void 0===e?void 0:e.showPicker()},children:(0,n.jsx)(T.Z,{size:16,stroke:1.5})});return(0,n.jsx)("section",{className:"main_section",children:(0,n.jsx)(i.X,{className:"content_box",shadow:"md",radius:"md",children:E?(0,n.jsx)(a.Center,{children:(0,n.jsx)(s.a,{size:36})}):Z.id&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Title,{ta:"center",px:"xl",children:"Reschedule Event"}),(0,n.jsx)(l.o,{label:"Date",type:"date",mt:"lg",variant:"filled",withAsterisk:!0,...A.getInputProps("date")}),(0,n.jsx)(P.M,{label:"Time",type:"time",mt:"lg",variant:"filled",step:"0",withSeconds:!1,withAsterisk:!0,...A.getInputProps("time"),ref:M,rightSection:$}),(0,n.jsx)(c.g,{label:"Message",placeholder:"Enter message here",mt:"lg",autosize:!0,minRows:5,variant:"filled",...A.getInputProps("message")}),(0,n.jsx)(d.Box,{mt:"sm",children:(0,n.jsx)(v.default,{loading:I,onClick:()=>U(),children:"Submit"})})]})})})}},58760:function(e,t,r){"use strict";r.r(t);var n=r(57437),o=r(17031),i=r(60380),a=r(44347);r(2265),t.default=function(e){let{children:t,iconProps:r,iconContainerBoxProps:s,onClick:u,...l}=e;return(0,n.jsxs)(o.Button,{onClick:u,className:"btn ".concat(null==l?void 0:l.className),...l,children:[t," ",(0,n.jsx)(i.Box,{className:"icon-container",...s,children:(0,n.jsx)(a.Z,{...r,stroke:1.5})})]})}},40525:function(e,t,r){"use strict";r.d(t,{CG:function(){return i},TL:function(){return o}});var n=r(68575);let o=n.I0.withTypes(),i=n.v9.withTypes();n.oR.withTypes()},28700:function(e,t,r){"use strict";r.d(t,{HM:function(){return s},Tj:function(){return i},_u:function(){return a},iU:function(){return u},jM:function(){return o}});let n=(0,r(20301).oM)({initialState:{token:void 0,userDetail:void 0,propertySearchData:void 0,isPropertySearch:!1,isShowMap:0},name:"user",reducers:{updateToken(e,t){var r;e.token=t.payload.token,e.userDetail=null===(r=t.payload)||void 0===r?void 0:r.user},updateUserInformation(e,t){e.userDetail=t.payload},updatePropertyInformation(e,t){e.propertySearchData=t.payload},updatePropertySearch(e,t){e.isPropertySearch=t.payload},updateIsShowMap(e,t){e.isShowMap=t.payload}}}),{updateToken:o,updateUserInformation:i,updatePropertyInformation:a,updatePropertySearch:s,updateIsShowMap:u}=n.actions;t.ZP=n.reducer},41607:function(e,t,r){"use strict";r.d(t,{h:function(){return d}});var n=r(99090),o=r(20301),i=r(9628),a=r(59688),s=r(28700);let u=(0,a.UY)({userReducer:s.ZP}),l={key:"PocketProperty",storage:n.Z},c=(e,t)=>{let r=e;if("LOGOUT"===t.type&&e){for(let[e,t]of Object.entries(r))"baseUrlReducer"===e?r[e]=t:r[e]=void 0;e=r}return u(e,t)},d=(()=>{let e=(0,i.OJ)(l,c);return(0,o.xC)({reducer:e})})();(0,i.p5)(d)},28107:function(e,t,r){"use strict";function n(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function o(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2")}function i(e){if(e){let[t="00",r="00",n="00"]=e.split(":");return[t.padStart(2,"0"),r.padStart(2,"0")].join(":")}}r.d(t,{Hp:function(){return o},Vu:function(){return i},fm:function(){return n}})},89628:function(e,t,r){"use strict";r.d(t,{Ff:function(){return i},h5:function(){return o}});var n=r(37484);t.ZP=e=>{let t=o()+"/assets/icon/";return"".concat(t).concat(e,".png")};let o=()=>n.Z?"https://staging.pocketproperty.app":window?window.location.origin:"",i=()=>n.Z?"pocket-property-staging":"pocket-property"},37484:function(e,t){"use strict";t.Z=!1},76772:function(e,t,r){"use strict";r.d(t,{t6:function(){return s},vU:function(){return u}});var n=r(57437),o=r(72019),i=r(16393),a=r(91443);let s=e=>{let{message:t,title:r,onClose:s,onOpen:u,type:l="success",color:c,icon:d,autoClose:p=5e3,id:f}=e;return"success"===l?o.notifications.show({id:f,withCloseButton:!0,onClose:s,onOpen:u,autoClose:p,title:null!=r?r:"Success",message:t,icon:null!=d?d:(0,n.jsx)(i.Z,{size:"1rem"}),className:"my-notification-class",color:null!=c?c:"teal"}):"error"===l?o.notifications.show({id:null!=f?f:"error-notification",withCloseButton:!0,onClose:s,onOpen:u,autoClose:p,title:null!=r?r:"Error",message:t,color:null!=c?c:"red",icon:null!=d?d:(0,n.jsx)(a.Z,{}),className:"my-notification-class"}):o.notifications.show({id:null!=f?f:"loading-notification",withCloseButton:!0,onClose:s,onOpen:u,title:null!=r?r:"Loading...",message:t,color:c,icon:null!=d?d:(0,n.jsx)(a.Z,{}),className:"my-notification-class",loading:!0})},u=()=>{o.notifications.clean()}},651:function(){}},function(e){e.O(0,[2032,3939,9145,384,7031,4339,8575,9414,2971,2117,1744],function(){return e(e.s=51206)}),_N_E=e.O()}]);