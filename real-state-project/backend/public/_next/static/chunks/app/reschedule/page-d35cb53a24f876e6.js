(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[728],{51206:function(e,t,n){Promise.resolve().then(n.bind(n,76863))},88149:function(e,t,n){"use strict";n.d(t,{AK:function(){return a},Bq:function(){return d},IP:function(){return o},Qj:function(){return f},Ur:function(){return l},af:function(){return s},bm:function(){return u},sw:function(){return h},u:function(){return m},v2:function(){return i},v9:function(){return c},vz:function(){return p}});var r=n(81296);let i=e=>(0,r.J$)("property-details/".concat(e)),o=e=>{let{id:t}=e;return(0,r.J$)("internal-property-details/".concat(t))},a=e=>{let{id:t}=e;return(0,r.J$)("calendar-details/".concat(t))},s=e=>(0,r.g_)("set-message-schedule-time",e),u=e=>(0,r.g_)("sent-client-mail",e),l=e=>(0,r.g_)("advanced-filter",e),c=e=>{let{page:t=1,search:n}=e;return(0,r.J$)("countries",{params:{page:t,search:n}})},d=e=>{let{countryId:t,page:n,search:i}=e;return(0,r.J$)("states/".concat(t),{params:{page:n,search:i}})},p=e=>{let{provinceId:t,page:n,search:i}=e;return(0,r.J$)("cities/".concat(t),{params:{page:n,search:i}})},f=e=>{let{page:t,search:n,cityId:i}=e;return(0,r.J$)("suburbs/".concat(i),{params:{page:t,search:n}})},m=()=>(0,r.J$)("columns"),h=()=>(0,r.vw)("top-city-rent-count").then(e=>{let t={};return(null==e?void 0:e.length)&&(null==e||e.map(e=>{t={...t,[v(null==e?void 0:e.town)]:null==e?void 0:e.total}})),t}),v=e=>e?e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""):""},68431:function(e,t,n){"use strict";n.d(t,{A$:function(){return s},HI:function(){return o},Nz:function(){return l},ig:function(){return u},rc:function(){return a},tf:function(){return i}});var r=n(81296);let i=async e=>(0,r.J$)("property-request-all",{params:e}),o=async e=>(0,r.vw)("property-request-data/".concat(null==e?void 0:e.id),{params:e}),a=e=>(0,r.vw)("invite/accept/".concat(e,"/").concat(e)),s=e=>(0,r.g_)("invite/decline/".concat(e,"/").concat(e)),u=e=>(0,r.g_)("property-request/report/status",e),l=(e,t)=>(0,r.g_)("invite/reschedule/".concat(e,"/").concat(e),t)},81296:function(e,t,n){"use strict";n.d(t,{vw:function(){return l},J$:function(){return c},g_:function(){return d},tn:function(){return p}});var r=n(83464),i=n(41607),o=n(76772);let a=async e=>{if(r.Z.isCancel(e))throw console.warn("Request canceled:",e.message),e;if(e.response){var t,n,a;(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===401?((0,o.t6)({title:"Session Expired!",message:"Your login session has expired. Please login again to continue.",type:"error"}),i.h.dispatch({type:"LOGOUT"})):404===e.response.status?(0,o.t6)({title:"Error",message:"Resource not found.",type:"error"}):(0,o.t6)({title:"Error",message:null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.message,type:"error"})}else e.request?(0,o.t6)({title:"Server Error!",message:"No response received from the server. Please try again later.",type:"error"}):(0,o.t6)({title:"Error",message:"An error occurred while setting up the request.",type:"error"});throw e};var s=n(89628);let u=r.Z.create({timeout:3e4,timeoutErrorMessage:"Network request timed out. The app could not connect to the server. Please make sure you are connected with a good network.",headers:{"Content-Type":"application/json",Accept:"application/json","ngrok-skip-browser-warning":"hello"}});u.interceptors.request.use(e=>{try{var t;let n=null===(t=i.h.getState())||void 0===t?void 0:t.userReducer,r=null==n?void 0:n.token,o=(0,s.h5)()+"/api/v1/";return e.baseURL=o,e.headers&&!e.headers.Authorization&&(e.headers.Authorization="Bearer ".concat(r)),e}catch(e){console.error("error",e)}},e=>{throw e}),u.interceptors.response.use(e=>{if([200,201].includes(e.status))return e;throw Error},e=>a(e));let l=(e,t)=>u.get(e,t).then(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data}),c=(e,t)=>u.get(e,t).then(e=>null==e?void 0:e.data),d=(e,t,n)=>u.post(e,t,n).then(e=>null==e?void 0:e.data),p=(e,t,n)=>u.post(e,t,{headers:{"Content-Type":"multipart/form-data"},...n}).then(e=>null==e?void 0:e.data)},76863:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(57437),i=n(5659),o=n(60113),a=n(99655),s=n(2874),u=n(82904),l=n(6023),c=n(50028),d=n(50208),p=n(60380),f=n(71632),m=n(99376),h=n(2265);n(651);var v=n(58760),y=n(28107),g=n(44275),w=n(15867),_=n(13993),S=n(95775),k=n(34422),x=(e,t,n)=>{let r={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},i=e=>{let[t,n]=e.split(":").map(Number),r=new Date;return r.setUTCHours(t),r.setUTCMinutes(n),r.setUTCSeconds(0),r.setUTCMilliseconds(0),r},o=[];try{o=Array.isArray(e.days_in_week)?e.days_in_week:JSON.parse(e.days_in_week||"[]")}catch(t){console.error("Invalid days_in_week format:",e.days_in_week)}return{form:(0,g.c)({initialValues:{date:"",time:"",message:"",property_id:n},validate:(0,w.X)((e=>{let{allowedWeekdays:n=["Monday"],timeStart:o="00:00",timeEnd:a="23:00",eventDetails:s=t}=e,u=k.hT().typeError("Invalid date format").required("Date is required").test("min-date-from-event",function(e){if(!e)return!1;console.info(s);let t=(null==s?void 0:s.date)?new Date(s.date):null,n=null==t?void 0:t.toLocaleDateString(),r=new Date(e);return!t||!(r<t)||this.createError({message:"Date must be on or after ".concat(n)})}).test("max-date-if-timeslot",function(e){if(!e)return!1;if(null==s?void 0:s.time_limit){let t=new Date(s.time_limit);if(e>t)return this.createError({message:"Date must be on or before ".concat(t.toLocaleDateString())})}return!0}).test("is-valid-day","Date must be one of: ".concat(n.join(", ")),e=>{if(!e)return!1;let t=(0,_.w)(e);return n.map(e=>r[e]).includes(t)});return k.Ry().shape({date:u,time:k.Z_().required("Time is required").test("is-valid-time","Time must be between ".concat(o," and ").concat(a),e=>{if(!e)return!1;try{let t=i(e);return(0,S._)(t,{start:i(o),end:i(a)})}catch(e){return!1}}),message:k.Z_().nullable().notRequired().transform(e=>""===e?null:e)})})({allowedWeekdays:o,timeStart:(0,y.Vu)(e.start_time),timeEnd:(0,y.Vu)(e.end_time),eventDetails:t}))})}},b=n(88149),j=n(68431),T=n(4929),C=n(41695),D=n(76772),P=n(93388),E=n(40525),q=function(){var e,t,n,y;let g=(0,m.useRouter)(),w=(0,m.useSearchParams)(),_=w.get("property"),S=w.get("id"),{data:k,isLoading:q}=(0,f.useQuery)({queryKey:["thank_you",_],queryFn:()=>(0,b.AK)({id:S}),enabled:!!(S&&_)}),N=null!==(t=null==k?void 0:null===(e=k.data)||void 0===e?void 0:e.timeSlot)&&void 0!==t?t:{},Z=null!==(n=null==k?void 0:k.data)&&void 0!==n?n:{},A=null!==(y=(0,E.CG)(e=>{var t;return null==e?void 0:null===(t=e.userReducer)||void 0===t?void 0:t.token}))&&void 0!==y?y:null,{form:M}=x(N,Z,_),[U,I]=(0,h.useState)(!1),R=(0,h.useMemo)(()=>(null==Z?void 0:Z.date)?new Date(Z.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}):"",[Z]);(0,h.useEffect)(()=>{if((null==Z?void 0:Z.date)&&R){let e=new Date(Z.date),t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i="".concat(t,"-").concat(n,"-").concat(r);M.setValues({date:i,time:R,message:""})}},[Z,R]);let J=M.onSubmit(async e=>{I(!0);try{let t=new Date("".concat(e.date,"T").concat(e.time)).toISOString().slice(11,16);(await (0,j.Nz)(S,{...e,time:t})).status&&(0,D.t6)({message:"Your property requests event has been resheduled."})}catch(e){console.error("Submission error:",e)}finally{A?g.push("/calendar-events"):g.push("/")}});T.Z,(0,h.useEffect)(()=>{A&&(Z&&null===Z.status&&"pending"!==Z.status?(0,D.t6)({title:"Error",message:"Property request event not found.",type:"error"}):"re-schedule"===Z.status&&(g.push("/calendar-events"),(0,D.t6)({title:"Information",message:"The property request event has already been rescheduled.",type:"success"}))),console.info(Z,A)},[Z,g,A]);let $=(0,h.useRef)(null),L=(0,r.jsx)(i.ActionIcon,{variant:"subtle",color:"gray",onClick:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.showPicker()},children:(0,r.jsx)(C.Z,{size:16,stroke:1.5})});function z(e){return new Date("1970-01-01T".concat(e)).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}let O=(null==N?void 0:N.start_time)?z(N.start_time):"00:00",B=(null==N?void 0:N.end_time)?z(N.end_time):"00:00",F=((null==N?void 0:N.days_in_week)?JSON.parse(N.days_in_week):[]).map(e=>e.trim().slice(0,3)).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("/");return(0,r.jsx)("section",{className:"main_section",children:(0,r.jsx)(o.X,{className:"content_box",shadow:"md",radius:"md",children:q?(0,r.jsx)(a.Center,{children:(0,r.jsx)(s.a,{size:36})}):Z.id&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Title,{ta:"center",px:"xl",children:"Reschedule Event"}),(0,r.jsxs)(l.Text,{size:"xs",mt:"md",children:["Landlord/Agent is only available at following time slot: ",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Days:"})," ",F," ",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Time:"})," ",O," - ",B," ",(0,r.jsx)("br",{}),"Please select the meeting time accordingly."]}),(0,r.jsx)(c.o,{label:"Date",type:"date",mt:"lg",variant:"filled",withAsterisk:!0,...M.getInputProps("date")}),(0,r.jsx)(P.M,{label:"Time",type:"time",mt:"lg",variant:"filled",step:"0",withSeconds:!1,withAsterisk:!0,...M.getInputProps("time"),ref:$,rightSection:L}),(0,r.jsx)(d.g,{label:"Message",placeholder:"Enter message here",mt:"lg",autosize:!0,minRows:5,variant:"filled",...M.getInputProps("message")}),(0,r.jsx)(p.Box,{mt:"sm",children:(0,r.jsx)(v.default,{loading:U,onClick:()=>J(),children:"Submit"})})]})})})}},58760:function(e,t,n){"use strict";n.r(t);var r=n(57437),i=n(17031),o=n(60380),a=n(44347);n(2265),t.default=function(e){let{children:t,iconProps:n,iconContainerBoxProps:s,onClick:u,...l}=e;return(0,r.jsxs)(i.Button,{onClick:u,className:"btn ".concat(null==l?void 0:l.className),...l,children:[t," ",(0,r.jsx)(o.Box,{className:"icon-container",...s,children:(0,r.jsx)(a.Z,{...n,stroke:1.5})})]})}},40525:function(e,t,n){"use strict";n.d(t,{CG:function(){return o},TL:function(){return i}});var r=n(68575);let i=r.I0.withTypes(),o=r.v9.withTypes();r.oR.withTypes()},28700:function(e,t,n){"use strict";n.d(t,{HM:function(){return s},Tj:function(){return o},_u:function(){return a},iU:function(){return u},jM:function(){return i}});let r=(0,n(20301).oM)({initialState:{token:void 0,userDetail:void 0,propertySearchData:void 0,isPropertySearch:!1,isShowMap:0},name:"user",reducers:{updateToken(e,t){var n;e.token=t.payload.token,e.userDetail=null===(n=t.payload)||void 0===n?void 0:n.user},updateUserInformation(e,t){e.userDetail=t.payload},updatePropertyInformation(e,t){e.propertySearchData=t.payload},updatePropertySearch(e,t){e.isPropertySearch=t.payload},updateIsShowMap(e,t){e.isShowMap=t.payload}}}),{updateToken:i,updateUserInformation:o,updatePropertyInformation:a,updatePropertySearch:s,updateIsShowMap:u}=r.actions;t.ZP=r.reducer},41607:function(e,t,n){"use strict";n.d(t,{h:function(){return d}});var r=n(99090),i=n(20301),o=n(9628),a=n(59688),s=n(28700);let u=(0,a.UY)({userReducer:s.ZP}),l={key:"PocketProperty",storage:r.Z},c=(e,t)=>{let n=e;if("LOGOUT"===t.type&&e){for(let[e,t]of Object.entries(n))"baseUrlReducer"===e?n[e]=t:n[e]=void 0;e=n}return u(e,t)},d=(()=>{let e=(0,o.OJ)(l,c);return(0,i.xC)({reducer:e})})();(0,o.p5)(d)},28107:function(e,t,n){"use strict";function r(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function i(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2")}function o(e){if(e){let[t="00",n="00",r="00"]=e.split(":");return[t.padStart(2,"0"),n.padStart(2,"0")].join(":")}}n.d(t,{Hp:function(){return i},Vu:function(){return o},fm:function(){return r}})},89628:function(e,t,n){"use strict";n.d(t,{Ff:function(){return o},h5:function(){return i}});var r=n(37484);t.ZP=e=>{let t=i()+"/assets/icon/";return"".concat(t).concat(e,".png")};let i=()=>r.Z?"https://staging.pocketproperty.app":window?window.location.origin:"",o=()=>r.Z?"pocket-property-staging":"pocket-property"},37484:function(e,t){"use strict";t.Z=!1},76772:function(e,t,n){"use strict";n.d(t,{t6:function(){return s},vU:function(){return u}});var r=n(57437),i=n(72019),o=n(16393),a=n(91443);let s=e=>{let{message:t,title:n,onClose:s,onOpen:u,type:l="success",color:c,icon:d,autoClose:p=5e3,id:f}=e;return"success"===l?i.notifications.show({id:f,withCloseButton:!0,onClose:s,onOpen:u,autoClose:p,title:null!=n?n:"Success",message:t,icon:null!=d?d:(0,r.jsx)(o.Z,{size:"1rem"}),className:"my-notification-class",color:null!=c?c:"teal"}):"error"===l?i.notifications.show({id:null!=f?f:"error-notification",withCloseButton:!0,onClose:s,onOpen:u,autoClose:p,title:null!=n?n:"Error",message:t,color:null!=c?c:"red",icon:null!=d?d:(0,r.jsx)(a.Z,{}),className:"my-notification-class"}):i.notifications.show({id:null!=f?f:"loading-notification",withCloseButton:!0,onClose:s,onOpen:u,title:null!=n?n:"Loading...",message:t,color:c,icon:null!=d?d:(0,r.jsx)(a.Z,{}),className:"my-notification-class",loading:!0})},u=()=>{i.notifications.clean()}},651:function(){}},function(e){e.O(0,[2032,3939,9145,384,7031,9401,8575,9414,2971,2117,1744],function(){return e(e.s=51206)}),_N_E=e.O()}]);