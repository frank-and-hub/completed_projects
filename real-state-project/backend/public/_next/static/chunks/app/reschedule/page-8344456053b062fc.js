(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[728],{51206:function(e,t,r){Promise.resolve().then(r.bind(r,76863))},88149:function(e,t,r){"use strict";r.d(t,{AK:function(){return a},Bq:function(){return d},IP:function(){return o},Qj:function(){return m},Ur:function(){return l},af:function(){return s},bm:function(){return u},sw:function(){return h},u:function(){return f},v2:function(){return i},v9:function(){return c},vz:function(){return p}});var n=r(81296);let i=e=>(0,n.J$)("property-details/".concat(e)),o=e=>{let{id:t}=e;return(0,n.J$)("internal-property-details/".concat(t))},a=e=>{let{id:t}=e;return(0,n.J$)("calendar-details/".concat(t))},s=e=>(0,n.g_)("set-message-schedule-time",e),u=e=>(0,n.g_)("sent-client-mail",e),l=e=>(0,n.g_)("advanced-filter",e),c=e=>{let{page:t=1,search:r}=e;return(0,n.J$)("countries",{params:{page:t,search:r}})},d=e=>{let{countryId:t,page:r,search:i}=e;return(0,n.J$)("states/".concat(t),{params:{page:r,search:i}})},p=e=>{let{provinceId:t,page:r,search:i}=e;return(0,n.J$)("cities/".concat(t),{params:{page:r,search:i}})},m=e=>{let{page:t,search:r,cityId:i}=e;return(0,n.J$)("suburbs/".concat(i),{params:{page:t,search:r}})},f=()=>(0,n.J$)("columns"),h=()=>(0,n.vw)("top-city-rent-count").then(e=>{let t={};return(null==e?void 0:e.length)&&(null==e||e.map(e=>{t={...t,[v(null==e?void 0:e.town)]:null==e?void 0:e.total}})),t}),v=e=>e?e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""):""},68431:function(e,t,r){"use strict";r.d(t,{A$:function(){return s},HI:function(){return o},Nz:function(){return l},ig:function(){return u},rc:function(){return a},tf:function(){return i}});var n=r(81296);let i=async e=>(0,n.J$)("property-request-all",{params:e}),o=async e=>(0,n.vw)("property-request-data/".concat(null==e?void 0:e.id),{params:e}),a=e=>(0,n.vw)("invite/accept/".concat(e,"/").concat(e)),s=e=>(0,n.g_)("invite/decline/".concat(e,"/").concat(e)),u=e=>(0,n.g_)("property-request/report/status",e),l=(e,t)=>(0,n.g_)("invite/reschedule/".concat(e,"/").concat(e),t)},81296:function(e,t,r){"use strict";r.d(t,{vw:function(){return u},J$:function(){return l},g_:function(){return c},tn:function(){return d}});var n=r(83464),i=r(41607),o=r(76772);let a=async e=>{if(n.Z.isCancel(e))throw console.warn("Request canceled:",e.message),e;if(e.response){var t,r,a;(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===401?((0,o.t6)({title:"Session Expired!",message:"Your login session has expired. Please login again to continue.",type:"error"}),i.h.dispatch({type:"LOGOUT"})):404===e.response.status?(0,o.t6)({title:"Error",message:"Resource not found.",type:"error"}):(0,o.t6)({title:"Error",message:null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message,type:"error"})}else e.request?(0,o.t6)({title:"Server Error!",message:"No response received from the server. Please try again later.",type:"error"}):(0,o.t6)({title:"Error",message:"An error occurred while setting up the request.",type:"error"});throw e},s=n.Z.create({timeout:3e4,timeoutErrorMessage:"Network request timed out. The app could not connect to the server. Please make sure you are connected with a good network.",headers:{"Content-Type":"application/json",Accept:"application/json","ngrok-skip-browser-warning":"hello"}});s.interceptors.request.use(e=>{try{var t;let r=null===(t=i.h.getState())||void 0===t?void 0:t.userReducer,n=null==r?void 0:r.token;return e.baseURL="http://127.0.0.1:8000/api/v1/",e.headers&&!e.headers.Authorization&&(e.headers.Authorization="Bearer ".concat(n)),e}catch(e){console.error("error",e)}},e=>{throw e}),s.interceptors.response.use(e=>{if([200,201].includes(e.status))return e;throw Error},e=>a(e));let u=(e,t)=>s.get(e,t).then(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data}),l=(e,t)=>s.get(e,t).then(e=>null==e?void 0:e.data),c=(e,t,r)=>s.post(e,t,r).then(e=>null==e?void 0:e.data),d=(e,t,r)=>s.post(e,t,{headers:{"Content-Type":"multipart/form-data"},...r}).then(e=>null==e?void 0:e.data)},76863:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var n=r(57437),i=r(5659),o=r(60113),a=r(99655),s=r(2874),u=r(82904),l=r(6023),c=r(50028),d=r(50208),p=r(60380),m=r(71632),f=r(99376),h=r(2265);r(651);var v=r(58760),y=r(28107),g=r(44275),w=r(15867),_=r(13993),S=r(95775),x=r(34422),b=(e,t,r)=>{let n={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},i=e=>{let[t,r]=e.split(":").map(Number),n=new Date;return n.setUTCHours(t),n.setUTCMinutes(r),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n},o=[];try{o=Array.isArray(e.days_in_week)?e.days_in_week:JSON.parse(e.days_in_week||"[]")}catch(t){console.error("Invalid days_in_week format:",e.days_in_week)}return{form:(0,g.c)({initialValues:{date:"",time:"",message:"",property_id:r},validate:(0,w.X)((e=>{let{allowedWeekdays:r=["Monday"],timeStart:o="00:00",timeEnd:a="23:00",eventDetails:s=t}=e,u=x.hT().typeError("Invalid date format").required("Date is required").test("min-date-from-event",function(e){if(!e)return!1;console.info(s);let t=(null==s?void 0:s.date)?new Date(s.date):null,r=null==t?void 0:t.toLocaleDateString(),n=new Date(e);return!t||!(n<t)||this.createError({message:"Date must be on or after ".concat(r)})}).test("max-date-if-timeslot",function(e){if(!e)return!1;if(null==s?void 0:s.time_limit){let t=new Date(s.time_limit);if(e>t)return this.createError({message:"Date must be on or before ".concat(t.toLocaleDateString())})}return!0}).test("is-valid-day","Date must be one of: ".concat(r.join(", ")),e=>{if(!e)return!1;let t=(0,_.w)(e);return r.map(e=>n[e]).includes(t)});return x.Ry().shape({date:u,time:x.Z_().required("Time is required").test("is-valid-time","Time must be between ".concat(o," and ").concat(a),e=>{if(!e)return!1;try{let t=i(e);return(0,S._)(t,{start:i(o),end:i(a)})}catch(e){return!1}}),message:x.Z_().nullable().notRequired().transform(e=>""===e?null:e)})})({allowedWeekdays:o,timeStart:(0,y.Vu)(e.start_time),timeEnd:(0,y.Vu)(e.end_time),eventDetails:t}))})}},j=r(88149),k=r(68431),T=r(4929),C=r(41695),D=r(76772),E=r(93388),P=r(40525),q=function(){var e,t,r,y;let g=(0,f.useRouter)(),w=(0,f.useSearchParams)(),_=w.get("property"),S=w.get("id"),{data:x,isLoading:q}=(0,m.useQuery)({queryKey:["thank_you",_],queryFn:()=>(0,j.AK)({id:S}),enabled:!!(S&&_)}),N=null!==(t=null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.timeSlot)&&void 0!==t?t:{},A=null!==(r=null==x?void 0:x.data)&&void 0!==r?r:{},M=null!==(y=(0,P.CG)(e=>{var t;return null==e?void 0:null===(t=e.userReducer)||void 0===t?void 0:t.token}))&&void 0!==y?y:null,{form:U}=b(N,A,_),[I,R]=(0,h.useState)(!1),Z=(0,h.useMemo)(()=>(null==A?void 0:A.date)?new Date(A.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}):"",[A]);(0,h.useEffect)(()=>{if((null==A?void 0:A.date)&&Z){let e=new Date(A.date),t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),i="".concat(t,"-").concat(r,"-").concat(n);U.setValues({date:i,time:Z,message:""})}},[A,Z]);let J=U.onSubmit(async e=>{R(!0);try{let t=new Date("".concat(e.date,"T").concat(e.time)).toISOString().slice(11,16);(await (0,k.Nz)(S,{...e,time:t})).status&&(0,D.t6)({message:"Your property requests event has been resheduled."})}catch(e){console.error("Submission error:",e)}finally{M?g.push("/calendar-events"):g.push("/")}});T.Z,(0,h.useEffect)(()=>{M&&(A&&null===A.status&&"pending"!==A.status?(0,D.t6)({title:"Error",message:"Property request event not found.",type:"error"}):"re-schedule"===A.status&&(g.push("/calendar-events"),(0,D.t6)({title:"Information",message:"The property request event has already been rescheduled.",type:"success"}))),console.info(A,M)},[A,g,M]);let $=(0,h.useRef)(null),L=(0,n.jsx)(i.ActionIcon,{variant:"subtle",color:"gray",onClick:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.showPicker()},children:(0,n.jsx)(C.Z,{size:16,stroke:1.5})});function z(e){return new Date("1970-01-01T".concat(e)).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}let O=(null==N?void 0:N.start_time)?z(N.start_time):"00:00",B=(null==N?void 0:N.end_time)?z(N.end_time):"00:00",V=((null==N?void 0:N.days_in_week)?JSON.parse(N.days_in_week):[]).map(e=>e.trim().slice(0,3)).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("/");return(0,n.jsx)("section",{className:"main_section",children:(0,n.jsx)(o.X,{className:"content_box",shadow:"md",radius:"md",children:q?(0,n.jsx)(a.Center,{children:(0,n.jsx)(s.a,{size:36})}):A.id&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Title,{ta:"center",px:"xl",children:"Reschedule Event"}),(0,n.jsxs)(l.Text,{size:"xs",mt:"md",children:["Landlord/Agent is only available at following time slot: ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Days:"})," ",V," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Time:"})," ",O," - ",B," ",(0,n.jsx)("br",{}),"Please select the meeting time accordingly."]}),(0,n.jsx)(c.o,{label:"Date",type:"date",mt:"lg",variant:"filled",withAsterisk:!0,...U.getInputProps("date")}),(0,n.jsx)(E.M,{label:"Time",type:"time",mt:"lg",variant:"filled",step:"0",withSeconds:!1,withAsterisk:!0,...U.getInputProps("time"),ref:$,rightSection:L}),(0,n.jsx)(d.g,{label:"Message",placeholder:"Enter message here",mt:"lg",autosize:!0,minRows:5,variant:"filled",...U.getInputProps("message")}),(0,n.jsx)(p.Box,{mt:"sm",children:(0,n.jsx)(v.default,{loading:I,onClick:()=>J(),children:"Submit"})})]})})})}},58760:function(e,t,r){"use strict";r.r(t);var n=r(57437),i=r(17031),o=r(60380),a=r(44347);r(2265),t.default=function(e){let{children:t,iconProps:r,iconContainerBoxProps:s,onClick:u,...l}=e;return(0,n.jsxs)(i.Button,{onClick:u,className:"btn ".concat(null==l?void 0:l.className),...l,children:[t," ",(0,n.jsx)(o.Box,{className:"icon-container",...s,children:(0,n.jsx)(a.Z,{...r,stroke:1.5})})]})}},40525:function(e,t,r){"use strict";r.d(t,{CG:function(){return o},TL:function(){return i}});var n=r(68575);let i=n.I0.withTypes(),o=n.v9.withTypes();n.oR.withTypes()},28700:function(e,t,r){"use strict";r.d(t,{HM:function(){return s},Tj:function(){return o},_u:function(){return a},iU:function(){return u},jM:function(){return i}});let n=(0,r(20301).oM)({initialState:{token:void 0,userDetail:void 0,propertySearchData:void 0,isPropertySearch:!1,isShowMap:0},name:"user",reducers:{updateToken(e,t){var r;e.token=t.payload.token,e.userDetail=null===(r=t.payload)||void 0===r?void 0:r.user},updateUserInformation(e,t){e.userDetail=t.payload},updatePropertyInformation(e,t){e.propertySearchData=t.payload},updatePropertySearch(e,t){e.isPropertySearch=t.payload},updateIsShowMap(e,t){e.isShowMap=t.payload}}}),{updateToken:i,updateUserInformation:o,updatePropertyInformation:a,updatePropertySearch:s,updateIsShowMap:u}=n.actions;t.ZP=n.reducer},41607:function(e,t,r){"use strict";r.d(t,{h:function(){return d}});var n=r(99090),i=r(20301),o=r(9628),a=r(59688),s=r(28700);let u=(0,a.UY)({userReducer:s.ZP}),l={key:"PocketProperty",storage:n.Z},c=(e,t)=>{let r=e;if("LOGOUT"===t.type&&e){for(let[e,t]of Object.entries(r))"baseUrlReducer"===e?r[e]=t:r[e]=void 0;e=r}return u(e,t)},d=(()=>{let e=(0,o.OJ)(l,c);return(0,i.xC)({reducer:e})})();(0,o.p5)(d)},28107:function(e,t,r){"use strict";function n(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function i(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2")}function o(e){if(e){let[t="00",r="00",n="00"]=e.split(":");return[t.padStart(2,"0"),r.padStart(2,"0")].join(":")}}r.d(t,{Hp:function(){return i},Vu:function(){return o},fm:function(){return n}})},76772:function(e,t,r){"use strict";r.d(t,{t6:function(){return s},vU:function(){return u}});var n=r(57437),i=r(72019),o=r(16393),a=r(91443);let s=e=>{let{message:t,title:r,onClose:s,onOpen:u,type:l="success",color:c,icon:d,autoClose:p=5e3,id:m}=e;return"success"===l?i.notifications.show({id:m,withCloseButton:!0,onClose:s,onOpen:u,autoClose:p,title:null!=r?r:"Success",message:t,icon:null!=d?d:(0,n.jsx)(o.Z,{size:"1rem"}),className:"my-notification-class",color:null!=c?c:"teal"}):"error"===l?i.notifications.show({id:null!=m?m:"error-notification",withCloseButton:!0,onClose:s,onOpen:u,autoClose:p,title:null!=r?r:"Error",message:t,color:null!=c?c:"red",icon:null!=d?d:(0,n.jsx)(a.Z,{}),className:"my-notification-class"}):i.notifications.show({id:null!=m?m:"loading-notification",withCloseButton:!0,onClose:s,onOpen:u,title:null!=r?r:"Loading...",message:t,color:c,icon:null!=d?d:(0,n.jsx)(a.Z,{}),className:"my-notification-class",loading:!0})},u=()=>{i.notifications.clean()}},651:function(){}},function(e){e.O(0,[2032,3939,9145,384,7031,9401,8575,9414,2971,2117,1744],function(){return e(e.s=51206)}),_N_E=e.O()}]);