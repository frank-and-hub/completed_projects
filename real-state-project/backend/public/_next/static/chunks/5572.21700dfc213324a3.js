(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5572],{41162:function(e,t,r){"use strict";let n={},a={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),n[e]=t,a[t]=e}},2246:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=void 0;var n=r(38283),a=r(55282),o=r(63020),i=function(){function e(){this.crc32=new o.Crc32}return e.prototype.update=function(e){(0,a.isEmptyData)(e)||this.crc32.update((0,a.convertToBuffer)(e))},e.prototype.digest=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){return[2,(0,a.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new o.Crc32},e}();t.AwsCrc32=i},63020:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=t.Crc32=t.crc32=void 0;var n=r(38283),a=r(55282);t.crc32=function(e){return new o().update(e).digest()};var o=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var a=n.__values(e),o=a.next();!o.done;o=a.next()){var s=o.value;this.checksum=this.checksum>>>8^i[(this.checksum^s)&255]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=o;var i=(0,a.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),s=r(2246);Object.defineProperty(t,"AwsCrc32",{enumerable:!0,get:function(){return s.AwsCrc32}})},38283:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return o},__asyncDelegator:function(){return w},__asyncGenerator:function(){return b},__asyncValues:function(){return k},__await:function(){return v},__awaiter:function(){return c},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return E},__createBinding:function(){return p},__decorate:function(){return s},__exportStar:function(){return h},__extends:function(){return a},__generator:function(){return d},__importDefault:function(){return _},__importStar:function(){return x},__makeTemplateObject:function(){return S},__metadata:function(){return u},__param:function(){return l},__read:function(){return m},__rest:function(){return i},__spread:function(){return g},__spreadArrays:function(){return y},__values:function(){return f}});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function s(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function l(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})}function d(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function h(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)n[a]=o[i];return n}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),o=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){a[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{var r;(r=a[e](t)).value instanceof v?Promise.resolve(r.value.v).then(l,u):c(o[0][2],r)}catch(e){c(o[0][3],e)}}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:v(e[n](t)),done:"return"===n}:a?a(t):t}:a}}function k(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,a){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,a,(t=e[r](t)).done,t.value)})}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function E(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},17257:function(e,t,r){"use strict";var n=r(82957).lW;Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var a=r(18330),o=void 0!==n&&n.from?function(e){return n.from(e,"utf8")}:a.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?o(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},55282:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var n=r(17257);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return n.convertToBuffer}});var a=r(18874);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return a.isEmptyData}});var o=r(88394);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var i=r(87470);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return i.uint32ArrayFrom}})},18874:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},88394:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},87470:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}},80800:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var n=r(5853),a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=function(){function e(){this.state=Int32Array.from(o),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw Error("Attempted to update an already finished hash.");var t=0,r=e.byteLength;if(this.bytesHashed+=r,8*this.bytesHashed>9007199254740991)throw Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[t++],r--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(t.setUint8(this.bufferLength++,128),r%64>=56){for(var n=this.bufferLength;n<64;n++)t.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<56;n++)t.setUint8(n,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(32),n=0;n<8;n++)a[4*n]=this.state[n]>>>24&255,a[4*n+1]=this.state[n]>>>16&255,a[4*n+2]=this.state[n]>>>8&255,a[4*n+3]=this.state[n]>>>0&255;return a},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,r=t[0],n=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=0;d<64;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var p=this.temp[d-2],h=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,f=((p=this.temp[d-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[d]=(h+this.temp[d-7]|0)+(f+this.temp[d-16]|0)}var m=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&l^~s&u)|0)+(c+(a[d]+this.temp[d]|0)|0)|0,g=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&n^r&o^n&o)|0;c=u,u=l,l=s,s=i+m|0,i=o,o=n,n=r,r=m+g|0}t[0]+=r,t[1]+=n,t[2]+=o,t[3]+=i,t[4]+=s,t[5]+=l,t[6]+=u,t[7]+=c},e}(),s=r(30206),l=function(){function e(e){this.secret=e,this.hash=new i,this.reset()}return e.prototype.update=function(e){if(!(0,s.rA)(e)&&!this.error)try{this.hash.update((0,s.i$)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,n.mG)(this,void 0,void 0,function(){return(0,n.Jh)(this,function(e){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new i,this.secret){this.outer=new i;var e=function(e){var t=(0,s.i$)(e);if(t.byteLength>64){var r=new i;r.update(t),t=r.digest()}var n=new Uint8Array(64);return n.set(t),n}(this.secret),t=new Uint8Array(64);t.set(e);for(var r=0;r<64;r++)e[r]^=54,t[r]^=92;this.hash.update(e),this.outer.update(t);for(var r=0;r<e.byteLength;r++)e[r]=0}},e}()},30206:function(e,t,r){"use strict";r.d(t,{i$:function(){return o},rA:function(){return i},LT:function(){return s},r3:function(){return l}});var n=r(82957).lW,a=void 0!==n&&n.from?function(e){return n.from(e,"utf8")}:e=>new TextEncoder().encode(e);function o(e){return e instanceof Uint8Array?e:"string"==typeof e?a(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function i(e){return"string"==typeof e?0===e.length:0===e.byteLength}function s(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}function l(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}},18330:function(e,t,r){"use strict";r.r(t),r.d(t,{fromUtf8:function(){return o},toUtf8:function(){return i}});let n=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let n=e.charCodeAt(r);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192,63&n|128);else if(r+1<e.length&&(64512&n)==55296&&(64512&e.charCodeAt(r+1))==56320){let a=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r));t.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}else t.push(n>>12|224,n>>6&63|128,63&n|128)}return Uint8Array.from(t)},a=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r];n<128?t+=String.fromCharCode(n):192<=n&&n<224?t+=String.fromCharCode((31&n)<<6|63&e[++r]):240<=n&&n<365?t+=decodeURIComponent("%"+[n,e[++r],e[++r],e[++r]].map(e=>e.toString(16)).join("%")):t+=String.fromCharCode((15&n)<<12|(63&e[++r])<<6|63&e[++r])}return t},o=e=>"function"==typeof TextEncoder?new TextEncoder().encode(e):n(e),i=e=>"function"==typeof TextDecoder?new TextDecoder("utf-8").decode(e):a(e)},39532:function(e,t,r){(function(){"use strict";function e(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var t,n,a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},o=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof r.g&&r.g];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var r=o;e=e.split(".");for(var n=0;n<e.length-1;n++){var i=e[n];if(!(i in r))break e;r=r[i]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&a(r,e,{configurable:!0,writable:!0,value:t})}}function s(t){var r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:e(t)}}function l(e){if(!(e instanceof Array)){e=s(e);for(var t,r=[];!(t=e.next()).done;)r.push(t.value);e=r}return e}i("Symbol",function(e){function t(e,t){this.g=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",n=0;return function e(a){if(this instanceof e)throw TypeError("Symbol is not a constructor");return new t(r+(a||"")+"_"+n++,a)}}),i("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<r.length;n++){var i=o[r[n]];"function"==typeof i&&"function"!=typeof i.prototype[t]&&a(i.prototype,t,{configurable:!0,writable:!0,value:function(){var t;return(t={next:t=e(this)})[Symbol.iterator]=function(){return this},t}})}return t});var u,c,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{e:{var p={};try{p.__proto__={a:!0},A=p.a;break e}catch(e){}A=!1}c=A?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw TypeError(e+" is not extensible");return e}:null}var h=c;function f(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,h)h(e,t);else for(var r in t)if("prototype"!=r){if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}else e[r]=t[r]}e.na=t.prototype}function m(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function g(e){if(e.l)throw TypeError("Generator is already running");e.l=!0}function y(e,t){e.j={da:t,ea:!0},e.g=e.o||e.u}function v(e,t,r){return e.g=r,{value:t}}function b(e){this.g=new m,this.h=e}function w(e,t,r,n){try{var a=t.call(e.g.i,r);if(!(a instanceof Object))throw TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.l=!1,a;var o=a.value}catch(t){return e.g.i=null,y(e.g,t),k(e)}return e.g.i=null,n.call(e.g,o),k(e)}function k(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,y(e.g,t)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.ea)throw t.da;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function S(e){this.next=function(t){return g(e.g),e.g.i?t=w(e,e.g.i.next,t,e.g.s):(e.g.s(t),t=k(e)),t},this.throw=function(t){return g(e.g),e.g.i?t=w(e,e.g.i.throw,t,e.g.s):(y(e.g,t),t=k(e)),t},this.return=function(t){var r;return g(e.g),(r=e.g.i)?w(e,"return"in r?r.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),k(e))},this[Symbol.iterator]=function(){return this}}function x(e){return function(e){function t(t){return e.next(t)}function r(t){return e.throw(t)}return new Promise(function(n,a){!function e(o){o.done?n(o.value):Promise.resolve(o.value).then(t,r).then(e,a)}(e.next())})}(new S(new b(e)))}m.prototype.s=function(e){this.h=e},m.prototype.return=function(e){this.j={return:e},this.g=this.u},i("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.g=null}function n(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;r.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var a=o.setTimeout;r.prototype.i=function(e){a(e,0)},r.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.j(e)}}}this.g=null},r.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.D),reject:e(this.l)}},t.prototype.D=function(e){if(e===this)this.l(TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{switch(typeof e){case"object":var r=null!=e;break;case"function":r=!0;break;default:r=!1}r?this.A(e):this.o(e)}},t.prototype.A=function(e){var t=void 0;try{t=e.then}catch(e){this.l(e);return}"function"==typeof t?this.I(t,e):this.o(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.o=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.B()},t.prototype.G=function(){var e=this;a(function(){if(e.C()){var t=o.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.C=function(){if(this.s)return!1;var e=o.CustomEvent,t=o.Event,r=o.dispatchEvent;return void 0===r||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,r(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)i.h(this.g[e]);this.g=null}};var i=new r;return t.prototype.H=function(e){var t=this.j();e.M(t.resolve,t.reject)},t.prototype.I=function(e,t){var r=this.j();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},t.prototype.then=function(e,r){function n(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(e){o(e)}}:t}var a,o,i=new t(function(e,t){a=e,o=t});return this.M(n(e,a),n(r,o)),i},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.M=function(e,t){function r(){switch(n.h){case 1:e(n.i);break;case 2:t(n.i);break;default:throw Error("Unexpected state: "+n.h)}}var n=this;null==this.g?i.h(r):this.g.push(r),this.s=!0},t.resolve=n,t.reject=function(e){return new t(function(t,r){r(e)})},t.race=function(e){return new t(function(t,r){for(var a=s(e),o=a.next();!o.done;o=a.next())n(o.value).M(t,r)})},t.all=function(e){var r=s(e),a=r.next();return a.done?n([]):new t(function(e,t){var o=[],i=0;do o.push(void 0),i++,n(a.value).M(function(t){return function(r){o[t]=r,0==--i&&e(o)}}(o.length-1),t),a=r.next();while(!a.done)})},t});var _="function"==typeof Object.assign?Object.assign:function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};i("Object.assign",function(e){return e||_}),i("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),i("Array.prototype.includes",function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;for(0>(t=t||0)&&(t=Math.max(t+n,0));t<n;t++){var a=r[t];if(a===e||Object.is(a,e))return!0}return!1}}),i("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw TypeError("First argument to String.prototype.includes must not be a regular expression");return -1!==this.indexOf(e,t||0)}}),i("Array.prototype.keys",function(e){return e||function(){var e,t,r,n,a;return e=this,t=function(e){return e},e instanceof String&&(e+=""),r=0,n=!1,(a={next:function(){if(!n&&r<e.length){var a=r++;return{value:t(a,e[a]),done:!1}}return n=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return a},a}});var I=this||self;function E(e,t){e=e.split(".");var r,n=I;for((e[0]in n)||void 0===n.execScript||n.execScript("var "+e[0]);e.length&&(r=e.shift());)e.length||void 0===t?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=t}function T(){throw Error("Invalid UTF8")}function N(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var A,C,M,R="undefined"!=typeof TextDecoder,O="undefined"!=typeof TextEncoder,F={},D=null;function P(e){var t;void 0===t&&(t=0),L(),t=F[t];for(var r=Array(Math.floor(e.length/3)),n=t[64]||"",a=0,o=0;a<e.length-2;a+=3){var i=e[a],s=e[a+1],l=e[a+2],u=t[i>>2];i=t[(3&i)<<4|s>>4],s=t[(15&s)<<2|l>>6],l=t[63&l],r[o++]=u+i+s+l}switch(u=0,l=n,e.length-a){case 2:l=t[(15&(u=e[a+1]))<<2]||n;case 1:e=e[a],r[o]=t[e>>2]+t[(3&e)<<4|u>>4]+l+n}return r.join("")}function $(e){var t=e.length,r=3*t/4;r%3?r=Math.floor(r):-1!="=.".indexOf(e[t-1])&&(r=-1!="=.".indexOf(e[t-2])?r-2:r-1);var n=new Uint8Array(r),a=0;return function(e,t){function r(t){for(;n<e.length;){var r=e.charAt(n++),a=D[r];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(r))throw Error("Unknown base64 encoding at char: "+r)}return t}L();for(var n=0;;){var a=r(-1),o=r(0),i=r(64),s=r(64);if(64===s&&-1===a)break;t(a<<2|o>>4),64!=i&&(t(o<<4&240|i>>2),64!=s&&t(i<<6&192|s))}}(e,function(e){n[a++]=e}),a!==r?n.subarray(0,a):n}function L(){if(!D){D={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=e.concat(t[r].split(""));F[r]=n;for(var a=0;a<n.length;a++){var o=n[a];void 0===D[o]&&(D[o]=a)}}}}var B="function"==typeof Uint8Array;function z(e){return B&&null!=e&&e instanceof Uint8Array}function W(e){if(this.L=e,null!==e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}var U="function"==typeof Uint8Array.prototype.slice,j=0,V=0;function H(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function G(){return Error("Failed to read varint, encoding is invalid.")}function q(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.v=t,e&&K(this,e)}function K(e,r){e.h=function(e,r){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer||e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return $(e);if(e.constructor===W)return!r&&(r=e.L)&&r.constructor===Uint8Array?r:(r=null==(r=e.L)||z(r)?r:"string"==typeof r?$(r):null,(e=e.L=r)?new Uint8Array(e):t||(t=new Uint8Array(0)));if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(r,e.v),e.j=0,e.i=e.h.length,e.g=e.j}function Y(e){if(e.g>e.i)throw Error("Tried to read past the end of the data "+e.g+" > "+e.i)}function X(e){var t=e.h,r=t[e.g],n=127&r;if(128>r)return e.g+=1,Y(e),n;if(n|=(127&(r=t[e.g+1]))<<7,128>r)return e.g+=2,Y(e),n;if(n|=(127&(r=t[e.g+2]))<<14,128>r)return e.g+=3,Y(e),n;if(n|=(127&(r=t[e.g+3]))<<21,128>r)return e.g+=4,Y(e),n;if(r=t[e.g+4],e.g+=5,n|=(15&r)<<28,128>r)return Y(e),n;if(128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++])throw G();return Y(e),n}q.prototype.reset=function(){this.g=this.j};var Q=[];function Z(){this.g=[]}function J(e,t){for(;127<t;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function ee(e){var t={},r=void 0!==t.W&&t.W;this.l={v:void 0!==t.v&&t.v},this.W=r,t=this.l,Q.length?(r=Q.pop(),t&&(r.v=t.v),e&&K(r,e),e=r):e=new q(e,t),this.g=e,this.j=this.g.g,this.h=this.i=-1}function et(e){var t=e.g;if(t.g==t.i)return!1;e.j=e.g.g;var r=X(e.g)>>>0;if(t=r>>>3,!(0<=(r&=7)&&5>=r))throw H(r,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.i=t,e.h=r,!0}Z.prototype.length=function(){return this.g.length},Z.prototype.end=function(){var e=this.g;return this.g=[],e},ee.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var er=[];function en(){this.i=[],this.h=0,this.g=new Z}function ea(e,t){0!==t.length&&(e.i.push(t),e.h+=t.length)}var eo="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ei(e,t){Object.isFrozen(e)||(eo?e[eo]|=t:void 0!==e.N?e.N|=t:Object.defineProperties(e,{N:{value:t,configurable:!0,writable:!0,enumerable:!1}}))}function es(e){var t;return null==(t=eo?e[eo]:e.N)?0:t}function el(e){return ei(e,1),e}function eu(e){return!!Array.isArray(e)&&!!(2&es(e))}function ec(e){if(!Array.isArray(e))throw Error("cannot mark non-array as immutable");ei(e,2)}function ed(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&e.constructor===Object}var ep=Object.freeze(el([]));function eh(e){if(eu(e.m))throw Error("Cannot mutate an immutable Message")}var ef="undefined"!=typeof Symbol&&void 0!==Symbol.hasInstance;function em(e){return{value:e,configurable:!1,writable:!1,enumerable:!1}}function eg(e,t,r){return -1===t?null:t>=e.i?e.g?e.g[t]:void 0:(void 0===r?0:r)&&e.g&&null!=(r=e.g[t])?r:e.m[t+e.h]}function ey(e,t,r,n){n=void 0!==n&&n,eh(e),t<e.i&&!n?e.m[t+e.h]=r:(e.g||(e.g=e.m[e.i+e.h]={}))[t]=r}function ev(e,t,r,n){r=void 0===r||r;var a=eg(e,t,n=void 0!==n&&n);return null==a&&(a=ep),eu(e.m)?r&&(ec(a),Object.freeze(a)):(a===ep||eu(a))&&ey(e,t,a=el(a.slice()),n),a}function eb(e,t,r){return null==(e=null==(e=eg(e,t))?e:+e)?void 0===r?0:r:e}function ew(e,t,r,n){e.j||(e.j={});var a=eu(e.m),o=e.j[r];if(!o){n=ev(e,r,!0,void 0!==n&&n),o=[],a=a||eu(n);for(var i=0;i<n.length;i++)o[i]=new t(n[i]),a&&ec(o[i].m);a&&(ec(o),Object.freeze(o)),e.j[r]=o}return o}function ek(e,t,r,n,a){var o=void 0!==o&&o;return eh(e),o=ew(e,r,t,o),r=n||new r,e=ev(e,t),void 0!=a?(o.splice(a,0,r),e.splice(a,0,r.m)):(o.push(r),e.push(r.m)),r}function eS(e,t){return null==(e=eg(e,t))?0:e}function ex(e,t){return null==(e=eg(e,t))?"":e}function e_(e){var t=eI;return function e(t,r){for(var n=t.slice(),a=0;a<n.length;a++)n[a]=function t(r,n){if(null!=r){if(Array.isArray(r))r=e(r,n);else if(ed(r)){var a,o={};for(a in r)o[a]=t(r[a],n);r=o}else r=n(r);return r}}(n[a],r);return Array.isArray(t)&&1&es(t)&&el(n),n}(e,t=void 0===t?eE:t)}function eI(e){return e&&"object"==typeof e&&e.toJSON?e.toJSON():Array.isArray(e=function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(e&&!Array.isArray(e)){if(z(e))return P(e);if(e instanceof W){var t=e.L;return t=null==t||"string"==typeof t?t:B&&t instanceof Uint8Array?P(t):null,(e.L=t)||""}}}return e}(e))?e_(e):e}function eE(e){return z(e)?new Uint8Array(e):e}function eT(e,t,r){e||(e=n),n=null;var a=this.constructor.h;e||(e=a?[a]:[]),this.h=(a?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=e;e:{if(e=(a=this.m.length)-1,a&&ed(a=this.m[e])){this.i=e-this.h,this.g=a;break e}void 0!==t&&-1<t?(this.i=Math.max(t,e+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(r)for(t=0;t<r.length;t++)if((e=r[t])<this.i)e+=this.h,(a=this.m[e])?Array.isArray(a)&&el(a):this.m[e]=ep;else{var o=(a=this.g||(this.g=this.m[this.i+this.h]={}))[e];o?Array.isArray(o)&&el(o):a[e]=ep}}function eN(){eT.apply(this,arguments)}if(eT.prototype.toJSON=function(){return e_(this.m)},eT.prototype.toString=function(){return this.m.toString()},f(eN,eT),ef){var eA={};Object.defineProperties(eN,(eA[Symbol.hasInstance]=em(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),eA))}function eC(e,t,r){if(r){var n,a={};for(n in r){var o=r[n],i=o.ha;i||(a.F=o.la||o.fa.P,o.aa?(a.U=eP(o.aa),i=function(e){return function(t,r,n){return e.F(t,r,n,e.U)}}(a)):o.ca?(a.T=e$(o.X.g,o.ca),i=function(e){return function(t,r,n){return e.F(t,r,n,e.T)}}(a)):i=a.F,o.ha=i),i(t,e,o.X),a={F:a.F,U:a.U,T:a.T}}}!function(e,t){if(t=t.ba){ea(e,e.g.end());for(var r=0;r<t.length;r++)ea(e,t[r])}}(t,e)}var eM=Symbol();function eR(e,t,r){return e[eM]||(e[eM]=function(e,n){return t(e,n,r)})}function eO(e){var t=e[eM];if(!t){var r=eY(e);t=function(e,t){return eX(e,t,r)},e[eM]=t}return t}function eF(e,t,r,n,a,o){e=e();var i=0;for(e.length&&"number"!=typeof e[0]&&(r(t,e[0]),i++);i<e.length;){r=e[i++];for(var s=i+1;s<e.length&&"number"!=typeof e[s];)s++;var l=e[i++];switch(s-=i){case 0:n(t,r,l);break;case 1:n(t,r,l,e[i++]);break;case 2:a(t,r,l,e[i++],e[i++]);break;case 3:s=e[i++];var u=e[i++],c=e[i++];Array.isArray(c)?a(t,r,l,s,u,c):o(t,r,l,s,u,c);break;case 4:o(t,r,l,e[i++],e[i++],e[i++],e[i++]);break;default:throw Error("unexpected number of binary field arguments: "+s)}}return t}var eD=Symbol();function eP(e){var t=e[eD];if(!t){var r=ej(e);t=function(e,t){return eZ(e,t,r)},e[eD]=t}return t}function e$(e,t){var r=e[eD];return r||(r=function(e,r){return eC(e,r,t)},e[eD]=r),r}var eL=Symbol();function eB(e,t){e.push(t)}function ez(e,t,r){e.push(t,r.P)}function eW(e,t,r,n,a){var o=eP(a),i=r.P;e.push(t,function(e,t,r){return i(e,t,r,n,o)})}function eU(e,t,r,n,a,o){var i=e$(n,o),s=r.P;e.push(t,function(e,t,r){return s(e,t,r,n,i)})}function ej(e){return e[eL]||eF(e,e[eL]=[],eB,ez,eW,eU)}var eV=Symbol();function eH(e,t){e[0]=t}function eG(e,t,r,n){var a=r.O;e[t]=n?function(e,t,r){return a(e,t,r,n)}:a}function eq(e,t,r,n,a,o){var i=r.O,s=eO(a);e[t]=function(e,t,r){return i(e,t,r,n,s,o)}}function eK(e,t,r,n,a,o,i){var s=r.O,l=eR(n,a,o);e[t]=function(e,t,r){return s(e,t,r,n,l,i)}}function eY(e){return e[eV]||eF(e,e[eV]={},eH,eG,eq,eK)}function eX(e,r,n){for(;et(r)&&4!=r.h;){var a=r.i,o=n[a];if(!o){var i=n[0];i&&(i=i[a])&&(o=n[a]=function(e){var t,r=(t=e.aa)?eO(t):(t=e.ka)?eR(e.X.g,t,e.ca):void 0,n=e.X,a=e.fa.O;return r?function(e,t){return a(e,t,n,r)}:function(e,t){return a(e,t,n)}}(i))}if((!o||!o(r,e,a))&&(o=r,a=e,i=o.j,function e(t){switch(t.h){case 0:if(0!=t.h)e(t);else e:{t=t.g;for(var r=t.g,n=r+10;r<n;)if(0==(128&t.h[r++])){t.g=r,Y(t);break e}throw G()}break;case 1:t=t.g,t.g+=8,Y(t);break;case 2:2!=t.h?e(t):(r=X(t.g)>>>0,t=t.g,t.g+=r,Y(t));break;case 5:t=t.g,t.g+=4,Y(t);break;case 3:for(r=t.i;;){if(!et(t))throw Error("Unmatched start-group tag: stream EOF");if(4==t.h){if(t.i!=r)throw Error("Unmatched end-group tag");break}e(t)}break;default:throw H(t.h,t.j)}}(o),!o.W)){var s=o.g.h;o=i===(o=o.g.g)?t||(t=new Uint8Array(0)):U?s.slice(i,o):new Uint8Array(s.subarray(i,o)),(i=a.ba)?i.push(o):a.ba=[o]}}return e}function eQ(e,t,r){if(er.length){var n=er.pop();e&&(K(n.g,e),n.i=-1,n.h=-1),e=n}else e=new ee(e);try{return eX(new t,e,eY(r))}finally{(t=e.g).h=null,t.j=0,t.i=0,t.g=0,t.v=!1,e.i=-1,e.h=-1,100>er.length&&er.push(e)}}function eZ(e,t,r){for(var n=r.length,a=1==n%2,o=a?1:0;o<n;o+=2)(0,r[o+1])(t,e,r[o]);eC(e,t,a?r[0]:void 0)}function eJ(e,t){var r=new en;eZ(e,r,ej(t)),ea(r,r.g.end()),e=new Uint8Array(r.h),t=r.i;for(var n=t.length,a=0,o=0;o<n;o++){var i=t[o];e.set(i,a),a+=i.length}return r.i=[e],e}function e0(e,t){return{O:e,P:t}}var e1=e0(function(e,t,r){if(5!==e.h)return!1;var n=(e=e.g).h[e.g],a=e.h[e.g+1],o=e.h[e.g+2],i=e.h[e.g+3];return e.g+=4,Y(e),e=2*((a=(n<<0|a<<8|o<<16|i<<24)>>>0)>>31)+1,n=a>>>23&255,a&=8388607,ey(t,r,255==n?a?NaN:1/0*e:0==n?1401298464324817e-60*e*a:e*Math.pow(2,n-150)*(a+8388608)),!0},function(e,t,r){if(null!=(t=eg(t,r))){J(e.g,8*r+5),e=e.g;var n=t;0===(n=(r=0>n?1:0)?-n:n)?0<1/n?j=V=0:(V=0,j=2147483648):isNaN(n)?(V=0,j=2147483647):34028234663852886e22<n?(V=0,j=(r<<31|2139095040)>>>0):11754943508222875e-54>n?(V=0,j=(r<<31|(n=Math.round(n/1401298464324817e-60)))>>>0):(t=Math.floor(Math.log(n)/Math.LN2),n*=Math.pow(2,-t),16777216<=(n=Math.round(8388608*n))&&++t,V=0,j=(r<<31|t+127<<23|8388607&n)>>>0),r=j,e.g.push(r>>>0&255),e.g.push(r>>>8&255),e.g.push(r>>>16&255),e.g.push(r>>>24&255)}}),e2=e0(function(e,t,r){if(0!==e.h)return!1;for(var n=e.g,a=128,o=0,i=e=0;4>i&&128<=a;i++)a=n.h[n.g++],Y(n),o|=(127&a)<<7*i;if(128<=a&&(a=n.h[n.g++],Y(n),o|=(127&a)<<28,e|=(127&a)>>4),128<=a)for(i=0;5>i&&128<=a;i++)a=n.h[n.g++],Y(n),e|=(127&a)<<7*i+3;if(128>a)n=o>>>0,(e=2147483648&(a=e>>>0))&&(a=~a>>>0,0==(n=~n+1>>>0)&&(a=a+1>>>0)),n=4294967296*a+(n>>>0);else throw G();return ey(t,r,e?-n:n),!0},function(e,t,r){if(null!=(t=eg(t,r))&&null!=t){J(e.g,8*r),e=e.g;var n=t;for(r=0>n,t=(n=Math.abs(n))>>>0,n=Math.floor((n-t)/4294967296)>>>0,r&&(n=~n>>>0,4294967295<(t=(~t>>>0)+1)&&(t=0,4294967295<++n&&(n=0))),j=t,V=n,r=j,t=V;0<t||127<r;)e.g.push(127&r|128),r=(r>>>7|t<<25)>>>0,t>>>=7;e.g.push(r)}}),e3=e0(function(e,t,r){return 0===e.h&&(ey(t,r,X(e.g)),!0)},function(e,t,r){if(null!=(t=eg(t,r))&&null!=t){if(J(e.g,8*r),e=e.g,0<=(r=t))J(e,r);else{for(t=0;9>t;t++)e.g.push(127&r|128),r>>=7;e.g.push(1)}}}),e4=e0(function(e,t,r){if(2!==e.h)return!1;var n=X(e.g)>>>0,a=(e=e.g).g;if(e.g+=n,Y(e),e=e.h,R)(o=C)||(o=C=new TextDecoder("utf-8",{fatal:!0})),o=o.decode(e.subarray(a,a+n));else{n=a+n;for(var o,i,s,l,u=[],c=null;a<n;)128>(i=e[a++])?u.push(i):224>i?a>=n?T():(s=e[a++],194>i||128!=(192&s)?(a--,T()):u.push((31&i)<<6|63&s)):240>i?a>=n-1?T():128!=(192&(s=e[a++]))||224===i&&160>s||237===i&&160<=s||128!=(192&(o=e[a++]))?(a--,T()):u.push((15&i)<<12|(63&s)<<6|63&o):244>=i?a>=n-2?T():128!=(192&(s=e[a++]))||0!=(i<<28)+(s-144)>>30||128!=(192&(o=e[a++]))||128!=(192&(l=e[a++]))?(a--,T()):(i=((7&i)<<18|(63&s)<<12|(63&o)<<6|63&l)-65536,u.push((i>>10&1023)+55296,(1023&i)+56320)):T(),8192<=u.length&&(c=N(c,u),u.length=0);o=N(c,u)}return ey(t,r,o),!0},function(e,t,r){if(null!=(t=eg(t,r))){if(O)t=(M||(M=new TextEncoder)).encode(t);else{for(var n=0,a=new Uint8Array(3*t.length),o=0;o<t.length;o++){var i=t.charCodeAt(o);if(128>i)a[n++]=i;else{if(2048>i)a[n++]=i>>6|192;else{if(55296<=i&&57343>=i){if(56319>=i&&o<t.length){var s=t.charCodeAt(++o);if(56320<=s&&57343>=s){i=1024*(i-55296)+s-56320+65536,a[n++]=i>>18|240,a[n++]=i>>12&63|128,a[n++]=i>>6&63|128,a[n++]=63&i|128;continue}o--}i=65533}a[n++]=i>>12|224,a[n++]=i>>6&63|128}a[n++]=63&i|128}}t=a.subarray(0,n)}J(e.g,8*r+2),J(e.g,t.length),ea(e,e.g.end()),ea(e,t)}}),e6=e0(function(e,t,r,n,a){if(2!==e.h)return!1;t=ek(t,r,n),r=e.g.i,n=X(e.g)>>>0;var o=e.g.g+n,i=o-r;if(0>=i&&(e.g.i=o,a(t,e),i=o-e.g.g),i)throw Error("Message parsing ended unexpectedly. Expected to read "+n+" bytes, instead read "+(n-i)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=o,e.g.i=r,!0},function(e,t,r,n,a){if(null!=(t=ew(t,n,r)))for(n=0;n<t.length;n++){var o=e;J(o.g,8*r+2);var i=o.g.end();ea(o,i),i.push(o.h),o=i,a(t[n],e),i=e;var s=o.pop();for(s=i.h+i.g.length()-s;127<s;)o.push(127&s|128),s>>>=7,i.h++;o.push(s),i.h++}});function e5(){eN.apply(this,arguments)}if(f(e5,eN),ef){var e8={};Object.defineProperties(e5,(e8[Symbol.hasInstance]=em(Object[Symbol.hasInstance]),e8))}function e7(e){e5.call(this,e)}function e9(){return[1,e3,2,e1,3,e4,4,e4]}function te(e){e5.call(this,e,-1,tr)}function tt(){return[1,e6,e7,e9]}f(e7,e5),f(te,e5),te.prototype.addClassification=function(e,t){return ek(this,1,e7,e,t),this};var tr=[1];function tn(e){e5.call(this,e)}function ta(){return[1,e1,2,e1,3,e1,4,e1,5,e1]}function to(e){e5.call(this,e,-1,ts)}function ti(){return[1,e6,tn,ta]}f(tn,e5),f(to,e5);var ts=[1];function tl(e){e5.call(this,e)}function tu(){return[1,e1,2,e1,3,e1,4,e1,5,e1,6,e2]}f(tl,e5);var tc=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],td=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],tp=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],th=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],tf=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],tm=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],tg=[].concat(l(tc),l(td),l(tp),l(th),l(tf),l(tm));function ty(e,t,r){if(r=e.createShader(0===r?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(r));return r}function tv(e){return{x:eb(e,1),y:eb(e,2),z:eb(e,3),visibility:null!=eg(e,4)?eb(e,4):void 0}}function tb(e,t){this.h=e,this.g=t,this.l=0}function tw(e,t,r){return(function(e,t){var r=e.g;if(void 0===e.o){var n=ty(r,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),a=ty(r,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,a),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+r.getProgramInfoLog(o));n=e.o=o,r.useProgram(n),a=r.getUniformLocation(n,"sampler0"),e.j={K:r.getAttribLocation(n,"aVertex"),J:r.getAttribLocation(n,"aTex"),ma:a},e.u=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,e.u),r.enableVertexAttribArray(e.j.K),r.vertexAttribPointer(e.j.K,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),e.s=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,e.s),r.enableVertexAttribArray(e.j.J),r.vertexAttribPointer(e.j.J,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.uniform1i(a,0)}n=e.j,r.useProgram(e.o),r.canvas.width=t.width,r.canvas.height=t.height,r.viewport(0,0,t.width,t.height),r.activeTexture(r.TEXTURE0),e.h.bindTexture2d(t.glName),r.enableVertexAttribArray(n.K),r.bindBuffer(r.ARRAY_BUFFER,e.u),r.vertexAttribPointer(n.K,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.J),r.bindBuffer(r.ARRAY_BUFFER,e.s),r.vertexAttribPointer(n.J,2,r.FLOAT,!1,0,0),r.bindFramebuffer(r.DRAW_FRAMEBUFFER?r.DRAW_FRAMEBUFFER:r.FRAMEBUFFER,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.colorMask(!0,!0,!0,!0),r.drawArrays(r.TRIANGLE_FAN,0,4),r.disableVertexAttribArray(n.K),r.disableVertexAttribArray(n.J),r.bindBuffer(r.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap)?Promise.resolve(e.g.canvas.transferToImageBitmap()):r?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise(function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)}))}function tk(e){this.g=e}var tS=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function tx(e,t){return t+e}function t_(e){if(this.g=e,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=e&&e.locateFile||tx,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if("undefined"!=typeof location)t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.$=t,e.options){t=s(Object.keys(e.options));for(var r=t.next();!r.done;r=t.next()){r=r.value;var n=e.options[r].default;void 0!==n&&(this.j[r]="function"==typeof n?n():n)}}}function tI(e,t){var r;return x(function(n){return t in e.H?n.return(e.H[t]):(r=fetch(e.locateFile(t,"")).then(function(e){return e.arrayBuffer()}),e.H[t]=r,n.return(r))})}function tE(e){var t=this;e=e||{};var r={url:"face_detection_short.binarypb"},n={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new t_({locateFile:e.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:r,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(e){var a,o,i,l,u;return x(function(c){switch(c.g){case 1:o=(a=s("short"===e?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"])).next();case 2:if(o.done){c.g=4;break}return l="third_party/mediapipe/modules/face_detection/"+(i=o.value),v(c,tI(t.g,i),5);case 5:u=c.h,t.g.overrideFile(l,u),o=a.next(),c.g=2;break;case 4:return r.url="short"===e?"face_detection_short.binarypb":"face_detection_full.binarypb",n.graphOptionXref.calculatorName="short"===e?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",c.return(!0)}})}},minDetectionConfidence:n}})}(u=t_.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},u.reset=function(){var e=this;return x(function(t){e.i&&(e.i.reset(),e.o={},e.u={}),t.g=0})},u.setOptions=function(e,t){var r=this;if(t=t||this.g.options){for(var n=[],a=[],o={},i=s(Object.keys(e)),l=i.next();!l.done;o={R:o.R,S:o.S},l=i.next()){var u=l.value;u in this.j&&this.j[u]===e[u]||(this.j[u]=e[u],void 0!==(l=t[u])&&(l.onChange&&(o.R=l.onChange,o.S=e[u],n.push(function(e){return function(){return x(function(t){if(1==t.g)return v(t,e.R(e.S),2);!0===t.h&&(r.s=!0),t.g=0})}}(o))),l.graphOptionXref&&(u={valueNumber:1===l.type?e[u]:0,valueBoolean:0===l.type&&e[u],valueString:2===l.type?e[u]:""},l=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),l.graphOptionXref),u),a.push(l))))}(0!==n.length||0!==a.length)&&(this.s=!0,this.B=(void 0===this.B?[]:this.B).concat(a),this.A=(void 0===this.A?[]:this.A).concat(n))}},u.initialize=function(){var e=this;return x(function(t){var r,n,a,o,i,u,c,d,p,h,f,m,g,y,b,w,k,S,_,I,E,T,N,A;return 1==t.g?v(t,x(function(t){switch(t.g){case 1:if(!e.Z)return t.return();return r=void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(e.j):e.g.files,v(t,x(function(e){switch(e.g){case 1:return e.o=2,v(e,WebAssembly.instantiate(tS),4);case 4:e.g=3,e.o=0;break;case 2:return e.o=0,e.j=null,e.return(!1);case 3:return e.return(!0)}}),2);case 2:if(n=t.h,"object"==typeof window){var s,m;return s={locateFile:e.locateFile},window.createMediapipeSolutionsWasm=s,m={locateFile:e.locateFile},window.createMediapipeSolutionsPackedAssets=m,u=r.filter(function(e){return void 0!==e.data}),c=r.filter(function(e){return void 0===e.data}),d=Promise.all(u.map(function(t){var r=tI(e,t.url);if(void 0!==t.path){var n=t.path;r=r.then(function(t){return e.overrideFile(n,t),Promise.resolve(t)})}return r})),p=Promise.all(c.map(function(t){var r,a;return void 0===t.simd||t.simd&&n||!t.simd&&!n?(r=e.locateFile(t.url,e.$),(a=document.createElement("script")).setAttribute("src",r),a.setAttribute("crossorigin","anonymous"),new Promise(function(e){a.addEventListener("load",function(){e()},!1),a.addEventListener("error",function(){e()},!1),document.body.appendChild(a)})):Promise.resolve()})).then(function(){var t,r,n;return x(function(a){if(1==a.g)return t=window.createMediapipeSolutionsWasm,r=window.createMediapipeSolutionsPackedAssets,n=e,v(a,t(r),2);n.h=a.h,a.g=0})}),h=x(function(t){return e.g.graph&&e.g.graph.url?t=v(t,tI(e,e.g.graph.url),0):(t.g=0,t=void 0),t}),v(t,Promise.all([p,d,h]),7)}if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return a=r.filter(function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n}).map(function(t){return e.locateFile(t.url,e.$)}),importScripts.apply(null,l(a)),o=e,v(t,createMediapipeSolutionsWasm(Module),6);case 6:o.h=t.h,e.l=new OffscreenCanvas(1,1),e.h.canvas=e.l,i=e.h.GL.createContext(e.l,{antialias:!1,alpha:!1,ja:"undefined"!=typeof WebGL2RenderingContext?2:1}),e.h.GL.makeContextCurrent(i),t.g=4;break;case 7:if(e.l=document.createElement("canvas"),!(f=e.l.getContext("webgl2",{}))&&!(f=e.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),t.return();e.G=f,e.h.canvas=e.l,e.h.createContext(e.l,!0,!0,{});case 4:e.i=new e.h.SolutionWasm,e.Z=!1,t.g=0}}),2):3!=t.g?v(t,x(function(t){if(1==t.g){if(e.g.graph&&e.g.graph.url&&e.Y===e.g.graph.url)return t.return();if(e.s=!0,!e.g.graph||!e.g.graph.url){t.g=2;return}return e.Y=e.g.graph.url,v(t,tI(e,e.g.graph.url),3)}for(2!=t.g&&(m=t.h,e.i.loadGraph(m)),y=(g=s(Object.keys(e.C))).next();!y.done;y=g.next())b=y.value,e.i.overrideFile(b,e.C[b]);if(e.C={},e.g.listeners)for(k=(w=s(e.g.listeners)).next();!k.done;k=w.next())(function(e,t){for(var r=t.name||"$",n=[].concat(l(t.wants)),a=new e.h.StringList,o=s(t.wants),i=o.next();!i.done;i=o.next())a.push_back(i.value);o=e.h.PacketListener.implement({onResults:function(a){for(var o,i,l,u,c,d,p,h,f,m,g,y,b,w,k={},S=0;S<t.wants.length;++S)k[n[S]]=a.get(S);var _=e.listeners[r];_&&(e.D=(o=t.outs,x(function(t){switch(t.g){case 1:if(!o)return t.return(k);for(i={},l=0,c=(u=s(Object.keys(o))).next();!c.done;c=u.next())"string"!=typeof(d=o[c.value])&&"texture"===d.type&&void 0!==k[d.stream]&&++l;1<l&&(e.I=!1),c=(p=s(Object.keys(o))).next();case 2:if(c.done){t.g=4;break}if("string"==typeof(f=o[h=c.value]))return b=i,w=h,v(t,function(e,t,r){var n;return x(function(a){return"number"==typeof r||r instanceof Uint8Array||r instanceof e.h.Uint8BlobList?a.return(r):r instanceof e.h.Texture2dDataOut?((n=e.u[t])||(n=new tb(e.h,e.G),e.u[t]=n),a.return(tw(n,r,e.I))):a.return(void 0)})}(e,h,k[f]),14);if(m=k[f.stream],"detection_list"===f.type){if(m){for(var r=m.getRectList(),n=m.getLandmarksList(),a=m.getClassificationsList(),S=[],_=0;_<r.size();++_){var I=eQ(r.get(_),tl,tu);I={boundingBox:{xCenter:eb(I,1),yCenter:eb(I,2),height:eb(I,3),width:eb(I,4),rotation:eb(I,5,0),rectId:eS(I,6)},landmarks:ew(eQ(n.get(_),to,ti),tn,1).map(tv),V:ew(eQ(a.get(_),te,tt),e7,1).map(function(e){return{index:eS(e,1),ga:eb(e,2),label:null!=eg(e,3)?ex(e,3):void 0,displayName:null!=eg(e,4)?ex(e,4):void 0}})},S.push(I)}r=S}else r=[];i[h]=r,t.g=7;break}if("proto_list"===f.type){if(m){for(n=0,r=Array(m.size());n<m.size();n++)r[n]=m.get(n);m.delete()}else r=[];i[h]=r,t.g=7;break}if(void 0===m){t.g=3;break}if("float_list"===f.type||"proto"===f.type){i[h]=m,t.g=7;break}if("texture"!==f.type)throw Error("Unknown output config type: '"+f.type+"'");return(g=e.u[h])||(g=new tb(e.h,e.G),e.u[h]=g),v(t,tw(g,m,e.I),13);case 13:y=t.h,i[h]=y;case 7:f.transform&&i[h]&&(i[h]=f.transform(i[h])),t.g=3;break;case 14:b[w]=t.h;case 3:c=p.next(),t.g=2;break;case 4:return t.return(i)}})).then(function(r){r=_(r);for(var a=0;a<t.wants.length;++a){var o=k[n[a]];"object"==typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}r&&(e.D=r)}))}}),e.i.attachMultiListener(a,o),a.delete()})(e,k.value);S=e.j,e.j={},e.setOptions(S),t.g=0}),3):v(t,x(function(t){switch(t.g){case 1:if(!e.s)return t.return();if(!e.A){t.g=2;break}I=(_=s(e.A)).next();case 3:if(I.done){t.g=5;break}return v(t,(0,I.value)(),4);case 4:I=_.next(),t.g=3;break;case 5:e.A=void 0;case 2:if(e.B){for(E=new e.h.GraphOptionChangeRequestList,N=(T=s(e.B)).next();!N.done;N=T.next())A=N.value,E.push_back(A);e.i.changeOptions(E),E.delete(),e.B=void 0}e.s=!1,t.g=0}}),0)})},u.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.C[e]=t},u.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},u.send=function(e,t){var r,n,a,o,i,l,u,c,d,p=this;return x(function(h){switch(h.g){case 1:if(!p.g.inputs)return h.return();return r=1e3*(null==t?performance.now():t),v(h,p.D,2);case 2:return v(h,p.initialize(),3);case 3:for(n=new p.h.PacketDataList,o=(a=s(Object.keys(e))).next();!o.done;o=a.next())if(i=o.value,l=p.g.inputs[i]){e:{var f=e[i];switch(l.type){case"video":var m=p.o[l.stream];if(m||(m=new tb(p.h,p.G),p.o[l.stream]=m),0===m.l&&(m.l=m.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&f instanceof HTMLVideoElement)var g=f.videoWidth,y=f.videoHeight;else"undefined"!=typeof HTMLImageElement&&f instanceof HTMLImageElement?(g=f.naturalWidth,y=f.naturalHeight):(g=f.width,y=f.height);y={glName:m.l,width:g,height:y},(g=m.g).canvas.width=y.width,g.canvas.height=y.height,g.activeTexture(g.TEXTURE0),m.h.bindTexture2d(m.l),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f),m.h.bindTexture2d(0),m=y;break e;case"detections":for((m=p.o[l.stream])||(m=new tk(p.h),p.o[l.stream]=m),m.data||(m.data=new m.g.DetectionListData),m.data.reset(f.length),y=0;y<f.length;++y){g=f[y];var b=m.data,w=b.setBoundingBox,k=y,S=g.boundingBox,x=new tl;if(ey(x,1,S.xCenter),ey(x,2,S.yCenter),ey(x,3,S.height),ey(x,4,S.width),ey(x,5,S.rotation),ey(x,6,S.rectId),S=eJ(x,tu),w.call(b,k,S),g.landmarks)for(b=0;b<g.landmarks.length;++b){var _=!!(x=g.landmarks[b]).visibility;k=(w=m.data).addNormalizedLandmark,S=y,x=Object.assign(Object.assign({},x),{visibility:_?x.visibility:0}),ey(_=new tn,1,x.x),ey(_,2,x.y),ey(_,3,x.z),x.visibility&&ey(_,4,x.visibility),x=eJ(_,ta),k.call(w,S,x)}if(g.V)for(b=0;b<g.V.length;++b)k=(w=m.data).addClassification,S=y,x=g.V[b],ey(_=new e7,2,x.ga),x.index&&ey(_,1,x.index),x.label&&ey(_,3,x.label),x.displayName&&ey(_,4,x.displayName),x=eJ(_,e9),k.call(w,S,x)}m=m.data;break e;default:m={}}}switch(u=m,c=l.stream,l.type){case"video":n.pushTexture2d(Object.assign(Object.assign({},u),{stream:c,timestamp:r}));break;case"detections":(d=u).stream=c,d.timestamp=r,n.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return p.i.send(n),v(h,p.D,4);case 4:n.delete(),h.g=0}})},u.onResults=function(e,t){this.listeners[t||"$"]=e},E("Solution",t_),E("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(u=tE.prototype).close=function(){return this.g.close(),Promise.resolve()},u.onResults=function(e){this.g.onResults(e)},u.initialize=function(){var e=this;return x(function(t){return v(t,e.g.initialize(),0)})},u.reset=function(){this.g.reset()},u.send=function(e){var t=this;return x(function(r){return v(r,t.g.send(e),0)})},u.setOptions=function(e){this.g.setOptions(e)},E("FaceDetection",tE),E("FACEDETECTION_LIPS",tc),E("FACEDETECTION_LEFT_EYE",td),E("FACEDETECTION_LEFT_EYEBROW",tp),E("FACEDETECTION_RIGHT_EYE",th),E("FACEDETECTION_RIGHT_EYEBROW",tf),E("FACEDETECTION_FACE_OVAL",tm),E("FACEDETECTION_CONTOURS",tg),E("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),E("VERSION","0.4.1646425229")}).call(this)},135:function(e,t,r){var n,a=r(40257),o=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){function t(){return m.buffer!=y&&Y(m.buffer),b}function o(){return m.buffer!=y&&Y(m.buffer),w}function i(){return m.buffer!=y&&Y(m.buffer),k}function s(){return m.buffer!=y&&Y(m.buffer),S}var l,u,c,d,p,h,f,m,g,y,v,b,w,k,S,x,_,I,E,T,N,A=void 0!==(e=e||{})?e:{};A.ready=new Promise(function(e,t){l=e,u=t}),void 0!==a&&a.listeners&&(c={uncaughtException:a.listeners("uncaughtException"),unhandledRejection:a.listeners("unhandledRejection")});var C=Object.assign({},A),M=[],R=(e,t)=>{throw t},O="object"==typeof window,F="function"==typeof importScripts,D="object"==typeof a&&"object"==typeof a.versions&&"string"==typeof a.versions.node,P=A.ENVIRONMENT_IS_PTHREAD||!1,$="";function L(e){return A.locateFile?A.locateFile(e,$):$+e}if(D){let e;var B=r(47256),z=r(2980);$=F?z.dirname($)+"/":"//",d=(e,t)=>(e=eo(e)?new URL(e):z.normalize(e),B.readFileSync(e,t?void 0:"utf8")),h=e=>{var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),t},p=(e,t,r)=>{e=eo(e)?new URL(e):z.normalize(e),B.readFile(e,function(e,n){e?r(e):t(n.buffer)})},a.argv.length>1&&a.argv[1].replace(/\\/g,"/"),M=a.argv.slice(2),a.on("uncaughtException",function(e){if(!(e instanceof el))throw e}),a.on("unhandledRejection",function(e){throw e}),R=(e,t)=>{if(H)throw a.exitCode=e,t;t instanceof el||V("exiting due to exception: "+t),a.exit(e)},A.inspect=function(){return"[Emscripten Module object]"};try{e=r(27958)}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}r.g.Worker=e.Worker}else(O||F)&&(F?$=self.location.href:"undefined"!=typeof document&&document.currentScript&&($=document.currentScript.src),void 0!==n&&n&&($=n),$=0!==$.indexOf("blob:")?$.substr(0,$.replace(/[?#].*/,"").lastIndexOf("/")+1):"",D||(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},F&&(h=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(200==n.status||0==n.status&&n.response){t(n.response);return}r()},n.onerror=r,n.send(null)}));D&&"undefined"==typeof performance&&(r.g.performance=r(54862).performance);var W=console.log.bind(console),U=console.warn.bind(console);D&&(W=e=>B.writeSync(1,e+"\n"),U=e=>B.writeSync(2,e+"\n"));var j=A.print||W,V=A.printErr||U;Object.assign(A,C),C=null,A.arguments&&(M=A.arguments),A.thisProgram&&A.thisProgram,A.quit&&(R=A.quit),Atomics.load,Atomics.store,Atomics.compareExchange,A.wasmBinary&&(f=A.wasmBinary);var H=A.noExitRuntime||!0;"object"!=typeof WebAssembly&&en("no native wasm support detected");var G=!1,q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function K(e,t,r){for(var n=(t>>>=0)+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&q)return q.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,a):e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(!(128&i)){o+=String.fromCharCode(i);continue}var s=63&e[t++];if((224&i)==192){o+=String.fromCharCode((31&i)<<6|s);continue}var l=63&e[t++];if((i=(240&i)==224?(15&i)<<12|s<<6|l:(7&i)<<18|s<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}return o}function Y(e){y=e,A.HEAP8=v=new Int8Array(e),A.HEAP16=new Int16Array(e),A.HEAP32=w=new Int32Array(e),A.HEAPU8=b=new Uint8Array(e),A.HEAPU16=new Uint16Array(e),A.HEAPU32=k=new Uint32Array(e),A.HEAPF32=new Float32Array(e),A.HEAPF64=S=new Float64Array(e)}P&&(y=A.buffer);var X=A.INITIAL_MEMORY||16777216;if(P)m=A.wasmMemory,y=A.buffer;else if(A.wasmMemory)m=A.wasmMemory;else if(!((m=new WebAssembly.Memory({initial:X/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw V("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&V("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");m&&(y=m.buffer),X=y.byteLength,Y(y);var Q=[],Z=[],J=[],ee=0,et=null,er=null;function en(e){A.onAbort&&A.onAbort(e),V(e="Aborted("+e+")"),G=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}function ea(e){return e.startsWith("data:application/octet-stream;base64,")}function eo(e){return e.startsWith("file://")}function ei(e){try{if(e==_&&f)return new Uint8Array(f);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){en(e)}}ea(_="tfjs-backend-wasm-threaded-simd.wasm")||(_=L(_));var es={};function el(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function eu(e){var t=eh.pthreads[e];t||en(void 0),eh.returnWorkerToPool(t)}function ec(e){var t=eh.getNewWorker();if(!t)return 6;eh.runningWorkers.push(t),eh.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=()=>{D&&t.ref(),t.postMessage(r,e.transferList),delete t.runPthread},t.loaded&&t.runPthread(),0}function ed(e){if(P)return ek(1,1,e);H||(eh.terminateAllThreads(),A.onExit&&A.onExit(e),G=!0),R(e,new el(e))}var ep=function(e,t){if(!t&&P)throw em(e),"unwind";ed(e)},eh={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){P?eh.initWorker():eh.initMainThread()},initMainThread:function(){for(var e=8;e--;)eh.allocateUnusedWorker()},initWorker:function(){H=!1},setExitStatus:function(e){},terminateAllThreads:function(){for(var e of Object.values(eh.pthreads))eh.returnWorkerToPool(e);for(var e of eh.unusedWorkers)e.terminate();eh.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete eh.pthreads[t],eh.unusedWorkers.push(e),eh.runningWorkers.splice(eh.runningWorkers.indexOf(e),1),e.pthread_ptr=0,D&&e.unref(),eO(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){eh.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:function(e,t){e.onmessage=r=>{var n,a,o=r.data,i=o.cmd;if(e.pthread_ptr&&(eh.currentProxiedOperationCallerThread=e.pthread_ptr),o.targetThread&&o.targetThread!=eA()){var s=eh.pthreads[o.targetThread];s?s.postMessage(o,o.transferList):V('Internal error! Worker sent a message "'+i+'" to target pthread '+o.targetThread+", but that thread no longer exists!"),eh.currentProxiedOperationCallerThread=void 0;return}"processProxyingQueue"===i?eb(o.queue):"spawnThread"===i?ec(o):"cleanupThread"===i?eu(o.thread):"killThread"===i?(n=o.thread,a=eh.pthreads[n],delete eh.pthreads[n],a.terminate(),eO(n),eh.runningWorkers.splice(eh.runningWorkers.indexOf(a),1),a.pthread_ptr=0):"cancelThread"===i?function(e){eh.pthreads[e].postMessage({cmd:"cancel"})}(o.thread):"loaded"===i?(e.loaded=!0,D&&e.unref(),t&&t(e),e.runPthread&&e.runPthread()):"print"===i?j("Thread "+o.threadId+": "+o.text):"printErr"===i?V("Thread "+o.threadId+": "+o.text):"alert"===i?alert("Thread "+o.threadId+": "+o.text):"setimmediate"===o.target?e.postMessage(o):"callHandler"===i?A[o.handler](...o.args):i&&V("worker sent an unknown command "+i),eh.currentProxiedOperationCallerThread=void 0},e.onerror=e=>{throw V("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},D&&(e.on("message",function(t){e.onmessage({data:t})}),e.on("error",function(t){e.onerror(t)}),e.on("detachedExit",function(){}));var r=[];for(var a of["onExit","onAbort","print","printErr"])A.hasOwnProperty(a)&&r.push(a);e.postMessage({cmd:"load",handlers:r,urlOrBlob:A.mainScriptUrlOrBlob||n,wasmMemory:m,wasmModule:g})},allocateUnusedWorker:function(){var e;e=new Worker(L("tfjs-backend-wasm-threaded-simd.worker.js")),eh.unusedWorkers.push(e)},getNewWorker:function(){return 0==eh.unusedWorkers.length&&(eh.allocateUnusedWorker(),eh.loadWasmModuleToWorker(eh.unusedWorkers[0])),eh.unusedWorkers.pop()}};function ef(e){for(;e.length>0;)e.shift()(A)}function em(e){if(P)return ek(2,0,e);try{ep(e)}catch(e){var t;(t=e)instanceof el||"unwind"==t||R(1,t)}}A.PThread=eh,A.establishStackSpace=function(){var e=eA(),t=o()[e+52>>>2],r=t-o()[e+56>>>2];eD(t,r),e$(t)};var eg=[];function ey(e,t,r,n){return P?ek(3,1,e,t,r,n):ev(e,t,r,n)}function ev(e,t,r,n){if("undefined"==typeof SharedArrayBuffer)return V("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(P&&0===a.length)return ey(e,t,r,n);var o={startRoutine:r,pthread_ptr:e,arg:n,transferList:a};return P?(o.cmd="spawnThread",postMessage(o,a),0):ec(o)}function eb(e){Atomics.store(o(),e>>2,1),eA()&&eR(e),Atomics.compareExchange(o(),e>>2,1,0)}function ew(){return 4294901760}function ek(e,t){var r,n,a,o=arguments.length-2,i=arguments;return r=()=>{for(var r=eL(8*o),n=r>>3,a=0;a<o;a++){var l=i[2+a];s()[n+a>>>0]=l}return eM(e,o,r,t)},n=eP(),a=r(),e$(n),a}A.invokeEntryPoint=function(e,t){var r,n=((r=eg[e])||(e>=eg.length&&(eg.length=e+1),eg[e]=r=x.get(e)),r)(t);H?eh.setExitStatus(n):eF(n)},A.executeNotifiedProxyingQueue=eb,I=D?()=>{var e=a.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var eS=[];function ex(e){return P?ek(4,1,e):52}function e_(e,t,r,n,a){return P?ek(5,1,e,t,r,n,a):70}var eI=[null,[],[]];function eE(e,r,n,a){if(P)return ek(6,1,e,r,n,a);for(var o=0,s=0;s<n;s++){var l=i()[r>>>2],u=i()[r+4>>>2];r+=8;for(var c=0;c<u;c++)!function(e,t){var r=eI[e];0===t||10===t?((1===e?j:V)(K(r,0)),r.length=0):r.push(t)}(e,t()[l+c>>>0]);o+=u}return i()[a>>>2]=o,0}eh.init();var eT=[null,ed,em,ey,ex,e_,eE],eN={__emscripten_init_main_thread_js:function(e){eC(e,!F,1,!O),eh.threadInitTLS()},__emscripten_thread_cleanup:function(e){P?postMessage({cmd:"cleanupThread",thread:e}):eu(e)},__pthread_create_js:ev,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return!0},_emscripten_notify_task_queue:function(e,t,r,n){if(e==t)setTimeout(()=>eb(n));else if(P)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:n});else{var a=eh.pthreads[e];if(!a)return;a.postMessage({cmd:"processProxyingQueue",queue:n})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,r){return -1},abort:function(){en("")},emscripten_check_blocking_allowed:function(){!D&&(F||function e(t){e.shown||(e.shown={}),e.shown[t]||(e.shown[t]=1,D&&(t="warning: "+t),V(t))}("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread"))},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return ew()},emscripten_get_now:I,emscripten_memcpy_big:function(e,r,n){t().copyWithin(e>>>0,r>>>0,r+n>>>0)},emscripten_num_logical_cores:function(){return D?r(2578).cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,r){eS.length=t;for(var n=r>>3,a=0;a<t;a++)eS[a]=s()[n+a>>>0];return(e<0?es[-e-1]:eT[e]).apply(null,eS)},emscripten_resize_heap:function(e){var r=t().length;if((e>>>=0)<=r)return!1;var n=ew();if(e>n)return!1;let a=(e,t)=>e+(t-e%t)%t;for(var o=1;o<=4;o*=2){var i=r*(1+.2/o);if(i=Math.min(i,e+100663296),function(e){try{return m.grow(e-y.byteLength+65535>>>16),Y(m.buffer),1}catch(e){}}(Math.min(n,a(Math.max(e,i),65536))))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:ep,fd_close:ex,fd_seek:e_,fd_write:eE,memory:m||A.wasmMemory};(function(){var e={env:eN,wasi_snapshot_preview1:eN};function t(e,t){var r,n,a=e.exports;if(A.asm=a,r=A.asm._emscripten_tls_init,eh.tlsInitFunctions.push(r),x=A.asm.__indirect_function_table,n=A.asm.__wasm_call_ctors,Z.unshift(n),g=t,!P){var o=eh.unusedWorkers.length;eh.unusedWorkers.forEach(function(e){eh.loadWasmModuleToWorker(e,function(){--o||function(e){if(ee--,A.monitorRunDependencies&&A.monitorRunDependencies(ee),0==ee&&(null!==et&&(clearInterval(et),et=null),er)){var t=er;er=null,t()}}(0)})})}}function r(e){t(e.instance,e.module)}function n(t){return(function(){if(!f&&(O||F)){if("function"==typeof fetch&&!eo(_))return fetch(_,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+_+"'";return e.arrayBuffer()}).catch(function(){return ei(_)});if(p)return new Promise(function(e,t){p(_,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return ei(_)})})().then(function(t){return WebAssembly.instantiate(t,e)}).then(function(e){return e}).then(t,function(e){V("failed to asynchronously prepare wasm: "+e),en(e)})}if(!P&&(ee++,A.monitorRunDependencies&&A.monitorRunDependencies(ee)),A.instantiateWasm)try{return A.instantiateWasm(e,t)}catch(e){V("Module.instantiateWasm callback failed with error: "+e),u(e)}(f||"function"!=typeof WebAssembly.instantiateStreaming||ea(_)||eo(_)||D||"function"!=typeof fetch?n(r):fetch(_,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(r,function(e){return V("wasm streaming compile failed: "+e),V("falling back to ArrayBuffer instantiation"),n(r)})})).catch(u)})(),A.___wasm_call_ctors=function(){return(A.___wasm_call_ctors=A.asm.__wasm_call_ctors).apply(null,arguments)},A._init=function(){return(A._init=A.asm.init).apply(null,arguments)},A._init_with_threads_count=function(){return(A._init_with_threads_count=A.asm.init_with_threads_count).apply(null,arguments)},A._get_threads_count=function(){return(A._get_threads_count=A.asm.get_threads_count).apply(null,arguments)},A._register_tensor=function(){return(A._register_tensor=A.asm.register_tensor).apply(null,arguments)},A._dispose_data=function(){return(A._dispose_data=A.asm.dispose_data).apply(null,arguments)},A._dispose=function(){return(A._dispose=A.asm.dispose).apply(null,arguments)},A._Abs=function(){return(A._Abs=A.asm.Abs).apply(null,arguments)},A._Acos=function(){return(A._Acos=A.asm.Acos).apply(null,arguments)},A._Acosh=function(){return(A._Acosh=A.asm.Acosh).apply(null,arguments)},A._Add=function(){return(A._Add=A.asm.Add).apply(null,arguments)},A._AddN=function(){return(A._AddN=A.asm.AddN).apply(null,arguments)},A._All=function(){return(A._All=A.asm.All).apply(null,arguments)},A._Any=function(){return(A._Any=A.asm.Any).apply(null,arguments)},A._ArgMax=function(){return(A._ArgMax=A.asm.ArgMax).apply(null,arguments)},A._ArgMin=function(){return(A._ArgMin=A.asm.ArgMin).apply(null,arguments)},A._Asin=function(){return(A._Asin=A.asm.Asin).apply(null,arguments)},A._Asinh=function(){return(A._Asinh=A.asm.Asinh).apply(null,arguments)},A._Atan=function(){return(A._Atan=A.asm.Atan).apply(null,arguments)},A._Atan2=function(){return(A._Atan2=A.asm.Atan2).apply(null,arguments)},A._Atanh=function(){return(A._Atanh=A.asm.Atanh).apply(null,arguments)},A._AvgPool=function(){return(A._AvgPool=A.asm.AvgPool).apply(null,arguments)},A._AvgPool3D=function(){return(A._AvgPool3D=A.asm.AvgPool3D).apply(null,arguments)},A._AvgPool3DGrad=function(){return(A._AvgPool3DGrad=A.asm.AvgPool3DGrad).apply(null,arguments)},A._AvgPoolGrad=function(){return(A._AvgPoolGrad=A.asm.AvgPoolGrad).apply(null,arguments)},A._BatchMatMul=function(){return(A._BatchMatMul=A.asm.BatchMatMul).apply(null,arguments)},A._Bincount=function(){return(A._Bincount=A.asm.Bincount).apply(null,arguments)},A._BitwiseAnd=function(){return(A._BitwiseAnd=A.asm.BitwiseAnd).apply(null,arguments)},A._Ceil=function(){return(A._Ceil=A.asm.Ceil).apply(null,arguments)},A._ClipByValue=function(){return(A._ClipByValue=A.asm.ClipByValue).apply(null,arguments)},A._Conv2D=function(){return(A._Conv2D=A.asm.Conv2D).apply(null,arguments)},A._Conv2DBackpropInput=function(){return(A._Conv2DBackpropInput=A.asm.Conv2DBackpropInput).apply(null,arguments)},A._Conv3D=function(){return(A._Conv3D=A.asm.Conv3D).apply(null,arguments)},A._Conv3DBackpropFilterV2=function(){return(A._Conv3DBackpropFilterV2=A.asm.Conv3DBackpropFilterV2).apply(null,arguments)},A._Conv3DBackpropInputV2=function(){return(A._Conv3DBackpropInputV2=A.asm.Conv3DBackpropInputV2).apply(null,arguments)},A._Cos=function(){return(A._Cos=A.asm.Cos).apply(null,arguments)},A._Cosh=function(){return(A._Cosh=A.asm.Cosh).apply(null,arguments)},A._CropAndResize=function(){return(A._CropAndResize=A.asm.CropAndResize).apply(null,arguments)},A._Cumprod=function(){return(A._Cumprod=A.asm.Cumprod).apply(null,arguments)},A._Cumsum=function(){return(A._Cumsum=A.asm.Cumsum).apply(null,arguments)},A._DenseBincount=function(){return(A._DenseBincount=A.asm.DenseBincount).apply(null,arguments)},A._DepthToSpace=function(){return(A._DepthToSpace=A.asm.DepthToSpace).apply(null,arguments)},A._DepthwiseConv2dNative=function(){return(A._DepthwiseConv2dNative=A.asm.DepthwiseConv2dNative).apply(null,arguments)},A._Diag=function(){return(A._Diag=A.asm.Diag).apply(null,arguments)},A._Dilation2D=function(){return(A._Dilation2D=A.asm.Dilation2D).apply(null,arguments)},A._Dilation2DBackpropFilter=function(){return(A._Dilation2DBackpropFilter=A.asm.Dilation2DBackpropFilter).apply(null,arguments)},A._Dilation2DBackpropInput=function(){return(A._Dilation2DBackpropInput=A.asm.Dilation2DBackpropInput).apply(null,arguments)},A._Elu=function(){return(A._Elu=A.asm.Elu).apply(null,arguments)},A._EluGrad=function(){return(A._EluGrad=A.asm.EluGrad).apply(null,arguments)},A._Equal=function(){return(A._Equal=A.asm.Equal).apply(null,arguments)},A._Erf=function(){return(A._Erf=A.asm.Erf).apply(null,arguments)},A._Exp=function(){return(A._Exp=A.asm.Exp).apply(null,arguments)},A._Expm1=function(){return(A._Expm1=A.asm.Expm1).apply(null,arguments)},A._FlipLeftRight=function(){return(A._FlipLeftRight=A.asm.FlipLeftRight).apply(null,arguments)},A._Floor=function(){return(A._Floor=A.asm.Floor).apply(null,arguments)},A._FloorDiv=function(){return(A._FloorDiv=A.asm.FloorDiv).apply(null,arguments)},A._FusedBatchNorm=function(){return(A._FusedBatchNorm=A.asm.FusedBatchNorm).apply(null,arguments)},A._FusedConv2D=function(){return(A._FusedConv2D=A.asm.FusedConv2D).apply(null,arguments)},A._FusedDepthwiseConv2D=function(){return(A._FusedDepthwiseConv2D=A.asm.FusedDepthwiseConv2D).apply(null,arguments)},A._Gather=function(){return(A._Gather=A.asm.Gather).apply(null,arguments)},A._GatherNd=function(){return(A._GatherNd=A.asm.GatherNd).apply(null,arguments)},A._Greater=function(){return(A._Greater=A.asm.Greater).apply(null,arguments)},A._GreaterEqual=function(){return(A._GreaterEqual=A.asm.GreaterEqual).apply(null,arguments)},A._IsFinite=function(){return(A._IsFinite=A.asm.IsFinite).apply(null,arguments)},A._IsInf=function(){return(A._IsInf=A.asm.IsInf).apply(null,arguments)},A._IsNan=function(){return(A._IsNan=A.asm.IsNan).apply(null,arguments)},A._LRN=function(){return(A._LRN=A.asm.LRN).apply(null,arguments)},A._LRNGrad=function(){return(A._LRNGrad=A.asm.LRNGrad).apply(null,arguments)},A._LeakyRelu=function(){return(A._LeakyRelu=A.asm.LeakyRelu).apply(null,arguments)},A._Less=function(){return(A._Less=A.asm.Less).apply(null,arguments)},A._LessEqual=function(){return(A._LessEqual=A.asm.LessEqual).apply(null,arguments)},A._LinSpace=function(){return(A._LinSpace=A.asm.LinSpace).apply(null,arguments)},A._Log=function(){return(A._Log=A.asm.Log).apply(null,arguments)},A._Log1p=function(){return(A._Log1p=A.asm.Log1p).apply(null,arguments)},A._LogicalAnd=function(){return(A._LogicalAnd=A.asm.LogicalAnd).apply(null,arguments)},A._LogicalNot=function(){return(A._LogicalNot=A.asm.LogicalNot).apply(null,arguments)},A._LogicalOr=function(){return(A._LogicalOr=A.asm.LogicalOr).apply(null,arguments)},A._LogicalXor=function(){return(A._LogicalXor=A.asm.LogicalXor).apply(null,arguments)},A._Max=function(){return(A._Max=A.asm.Max).apply(null,arguments)},A._MaxPool=function(){return(A._MaxPool=A.asm.MaxPool).apply(null,arguments)},A._MaxPool3D=function(){return(A._MaxPool3D=A.asm.MaxPool3D).apply(null,arguments)},A._MaxPool3DGrad=function(){return(A._MaxPool3DGrad=A.asm.MaxPool3DGrad).apply(null,arguments)},A._MaxPoolGrad=function(){return(A._MaxPoolGrad=A.asm.MaxPoolGrad).apply(null,arguments)},A._MaxPoolWithArgmax=function(){return(A._MaxPoolWithArgmax=A.asm.MaxPoolWithArgmax).apply(null,arguments)},A._Maximum=function(){return(A._Maximum=A.asm.Maximum).apply(null,arguments)},A._Mean=function(){return(A._Mean=A.asm.Mean).apply(null,arguments)},A._Min=function(){return(A._Min=A.asm.Min).apply(null,arguments)},A._Minimum=function(){return(A._Minimum=A.asm.Minimum).apply(null,arguments)},A._MirrorPad=function(){return(A._MirrorPad=A.asm.MirrorPad).apply(null,arguments)},A._Mod=function(){return(A._Mod=A.asm.Mod).apply(null,arguments)},A._Multinomial=function(){return(A._Multinomial=A.asm.Multinomial).apply(null,arguments)},A._Multiply=function(){return(A._Multiply=A.asm.Multiply).apply(null,arguments)},A._Neg=function(){return(A._Neg=A.asm.Neg).apply(null,arguments)},A._NonMaxSuppressionV3=function(){return(A._NonMaxSuppressionV3=A.asm.NonMaxSuppressionV3).apply(null,arguments)},A._NonMaxSuppressionV4=function(){return(A._NonMaxSuppressionV4=A.asm.NonMaxSuppressionV4).apply(null,arguments)},A._NonMaxSuppressionV5=function(){return(A._NonMaxSuppressionV5=A.asm.NonMaxSuppressionV5).apply(null,arguments)},A._NotEqual=function(){return(A._NotEqual=A.asm.NotEqual).apply(null,arguments)},A._OneHot=function(){return(A._OneHot=A.asm.OneHot).apply(null,arguments)},A._PadV2=function(){return(A._PadV2=A.asm.PadV2).apply(null,arguments)},A._Pow=function(){return(A._Pow=A.asm.Pow).apply(null,arguments)},A._Prelu=function(){return(A._Prelu=A.asm.Prelu).apply(null,arguments)},A._Prod=function(){return(A._Prod=A.asm.Prod).apply(null,arguments)},A._RealDiv=function(){return(A._RealDiv=A.asm.RealDiv).apply(null,arguments)},A._Reciprocal=function(){return(A._Reciprocal=A.asm.Reciprocal).apply(null,arguments)},A._Relu=function(){return(A._Relu=A.asm.Relu).apply(null,arguments)},A._Relu6=function(){return(A._Relu6=A.asm.Relu6).apply(null,arguments)},A._ResizeBilinear=function(){return(A._ResizeBilinear=A.asm.ResizeBilinear).apply(null,arguments)},A._ResizeBilinearGrad=function(){return(A._ResizeBilinearGrad=A.asm.ResizeBilinearGrad).apply(null,arguments)},A._ResizeNearestNeighbor=function(){return(A._ResizeNearestNeighbor=A.asm.ResizeNearestNeighbor).apply(null,arguments)},A._ResizeNearestNeighborGrad=function(){return(A._ResizeNearestNeighborGrad=A.asm.ResizeNearestNeighborGrad).apply(null,arguments)},A._Reverse=function(){return(A._Reverse=A.asm.Reverse).apply(null,arguments)},A._RotateWithOffset=function(){return(A._RotateWithOffset=A.asm.RotateWithOffset).apply(null,arguments)},A._Round=function(){return(A._Round=A.asm.Round).apply(null,arguments)},A._Rsqrt=function(){return(A._Rsqrt=A.asm.Rsqrt).apply(null,arguments)},A._ScatterNd=function(){return(A._ScatterNd=A.asm.ScatterNd).apply(null,arguments)},A._SearchSorted=function(){return(A._SearchSorted=A.asm.SearchSorted).apply(null,arguments)},A._SelectV2=function(){return(A._SelectV2=A.asm.SelectV2).apply(null,arguments)},A._Selu=function(){return(A._Selu=A.asm.Selu).apply(null,arguments)},A._Sigmoid=function(){return(A._Sigmoid=A.asm.Sigmoid).apply(null,arguments)},A._Sign=function(){return(A._Sign=A.asm.Sign).apply(null,arguments)},A._Sin=function(){return(A._Sin=A.asm.Sin).apply(null,arguments)},A._Sinh=function(){return(A._Sinh=A.asm.Sinh).apply(null,arguments)},A._Softmax=function(){return(A._Softmax=A.asm.Softmax).apply(null,arguments)},A._Softplus=function(){return(A._Softplus=A.asm.Softplus).apply(null,arguments)},A._SparseFillEmptyRows=function(){return(A._SparseFillEmptyRows=A.asm.SparseFillEmptyRows).apply(null,arguments)},A._SparseReshape=function(){return(A._SparseReshape=A.asm.SparseReshape).apply(null,arguments)},A._SparseSegmentReduction=function(){return(A._SparseSegmentReduction=A.asm.SparseSegmentReduction).apply(null,arguments)},A._SparseToDense=function(){return(A._SparseToDense=A.asm.SparseToDense).apply(null,arguments)},A._Sqrt=function(){return(A._Sqrt=A.asm.Sqrt).apply(null,arguments)},A._Square=function(){return(A._Square=A.asm.Square).apply(null,arguments)},A._SquaredDifference=function(){return(A._SquaredDifference=A.asm.SquaredDifference).apply(null,arguments)},A._Step=function(){return(A._Step=A.asm.Step).apply(null,arguments)},A._StridedSlice=function(){return(A._StridedSlice=A.asm.StridedSlice).apply(null,arguments)},A._Sub=function(){return(A._Sub=A.asm.Sub).apply(null,arguments)},A._Sum=function(){return(A._Sum=A.asm.Sum).apply(null,arguments)},A._Tan=function(){return(A._Tan=A.asm.Tan).apply(null,arguments)},A._Tanh=function(){return(A._Tanh=A.asm.Tanh).apply(null,arguments)},A._TensorScatterUpdate=function(){return(A._TensorScatterUpdate=A.asm.TensorScatterUpdate).apply(null,arguments)},A._Tile=function(){return(A._Tile=A.asm.Tile).apply(null,arguments)},A._TopK=function(){return(A._TopK=A.asm.TopK).apply(null,arguments)},A._Transform=function(){return(A._Transform=A.asm.Transform).apply(null,arguments)},A._Transpose=function(){return(A._Transpose=A.asm.Transpose).apply(null,arguments)},A.__FusedMatMul=function(){return(A.__FusedMatMul=A.asm._FusedMatMul).apply(null,arguments)},A._malloc=function(){return(A._malloc=A.asm.malloc).apply(null,arguments)},A._free=function(){return(A._free=A.asm.free).apply(null,arguments)},A.__emscripten_tls_init=function(){return(A.__emscripten_tls_init=A.asm._emscripten_tls_init).apply(null,arguments)};var eA=A._pthread_self=function(){return(eA=A._pthread_self=A.asm.pthread_self).apply(null,arguments)},eC=(A.___errno_location=function(){return(A.___errno_location=A.asm.__errno_location).apply(null,arguments)},A.__emscripten_thread_init=function(){return(eC=A.__emscripten_thread_init=A.asm._emscripten_thread_init).apply(null,arguments)}),eM=(A.__emscripten_thread_crashed=function(){return(A.__emscripten_thread_crashed=A.asm._emscripten_thread_crashed).apply(null,arguments)},A._emscripten_main_thread_process_queued_calls=function(){return(A._emscripten_main_thread_process_queued_calls=A.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},A._emscripten_main_browser_thread_id=function(){return(A._emscripten_main_browser_thread_id=A.asm.emscripten_main_browser_thread_id).apply(null,arguments)},A._emscripten_run_in_main_runtime_thread_js=function(){return(eM=A._emscripten_run_in_main_runtime_thread_js=A.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)}),eR=(A._emscripten_dispatch_to_thread_=function(){return(A._emscripten_dispatch_to_thread_=A.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},A.__emscripten_proxy_execute_task_queue=function(){return(eR=A.__emscripten_proxy_execute_task_queue=A.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)}),eO=A.__emscripten_thread_free_data=function(){return(eO=A.__emscripten_thread_free_data=A.asm._emscripten_thread_free_data).apply(null,arguments)},eF=A.__emscripten_thread_exit=function(){return(eF=A.__emscripten_thread_exit=A.asm._emscripten_thread_exit).apply(null,arguments)},eD=A._emscripten_stack_set_limits=function(){return(eD=A._emscripten_stack_set_limits=A.asm.emscripten_stack_set_limits).apply(null,arguments)},eP=A.stackSave=function(){return(eP=A.stackSave=A.asm.stackSave).apply(null,arguments)},e$=A.stackRestore=function(){return(e$=A.stackRestore=A.asm.stackRestore).apply(null,arguments)},eL=A.stackAlloc=function(){return(eL=A.stackAlloc=A.asm.stackAlloc).apply(null,arguments)};function eB(e){if(e=e||M,!(ee>0)){if(P){l(A),P||ef(Z),startWorker(A);return}(function(){if(A.preRun)for("function"==typeof A.preRun&&(A.preRun=[A.preRun]);A.preRun.length;){var e;e=A.preRun.shift(),Q.unshift(e)}ef(Q)})(),ee>0||(A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),t()},1)):t())}function t(){!E&&(E=!0,A.calledRun=!0,G||(P||ef(Z),l(A),A.onRuntimeInitialized&&A.onRuntimeInitialized(),function(){if(!P){if(A.postRun)for("function"==typeof A.postRun&&(A.postRun=[A.postRun]);A.postRun.length;){var e;e=A.postRun.shift(),J.unshift(e)}ef(J)}}()))}}if(A.dynCall_iijjiiii=function(){return(A.dynCall_iijjiiii=A.asm.dynCall_iijjiiii).apply(null,arguments)},A.dynCall_jiji=function(){return(A.dynCall_jiji=A.asm.dynCall_jiji).apply(null,arguments)},A.keepRuntimeAlive=function(){return H},A.wasmMemory=m,A.cwrap=function(e,r,n,a){var o=(n=n||[]).every(e=>"number"===e||"boolean"===e);return"string"!==r&&o&&!a?A["_"+e]:function(){return function(e,r,n,a,o){var i,s,l={string:e=>{var r=0;if(null!=e&&0!==e){var n,a=(e.length<<2)+1;n=r=eL(a),function(e,t,r,n){if(r>>>=0,n>0){for(var a=r+n-1,o=0;o<e.length;++o){var i=e.charCodeAt(o);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),i<=127){if(r>=a)break;t[r++>>>0]=i}else if(i<=2047){if(r+1>=a)break;t[r++>>>0]=192|i>>6,t[r++>>>0]=128|63&i}else if(i<=65535){if(r+2>=a)break;t[r++>>>0]=224|i>>12,t[r++>>>0]=128|i>>6&63,t[r++>>>0]=128|63&i}else{if(r+3>=a)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63,t[r++>>>0]=128|i>>6&63,t[r++>>>0]=128|63&i}}t[r>>>0]=0}}(e,t(),n,a)}return r},array:e=>{var t=eL(e.length);return(m.buffer!=y&&Y(m.buffer),v).set(e,t>>>0),t}},u=A["_"+e],c=[],d=0;if(a)for(var p=0;p<a.length;p++){var h=l[n[p]];h?(0===d&&(d=eP()),c[p]=h(a[p])):c[p]=a[p]}var f=u.apply(null,c);return s=f,0!==d&&e$(d),f="string"===r?(i=s>>>0)?K(t(),i,void 0):"":"boolean"===r?!!s:s}(e,r,n,arguments,0)}},A.ExitStatus=el,A.PThread=eh,er=function e(){E||eB(),E||(er=e)},A.preInit)for("function"==typeof A.preInit&&(A.preInit=[A.preInit]);A.preInit.length>0;)A.preInit.pop()();if(eB(),c&&(T={uncaughtException:a.listeners("uncaughtException").filter(function(e){return!c.uncaughtException.indexOf(e)>-1}),unhandledRejection:a.listeners("unhandledRejection").filter(function(e){return!c.unhandledRejection.indexOf(e)>-1})}),"undefined"!=typeof WasmBackendModule)N=WasmBackendModule;else if(void 0!==e)N=e;else throw Error("Could not find wasm module in post.js");if(T){var ez=N._dispose;N._dispose=function(){ez(),T.uncaughtException.forEach(function(e){a.removeListener("uncaughtException",e)}),T.unhandledRejection.forEach(function(e){a.removeListener("unhandledRejection",e)})}}return e.ready});e.exports=o},6743:function(e){e.exports.g=`"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"
");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};`},63110:function(e,t,r){var n,a=r(40257),o=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,o,i,s,l,u,c,d,p,h,f,m,g,y,v,b,w,k=void 0!==(e=e||{})?e:{};k.ready=new Promise(function(e,t){o=e,i=t}),void 0!==a&&a.listeners&&(s={uncaughtException:a.listeners("uncaughtException"),unhandledRejection:a.listeners("unhandledRejection")});var S=Object.assign({},k),x=[],_="object"==typeof window,I="function"==typeof importScripts,E="object"==typeof a&&"object"==typeof a.versions&&"string"==typeof a.versions.node,T="";if(E){var N=r(47256),A=r(2980);T=I?A.dirname(T)+"/":"//",l=(e,t)=>(e=V(e)?new URL(e):A.normalize(e),N.readFileSync(e,t?void 0:"utf8")),c=e=>{var t=l(e,!0);return t.buffer||(t=new Uint8Array(t)),t},u=(e,t,r)=>{e=V(e)?new URL(e):A.normalize(e),N.readFile(e,function(e,n){e?r(e):t(n.buffer)})},a.argv.length>1&&a.argv[1].replace(/\\/g,"/"),x=a.argv.slice(2),a.on("uncaughtException",function(e){if(!(e instanceof G))throw e}),a.on("unhandledRejection",function(e){throw e}),k.inspect=function(){return"[Emscripten Module object]"}}else(_||I)&&(I?T=self.location.href:"undefined"!=typeof document&&document.currentScript&&(T=document.currentScript.src),n&&(T=n),T=0!==T.indexOf("blob:")?T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):"",l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},I&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(200==n.status||0==n.status&&n.response){t(n.response);return}r()},n.onerror=r,n.send(null)});var C=k.print||console.log.bind(console),M=k.printErr||console.warn.bind(console);Object.assign(k,S),S=null,k.arguments&&(x=k.arguments),k.thisProgram&&k.thisProgram,k.quit&&k.quit,k.wasmBinary&&(d=k.wasmBinary),k.noExitRuntime,"object"!=typeof WebAssembly&&U("no native wasm support detected");var R=!1,O="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function F(e,t,r){for(var n=(t>>>=0)+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&O)return O.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(!(128&i)){o+=String.fromCharCode(i);continue}var s=63&e[t++];if((224&i)==192){o+=String.fromCharCode((31&i)<<6|s);continue}var l=63&e[t++];if((i=(240&i)==224?(15&i)<<12|s<<6|l:(7&i)<<18|s<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}return o}function D(e){h=e,k.HEAP8=f=new Int8Array(e),k.HEAP16=new Int16Array(e),k.HEAP32=new Int32Array(e),k.HEAPU8=m=new Uint8Array(e),k.HEAPU16=new Uint16Array(e),k.HEAPU32=g=new Uint32Array(e),k.HEAPF32=new Float32Array(e),k.HEAPF64=new Float64Array(e)}k.INITIAL_MEMORY;var P=[],$=[],L=[],B=0,z=null,W=null;function U(e){k.onAbort&&k.onAbort(e),M(e="Aborted("+e+")"),R=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw i(t),t}function j(e){return e.startsWith("data:application/octet-stream;base64,")}function V(e){return e.startsWith("file://")}function H(e){try{if(e==y&&d)return new Uint8Array(d);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){U(e)}}function G(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function q(e){for(;e.length>0;)e.shift()(k)}function K(){return 4294901760}j(y="tfjs-backend-wasm.wasm")||(t=y,y=k.locateFile?k.locateFile(t,T):T+t);var Y=[null,[],[]],X={abort:function(){U("")},emscripten_get_heap_max:function(){return K()},emscripten_memcpy_big:function(e,t,r){m.copyWithin(e>>>0,t>>>0,t+r>>>0)},emscripten_resize_heap:function(e){var t=m.length;e>>>=0;var r=K();if(e>r)return!1;let n=(e,t)=>e+(t-e%t)%t;for(var a=1;a<=4;a*=2){var o=t*(1+.2/a);if(o=Math.min(o,e+100663296),function(e){try{return p.grow(e-h.byteLength+65535>>>16),D(p.buffer),1}catch(e){}}(Math.min(r,n(Math.max(e,o),65536))))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,t,r,n,a){return 70},fd_write:function(e,t,r,n){for(var a=0,o=0;o<r;o++){var i=g[t>>>2],s=g[t+4>>>2];t+=8;for(var l=0;l<s;l++)!function(e,t){var r=Y[e];0===t||10===t?((1===e?C:M)(F(r,0)),r.length=0):r.push(t)}(e,m[i+l>>>0]);a+=s}return g[n>>>2]=a,0}};(function(){var e={env:X,wasi_snapshot_preview1:X};function t(e,t){var r,n=e.exports;k.asm=n,D((p=k.asm.memory).buffer),k.asm.__indirect_function_table,r=k.asm.__wasm_call_ctors,$.unshift(r),function(e){if(B--,k.monitorRunDependencies&&k.monitorRunDependencies(B),0==B&&(null!==z&&(clearInterval(z),z=null),W)){var t=W;W=null,t()}}(0)}function r(e){t(e.instance)}function n(t){return(function(){if(!d&&(_||I)){if("function"==typeof fetch&&!V(y))return fetch(y,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+y+"'";return e.arrayBuffer()}).catch(function(){return H(y)});if(u)return new Promise(function(e,t){u(y,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return H(y)})})().then(function(t){return WebAssembly.instantiate(t,e)}).then(function(e){return e}).then(t,function(e){M("failed to asynchronously prepare wasm: "+e),U(e)})}if(B++,k.monitorRunDependencies&&k.monitorRunDependencies(B),k.instantiateWasm)try{return k.instantiateWasm(e,t)}catch(e){M("Module.instantiateWasm callback failed with error: "+e),i(e)}(d||"function"!=typeof WebAssembly.instantiateStreaming||j(y)||V(y)||E||"function"!=typeof fetch?n(r):fetch(y,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(r,function(e){return M("wasm streaming compile failed: "+e),M("falling back to ArrayBuffer instantiation"),n(r)})})).catch(i)})(),k.___wasm_call_ctors=function(){return(k.___wasm_call_ctors=k.asm.__wasm_call_ctors).apply(null,arguments)},k._init=function(){return(k._init=k.asm.init).apply(null,arguments)},k._init_with_threads_count=function(){return(k._init_with_threads_count=k.asm.init_with_threads_count).apply(null,arguments)},k._get_threads_count=function(){return(k._get_threads_count=k.asm.get_threads_count).apply(null,arguments)},k._register_tensor=function(){return(k._register_tensor=k.asm.register_tensor).apply(null,arguments)},k._dispose_data=function(){return(k._dispose_data=k.asm.dispose_data).apply(null,arguments)},k._dispose=function(){return(k._dispose=k.asm.dispose).apply(null,arguments)},k._Abs=function(){return(k._Abs=k.asm.Abs).apply(null,arguments)},k._Acos=function(){return(k._Acos=k.asm.Acos).apply(null,arguments)},k._Acosh=function(){return(k._Acosh=k.asm.Acosh).apply(null,arguments)},k._Add=function(){return(k._Add=k.asm.Add).apply(null,arguments)},k._AddN=function(){return(k._AddN=k.asm.AddN).apply(null,arguments)},k._All=function(){return(k._All=k.asm.All).apply(null,arguments)},k._Any=function(){return(k._Any=k.asm.Any).apply(null,arguments)},k._ArgMax=function(){return(k._ArgMax=k.asm.ArgMax).apply(null,arguments)},k._ArgMin=function(){return(k._ArgMin=k.asm.ArgMin).apply(null,arguments)},k._Asin=function(){return(k._Asin=k.asm.Asin).apply(null,arguments)},k._Asinh=function(){return(k._Asinh=k.asm.Asinh).apply(null,arguments)},k._Atan=function(){return(k._Atan=k.asm.Atan).apply(null,arguments)},k._Atan2=function(){return(k._Atan2=k.asm.Atan2).apply(null,arguments)},k._Atanh=function(){return(k._Atanh=k.asm.Atanh).apply(null,arguments)},k._AvgPool=function(){return(k._AvgPool=k.asm.AvgPool).apply(null,arguments)},k._AvgPool3D=function(){return(k._AvgPool3D=k.asm.AvgPool3D).apply(null,arguments)},k._AvgPool3DGrad=function(){return(k._AvgPool3DGrad=k.asm.AvgPool3DGrad).apply(null,arguments)},k._AvgPoolGrad=function(){return(k._AvgPoolGrad=k.asm.AvgPoolGrad).apply(null,arguments)},k._BatchMatMul=function(){return(k._BatchMatMul=k.asm.BatchMatMul).apply(null,arguments)},k._Bincount=function(){return(k._Bincount=k.asm.Bincount).apply(null,arguments)},k._BitwiseAnd=function(){return(k._BitwiseAnd=k.asm.BitwiseAnd).apply(null,arguments)},k._Ceil=function(){return(k._Ceil=k.asm.Ceil).apply(null,arguments)},k._ClipByValue=function(){return(k._ClipByValue=k.asm.ClipByValue).apply(null,arguments)},k._Conv2D=function(){return(k._Conv2D=k.asm.Conv2D).apply(null,arguments)},k._Conv2DBackpropInput=function(){return(k._Conv2DBackpropInput=k.asm.Conv2DBackpropInput).apply(null,arguments)},k._Conv3D=function(){return(k._Conv3D=k.asm.Conv3D).apply(null,arguments)},k._Conv3DBackpropFilterV2=function(){return(k._Conv3DBackpropFilterV2=k.asm.Conv3DBackpropFilterV2).apply(null,arguments)},k._Conv3DBackpropInputV2=function(){return(k._Conv3DBackpropInputV2=k.asm.Conv3DBackpropInputV2).apply(null,arguments)},k._Cos=function(){return(k._Cos=k.asm.Cos).apply(null,arguments)},k._Cosh=function(){return(k._Cosh=k.asm.Cosh).apply(null,arguments)},k._CropAndResize=function(){return(k._CropAndResize=k.asm.CropAndResize).apply(null,arguments)},k._Cumprod=function(){return(k._Cumprod=k.asm.Cumprod).apply(null,arguments)},k._Cumsum=function(){return(k._Cumsum=k.asm.Cumsum).apply(null,arguments)},k._DenseBincount=function(){return(k._DenseBincount=k.asm.DenseBincount).apply(null,arguments)},k._DepthToSpace=function(){return(k._DepthToSpace=k.asm.DepthToSpace).apply(null,arguments)},k._DepthwiseConv2dNative=function(){return(k._DepthwiseConv2dNative=k.asm.DepthwiseConv2dNative).apply(null,arguments)},k._Diag=function(){return(k._Diag=k.asm.Diag).apply(null,arguments)},k._Dilation2D=function(){return(k._Dilation2D=k.asm.Dilation2D).apply(null,arguments)},k._Dilation2DBackpropFilter=function(){return(k._Dilation2DBackpropFilter=k.asm.Dilation2DBackpropFilter).apply(null,arguments)},k._Dilation2DBackpropInput=function(){return(k._Dilation2DBackpropInput=k.asm.Dilation2DBackpropInput).apply(null,arguments)},k._Elu=function(){return(k._Elu=k.asm.Elu).apply(null,arguments)},k._EluGrad=function(){return(k._EluGrad=k.asm.EluGrad).apply(null,arguments)},k._Equal=function(){return(k._Equal=k.asm.Equal).apply(null,arguments)},k._Erf=function(){return(k._Erf=k.asm.Erf).apply(null,arguments)},k._Exp=function(){return(k._Exp=k.asm.Exp).apply(null,arguments)},k._Expm1=function(){return(k._Expm1=k.asm.Expm1).apply(null,arguments)},k._FlipLeftRight=function(){return(k._FlipLeftRight=k.asm.FlipLeftRight).apply(null,arguments)},k._Floor=function(){return(k._Floor=k.asm.Floor).apply(null,arguments)},k._FloorDiv=function(){return(k._FloorDiv=k.asm.FloorDiv).apply(null,arguments)},k._FusedBatchNorm=function(){return(k._FusedBatchNorm=k.asm.FusedBatchNorm).apply(null,arguments)},k._FusedConv2D=function(){return(k._FusedConv2D=k.asm.FusedConv2D).apply(null,arguments)},k._FusedDepthwiseConv2D=function(){return(k._FusedDepthwiseConv2D=k.asm.FusedDepthwiseConv2D).apply(null,arguments)},k._Gather=function(){return(k._Gather=k.asm.Gather).apply(null,arguments)},k._GatherNd=function(){return(k._GatherNd=k.asm.GatherNd).apply(null,arguments)},k._Greater=function(){return(k._Greater=k.asm.Greater).apply(null,arguments)},k._GreaterEqual=function(){return(k._GreaterEqual=k.asm.GreaterEqual).apply(null,arguments)},k._IsFinite=function(){return(k._IsFinite=k.asm.IsFinite).apply(null,arguments)},k._IsInf=function(){return(k._IsInf=k.asm.IsInf).apply(null,arguments)},k._IsNan=function(){return(k._IsNan=k.asm.IsNan).apply(null,arguments)},k._LRN=function(){return(k._LRN=k.asm.LRN).apply(null,arguments)},k._LRNGrad=function(){return(k._LRNGrad=k.asm.LRNGrad).apply(null,arguments)},k._LeakyRelu=function(){return(k._LeakyRelu=k.asm.LeakyRelu).apply(null,arguments)},k._Less=function(){return(k._Less=k.asm.Less).apply(null,arguments)},k._LessEqual=function(){return(k._LessEqual=k.asm.LessEqual).apply(null,arguments)},k._LinSpace=function(){return(k._LinSpace=k.asm.LinSpace).apply(null,arguments)},k._Log=function(){return(k._Log=k.asm.Log).apply(null,arguments)},k._Log1p=function(){return(k._Log1p=k.asm.Log1p).apply(null,arguments)},k._LogicalAnd=function(){return(k._LogicalAnd=k.asm.LogicalAnd).apply(null,arguments)},k._LogicalNot=function(){return(k._LogicalNot=k.asm.LogicalNot).apply(null,arguments)},k._LogicalOr=function(){return(k._LogicalOr=k.asm.LogicalOr).apply(null,arguments)},k._LogicalXor=function(){return(k._LogicalXor=k.asm.LogicalXor).apply(null,arguments)},k._Max=function(){return(k._Max=k.asm.Max).apply(null,arguments)},k._MaxPool=function(){return(k._MaxPool=k.asm.MaxPool).apply(null,arguments)},k._MaxPool3D=function(){return(k._MaxPool3D=k.asm.MaxPool3D).apply(null,arguments)},k._MaxPool3DGrad=function(){return(k._MaxPool3DGrad=k.asm.MaxPool3DGrad).apply(null,arguments)},k._MaxPoolGrad=function(){return(k._MaxPoolGrad=k.asm.MaxPoolGrad).apply(null,arguments)},k._MaxPoolWithArgmax=function(){return(k._MaxPoolWithArgmax=k.asm.MaxPoolWithArgmax).apply(null,arguments)},k._Maximum=function(){return(k._Maximum=k.asm.Maximum).apply(null,arguments)},k._Mean=function(){return(k._Mean=k.asm.Mean).apply(null,arguments)},k._Min=function(){return(k._Min=k.asm.Min).apply(null,arguments)},k._Minimum=function(){return(k._Minimum=k.asm.Minimum).apply(null,arguments)},k._MirrorPad=function(){return(k._MirrorPad=k.asm.MirrorPad).apply(null,arguments)},k._Mod=function(){return(k._Mod=k.asm.Mod).apply(null,arguments)},k._Multinomial=function(){return(k._Multinomial=k.asm.Multinomial).apply(null,arguments)},k._Multiply=function(){return(k._Multiply=k.asm.Multiply).apply(null,arguments)},k._Neg=function(){return(k._Neg=k.asm.Neg).apply(null,arguments)},k._NonMaxSuppressionV3=function(){return(k._NonMaxSuppressionV3=k.asm.NonMaxSuppressionV3).apply(null,arguments)},k._NonMaxSuppressionV4=function(){return(k._NonMaxSuppressionV4=k.asm.NonMaxSuppressionV4).apply(null,arguments)},k._NonMaxSuppressionV5=function(){return(k._NonMaxSuppressionV5=k.asm.NonMaxSuppressionV5).apply(null,arguments)},k._NotEqual=function(){return(k._NotEqual=k.asm.NotEqual).apply(null,arguments)},k._OneHot=function(){return(k._OneHot=k.asm.OneHot).apply(null,arguments)},k._PadV2=function(){return(k._PadV2=k.asm.PadV2).apply(null,arguments)},k._Pow=function(){return(k._Pow=k.asm.Pow).apply(null,arguments)},k._Prelu=function(){return(k._Prelu=k.asm.Prelu).apply(null,arguments)},k._Prod=function(){return(k._Prod=k.asm.Prod).apply(null,arguments)},k._RealDiv=function(){return(k._RealDiv=k.asm.RealDiv).apply(null,arguments)},k._Reciprocal=function(){return(k._Reciprocal=k.asm.Reciprocal).apply(null,arguments)},k._Relu=function(){return(k._Relu=k.asm.Relu).apply(null,arguments)},k._Relu6=function(){return(k._Relu6=k.asm.Relu6).apply(null,arguments)},k._ResizeBilinear=function(){return(k._ResizeBilinear=k.asm.ResizeBilinear).apply(null,arguments)},k._ResizeBilinearGrad=function(){return(k._ResizeBilinearGrad=k.asm.ResizeBilinearGrad).apply(null,arguments)},k._ResizeNearestNeighbor=function(){return(k._ResizeNearestNeighbor=k.asm.ResizeNearestNeighbor).apply(null,arguments)},k._ResizeNearestNeighborGrad=function(){return(k._ResizeNearestNeighborGrad=k.asm.ResizeNearestNeighborGrad).apply(null,arguments)},k._Reverse=function(){return(k._Reverse=k.asm.Reverse).apply(null,arguments)},k._RotateWithOffset=function(){return(k._RotateWithOffset=k.asm.RotateWithOffset).apply(null,arguments)},k._Round=function(){return(k._Round=k.asm.Round).apply(null,arguments)},k._Rsqrt=function(){return(k._Rsqrt=k.asm.Rsqrt).apply(null,arguments)},k._ScatterNd=function(){return(k._ScatterNd=k.asm.ScatterNd).apply(null,arguments)},k._SearchSorted=function(){return(k._SearchSorted=k.asm.SearchSorted).apply(null,arguments)},k._SelectV2=function(){return(k._SelectV2=k.asm.SelectV2).apply(null,arguments)},k._Selu=function(){return(k._Selu=k.asm.Selu).apply(null,arguments)},k._Sigmoid=function(){return(k._Sigmoid=k.asm.Sigmoid).apply(null,arguments)},k._Sign=function(){return(k._Sign=k.asm.Sign).apply(null,arguments)},k._Sin=function(){return(k._Sin=k.asm.Sin).apply(null,arguments)},k._Sinh=function(){return(k._Sinh=k.asm.Sinh).apply(null,arguments)},k._Softmax=function(){return(k._Softmax=k.asm.Softmax).apply(null,arguments)},k._Softplus=function(){return(k._Softplus=k.asm.Softplus).apply(null,arguments)},k._SparseFillEmptyRows=function(){return(k._SparseFillEmptyRows=k.asm.SparseFillEmptyRows).apply(null,arguments)},k._SparseReshape=function(){return(k._SparseReshape=k.asm.SparseReshape).apply(null,arguments)},k._SparseSegmentReduction=function(){return(k._SparseSegmentReduction=k.asm.SparseSegmentReduction).apply(null,arguments)},k._SparseToDense=function(){return(k._SparseToDense=k.asm.SparseToDense).apply(null,arguments)},k._Sqrt=function(){return(k._Sqrt=k.asm.Sqrt).apply(null,arguments)},k._Square=function(){return(k._Square=k.asm.Square).apply(null,arguments)},k._SquaredDifference=function(){return(k._SquaredDifference=k.asm.SquaredDifference).apply(null,arguments)},k._Step=function(){return(k._Step=k.asm.Step).apply(null,arguments)},k._StridedSlice=function(){return(k._StridedSlice=k.asm.StridedSlice).apply(null,arguments)},k._Sub=function(){return(k._Sub=k.asm.Sub).apply(null,arguments)},k._Sum=function(){return(k._Sum=k.asm.Sum).apply(null,arguments)},k._Tan=function(){return(k._Tan=k.asm.Tan).apply(null,arguments)},k._Tanh=function(){return(k._Tanh=k.asm.Tanh).apply(null,arguments)},k._TensorScatterUpdate=function(){return(k._TensorScatterUpdate=k.asm.TensorScatterUpdate).apply(null,arguments)},k._Tile=function(){return(k._Tile=k.asm.Tile).apply(null,arguments)},k._TopK=function(){return(k._TopK=k.asm.TopK).apply(null,arguments)},k._Transform=function(){return(k._Transform=k.asm.Transform).apply(null,arguments)},k._Transpose=function(){return(k._Transpose=k.asm.Transpose).apply(null,arguments)},k.__FusedMatMul=function(){return(k.__FusedMatMul=k.asm._FusedMatMul).apply(null,arguments)},k._malloc=function(){return(k._malloc=k.asm.malloc).apply(null,arguments)},k._free=function(){return(k._free=k.asm.free).apply(null,arguments)},k.___errno_location=function(){return(k.___errno_location=k.asm.__errno_location).apply(null,arguments)};var Q=k.stackSave=function(){return(Q=k.stackSave=k.asm.stackSave).apply(null,arguments)},Z=k.stackRestore=function(){return(Z=k.stackRestore=k.asm.stackRestore).apply(null,arguments)},J=k.stackAlloc=function(){return(J=k.stackAlloc=k.asm.stackAlloc).apply(null,arguments)};function ee(e){e=e||x,!(B>0)&&(function(){if(k.preRun)for("function"==typeof k.preRun&&(k.preRun=[k.preRun]);k.preRun.length;){var e;e=k.preRun.shift(),P.unshift(e)}q(P)}(),B>0||(k.setStatus?(k.setStatus("Running..."),setTimeout(function(){setTimeout(function(){k.setStatus("")},1),t()},1)):t()));function t(){!v&&(v=!0,k.calledRun=!0,R||(q($),o(k),k.onRuntimeInitialized&&k.onRuntimeInitialized(),function(){if(k.postRun)for("function"==typeof k.postRun&&(k.postRun=[k.postRun]);k.postRun.length;){var e;e=k.postRun.shift(),L.unshift(e)}q(L)}()))}}if(k.dynCall_iijjiiii=function(){return(k.dynCall_iijjiiii=k.asm.dynCall_iijjiiii).apply(null,arguments)},k.dynCall_jiji=function(){return(k.dynCall_jiji=k.asm.dynCall_jiji).apply(null,arguments)},k.cwrap=function(e,t,r,n){var a=(r=r||[]).every(e=>"number"===e||"boolean"===e);return"string"!==t&&a&&!n?k["_"+e]:function(){return function(e,t,r,n,a){var o,i,s={string:e=>{var t=0;if(null!=e&&0!==e){var r=(e.length<<2)+1;t=J(r),function(e,t,r,n){if(r>>>=0,n>0){for(var a=r+n-1,o=0;o<e.length;++o){var i=e.charCodeAt(o);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),i<=127){if(r>=a)break;t[r++>>>0]=i}else if(i<=2047){if(r+1>=a)break;t[r++>>>0]=192|i>>6,t[r++>>>0]=128|63&i}else if(i<=65535){if(r+2>=a)break;t[r++>>>0]=224|i>>12,t[r++>>>0]=128|i>>6&63,t[r++>>>0]=128|63&i}else{if(r+3>=a)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63,t[r++>>>0]=128|i>>6&63,t[r++>>>0]=128|63&i}}t[r>>>0]=0}}(e,m,t,r)}return t},array:e=>{var t=J(e.length);return f.set(e,t>>>0),t}},l=k["_"+e],u=[],c=0;if(n)for(var d=0;d<n.length;d++){var p=s[r[d]];p?(0===c&&(c=Q()),u[d]=p(n[d])):u[d]=n[d]}var h=l.apply(null,u);return i=h,0!==c&&Z(c),h="string"===t?(o=i>>>0)?F(m,o,void 0):"":"boolean"===t?!!i:i}(e,t,r,arguments,0)}},W=function e(){v||ee(),v||(W=e)},k.preInit)for("function"==typeof k.preInit&&(k.preInit=[k.preInit]);k.preInit.length>0;)k.preInit.pop()();if(ee(),s&&(b={uncaughtException:a.listeners("uncaughtException").filter(function(e){return!s.uncaughtException.indexOf(e)>-1}),unhandledRejection:a.listeners("unhandledRejection").filter(function(e){return!s.unhandledRejection.indexOf(e)>-1})}),void 0!==e)w=e;else if("undefined"!=typeof WasmBackendModuleThreadedSimd)w=WasmBackendModuleThreadedSimd;else throw Error("Could not find wasm module in post.js");if(b){var et=w._dispose;w._dispose=function(){et(),b.uncaughtException.forEach(function(e){a.removeListener("uncaughtException",e)}),b.unhandledRejection.forEach(function(e){a.removeListener("unhandledRejection",e)})}}return e.ready});e.exports=o},73493:function(e){var t;t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,(function(t){return e[t]}).bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),a=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var a=e.getVersionPrecision(t),o=e.getVersionPrecision(r),i=Math.max(a,o),s=0,l=e.map([t,r],function(t){var r=i-e.getVersionPrecision(t),n=t+Array(r+1).join(".0");return e.map(n.split("."),function(e){return Array(20-e.length).join("0")+e}).reverse()});for(n&&(s=i-Math.min(a,o)),i-=1;i>=s;){if(l[0][i]>l[1][i])return 1;if(l[0][i]===l[1][i]){if(i===s)return 0;i-=1}else if(l[0][i]<l[1][i])return -1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var a=e[r];if(t(a,r))return a}},e.assign=function(e){for(var t,r,n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(a));for(t=0,r=a.length;t<r;t+=1)(function(){var r=a[t];"object"==typeof r&&null!==r&&Object.keys(r).forEach(function(t){e[t]=r[t]})})();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=a,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(91))&&n.__esModule?n:{default:n},o=r(18),i=function(){function e(){}return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw Error("UserAgent should be a string");return new a.default(e,t)},e.parse=function(e){return new a.default(e).getResult()},function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e,[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}]),e}();t.default=i,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=l(r(92)),a=l(r(93)),o=l(r(94)),i=l(r(95)),s=l(r(17));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(n.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(a.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,a={},o=0;if(Object.keys(e).forEach(function(t){var i=e[t];"string"==typeof i?(a[t]=i,o+=1):"object"==typeof i&&(r[t]=i,n+=1)}),n>0){var i=Object.keys(r),l=s.default.find(i,function(e){return t.isOS(e)});if(l){var u=this.satisfies(r[l]);if(void 0!==u)return u}var c=s.default.find(i,function(e){return t.isPlatform(e)});if(c){var d=this.satisfies(r[c]);if(void 0!==d)return d}}if(o>0){var p=Object.keys(a),h=s.default.find(p,function(e){return t.isBrowser(e,!0)});if(void 0!==h)return this.compareVersion(a[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),a=s.default.getBrowserTypeByAlias(n);return t&&a&&(n=a.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,a=this.getBrowserVersion();if("string"==typeof a)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(s.default.compareVersions(a,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=u,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},o=/version\/(\d+(\.?_?\d+)+)/i,i=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=a.default.getFirstMatch(o,e)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=a.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(t,e),version:a.default.getSecondMatch(t,e)}}}];t.default=i,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),i=[{test:[/Roku\/DVP/],describe:function(e){var t=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=a.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},r=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=a.default.getMacOSVersionName(t),n={name:o.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=a.default.getAndroidVersionName(t),n={name:o.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:o.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||a.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=i,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),i=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=a.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=a.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=i,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),i=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},r=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},r=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},r=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},r=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=i,e.exports=t.default}})},e.exports=t()},23910:function(e,t,r){var n=r(74288).Symbol;e.exports=n},73819:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}},76378:function(e){e.exports=function(e,t,r,n){var a=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++a]);++a<o;)r=t(r,e[a],a,e);return r}},59652:function(e){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},54506:function(e,t,r){var n=r(23910),a=r(4479),o=r(80910),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},98880:function(e){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},65020:function(e,t,r){var n=r(23910),a=r(73819),o=r(25614),i=r(78371),s=1/0,l=n?n.prototype:void 0,u=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return a(t,e)+"";if(i(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-s?"-0":r}},82638:function(e,t,r){var n=r(76378),a=r(42143),o=r(67512),i=RegExp("[']","g");e.exports=function(e){return function(t){return n(o(a(t).replace(i,"")),e,"")}}},62167:function(e,t,r){var n=r(98880)({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"});e.exports=n},17071:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},4479:function(e,t,r){var n=r(23910),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[s]=r:delete e[s]),a}},27926:function(e){var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},80910:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},74288:function(e,t,r){var n=r(17071),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},79269:function(e){var t="\ud800-\udfff",r="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",a="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="[']",s="["+o+"]",l="["+n+"]",u="[^"+t+o+"\\d+"+r+n+a+"]",c="(?:\ud83c[\udde6-\uddff]){2}",d="[\ud800-\udbff][\udc00-\udfff]",p="["+a+"]",h="(?:"+l+"|"+u+")",f="(?:"+i+"(?:d|ll|m|re|s|t|ve))?",m="(?:"+i+"(?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\ud83c[\udffb-\udfff])?",y="[\\ufe0e\\ufe0f]?",v="(?:\\u200d(?:"+["[^"+t+"]",c,d].join("|")+")"+y+g+")*",b="(?:"+["["+r+"]",c,d].join("|")+")"+(y+g+v),w=RegExp([p+"?"+l+"+"+f+"(?="+[s,p,"$"].join("|")+")","(?:"+p+"|"+u+")+"+m+"(?="+[s,p+h,"$"].join("|")+")",p+"?"+h+"+"+f,p+"+"+m,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",b].join("|"),"g");e.exports=function(e){return e.match(w)||[]}},42143:function(e,t,r){var n=r(62167),a=r(3641),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=a(e))&&e.replace(o,n).replace(i,"")}},25614:function(e){var t=Array.isArray;e.exports=t},10303:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},78371:function(e,t,r){var n=r(54506),a=r(10303);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},42798:function(e,t,r){var n=r(82638)(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()});e.exports=n},3641:function(e,t,r){var n=r(65020);e.exports=function(e){return null==e?"":n(e)}},67512:function(e,t,r){var n=r(59652),a=r(27926),o=r(3641),i=r(79269);e.exports=function(e,t,r){return(e=o(e),void 0===(t=r?void 0:t))?a(e)?i(e):n(e):e.match(t)||[]}},398:function(e){e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var a={},o={};function i(e,t){var r,n,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(n=o[e]))?n:(r=l(e,(0|e)<0?-1:0,!0),i&&(o[e]=r),r):(e|=0,(i=-128<=e&&e<128)&&(n=a[e]))?n:(r=l(e,e<0?-1:0,!1),i&&(a[e]=r),r)}function s(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=h)return S}else{if(e<=-f)return x;if(e+1>=f)return k}return e<0?s(-e,t).neg():l(e%p|0,e/p|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=i,r.fromNumber=s,r.fromBits=l;var u=Math.pow;function c(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return c(e.substring(1),t,r).neg();for(var n,a=s(u(r,8)),o=g,i=0;i<e.length;i+=8){var l=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+l),r);if(l<8){var p=s(u(r,l));o=o.mul(p).add(s(d))}else o=(o=o.mul(a)).add(s(d))}return o.unsigned=t,o}function d(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?c(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=c,r.fromValue=d;var p=4294967296,h=18446744073709552e3,f=0x7fffffffffffffff,m=i(16777216),g=i(0);r.ZERO=g;var y=i(0,!0);r.UZERO=y;var v=i(1);r.ONE=v;var b=i(1,!0);r.UONE=b;var w=i(-1);r.NEG_ONE=w;var k=l(-1,2147483647,!1);r.MAX_VALUE=k;var S=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=S;var x=l(0,-2147483648,!1);r.MIN_VALUE=x;var _=r.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},_.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(x))return"-"+this.neg().toString(e);var t=s(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}for(var a=s(u(e,6),this.unsigned),o=this,i="";;){var l=o.div(a),c=(o.sub(l.mul(a)).toInt()>>>0).toString(e);if((o=l).isZero())return c+i;for(;c.length<6;)c="0"+c;i=""+c+i}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(1&this.low)==1},_.isEven=function(){return(1&this.low)==0},_.equals=function(e){return n(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},_.eq=_.equals,_.notEquals=function(e){return!this.eq(e)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(e){return 0>this.comp(e)},_.lt=_.lessThan,_.lessThanOrEqual=function(e){return 0>=this.comp(e)},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(e){return this.comp(e)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(e){return this.comp(e)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(e){if(n(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(v)},_.neg=_.negate,_.add=function(e){n(e)||(e=d(e));var t,r,a=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,u=e.high>>>16,c=65535&e.high,p=e.low>>>16,h=65535&e.low,f=0,m=0;return t=0+((r=0+(s+h))>>>16),r&=65535,t+=i+p,m+=t>>>16,t&=65535,m+=o+c,f+=m>>>16,m&=65535,f+=a+u,l(t<<16|r,(f&=65535)<<16|m,this.unsigned)},_.subtract=function(e){return n(e)||(e=d(e)),this.add(e.neg())},_.sub=_.subtract,_.multiply=function(e){if(this.isZero())return g;if(n(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(x))return e.isOdd()?x:g;if(e.eq(x))return this.isOdd()?x:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var r,a,o=this.high>>>16,i=65535&this.high,u=this.low>>>16,c=65535&this.low,p=e.high>>>16,h=65535&e.high,f=e.low>>>16,y=65535&e.low,v=0,b=0;return r=0+((a=0+c*y)>>>16),a&=65535,r+=u*y,b+=r>>>16,r&=65535,r+=c*f,b+=r>>>16,r&=65535,b+=i*y,v+=b>>>16,b&=65535,b+=u*f,v+=b>>>16,b&=65535,b+=c*h,v+=b>>>16,b&=65535,v+=o*y+i*f+u*h+c*p,l(r<<16|a,(v&=65535)<<16|b,this.unsigned)},_.mul=_.multiply,_.divide=function(e){if(n(e)||(e=d(e)),e.isZero())throw Error("division by zero");if(t){var r,a,o;return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;o=y}else{if(this.eq(x))return e.eq(v)||e.eq(w)?x:e.eq(x)?v:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:w:(a=this.sub(e.mul(r)),o=r.add(a.div(e)));if(e.eq(x))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(a=this;a.gte(e);){for(var i=Math.ceil(Math.log(r=Math.max(1,Math.floor(a.toNumber()/e.toNumber())))/Math.LN2),c=i<=48?1:u(2,i-48),p=s(r),h=p.mul(e);h.isNegative()||h.gt(a);)r-=c,h=(p=s(r,this.unsigned)).mul(e);p.isZero()&&(p=v),o=o.add(p),a=a.sub(h)}return o},_.div=_.divide,_.modulo=function(e){return(n(e)||(e=d(e)),t)?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return l(~this.low,~this.high,this.unsigned)},_.and=function(e){return n(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},_.or=function(e){return n(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},_.xor=function(e){return n(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},_.shiftLeft=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):32===e?l(t,0,this.unsigned):l(t>>>e-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},_.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},_.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},59900:function(e,t,r){var n=r(54170),a=r(56085),o=r(96543),i=r(51871),s=r(55794),l=r(71849),u=r(13957);u.alea=n,u.xor128=a,u.xorwow=o,u.xorshift7=i,u.xor4096=s,u.tychei=l,e.exports=u},54170:function(e,t,r){var n;!function(e,a,o){function i(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));t=n>>>0,n-=t,n*=t,t=n>>>0,n-=t,t+=4294967296*n}return(t>>>0)*23283064365386963e-26});r.next=function(){var e=2091639*r.s0+23283064365386963e-26*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1)}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var r=new i(e),n=t&&t.state,a=r.next;return a.int32=function(){return 4294967296*r.next()|0},a.double=function(){return a()+(2097152*a()|0)*11102230246251565e-32},a.quick=a,n&&("object"==typeof n&&s(n,r),a.state=function(){return s(r,{})}),a}a&&a.exports?a.exports=l:r.amdD&&r.amdO?void 0!==(n=(function(){return l}).call(t,r,t,a))&&(a.exports=n):this.alea=l}(0,e=r.nmd(e),r.amdD)},71849:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,a=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=r.next,a.quick=a,n&&("object"==typeof n&&s(n,r),a.state=function(){return s(r,{})}),a}a&&a.exports?a.exports=l:r.amdD&&r.amdO?void 0!==(n=(function(){return l}).call(t,r,t,a))&&(a.exports=n):this.tychei=l}(0,e=r.nmd(e),r.amdD)},56085:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=r.next,a.quick=a,n&&("object"==typeof n&&s(n,r),a.state=function(){return s(r,{})}),a}a&&a.exports?a.exports=l:r.amdD&&r.amdO?void 0!==(n=(function(){return l}).call(t,r,t,a))&&(a.exports=n):this.xor128=l}(0,e=r.nmd(e),r.amdD)},55794:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,r,n=t.w,a=t.X,o=t.i;return t.w=n=n+1640531527|0,r=a[o+34&127],e=a[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=a[o]=r^e,t.i=o,r+(n^n>>>16)|0},function(e,t){var r,n,a,o,i,s=[],l=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,l=Math.max(l,t.length)),a=0,o=-32;o<l;++o)t&&(n^=t.charCodeAt((o+32)%t.length)),0===o&&(i=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,o>=0&&(i=i+1640531527|0,a=0==(r=s[127&o]^=n+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)n=s[a+34&127],r=s[a=a+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,s[a]=n^r;e.w=i,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=r.next,a.quick=a,n&&(n.X&&s(n,r),a.state=function(){return s(r,{})}),a}a&&a.exports?a.exports=l:r.amdD&&r.amdO?void 0!==(n=(function(){return l}).call(t,r,t,a))&&(a.exports=n):this.xor4096=l}(0,e=r.nmd(e),r.amdD)},51871:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,r,n=t.x,a=t.i;return e=n[a],e^=e>>>7,r=e^e<<24^((e=n[a+1&7])^e>>>10)^((e=n[a+3&7])^e>>>3)^((e=n[a+4&7])^e<<7),e=n[a+7&7],e^=e<<13,r^=e^e<<9,n[a]=r,t.i=a+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(r=0,t=""+t;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=r.next,a.quick=a,n&&(n.x&&s(n,r),a.state=function(){return s(r,{})}),a}a&&a.exports?a.exports=l:r.amdD&&r.amdO?void 0!==(n=(function(){return l}).call(t,r,t,a))&&(a.exports=n):this.xorshift7=l}(0,e=r.nmd(e),r.amdD)},96543:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=r.next,a.quick=a,n&&("object"==typeof n&&s(n,r),a.state=function(){return s(r,{})}),a}a&&a.exports?a.exports=l:r.amdD&&r.amdO?void 0!==(n=(function(){return l}).call(t,r,t,a))&&(a.exports=n):this.xorwow=l}(0,e=r.nmd(e),r.amdD)},13957:function(e,t,r){var n;!function(a,o,i){var s,l=i.pow(256,6),u=i.pow(2,52),c=2*u;function d(e,t,r){var n=[],d=f(function e(t,r){var n,a=[],o=typeof t;if(r&&"object"==o)for(n in t)try{a.push(e(t[n],r-1))}catch(e){}return a.length?a:"string"==o?t:t+"\0"}((t=!0==t?{entropy:!0}:t||{}).entropy?[e,m(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(256):(e=new Uint8Array(256),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(e){var t=a.navigator,r=t&&t.plugins;return[+new Date,a,r,a.screen,m(o)]}}():e,3),n),g=new p(n),y=function(){for(var e=g.g(6),t=l,r=0;e<u;)e=(e+r)*256,t*=256,r=g.g(1);for(;e>=c;)e/=2,t/=2,r>>>=1;return(e+r)/t};return y.int32=function(){return 0|g.g(4)},y.quick=function(){return g.g(4)/4294967296},y.double=y,f(m(g.S),o),(t.pass||r||function(e,t,r,n){return(n&&(n.S&&h(n,g),e.state=function(){return h(g,{})}),r)?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,r=e.length,n=this,a=0,o=n.i=n.j=0,i=n.S=[];for(r||(e=[r++]);a<256;)i[a]=a++;for(a=0;a<256;a++)i[a]=i[o=255&o+e[a%r]+(t=i[a])],i[o]=t;(n.g=function(e){for(var t,r=0,a=n.i,o=n.j,i=n.S;e--;)t=i[a=255&a+1],r=256*r+i[255&(i[a]=i[o=255&o+t])+(i[o]=t)];return n.i=a,n.j=o,r})(256)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var r,n=e+"",a=0;a<n.length;)t[255&a]=255&(r^=19*t[255&a])+n.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(f(i.random(),o),e.exports){e.exports=d;try{s=r(75042)}catch(e){}}else void 0!==(n=(function(){return d}).call(t,r,t,e))&&(e.exports=n)}("undefined"!=typeof self?self:this,[],Math)},24369:function(e,t,r){"use strict";var n=r(2265),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,i=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),a=n[0].inst,c=n[1];return s(function(){a.value=r,a.getSnapshot=t,u(a)&&c({inst:a})},[e,r,t]),i(function(){return u(a)&&c({inst:a}),e(function(){u(a)&&c({inst:a})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},92860:function(e,t,r){"use strict";var n=r(2265),a=r(53941),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,s=n.useRef,l=n.useEffect,u=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var h=i(e,(d=u(function(){function e(e){if(!l){if(l=!0,i=e,e=n(e),void 0!==a&&p.hasValue){var t=p.value;if(a(t,e))return s=t}return s=e}if(t=s,o(i,e))return t;var r=n(e);return void 0!==a&&a(t,r)?(i=e,t):(i=e,s=r)}var i,s,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,a]))[0],d[1]);return l(function(){p.hasValue=!0,p.value=h},[h]),c(h),h}},53941:function(e,t,r){"use strict";e.exports=r(24369)},35195:function(e,t,r){"use strict";e.exports=r(92860)},49360:function(e,t,r){"use strict";let n;r.d(t,{Z:function(){return s}});var a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));var s=function(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();let s=(e=e||{}).random||(e.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return function(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}(s)}},27499:function(){},85871:function(e,t,r){"use strict";r.d(t,{SQ:function(){return i},Xb:function(){return u}});var n=r(53110),a=r(79059),o=r(75638);let i="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",s=new n.k("Hub");class l{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){let r=this.listeners.get(e);if(!r){s.warn(`No listeners for ${e}`);return}this.listeners.set(e,[...r.filter(({callback:e})=>e!==t)])}dispatch(e,t,r,n){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&n!==i&&s.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`);let a={channel:e,payload:{...t},source:r,patternInfo:[]};try{this._toListeners(a)}catch(e){s.error(e)}}listen(e,t,r="noname"){if("function"!=typeof t)throw new o._({name:a.z2,message:"No callback supplied to Hub"});let n=this.listeners.get(e);return n||(n=[],this.listeners.set(e,n)),n.push({name:r,callback:t}),()=>{this._remove(e,t)}}_toListeners(e){let{channel:t,payload:r}=e,n=this.listeners.get(t);n&&n.forEach(n=>{s.debug(`Dispatching to ${t} with `,r);try{n.callback(e)}catch(e){s.error(e)}})}}let u=new l("__default__");new l("internal-hub")},53110:function(e,t,r){"use strict";r.d(t,{k:function(){return s}});var n,a,o=r(79059);(n=a||(a={})).DEBUG="DEBUG",n.ERROR="ERROR",n.INFO="INFO",n.WARN="WARN",n.VERBOSE="VERBOSE",n.NONE="NONE";let i={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class s{constructor(e,t=a.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){let e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e&&(this._config=e),this._config}_log(e,...t){let r=this.level;s.LOG_LEVEL&&(r=s.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(r=window.LOG_LEVEL);let n=i[r];if(!(i[e]>=n))return;let o=console.log.bind(console);e===a.ERROR&&console.error&&(o=console.error.bind(console)),e===a.WARN&&console.warn&&(o=console.warn.bind(console)),s.BIND_ALL_LOG_LEVELS&&(e===a.INFO&&console.info&&(o=console.info.bind(console)),e===a.DEBUG&&console.debug&&(o=console.debug.bind(console)));let l=`[${e}] ${this._ts()} ${this.name}`,u="";if(1===t.length&&"string"==typeof t[0])o(u=`${l} - ${t[0]}`);else if(1===t.length)u=`${l} ${t[0]}`,o(l,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),u=`${l} - ${t[0]} ${e}`,o(`${l} - ${t[0]}`,e)}else u=`${l} ${t}`,o(l,t);for(let e of this._pluggables){let t={message:u,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(a.INFO,...e)}info(...e){this._log(a.INFO,...e)}warn(...e){this._log(a.WARN,...e)}error(...e){this._log(a.ERROR,...e)}debug(...e){this._log(a.DEBUG,...e)}verbose(...e){this._log(a.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===o.YG&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}s.LOG_LEVEL=null,s.BIND_ALL_LOG_LEVELS=!1},63171:function(e,t,r){"use strict";let n;r.d(t,{Cj:function(){return y},QW:function(){return v}});var a=r(85230),o=r(40257);let i=()=>"undefined"!=typeof global,s=()=>"undefined"!=typeof window,l=()=>"undefined"!=typeof document,u=()=>void 0!==o,c=(e,t)=>!!Object.keys(e).find(e=>e.startsWith(t));var d=r(40257),p=r(40257),h=r(40257);let f=[{platform:a.gQ.Expo,detectionMethod:function(){return i()&&void 0!==global.expo}},{platform:a.gQ.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:a.gQ.NextJs,detectionMethod:function(){return s()&&window.next&&"object"==typeof window.next}},{platform:a.gQ.Nuxt,detectionMethod:function(){return s()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:a.gQ.Angular,detectionMethod:function(){let e=!!(l()&&document.querySelector("[ng-version]")),t=!!(s()&&void 0!==window.ng);return e||t}},{platform:a.gQ.React,detectionMethod:function(){let e=e=>e.startsWith("_react")||e.startsWith("__react");return l()&&Array.from(document.querySelectorAll("[id]")).some(t=>Object.keys(t).find(e))}},{platform:a.gQ.VueJs,detectionMethod:function(){return s()&&c(window,"__VUE")}},{platform:a.gQ.Svelte,detectionMethod:function(){return s()&&c(window,"__SVELTE")}},{platform:a.gQ.WebUnknown,detectionMethod:function(){return s()}},{platform:a.gQ.NextJsSSR,detectionMethod:function(){return i()&&(c(global,"__next")||c(global,"__NEXT"))}},{platform:a.gQ.NuxtSSR,detectionMethod:function(){return i()&&void 0!==global.__NUXT_PATHS__}},{platform:a.gQ.ReactSSR,detectionMethod:function(){return u()&&void 0!==d.env&&!!Object.keys(d.env).find(e=>e.includes("react"))}},{platform:a.gQ.VueJsSSR,detectionMethod:function(){return i()&&c(global,"__VUE")}},{platform:a.gQ.AngularSSR,detectionMethod:function(){return u()&&"object"==typeof h.env&&h.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:a.gQ.SvelteSSR,detectionMethod:function(){return u()&&void 0!==p.env&&!!Object.keys(p.env).find(e=>e.includes("svelte"))}}],m=[],g=!1,y=()=>{if(!n){if(n=f.find(e=>e.detectionMethod())?.platform||a.gQ.ServerSideUnknown,g)for(;m.length;)m.pop()?.();else m.forEach(e=>{e()});b(a.gQ.ServerSideUnknown,10),b(a.gQ.WebUnknown,10)}return n},v=e=>{g||m.push(e)};function b(e,t){n!==e||g||setTimeout(()=>{n=void 0,g=!0,setTimeout(y,1e3)},t)}},52954:function(e,t,r){"use strict";r.d(t,{Zm:function(){return p}});var n=r(85230);let a="6.14.1";var o=r(63171);let i={},s=(e,t)=>i[e]?.[t]?.additionalDetails,l="aws-amplify",u=e=>e.replace(/\+.*/,"");class c{constructor(){this.userAgent=`${l}/${u(a)}`}get framework(){return(0,o.Cj)()}get isReactNative(){return this.framework===n.gQ.ReactNative||this.framework===n.gQ.Expo}observeFrameworkChanges(e){(0,o.QW)(e)}}new c;let d=({category:e,action:t}={})=>{let r=[[l,u(a)]];if(e&&r.push([e,t]),r.push(["framework",(0,o.Cj)()]),e&&t){let n=s(e,t);n&&n.forEach(e=>{r.push(e)})}return r},p=e=>d(e).map(([e,t])=>e&&t?`${e}/${t}`:e).join(" ")},85230:function(e,t,r){"use strict";var n,a,o,i,s,l,u,c,d,p,h,f,m,g,y,v,b,w,k,S,x,_,I,E,T,N;r.d(t,{gQ:function(){return n}}),(y=n||(n={})).WebUnknown="0",y.React="1",y.NextJs="2",y.Angular="3",y.VueJs="4",y.Nuxt="5",y.Svelte="6",y.ServerSideUnknown="100",y.ReactSSR="101",y.NextJsSSR="102",y.AngularSSR="103",y.VueJsSSR="104",y.NuxtSSR="105",y.SvelteSSR="106",y.ReactNative="201",y.Expo="202",(v=a||(a={})).AI="ai",v.API="api",v.Auth="auth",v.Analytics="analytics",v.DataStore="datastore",v.Geo="geo",v.InAppMessaging="inappmessaging",v.Interactions="interactions",v.Predictions="predictions",v.PubSub="pubsub",v.PushNotification="pushnotification",v.Storage="storage",(b=o||(o={})).CreateConversation="1",b.GetConversation="2",b.ListConversations="3",b.DeleteConversation="4",b.SendMessage="5",b.ListMessages="6",b.OnMessage="7",b.Generation="8",b.UpdateConversation="9",(w=i||(i={})).Record="1",w.IdentifyUser="2",(k=s||(s={})).GraphQl="1",k.Get="2",k.Post="3",k.Put="4",k.Patch="5",k.Del="6",k.Head="7",(S=l||(l={})).SignUp="1",S.ConfirmSignUp="2",S.ResendSignUpCode="3",S.SignIn="4",S.FetchMFAPreference="6",S.UpdateMFAPreference="7",S.SetUpTOTP="10",S.VerifyTOTPSetup="11",S.ConfirmSignIn="12",S.DeleteUserAttributes="15",S.DeleteUser="16",S.UpdateUserAttributes="17",S.FetchUserAttributes="18",S.ConfirmUserAttribute="22",S.SignOut="26",S.UpdatePassword="27",S.ResetPassword="28",S.ConfirmResetPassword="29",S.FederatedSignIn="30",S.RememberDevice="32",S.ForgetDevice="33",S.FetchDevices="34",S.SendUserAttributeVerificationCode="35",S.SignInWithRedirect="36",S.StartWebAuthnRegistration="37",S.CompleteWebAuthnRegistration="38",S.ListWebAuthnCredentials="39",S.DeleteWebAuthnCredential="40",(x=u||(u={})).Subscribe="1",x.GraphQl="2",(_=c||(c={})).SearchByText="0",_.SearchByCoordinates="1",_.SearchForSuggestions="2",_.SearchByPlaceId="3",_.SaveGeofences="4",_.GetGeofence="5",_.ListGeofences="6",_.DeleteGeofences="7",(I=d||(d={})).SyncMessages="1",I.IdentifyUser="2",I.NotifyMessageInteraction="3",(p||(p={})).None="0",(E=h||(h={})).Convert="1",E.Identify="2",E.Interpret="3",(f||(f={})).Subscribe="1",(T=m||(m={})).InitializePushNotifications="1",T.IdentifyUser="2",(N=g||(g={})).UploadData="1",N.DownloadData="2",N.List="3",N.Copy="4",N.Remove="5",N.GetProperties="6",N.GetUrl="7",N.GetDataAccess="8",N.ListCallerAccessGrants="9"},79059:function(e,t,r){"use strict";r.d(t,{YG:function(){return n},z2:function(){return a}});let n="Logging",a="NoHubcallbackProvidedException"},75638:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});class n extends Error{constructor({message:e,name:t,recoverySuggestion:r,underlyingError:a,metadata:o}){if(super(e),this.name=t,this.underlyingError=a,this.recoverySuggestion=r,o){let{extendedRequestId:e,httpStatusCode:t,requestId:r}=o;this.metadata={extendedRequestId:e,httpStatusCode:t,requestId:r}}this.constructor=n,Object.setPrototypeOf(this,n.prototype)}}},79722:function(e,t,r){"use strict";r.d(t,{d:function(){return u}});var n=r(85871);let a=e=>{for(let t of Reflect.ownKeys(e)){let r=e[t];(r&&"object"==typeof r||"function"==typeof r)&&a(r)}return Object.freeze(e)},o=Symbol("oauth-listener");var i=r(64686);r(80800),r(41162);class s{configure(e,t){this.authConfig=e,this.authOptions=t}async fetchAuthSession(e={}){let t,r;let n=await this.getTokens(e);return n?(r=n.accessToken?.payload?.sub,t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:n,authenticated:!0,forceRefresh:e.forceRefresh})):t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh}),{tokens:n,credentials:t?.credentials,identityId:t?.identityId,userSub:r}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(e){return await this.authOptions?.tokenProvider?.getTokens(e)??void 0}}class l{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new s}configure(e,t){let r=(0,i.h)(e);this.resourcesConfig=r,t&&(this.libraryOptions=t),this.resourcesConfig=a(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),n.Xb.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",n.SQ),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[o](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}}let u=new l},64686:function(e,t,r){"use strict";r.d(t,{h:function(){return h}});var n=r(53110),a=r(75638);let o=new n.k("parseAWSExports"),i={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},s=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new a._({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:t,aws_appsync_authenticationType:r,aws_appsync_graphqlEndpoint:n,aws_appsync_region:s,aws_bots_config:l,aws_cognito_identity_pool_id:d,aws_cognito_sign_up_verification_method:p,aws_cognito_mfa_configuration:h,aws_cognito_mfa_types:f,aws_cognito_password_protection_settings:m,aws_cognito_verification_mechanisms:g,aws_cognito_signup_attributes:y,aws_cognito_social_providers:v,aws_cognito_username_attributes:b,aws_mandatory_sign_in:w,aws_mobile_analytics_app_id:k,aws_mobile_analytics_app_region:S,aws_user_files_s3_bucket:x,aws_user_files_s3_bucket_region:_,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:I,aws_user_pools_id:E,aws_user_pools_web_client_id:T,geo:N,oauth:A,predictions:C,aws_cloud_logic_custom:M,Notifications:R,modelIntrospection:O}=e,F={};k&&(F.Analytics={Pinpoint:{appId:k,region:S}});let{InAppMessaging:D,Push:P}=R??{};if(D?.AWSPinpoint||P?.AWSPinpoint){if(D?.AWSPinpoint){let{appId:e,region:t}=D.AWSPinpoint;F.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(P?.AWSPinpoint){let{appId:e,region:t}=P.AWSPinpoint;F.Notifications={...F.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(l)&&(F.Interactions={LexV1:Object.fromEntries(l.map(e=>[e.name,e]))}),n){let e=i[r];e||o.debug(`Invalid authentication type ${r}. Falling back to IAM.`),F.API={GraphQL:{endpoint:n,apiKey:t,region:s,defaultAuthMode:e??"iam"}},O&&(F.API.GraphQL.modelIntrospection=O)}let $=h?{status:h&&h.toLowerCase(),totpEnabled:f?.includes("TOTP")??!1,smsEnabled:f?.includes("SMS")??!1}:void 0,L=m?{minLength:m.passwordPolicyMinLength,requireLowercase:m.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:m.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:m.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:m.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,B=Array.from(new Set([...g??[],...y??[]])).reduce((e,t)=>({...e,[t.toLowerCase()]:{required:!0}}),{}),z=b?.includes("EMAIL")??!1,W=b?.includes("PHONE_NUMBER")??!1;(d||E)&&(F.Auth={Cognito:{identityPoolId:d,allowGuestAccess:"enable"!==w,signUpVerificationMethod:p,userAttributes:B,userPoolClientId:T,userPoolId:E,mfa:$,passwordFormat:L,loginWith:{username:!(z||W),email:z,phone:W}}});let U=!!A&&Object.keys(A).length>0,j=!!v&&v.length>0;if(F.Auth&&U&&(F.Auth.Cognito.loginWith={...F.Auth.Cognito.loginWith,oauth:{...u(A),...j&&{providers:c(v)}}}),x&&(F.Storage={S3:{bucket:x,region:_,dangerouslyConnectToHttpEndpointForTesting:I}}),N){let{amazon_location_service:e}=N;F.Geo={LocationService:{maps:e.maps,geofenceCollections:e.geofenceCollections,searchIndices:e.search_indices,region:e.region}}}if(M&&(F.API={...F.API,REST:M.reduce((e,t)=>{let{name:r,endpoint:n,region:a,service:o}=t;return{...e,[r]:{endpoint:n,...o?{service:o}:void 0,...a?{region:a}:void 0}}},{})}),C){let{VoiceId:e}=C?.convert?.speechGenerator?.defaults??{};F.Predictions=e?{...C,convert:{...C.convert,speechGenerator:{...C.convert.speechGenerator,defaults:{voiceId:e}}}}:C}return F},l=e=>e?.split(",")??[],u=({domain:e,scope:t,redirectSignIn:r,redirectSignOut:n,responseType:a})=>({domain:e,scopes:t,redirectSignIn:l(r),redirectSignOut:l(n),responseType:a}),c=e=>e.map(e=>{let t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}),d={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"},p={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"},h=e=>Object.keys(e).some(e=>e.startsWith("aws_"))?s(e):!function(e){let{version:t}=e;return!!t&&t.startsWith("1")}(e)?e:function(e){let t={};if(e.storage&&(t.Storage=function(e){if(!e)return;let{bucket_name:t,aws_region:r,buckets:n}=e;return{S3:{bucket:t,region:r,buckets:n&&function(e){let t={};return e.forEach(({name:e,bucket_name:r,aws_region:n,paths:a})=>{if(e in t)throw Error(`Duplicate friendly name found: ${e}. Name must be unique.`);let o=a?Object.entries(a).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),{}):void 0;t[e]={bucketName:r,region:n,paths:o}}),t}(n)}}}(e.storage)),e.auth&&(t.Auth=function(e){if(!e)return;let{user_pool_id:t,user_pool_client_id:r,identity_pool_id:n,password_policy:a,mfa_configuration:o,mfa_methods:i,unauthenticated_identities_enabled:s,oauth:l,username_attributes:u,standard_required_attributes:c,groups:d}=e,h={Cognito:{userPoolId:t,userPoolClientId:r,groups:d}};return n&&(h.Cognito={...h.Cognito,identityPoolId:n}),a&&(h.Cognito.passwordFormat={requireLowercase:a.require_lowercase,requireNumbers:a.require_numbers,requireUppercase:a.require_uppercase,requireSpecialCharacters:a.require_symbols,minLength:a.min_length??6}),o&&(h.Cognito.mfa={status:"OPTIONAL"===o?"optional":"REQUIRED"===o?"on":"off",smsEnabled:i?.includes("SMS"),totpEnabled:i?.includes("TOTP")}),s&&(h.Cognito.allowGuestAccess=s),l&&(h.Cognito.loginWith={oauth:{domain:l.domain,redirectSignIn:l.redirect_sign_in_uri,redirectSignOut:l.redirect_sign_out_uri,responseType:"token"===l.response_type?"token":"code",scopes:l.scopes,providers:function(e=[]){return e.reduce((e,t)=>(void 0!==p[t]&&e.push(p[t]),e),[])}(l.identity_providers)}}),u&&(h.Cognito.loginWith={...h.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),c&&(h.Cognito.userAttributes=c.reduce((e,t)=>({...e,[t]:{required:!0}}),{})),h}(e.auth)),e.analytics&&(t.Analytics=function(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}(e.analytics)),e.geo&&(t.Geo=function(e){if(!e)return;let{aws_region:t,geofence_collections:r,maps:n,search_indices:a}=e;return{LocationService:{region:t,searchIndices:a,geofenceCollections:r,maps:n}}}(e.geo)),e.data&&(t.API=function(e){if(!e)return;let{aws_region:t,default_authorization_type:r,url:n,api_key:a,model_introspection:o}=e;return{GraphQL:{endpoint:n,defaultAuthMode:d[r],region:t,apiKey:a,modelIntrospection:o}}}(e.data)),e.custom){let r=function(e){if(!e?.events)return;let{url:t,aws_region:r,api_key:n,default_authorization_type:a}=e.events;return{Events:{endpoint:t,defaultAuthMode:d[a],region:r,apiKey:n}}}(e.custom);r&&"Events"in r&&(t.API={...t.API,...r})}return e.notifications&&(t.Notifications=function(e){if(!e)return;let{aws_region:t,channels:r,amazon_pinpoint_app_id:n}=e,a=r.includes("IN_APP_MESSAGING"),o=r.includes("APNS")||r.includes("FCM");if(!(a||o))return;let i={};return a&&(i.InAppMessaging={Pinpoint:{appId:n,region:t}}),o&&(i.PushNotification={Pinpoint:{appId:n,region:t}}),i}(e.notifications)),t}(e)},10742:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});let n=3e5},79955:function(e,t,r){"use strict";r.d(t,{k:function(){return a}});var n=r(10742);function a(e=n.t){return t=>{let r=2**t*100+100*Math.random();return!(r>e)&&r}}},91894:function(e,t,r){"use strict";let n,a,o,i,s,l,u,c,d,p,h,f,m,g,y,v,b,w,k,S,x,_,I,E,T,N,A,C,M,R,O,F,D,P,$,L,B,z,W,U,j,V,H,G,q,K,Y,X,Q,Z,J,ee,et,er,en,ea,eo,ei,es,el,eu,ec,ed,ep,eh,ef,em,eg,ey,ev,eb,ew,ek,eS,ex,e_,eI,eE,eT,eN,eA;r.d(t,{Z:function(){return NV}});var eC,eM,eR,eO,eF,eD,eP,e$,eL,eB,ez,eW,eU,ej,eV,eH,eG,eq,eK,eY,eX,eQ,eZ,eJ,e0,e1,e2,e3,e4,e6,e5,e8,e7,e9,te,tt,tr,tn,ta,to,ti,ts,tl,tu,tc,td,tp,th,tf,tm,tg,ty,tv,tb,tw,tk,tS,tx,t_,tI,tE,tT,tN,tA,tC,tM,tR,tO,tF={};r.r(tF),r.d(tF,{CompositeArrayBuffer:function(){return sB},browserFiles:function(){return l5},browserHTTPRequest:function(){return uo},concatenateArrayBuffers:function(){return sH},copyModel:function(){return lh},decodeWeights:function(){return sU},encodeWeights:function(){return sW},fromMemory:function(){return uu},fromMemorySync:function(){return uc},getLoadHandlers:function(){return s2},getModelArtifactsForJSON:function(){return sY},getModelArtifactsForJSONSync:function(){return sK},getModelArtifactsInfoForJSON:function(){return sX},getSaveHandlers:function(){return s1},getWeightSpecs:function(){return sQ},http:function(){return ua},isHTTPScheme:function(){return ur},listModels:function(){return ld},loadWeights:function(){return l9},moveModel:function(){return lf},registerLoadRouter:function(){return s0},registerSaveRouter:function(){return sJ},removeModel:function(){return lp},weightsLoaderFactory:function(){return ue},withSaveHandler:function(){return ud},withSaveHandlerSync:function(){return up}});var tD={};r.r(tD),r.d(tD,{conv2d:function(){return p2},depthwiseConv2d:function(){return p6},matMul:function(){return p5}});var tP={};r.r(tP),r.d(tP,{json:function(){return fS}});var t$={};r.r(t$),r.d(t$,{json:function(){return fx}});var tL={};r.r(tL),r.d(tL,{json:function(){return f_}});var tB={};r.r(tB),r.d(tB,{json:function(){return fI}});var tz={};r.r(tz),r.d(tz,{json:function(){return fE}});var tW={};r.r(tW),r.d(tW,{json:function(){return fT}});var tU={};r.r(tU),r.d(tU,{json:function(){return fN}});var tj={};r.r(tj),r.d(tj,{json:function(){return fA}});var tV={};r.r(tV),r.d(tV,{json:function(){return fC}});var tH={};r.r(tH),r.d(tH,{json:function(){return fM}});var tG={};r.r(tG),r.d(tG,{json:function(){return fR}});var tq={};r.r(tq),r.d(tq,{json:function(){return fO}});var tK={};r.r(tK),r.d(tK,{json:function(){return fF}});var tY={};r.r(tY),r.d(tY,{json:function(){return fD}});var tX={};r.r(tX),r.d(tX,{json:function(){return fP}});var tQ={};r.r(tQ),r.d(tQ,{json:function(){return f$}});var tZ={};r.r(tZ),r.d(tZ,{json:function(){return fL}});var tJ={};r.r(tJ),r.d(tJ,{json:function(){return fB}});var t0={};r.r(t0),r.d(t0,{json:function(){return fz}});var t1={};r.r(t1),r.d(t1,{OP_SCOPE_SUFFIX:function(){return sO},abs:function(){return lK},acos:function(){return uE},acosh:function(){return uT},add:function(){return lN},addN:function(){return uN},all:function(){return uA},any:function(){return uC},argMax:function(){return uM},argMin:function(){return uR},asin:function(){return uO},asinh:function(){return uF},atan:function(){return uD},atan2:function(){return uP},atanh:function(){return u$},avgPool:function(){return u0},avgPool3d:function(){return u1},basicLSTMCell:function(){return u8},batchNorm:function(){return u9},batchNorm2d:function(){return ce},batchNorm3d:function(){return ct},batchNorm4d:function(){return cr},batchToSpaceND:function(){return u7},bincount:function(){return cn},bitwiseAnd:function(){return ca},booleanMaskAsync:function(){return pW},broadcastArgs:function(){return co},broadcastTo:function(){return ci},buffer:function(){return lb},cast:function(){return lw},ceil:function(){return cs},clipByValue:function(){return cl},clone:function(){return lk},complex:function(){return sD},concat:function(){return u2},concat1d:function(){return cu},concat2d:function(){return cc},concat3d:function(){return cd},concat4d:function(){return cp},conv1d:function(){return cf},conv2d:function(){return ch},conv2dTranspose:function(){return cg},conv3d:function(){return cy},conv3dTranspose:function(){return cb},cos:function(){return cw},cosh:function(){return ck},cosineWindow:function(){return pY},cumprod:function(){return cS},cumsum:function(){return cx},denseBincount:function(){return c_},depthToSpace:function(){return cI},depthwiseConv2d:function(){return cE},diag:function(){return cT},dilation2d:function(){return cN},div:function(){return lC},divNoNan:function(){return cM},dot:function(){return cR},dropout:function(){return pq},einsum:function(){return cO},elu:function(){return cF},enclosingPowerOfTwo:function(){return pK},ensureShape:function(){return cD},equal:function(){return cA},erf:function(){return cP},euclideanNorm:function(){return cK},exp:function(){return cY},expandDims:function(){return cX},expm1:function(){return cQ},eye:function(){return cJ},fft:function(){return pm},fill:function(){return lj},floor:function(){return c0},floorDiv:function(){return lA},fused:function(){return tD},gather:function(){return c1},gatherND:function(){return pG},greater:function(){return c2},greaterEqual:function(){return c3},ifft:function(){return pg},imag:function(){return c4},image:function(){return hV},inTopKAsync:function(){return pX},irfft:function(){return py},isFinite:function(){return c6},isInf:function(){return c5},isNaN:function(){return c8},leakyRelu:function(){return c7},less:function(){return c9},lessEqual:function(){return de},linalg:function(){return hH},linspace:function(){return dt},localResponseNormalization:function(){return dr},log:function(){return dn},log1p:function(){return da},logSigmoid:function(){return dl},logSoftmax:function(){return du},logSumExp:function(){return dc},logicalAnd:function(){return dd},logicalNot:function(){return dp},logicalOr:function(){return dh},logicalXor:function(){return df},losses:function(){return hG},lowerBound:function(){return dg},matMul:function(){return u3},max:function(){return cV},maxPool:function(){return dy},maxPool3d:function(){return dv},maxPoolWithArgmax:function(){return db},maximum:function(){return lQ},mean:function(){return dw},meshgrid:function(){return dx},min:function(){return cH},minimum:function(){return d_},mirrorPad:function(){return dI},mod:function(){return dE},moments:function(){return dT},movingAverage:function(){return pj},mul:function(){return lM},multiRNNCell:function(){return dN},multinomial:function(){return dA},neg:function(){return di},norm:function(){return cq},notEqual:function(){return dC},oneHot:function(){return dM},ones:function(){return dS},onesLike:function(){return dR},op:function(){return sF},outerProduct:function(){return dO},pad:function(){return dF},pad1d:function(){return dD},pad2d:function(){return dP},pad3d:function(){return d$},pad4d:function(){return dL},pool:function(){return dz},pow:function(){return lH},prelu:function(){return dW},print:function(){return lS},prod:function(){return dU},raggedGather:function(){return dj},raggedRange:function(){return dV},raggedTensorToTensor:function(){return dH},rand:function(){return dG},randomGamma:function(){return dQ},randomNormal:function(){return dZ},randomStandardNormal:function(){return dJ},randomUniform:function(){return d0},randomUniformInt:function(){return d1},range:function(){return d2},real:function(){return d3},reciprocal:function(){return d4},relu:function(){return d6},relu6:function(){return d5},reshape:function(){return uJ},reverse:function(){return d8},reverse1d:function(){return d7},reverse2d:function(){return d9},reverse3d:function(){return pe},reverse4d:function(){return pt},rfft:function(){return pb},round:function(){return pr},rsqrt:function(){return pn},scalar:function(){return lP},scatterND:function(){return pV},searchSorted:function(){return dm},selu:function(){return pa},separableConv2d:function(){return po},setdiff1dAsync:function(){return pi},sigmoid:function(){return u4},sign:function(){return ps},signal:function(){return hj},sin:function(){return pl},sinh:function(){return pu},slice:function(){return u6},slice1d:function(){return pc},slice2d:function(){return pd},slice3d:function(){return pp},slice4d:function(){return ph},softmax:function(){return pf},softplus:function(){return ds},spaceToBatchND:function(){return dB},sparse:function(){return hq},sparseToDense:function(){return pH},spectral:function(){return hU},split:function(){return pv},sqrt:function(){return lR},square:function(){return lO},squaredDifference:function(){return pw},squeeze:function(){return pk},stack:function(){return pS},step:function(){return px},stridedSlice:function(){return p_},string:function(){return hK},sub:function(){return lG},sum:function(){return cG},tan:function(){return pI},tanh:function(){return u5},tensor:function(){return s$},tensor1d:function(){return pE},tensor2d:function(){return pT},tensor3d:function(){return uh},tensor4d:function(){return pN},tensor5d:function(){return pA},tensor6d:function(){return pC},tensorScatterUpdate:function(){return pM},tile:function(){return cZ},topk:function(){return pR},transpose:function(){return pU},truncatedNormal:function(){return pO},unique:function(){return pF},unsortedSegmentSum:function(){return pD},unstack:function(){return pP},upperBound:function(){return p$},variable:function(){return pL},where:function(){return cC},whereAsync:function(){return pz},zeros:function(){return dk},zerosLike:function(){return lF}});var t2=r(2265),t3=r.t(t2,2),t4=r(79722);let t6=(e,t)=>e.Auth.fetchAuthSession(t),t5=e=>t6(t4.d,e);var t8=r(87935),t7=function(){return(t7=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function t9(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function re(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function rr(e,t,r){if(r||2==arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}(mq=m9||(m9={})).Start="xstate.start",mq.Stop="xstate.stop",mq.Raise="xstate.raise",mq.Send="xstate.send",mq.Cancel="xstate.cancel",mq.NullEvent="",mq.Assign="xstate.assign",mq.After="xstate.after",mq.DoneState="done.state",mq.DoneInvoke="done.invoke",mq.Log="xstate.log",mq.Init="xstate.init",mq.Invoke="xstate.invoke",mq.ErrorExecution="error.execution",mq.ErrorCommunication="error.communication",mq.ErrorPlatform="error.platform",mq.ErrorCustom="xstate.error",mq.Update="xstate.update",mq.Pure="xstate.pure",mq.Choose="xstate.choose",(mK=ge||(ge={})).Parent="#_parent",mK.Internal="#_internal";var rn={},ra="xstate.guard",ro=m9.Start,ri=m9.Stop,rs=m9.Raise,rl=m9.Send,ru=m9.Cancel,rc=m9.NullEvent,rd=m9.Assign;m9.After,m9.DoneState;var rp=m9.Log,rh=m9.Init,rf=m9.Invoke;m9.ErrorExecution;var rm=m9.ErrorPlatform,rg=m9.ErrorCustom,ry=m9.Update,rv=m9.Choose,rb=m9.Pure;function rw(e,t,r){void 0===r&&(r=".");var n=rx(e,r),a=rx(t,r);return r$(a)?!!r$(n)&&a===n:r$(n)?n in a:Object.keys(n).every(function(e){return e in a&&rw(n[e],a[e])})}function rk(e){try{return r$(e)||"number"==typeof e?"".concat(e):e.type}catch(e){throw Error("Events must be strings or objects with a string event.type property.")}}function rS(e,t){try{if(rD(e))return e;return e.toString().split(t)}catch(t){throw Error("'".concat(e,"' is not a valid state path."))}}function rx(e,t){return"object"==typeof e&&"value"in e&&"context"in e&&"event"in e&&"_event"in e?e.value:rD(e)?r_(e):"string"!=typeof e?e:r_(rS(e,t))}function r_(e){if(1===e.length)return e[0];for(var t={},r=t,n=0;n<e.length-1;n++)n===e.length-2?r[e[n]]=e[n+1]:(r[e[n]]={},r=r[e[n]]);return t}function rI(e,t){for(var r={},n=Object.keys(e),a=0;a<n.length;a++){var o=n[a];r[o]=t(e[o],o,e,a)}return r}function rE(e,t,r){var n,a,o={};try{for(var i=re(Object.keys(e)),s=i.next();!s.done;s=i.next()){var l=s.value,u=e[l];r(u)&&(o[l]=t(u,l,e))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return o}var rT=function(e){return function(t){var r,n,a=t;try{for(var o=re(e),i=o.next();!i.done;i=o.next())a=a[i.value]}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}};function rN(e){return e?r$(e)?[[e]]:rA(Object.keys(e).map(function(t){var r=e[t];return"string"==typeof r||r&&Object.keys(r).length?rN(e[t]).map(function(e){return[t].concat(e)}):[[t]]})):[[]]}function rA(e){var t;return(t=[]).concat.apply(t,rr([],rt(e),!1))}function rC(e){return void 0===e?[]:rD(e)?e:[e]}function rM(e,t,r){if(rP(e))return e(t,r.data);var n,a,o={};try{for(var i=re(Object.keys(e)),s=i.next();!s.done;s=i.next()){var l=s.value,u=e[l];rP(u)?o[l]=u(t,r.data):o[l]=u}}catch(e){n={error:e}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return o}function rR(e){return!!(e instanceof Promise||null!==e&&(rP(e)||"object"==typeof e)&&rP(e.then))}function rO(e,t,r,n){return e?r.reduce(function(e,r){var a,o,i=r.assignment,s={state:n,action:r,_event:t},l={};if(rP(i))l=i(e,t.data,s);else try{for(var u=re(Object.keys(i)),c=u.next();!c.done;c=u.next()){var d=c.value,p=i[d];l[d]=rP(p)?p(e,t.data,s):p}}catch(e){a={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(a)throw a.error}}return Object.assign({},e,l)},e):e}var rF=function(){};function rD(e){return Array.isArray(e)}function rP(e){return"function"==typeof e}function r$(e){return"string"==typeof e}function rL(e,t){return e?r$(e)?{type:ra,name:e,predicate:t?t[e]:void 0}:rP(e)?{type:ra,name:e.name,predicate:e}:e:void 0}var rB="function"==typeof Symbol&&Symbol.observable||"@@observable";function rz(e){return!!e&&"__xstatenode"in e}(gt={})[rB]=function(){return this},gt[Symbol.observable]=function(){return this};var rW=(mY=0,function(){return mY++,mY.toString(16)});function rU(e,t){return r$(e)||"number"==typeof e?t7({type:e},t):e}function rj(e,t){if(!r$(e)&&"$$type"in e&&"scxml"===e.$$type)return e;var r=rU(e);return t7({name:r.type,data:r,$$type:"scxml",type:"external"},t)}function rV(e,t){return(rD(t)?t:[t]).map(function(t){return void 0===t||"string"==typeof t||rz(t)?{target:t,event:e}:t7(t7({},t),{event:e})})}function rH(e,t,r,n,a){var o=e.options.guards,i={state:a,cond:t,_event:n};if(t.type===ra)return((null==o?void 0:o[t.name])||t.predicate)(r,n.data,i);var s=null==o?void 0:o[t.type];if(!s)throw Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return s(r,n.data,i)}function rG(e){return"string"==typeof e?{type:e}:e}function rq(e,t,r){var n=function(){},a="object"==typeof e,o=a?e:null;return{next:((a?e.next:e)||n).bind(o),error:((a?e.error:t)||n).bind(o),complete:((a?e.complete:r)||n).bind(o)}}function rK(e,t){return"".concat(e,":invocation[").concat(t,"]")}function rY(e){return(e.type===rs||e.type===rl&&e.to===ge.Internal)&&"number"!=typeof e.delay}var rX=function(e){return"atomic"===e.type||"final"===e.type};function rQ(e){return Object.keys(e.states).map(function(t){return e.states[t]})}function rZ(e){return rQ(e).filter(function(e){return"history"!==e.type})}function rJ(e,t){var r,n,a,o,i,s,l,u,c=r0(new Set(e)),d=new Set(t);try{for(var p=re(d),h=p.next();!h.done;h=p.next())for(var f=h.value,m=f.parent;m&&!d.has(m);)d.add(m),m=m.parent}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var g=r0(d);try{for(var y=re(d),v=y.next();!v.done;v=y.next()){var f=v.value;if("compound"!==f.type||g.get(f)&&g.get(f).length){if("parallel"===f.type)try{for(var b=(i=void 0,re(rZ(f))),w=b.next();!w.done;w=b.next()){var k=w.value;d.has(k)||(d.add(k),c.get(k)?c.get(k).forEach(function(e){return d.add(e)}):k.initialStateNodes.forEach(function(e){return d.add(e)}))}}catch(e){i={error:e}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(i)throw i.error}}}else c.get(f)?c.get(f).forEach(function(e){return d.add(e)}):f.initialStateNodes.forEach(function(e){return d.add(e)})}}catch(e){a={error:e}}finally{try{v&&!v.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}try{for(var S=re(d),x=S.next();!x.done;x=S.next())for(var f=x.value,m=f.parent;m&&!d.has(m);)d.add(m),m=m.parent}catch(e){l={error:e}}finally{try{x&&!x.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}return d}function r0(e){var t,r,n=new Map;try{for(var a=re(e),o=a.next();!o.done;o=a.next()){var i=o.value;n.has(i)||n.set(i,[]),i.parent&&(n.has(i.parent)||n.set(i.parent,[]),n.get(i.parent).push(i))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}function r1(e,t){return Array.isArray(e)?e.some(function(e){return e===t}):e instanceof Set&&e.has(t)}function r2(e,t){return"compound"===t.type?rZ(t).some(function(t){return"final"===t.type&&r1(e,t)}):"parallel"===t.type&&rZ(t).every(function(t){return r2(e,t)})}function r3(e){return new Set(rA(e.map(function(e){return e.tags})))}var r4=rj({type:rh});function r6(e,t){return t&&t[e]||void 0}function r5(e,t){var r;if(r$(e)||"number"==typeof e){var n=r6(e,t);r=rP(n)?{type:e,exec:n}:n||{type:e,exec:void 0}}else if(rP(e))r={type:e.name||e.toString(),exec:e};else{var n=r6(e.type,t);if(rP(n))r=t7(t7({},e),{exec:n});else if(n){var a=n.type||e.type;r=t7(t7(t7({},n),e),{type:a})}else r=e}return r}var r8=function(e,t){return e?(rD(e)?e:[e]).map(function(e){return r5(e,t)}):[]};function r7(e){var t=r5(e);return t7(t7({id:r$(e)?e:t.id},t),{type:t.type})}function r9(e,t){return{to:t?t.to:void 0,type:rl,event:rP(e)?e:rU(e),delay:t?t.delay:void 0,id:t&&void 0!==t.id?t.id:rP(e)?e.name:rk(e)}}var ne=function(e){return{type:ru,sendId:e}};function nt(e,t){var r="".concat(m9.DoneState,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function nr(e,t){var r="".concat(m9.DoneInvoke,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function nn(e,t){var r="".concat(m9.ErrorPlatform,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}var na=function(e){var t,r,n=[];try{for(var a=re(e),o=a.next();!o.done;o=a.next())for(var i=o.value,s=0;s<i.actions.length;){if(i.actions[s].type===rd){n.push(i.actions[s]),i.actions.splice(s,1);continue}s++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n};function no(e,t,r,n,a,o,i){void 0===i&&(i=!1);var s=i?[]:na(a),l=s.length?rO(r,n,s,t):r,u=i?[r]:void 0,c=[];return[rA(a.map(function(a){var s,d,p=[];try{for(var h=re(a.actions),f=h.next();!f.done;f=h.next()){var m=f.value,g=function(a,s){var d;switch(s.type){case rs:var p=function(e,t,r,n){var a,o={_event:r},i=rj(rP(e.event)?e.event(t,r.data,o):e.event);if(r$(e.delay)){var s=n&&n[e.delay];a=rP(s)?s(t,r.data,o):s}else a=rP(e.delay)?e.delay(t,r.data,o):e.delay;return t7(t7({},e),{type:rs,_event:i,delay:a})}(s,l,n,e.options.delays);return o&&"number"==typeof p.delay&&o(p,l,n),p;case rl:var h=function(e,t,r,n){var a,o={_event:r},i=rj(rP(e.event)?e.event(t,r.data,o):e.event);if(r$(e.delay)){var s=n&&n[e.delay];a=rP(s)?s(t,r.data,o):s}else a=rP(e.delay)?e.delay(t,r.data,o):e.delay;var l=rP(e.to)?e.to(t,r.data,o):e.to;return t7(t7({},e),{to:l,_event:i,event:i.data,delay:a})}(s,l,n,e.options.delays);return o&&h.to!==ge.Internal&&("entry"===a?c.push(h):o(h,l,n)),h;case rp:var f,m=(f=l,t7(t7({},s),{value:r$(s.expr)?s.expr:s.expr(f,n.data,{_event:n})}));return null==o||o(m,l,n),m;case rv:var g=null===(d=s.conds.find(function(r){var a=rL(r.cond,e.options.guards);return!a||rH(e,a,l,n,o?void 0:t)}))||void 0===d?void 0:d.actions;if(!g)return[];var y=rt(no(e,t,l,n,[{type:a,actions:r8(rC(g),e.options.actions)}],o,i),2),v=y[0];return l=y[1],null==u||u.push(l),v;case rb:var g=s.get(l,n.data);if(!g)return[];var b=rt(no(e,t,l,n,[{type:a,actions:r8(rC(g),e.options.actions)}],o,i),2),w=b[0];return l=b[1],null==u||u.push(l),w;case ri:var k,S,m=(k=l,S=rP(s.activity)?s.activity(k,n.data):s.activity,{type:m9.Stop,activity:"string"==typeof S?{id:S}:S});return null==o||o(m,r,n),m;case rd:l=rO(l,n,[s],o?void 0:t),null==u||u.push(l);break;default:var x=r5(s,e.options.actions),_=x.exec;if(o)o(x,l,n);else if(_&&u){var I=u.length-1;x=t7(t7({},x),{exec:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];_.apply(void 0,rr([u[I]],rt(t),!1))}})}return x}}(a.type,m);g&&(p=p.concat(g))}}catch(e){s={error:e}}finally{try{f&&!f.done&&(d=h.return)&&d.call(h)}finally{if(s)throw s.error}}return c.forEach(function(e){o(e,l,n)}),c.length=0,p})),l]}var ni=function(){function e(e){var t,r,n=this;this.actions=[],this.activities=rn,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||rn,this.meta=(void 0===(t=e.configuration)&&(t=[]),t.reduce(function(e,t){return void 0!==t.meta&&(e[t.id]=t.meta),e},{})),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(r=Array.isArray(e.tags)?new Set(e.tags):e.tags)&&void 0!==r?r:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return rr([],rt(new Set(rA(rr([],rt(n.configuration.map(function(e){return e.ownEvents})),!1)))),!1)}})}return e.from=function(t,r){return t instanceof e?t.context!==r?new e({value:t.value,context:r,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new e({value:t,context:r,_event:r4,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,r){return t instanceof e?t.actions.length?new e({value:t.value,context:r,_event:r4,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}}):t:e.from(t,r)},e.prototype.toStrings=function(e,t){var r=this;if(void 0===e&&(e=this.value),void 0===t&&(t="."),r$(e))return[e];var n=Object.keys(e);return n.concat.apply(n,rr([],rt(n.map(function(n){return r.toStrings(e[n],t).map(function(e){return n+t+e})})),!1))},e.prototype.toJSON=function(){this.configuration,this.transitions;var e=this.tags;this.machine;var t=t9(this,["configuration","transitions","tags","machine"]);return t7(t7({},t),{tags:Array.from(e)})},e.prototype.matches=function(e){return rw(e,this.value)},e.prototype.hasTag=function(e){return this.tags.has(e)},e.prototype.can=function(e){rF(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var t,r=null===(t=this.machine)||void 0===t?void 0:t.getTransitionData(this,e);return!!(null==r?void 0:r.transitions.length)&&r.transitions.some(function(e){return void 0!==e.target||e.actions.length})},e}(),ns={deferEvents:!1},nl=function(){function e(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=t7(t7({},ns),e)}return e.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},e.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(0!==this.queue.length)throw Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},e.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},e}(),nu=[],nc=function(e,t){nu.push(e);var r=t(e);return nu.pop(),r};function nd(e){var t;return(t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}})[rB]=function(){return this},t}function np(e,t,r){var n=nd(t);if(n.deferred=!0,rz(e)){var a=n.state=nc(void 0,function(){return(r?e.withContext(r):e).initialState});n.getSnapshot=function(){return a}}return n}var nh=new Map,nf=0,nm={bookId:function(){return"x:".concat(nf++)},register:function(e,t){return nh.set(e,t),e},get:function(e){return nh.get(e)},free:function(e){nh.delete(e)}};function ng(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:void 0}var ny={sync:!1,autoForward:!1};(mX=gr||(gr={}))[mX.NotStarted=0]="NotStarted",mX[mX.Running=1]="Running",mX[mX.Stopped=2]="Stopped";var nv=function(){function e(t,r){void 0===r&&(r=e.defaultOptions);var n=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=gr.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(e,t){if(rD(e))return n.batch(e),n.state;var r=rj(rU(e,t));if(n.status===gr.Stopped)return n.state;if(n.status!==gr.Running&&!n.options.deferEvents)throw Error('Event "'.concat(r.name,'" was sent to uninitialized service "').concat(n.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(r.data)));return n.scheduler.schedule(function(){n.forward(r);var e=n._nextState(r);n.update(e,r)}),n._state},this.sendTo=function(e,t,r){var a=n.parent&&(t===ge.Parent||n.parent.id===t),o=a?n.parent:r$(t)?t===ge.Internal?n:n.children.get(t)||nm.get(t):t&&"function"==typeof t.send?t:void 0;if(!o){if(!a)throw Error("Unable to send event to child '".concat(t,"' from service '").concat(n.id,"'."));return}if("machine"in o){if(n.status!==gr.Stopped||n.parent!==o||n.state.done){var i=t7(t7({},e),{name:e.name===rg?"".concat(nn(n.id)):e.name,origin:n.sessionId});!r&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([o,i]):o.send(i)}}else!r&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([o,e.data]):o.send(e.data)},this._exec=function(e,t,r,a){void 0===a&&(a=n.machine.options.actions);var o=e.exec||r6(e.type,a),i=rP(o)?o:o?o.exec:e.exec;if(i)try{return i(t,r.data,n.machine.config.predictableActionArguments?{action:e,_event:r}:{action:e,state:n.state,_event:r})}catch(e){throw n.parent&&n.parent.send({type:"xstate.error",data:e}),e}switch(e.type){case rs:n.defer(e);break;case rl:if("number"==typeof e.delay){n.defer(e);return}e.to?n.sendTo(e._event,e.to,r===r4):n.send(e._event);break;case ru:n.cancel(e.sendId);break;case ro:if(n.status!==gr.Running)return;var s=e.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[s.id||s.type])break;if(s.type===m9.Invoke){var l=rG(s.src),u=n.machine.options.services?n.machine.options.services[l.type]:void 0,c=s.id,d=s.data,p="autoForward"in s?s.autoForward:!!s.forward;if(!u)return;var h=d?rM(d,t,r):void 0;if("string"==typeof u)return;var f=rP(u)?u(t,r.data,{data:h,src:l,meta:s.meta}):u;if(!f)return;var m=void 0;rz(f)&&(f=h?f.withContext(h):f,m={autoForward:p}),n.spawn(f,c,m)}else n.spawnActivity(s);break;case ri:n.stopChild(e.activity.id);break;case rp:var g=e.label,y=e.value;g?n.logger(g,y):n.logger(y)}};var a=t7(t7({},e.defaultOptions),r),o=a.clock,i=a.logger,s=a.parent,l=a.id,u=void 0!==l?l:t.id;this.id=u,this.logger=i,this.clock=o,this.parent=s,this.options=a,this.scheduler=new nl({deferEvents:this.options.deferEvents}),this.sessionId=nm.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:nc(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(e,t){var r,n;try{for(var a=re(e.actions),o=a.next();!o.done;o=a.next()){var i=o.value;this.exec(i,e,t)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.update=function(e,t){var r,n,a,o,i,s,l,u,c=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||t===r4)&&this.options.execute)this.execute(this.state);else for(var d=void 0;d=this._outgoingQueue.shift();)d[0].send(d[1]);if(this.children.forEach(function(e){c.state.children[e.id]=e}),this.devTools&&this.devTools.send(t.data,e),e.event)try{for(var p=re(this.eventListeners),h=p.next();!h.done;h=p.next()){var f=h.value;f(e.event)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}try{for(var m=re(this.listeners),g=m.next();!g.done;g=m.next()){var f=g.value;f(e,e.event)}}catch(e){a={error:e}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}try{for(var y=re(this.contextListeners),v=y.next();!v.done;v=y.next())(0,v.value)(this.state.context,this.state.history?this.state.history.context:void 0)}catch(e){i={error:e}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(this.state.done){var b=e.configuration.find(function(e){return"final"===e.type&&e.parent===c.machine}),w=b&&b.doneData?rM(b.doneData,e.context,t):void 0;this._doneEvent=nr(this.id,w);try{for(var k=re(this.doneListeners),S=k.next();!S.done;S=k.next()){var f=S.value;f(this._doneEvent)}}catch(e){l={error:e}}finally{try{S&&!S.done&&(u=k.return)&&u.call(k)}finally{if(l)throw l.error}}this._stop(),this._stopChildren(),nm.free(this.sessionId)}},e.prototype.onTransition=function(e){return this.listeners.add(e),this.status===gr.Running&&e(this.state,this.state.event),this},e.prototype.subscribe=function(e,t,r){var n=this,a=rq(e,t,r);this.listeners.add(a.next),this.status!==gr.NotStarted&&a.next(this.state);var o=function(){n.doneListeners.delete(o),n.stopListeners.delete(o),a.complete()};return this.status===gr.Stopped?a.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){n.listeners.delete(a.next),n.doneListeners.delete(o),n.stopListeners.delete(o)}}},e.prototype.onEvent=function(e){return this.eventListeners.add(e),this},e.prototype.onSend=function(e){return this.sendListeners.add(e),this},e.prototype.onChange=function(e){return this.contextListeners.add(e),this},e.prototype.onStop=function(e){return this.stopListeners.add(e),this},e.prototype.onDone=function(e){return this.status===gr.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},e.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},e.prototype.start=function(e){var t=this;if(this.status===gr.Running)return this;this.machine._init(),nm.register(this.sessionId,this),this.initialized=!0,this.status=gr.Running;var r=void 0===e?this.initialState:nc(this,function(){return"object"==typeof e&&null!==e&&"value"in e&&"_event"in e?t.machine.resolveState(e):t.machine.resolveState(ni.from(e,t.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){t.update(r,r4)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(e){rP(e.stop)&&e.stop()}),this.children.clear()},e.prototype._stop=function(){var e,t,r,n,a,o,i,s,l,u;try{for(var c=re(this.listeners),d=c.next();!d.done;d=c.next()){var p=d.value;this.listeners.delete(p)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}try{for(var h=re(this.stopListeners),f=h.next();!f.done;f=h.next()){var p=f.value;p(),this.stopListeners.delete(p)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}try{for(var m=re(this.contextListeners),g=m.next();!g.done;g=m.next()){var p=g.value;this.contextListeners.delete(p)}}catch(e){a={error:e}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}try{for(var y=re(this.doneListeners),v=y.next();!v.done;v=y.next()){var p=v.value;this.doneListeners.delete(p)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(!this.initialized)return this;this.initialized=!1,this.status=gr.Stopped,this._initialState=void 0;try{for(var b=re(Object.keys(this.delayedEventsMap)),w=b.next();!w.done;w=b.next()){var k=w.value;this.clock.clearTimeout(this.delayedEventsMap[k])}}catch(e){l={error:e}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(l)throw l.error}}this.scheduler.clear(),this.scheduler=new nl({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var e=this,t=this.scheduler;return this._stop(),t.schedule(function(){if(null===(t=e._state)||void 0===t||!t.done){var t,r=rj({type:"xstate.stop"}),n=nc(e,function(){var t=rA(rr([],rt(e.state.configuration),!1).sort(function(e,t){return t.order-e.order}).map(function(t){return r8(t.onExit,e.machine.options.actions)})),n=rt(no(e.machine,e.state,e.state.context,r,[{type:"exit",actions:t}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),a=n[0],o=n[1],i=new ni({value:e.state.value,context:o,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:a.filter(function(e){return!rY(e)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return i.changed=!0,i});e.update(n,r),e._stopChildren(),nm.free(e.sessionId)}}),this},e.prototype.batch=function(e){var t=this;if(this.status===gr.NotStarted&&this.options.deferEvents);else if(this.status!==gr.Running)throw Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(e.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var n,a,o=t.state,i=!1,s=[];try{for(var l=re(e),u=l.next();!u.done;u=l.next()){var c=u.value;!function(e){var n=rj(e);t.forward(n),o=nc(t,function(){return t.machine.transition(o,n,void 0,r||void 0)}),s.push.apply(s,rr([],rt(t.machine.config.predictableActionArguments?o.actions:o.actions.map(function(e){var t,r;return t=o,r=e.exec,t7(t7({},e),{exec:void 0!==r?function(){return r(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0})})),!1)),i=i||!!o.changed}(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}o.changed=i,o.actions=s,t.update(o,rj(e[e.length-1]))})}},e.prototype.sender=function(e){return this.send.bind(this,e)},e.prototype._nextState=function(e,t){var r=this;void 0===t&&(t=!!this.machine.config.predictableActionArguments&&this._exec);var n=rj(e);if(0===n.name.indexOf(rm)&&!this.state.nextEvents.some(function(e){return 0===e.indexOf(rm)}))throw n.data.data;return nc(this,function(){return r.machine.transition(r.state,n,void 0,t||void 0)})},e.prototype.nextState=function(e){return this._nextState(e,!1)},e.prototype.forward=function(e){var t,r;try{for(var n=re(this.forwardTo),a=n.next();!a.done;a=n.next()){var o=a.value,i=this.children.get(o);if(!i)throw Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));i.send(e)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.defer=function(e){var t=this,r=this.clock.setTimeout(function(){"to"in e&&e.to?t.sendTo(e._event,e.to,!0):t.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=r)},e.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},e.prototype.exec=function(e,t,r){void 0===r&&(r=this.machine.options.actions),this._exec(e,t.context,t._event,r)},e.prototype.removeChild=function(e){var t;this.children.delete(e),this.forwardTo.delete(e),null===(t=this.state)||void 0===t||delete t.children[e]},e.prototype.stopChild=function(e){var t=this.children.get(e);t&&(this.removeChild(e),rP(t.stop)&&t.stop())},e.prototype.spawn=function(e,t,r){if(this.status!==gr.Running)return np(e,t);if(rR(e))return this.spawnPromise(Promise.resolve(e),t);if(rP(e))return this.spawnCallback(e,t);if(function(e){try{return"function"==typeof e.send}catch(e){return!1}}(e)&&"id"in e)return this.spawnActor(e,t);if(function(e){try{return"subscribe"in e&&rP(e.subscribe)}catch(e){return!1}}(e))return this.spawnObservable(e,t);if(rz(e))return this.spawnMachine(e,t7(t7({},r),{id:t}));if(null!==e&&"object"==typeof e&&"transition"in e&&"function"==typeof e.transition)return this.spawnBehavior(e,t);throw Error('Unable to spawn entity "'.concat(t,'" of type "').concat(typeof e,'".'))},e.prototype.spawnMachine=function(t,r){var n=this;void 0===r&&(r={});var a=new e(t,t7(t7({},this.options),{parent:this,id:r.id||t.id})),o=t7(t7({},ny),r);return o.sync&&a.onTransition(function(e){n.send(ry,{state:e,id:a.id})}),this.children.set(a.id,a),o.autoForward&&this.forwardTo.add(a.id),a.onDone(function(e){n.removeChild(a.id),n.send(rj(e,{origin:a.id}))}).start(),a},e.prototype.spawnBehavior=function(e,t){var r,n,a,o,i,s,l,u,c,d,p=(r={id:t,parent:this},n=e.initialState,a=new Set,o=[],i=!1,s=function(){if(!i){for(i=!0;o.length>0;){var t=o.shift();n=e.transition(n,t,d),a.forEach(function(e){return e.next(n)})}i=!1}},l={id:r.id,send:function(e){o.push(e),s()},getSnapshot:function(){return n},subscribe:function(e,t,r){var o=rq(e,t,r);return a.add(o),o.next(n),{unsubscribe:function(){a.delete(o)}}}},c=t7(((u={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[rB]=function(){return this},u),l),d={parent:r.parent,self:c,id:r.id||"anonymous",observers:a},n=e.start?e.start(d):n,c);return this.children.set(t,p),p},e.prototype.spawnPromise=function(e,t){var r,n,a=this,o=!1;e.then(function(e){o||(n=e,a.removeChild(t),a.send(rj(nr(t,e),{origin:t})))},function(e){if(!o){a.removeChild(t);var r=nn(t,e);try{a.send(rj(r,{origin:t}))}catch(e){a.devTools&&a.devTools.send(r,a.state),a.machine.strict&&a.stop()}}});var i=((r={id:t,send:function(){},subscribe:function(t,r,n){var a=rq(t,r,n),o=!1;return e.then(function(e){!o&&(a.next(e),o||a.complete())},function(e){o||a.error(e)}),{unsubscribe:function(){return o=!0}}},stop:function(){o=!0},toJSON:function(){return{id:t}},getSnapshot:function(){return n}})[rB]=function(){return this},r);return this.children.set(t,i),i},e.prototype.spawnCallback=function(e,t){var r,n,a,o=this,i=!1,s=new Set,l=new Set;try{a=e(function(e){n=e,l.forEach(function(t){return t(e)}),i||o.send(rj(e,{origin:t}))},function(e){s.add(e)})}catch(e){this.send(nn(t,e))}if(rR(a))return this.spawnPromise(a,t);var u=((r={id:t,send:function(e){return s.forEach(function(t){return t(e)})},subscribe:function(e){var t=rq(e);return l.add(t.next),{unsubscribe:function(){l.delete(t.next)}}},stop:function(){i=!0,rP(a)&&a()},toJSON:function(){return{id:t}},getSnapshot:function(){return n}})[rB]=function(){return this},r);return this.children.set(t,u),u},e.prototype.spawnObservable=function(e,t){var r,n,a=this,o=e.subscribe(function(e){n=e,a.send(rj(e,{origin:t}))},function(e){a.removeChild(t),a.send(rj(nn(t,e),{origin:t}))},function(){a.removeChild(t),a.send(rj(nr(t),{origin:t}))}),i=((r={id:t,send:function(){},subscribe:function(t,r,n){return e.subscribe(t,r,n)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return n},toJSON:function(){return{id:t}}})[rB]=function(){return this},r);return this.children.set(t,i),i},e.prototype.spawnActor=function(e,t){return this.children.set(t,e),e},e.prototype.spawnActivity=function(e){var t=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(t){var r=t(this.state.context,e);this.spawnEffect(e.id,r)}},e.prototype.spawnEffect=function(e,t){var r;this.children.set(e,((r={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:t||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}})[rB]=function(){return this},r))},e.prototype.attachDev=function(){var e=ng();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var t="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(t7(t7({name:this.id,autoPause:!0,stateSanitizer:function(e){return{value:e.value,context:e.context,actions:e.actions}}},t),{features:t7({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}!function(e){if(ng()){var t=function(){var e=ng();if(e&&"__xstate__"in e)return e.__xstate__}();t&&t.register(e)}}(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[rB]=function(){return this},e.prototype.getSnapshot=function(){return this.status===gr.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},e.interpret=nb,e}();function nb(e,t){return new nv(e,t)}function nw(e){var t=t2.useRef();return t.current||(t.current={v:e()}),t.current.v}var nk=function(){return(nk=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},nS=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r},nx=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i};let n_=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function nI(e){return t7(t7({type:rf},e),{toJSON:function(){e.onDone,e.onError;var t=t9(e,["onDone","onError"]);return t7(t7({},t),{type:rf,src:function(e){if("string"==typeof e){var t={type:e};return t.toString=function(){return e},t}return e}(e.src)})}})}var nE={},nT=function(e){return"#"===e[0]},nN=function(){function e(t,r,n,a){void 0===n&&(n="context"in t?t.context:void 0);var o,i=this;this.config=t,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},r),this.parent=null==a?void 0:a.parent,this.key=this.config.key||(null==a?void 0:a.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:"."),this.id=this.config.id||rr([this.machine.key],rt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(o=this.config.schema)&&void 0!==o?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?rI(this.config.states,function(t,r){var n,a=new e(t,{},void 0,{parent:i,key:r});return Object.assign(i.idMap,t7(((n={})[a.id]=a,n),a.idMap)),a}):nE;var s=0;!function e(t){var r,n;t.order=s++;try{for(var a=re(rQ(t)),o=a.next();!o.done;o=a.next()){var i=o.value;e(i)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some(function(e){return""===e.event}):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=rC(this.config.entry||this.config.onEntry).map(function(e){return r5(e)}),this.onExit=rC(this.config.exit||this.config.onExit).map(function(e){return r5(e)}),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=rC(this.config.invoke).map(function(e,t){if(rz(e)){var r,n,a=rK(i.id,t);return i.machine.options.services=t7(((r={})[a]=e,r),i.machine.options.services),nI({src:a,id:a})}if(r$(e.src)){var a=e.id||rK(i.id,t);return nI(t7(t7({},e),{id:a,src:e.src}))}if(rz(e.src)||rP(e.src)){var a=e.id||rK(i.id,t);return i.machine.options.services=t7(((n={})[a]=e.src,n),i.machine.options.services),nI(t7(t7({id:a},e),{src:a}))}var o=e.src;return nI(t7(t7({id:rK(i.id,t)},e),{src:o}))}),this.activities=rC(this.config.activities).concat(this.invoke).map(function(e){return r7(e)}),this.transition=this.transition.bind(this),this.tags=rC(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||(function e(t){var r=[t];return rX(t)?r:r.concat(rA(rZ(t).map(e)))})(this).forEach(function(e){return e.on})},e.prototype.withConfig=function(t,r){var n=this.options,a=n.actions,o=n.activities,i=n.guards,s=n.services,l=n.delays;return new e(this.config,{actions:t7(t7({},a),t.actions),activities:t7(t7({},o),t.activities),guards:t7(t7({},i),t.guards),services:t7(t7({},s),t.services),delays:t7(t7({},l),t.delays)},null!=r?r:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return rP(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:rI(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(e,t){return e[t.eventType]=e[t.eventType]||[],e[t.eventType].push(t),e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var t=""===e,r=this.transitions.filter(function(r){var n=r.eventType===e;return t?n:n||"*"===r.eventType});return this.__cache.candidates[e]=r,r},e.prototype.getDelayedTransitions=function(){var e=this,t=this.config.after;if(!t)return[];var r=function(t,r){var n,a,o=(n=rP(t)?"".concat(e.id,":delay[").concat(r,"]"):t,a=e.id,"".concat(m9.After,"(").concat(n,")").concat(a?"#".concat(a):""));return e.onEntry.push(r9(o,{delay:t})),e.onExit.push(ne(o)),o};return(rD(t)?t.map(function(e,t){var n=r(e.delay,t);return t7(t7({},e),{event:n})}):rA(Object.keys(t).map(function(e,n){var a=t[e],o=r$(a)?{target:a}:a,i=isNaN(+e)?e:+e,s=r(i,n);return rC(o).map(function(e){return t7(t7({},e),{event:s,delay:i})})}))).map(function(t){var r=t.delay;return t7(t7({},e.formatTransition(t)),{delay:r})})},e.prototype.getStateNodes=function(e){var t,r=this;if(!e)return[];var n=e instanceof ni?e.value:rx(e,this.delimiter);if(r$(n)){var a=this.getStateNode(n).initial;return void 0!==a?this.getStateNodes(((t={})[n]=a,t)):[this,this.states[n]]}var o=Object.keys(n),i=[this];return i.push.apply(i,rr([],rt(rA(o.map(function(e){return r.getStateNode(e).getStateNodes(n[e])}))),!1)),i},e.prototype.handles=function(e){var t=rk(e);return this.events.includes(t)},e.prototype.resolveState=function(e){var t=e instanceof ni?e:ni.create(e),r=Array.from(rJ([],this.getStateNodes(t.value)));return new ni(t7(t7({},t),{value:this.resolve(t.value),configuration:r,done:r2(r,this),tags:r3(r),machine:this.machine}))},e.prototype.transitionLeafNode=function(e,t,r){var n=this.getStateNode(e).next(t,r);return n&&n.transitions.length?n:this.next(t,r)},e.prototype.transitionCompoundNode=function(e,t,r){var n=Object.keys(e),a=this.getStateNode(n[0])._transition(e[n[0]],t,r);return a&&a.transitions.length?a:this.next(t,r)},e.prototype.transitionParallelNode=function(e,t,r){var n,a,o={};try{for(var i=re(Object.keys(e)),s=i.next();!s.done;s=i.next()){var l=s.value,u=e[l];if(u){var c=this.getStateNode(l)._transition(u,t,r);c&&(o[l]=c)}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}var d=Object.keys(o).map(function(e){return o[e]}),p=rA(d.map(function(e){return e.transitions}));if(!d.some(function(e){return e.transitions.length>0}))return this.next(t,r);var h=rA(Object.keys(o).map(function(e){return o[e].configuration}));return{transitions:p,exitSet:rA(d.map(function(e){return e.exitSet})),configuration:h,source:t,actions:rA(Object.keys(o).map(function(e){return o[e].actions}))}},e.prototype._transition=function(e,t,r){return r$(e)?this.transitionLeafNode(e,t,r):1===Object.keys(e).length?this.transitionCompoundNode(e,t,r):this.transitionParallelNode(e,t,r)},e.prototype.getTransitionData=function(e,t){return this._transition(e.value,e,rj(t))},e.prototype.next=function(e,t){var r,n,a,o=this,i=t.name,s=[],l=[];try{for(var u=re(this.getCandidates(i)),c=u.next();!c.done;c=u.next()){var d=c.value,p=d.cond,h=d.in,f=e.context,m=!h||(r$(h)&&nT(h)?e.matches(rx(this.getStateNodeById(h).path,this.delimiter)):rw(rx(h,this.delimiter),rT(this.path.slice(0,-2))(e.value))),g=!1;try{g=!p||rH(this.machine,p,f,t,e)}catch(e){throw Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(i,"' in state node '").concat(this.id,"':\n").concat(e.message))}if(g&&m){void 0!==d.target&&(l=d.target),s.push.apply(s,rr([],rt(d.actions),!1)),a=d;break}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(a){if(!l.length)return{transitions:[a],exitSet:[],configuration:e.value?[this]:[],source:e,actions:s};var y=rA(l.map(function(t){return o.getRelativeStateNodes(t,e.historyValue)})),v=!!a.internal;return{transitions:[a],exitSet:v?[]:rA(l.map(function(e){return o.getPotentiallyReenteringNodes(e)})),configuration:y,source:e,actions:s}}},e.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var t=[],r=this;r&&r!==e;)t.push(r),r=r.parent;return r!==e?[]:(t.push(e),t)},e.prototype.getActions=function(e,t,r,n,a,o,i){var s,l,u,c,d=this,p=o?rJ([],this.getStateNodes(o.value)):[],h=new Set;try{for(var f=re(Array.from(e).sort(function(e,t){return e.order-t.order})),m=f.next();!m.done;m=f.next()){var g=m.value;(!r1(p,g)||r1(r.exitSet,g)||g.parent&&h.has(g.parent))&&h.add(g)}}catch(e){s={error:e}}finally{try{m&&!m.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}try{for(var y=re(p),v=y.next();!v.done;v=y.next()){var g=v.value;(!r1(e,g)||r1(r.exitSet,g.parent))&&r.exitSet.push(g)}}catch(e){u={error:e}}finally{try{v&&!v.done&&(c=y.return)&&c.call(y)}finally{if(u)throw u.error}}r.exitSet.sort(function(e,t){return t.order-e.order});var b=Array.from(h).sort(function(e,t){return e.order-t.order}),w=new Set(r.exitSet),k=rA(b.map(function(e){var t=[];if("final"!==e.type)return t;var o=e.parent;if(!o.parent)return t;t.push(nt(e.id,e.doneData),nt(o.id,e.doneData?rM(e.doneData,n,a):void 0));var i=o.parent;return"parallel"===i.type&&rZ(i).every(function(e){return r2(r.configuration,e)})&&t.push(nt(i.id)),t})),S=b.map(function(e){var t=e.onEntry,r=e.activities.map(function(e){var t;return t=r7(e),{type:m9.Start,activity:t,exec:void 0}});return{type:"entry",actions:r8(i?rr(rr([],rt(t),!1),rt(r),!1):rr(rr([],rt(r),!1),rt(t),!1),d.machine.options.actions)}}).concat({type:"state_done",actions:k.map(function(e){var t;return{type:rs,event:"function"==typeof e?e:rU(e),delay:void 0,id:null==t?void 0:t.id}})}),x=Array.from(w).map(function(e){return{type:"exit",actions:r8(rr(rr([],rt(e.onExit),!1),rt(e.activities.map(function(e){var t;return t=rP(e)?e:r7(e),{type:m9.Stop,activity:t,exec:void 0}})),!1),d.machine.options.actions)}}).concat({type:"transition",actions:r8(r.actions,this.machine.options.actions)}).concat(S);if(t){var _=r8(rA(rr([],rt(e),!1).sort(function(e,t){return t.order-e.order}).map(function(e){return e.onExit})),this.machine.options.actions).filter(function(e){return!rY(e)});return x.concat({type:"stop",actions:_})}return x},e.prototype.transition=function(e,t,r,n){void 0===e&&(e=this.initialState);var a,o,i=rj(t);if(e instanceof ni)o=void 0===r?e:this.resolveState(ni.from(e,r));else{var s=r$(e)?this.resolve(r_(this.getResolvedPath(e))):this.resolve(e),l=null!=r?r:this.machine.context;o=this.resolveState(ni.from(s,l))}if(this.strict&&!this.events.includes(i.name)&&(a=i.name,!/^(done|error)\./.test(a)))throw Error("Machine '".concat(this.id,"' does not accept event '").concat(i.name,"'"));var u=this._transition(o.value,o,i)||{transitions:[],configuration:[],exitSet:[],source:o,actions:[]},c=rJ([],this.getStateNodes(o.value)),d=u.configuration.length?rJ(c,u.configuration):c;return u.configuration=rr([],rt(d),!1),this.resolveTransition(u,o,o.context,n,i)},e.prototype.resolveRaisedTransition=function(e,t,r,n){var a,o=e.actions;return(e=this.transition(e,t,void 0,n))._event=r,e.event=r.data,(a=e.actions).unshift.apply(a,rr([],rt(o),!1)),e},e.prototype.resolveTransition=function(e,t,r,n,a){var o,i,s,l,u,c,d=this;void 0===a&&(a=r4);var p=e.configuration,h=!t||e.transitions.length>0,f=h?e.configuration:t?t.configuration:[],m=r2(f,this),g=h?(i=rJ([o=this.machine],p),function e(t,r){var n=r.get(t);if(!n)return{};if("compound"===t.type){var a=n[0];if(!a)return{};if(rX(a))return a.key}var o={};return n.forEach(function(t){o[t.key]=e(t,r)}),o}(o,r0(i))):void 0,y=t?t.historyValue?t.historyValue:e.source?this.machine.historyValue(t.value):void 0:void 0,v=this.getActions(new Set(f),m,e,r,a,t,n),b=t?t7({},t.activities):{};try{for(var w=re(v),k=w.next();!k.done;k=w.next()){var S=k.value;try{for(var x=(u=void 0,re(S.actions)),_=x.next();!_.done;_=x.next()){var I=_.value;I.type===ro?b[I.activity.id||I.activity.type]=I:I.type===ri&&(b[I.activity.id||I.activity.type]=!1)}}catch(e){u={error:e}}finally{try{_&&!_.done&&(c=x.return)&&c.call(x)}finally{if(u)throw u.error}}}}catch(e){s={error:e}}finally{try{k&&!k.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}var E=rt(no(this,t,r,a,v,n,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),T=E[0],N=E[1],A=rt(function(e,t){var r,n,a=rt([[],[]],2),o=a[0],i=a[1];try{for(var s=re(e),l=s.next();!l.done;l=s.next()){var u=l.value;t(u)?o.push(u):i.push(u)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return[o,i]}(T,rY),2),C=A[0],M=A[1],R=T.filter(function(e){var t;return e.type===ro&&(null===(t=e.activity)||void 0===t?void 0:t.type)===rf}).reduce(function(e,t){var r,n,o,i,s,l,u,c;return e[t.activity.id]=(r=t.activity,n=d.machine,o=a,s=rG(r.src),l=null===(i=null==n?void 0:n.options.services)||void 0===i?void 0:i[s.type],u=r.data?rM(r.data,N,o):void 0,(c=l?np(l,r.id,u):nd(r.id)).meta=r,c),e},t?t7({},t.children):{}),O=new ni({value:g||t.value,context:N,_event:a,_sessionid:t?t._sessionid:null,historyValue:g?y?{current:g,states:function e(t,r){return rI(t.states,function(t,n){if(t){var a=(r$(r)?void 0:r[n])||(t?t.current:void 0);if(a)return{current:a,states:e(t,a)}}})}(y,g)}:void 0:t?t.historyValue:void 0,history:!g||e.source?t:void 0,actions:g?M:[],activities:g?b:t?t.activities:{},events:[],configuration:f,transitions:e.transitions,children:R,done:m,tags:r3(f),machine:this}),F=r!==N;O.changed=a.name===ry||F;var D=O.history;D&&delete D.history;var P=!m&&(this._transient||p.some(function(e){return e._transient}));if(!h&&(!P||""===a.name))return O;var $=O;if(!m)for(P&&($=this.resolveRaisedTransition($,{type:rc},a,n));C.length;){var L=C.shift();$=this.resolveRaisedTransition($,L._event,a,n)}var B=$.changed||(D?!!$.actions.length||F||typeof D.value!=typeof $.value||!function e(t,r){if(t===r)return!0;if(void 0===t||void 0===r)return!1;if(r$(t)||r$(r))return t===r;var n=Object.keys(t),a=Object.keys(r);return n.length===a.length&&n.every(function(n){return e(t[n],r[n])})}($.value,D.value):void 0);return $.changed=B,$.history=D,$},e.prototype.getStateNode=function(e){if(nT(e))return this.machine.getStateNodeById(e);if(!this.states)throw Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var t=this.states[e];if(!t)throw Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return t},e.prototype.getStateNodeById=function(e){var t=nT(e)?e.slice(1):e;if(t===this.id)return this;var r=this.machine.idMap[t];if(!r)throw Error("Child state node '#".concat(t,"' does not exist on machine '").concat(this.id,"'"));return r},e.prototype.getStateNodeByPath=function(e){if("string"==typeof e&&nT(e))try{return this.getStateNodeById(e.slice(1))}catch(e){}for(var t=rS(e,this.delimiter).slice(),r=this;t.length;){var n=t.shift();if(!n.length)break;r=r.getStateNode(n)}return r},e.prototype.resolve=function(e){var t,r=this;if(!e)return this.initialStateValue||nE;switch(this.type){case"parallel":return rI(this.initialStateValue,function(t,n){return t?r.getStateNode(n).resolve(e[n]||t):nE});case"compound":if(r$(e)){var n=this.getStateNode(e);if("parallel"===n.type||"compound"===n.type)return(t={})[e]=n.initialStateValue,t;return e}if(!Object.keys(e).length)return this.initialStateValue||{};return rI(e,function(e,t){return e?r.getStateNode(t).resolve(e):nE});default:return e||nE}},e.prototype.getResolvedPath=function(e){if(nT(e)){var t=this.machine.idMap[e.slice(1)];if(!t)throw Error("Unable to find state node '".concat(e,"'"));return t.path}return rS(e,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var e,t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)t=rE(this.states,function(e){return e.initialStateValue||nE},function(e){return"history"!==e.type});else if(void 0!==this.initial){if(!this.states[this.initial])throw Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));t=rX(this.states[this.initial])?this.initial:((e={})[this.initial]=this.states[this.initial].initialStateValue,e)}else t={};return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(e,t){this._init();var r=this.getStateNodes(e);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=t?t:this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var e;if("history"===this.type){var t=this.config;e=r$(t.target)&&nT(t.target)?r_(this.machine.getStateNodeById(t.target).path.slice(this.path.length-1)):t.target}return e},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(e,t,r){return void 0===r&&(r=!0),r?"history"===e.type?e.resolveHistory(t):e.initialStateNodes:[e]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var e=this;return rX(this)?[this]:"compound"!==this.type||this.initial?rA(rN(this.initialStateValue).map(function(t){return e.getFromRelativePath(t)})):[this]},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var t=rt(e),r=t[0],n=t.slice(1);if(!this.states)throw Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var a=this.getStateNode(r);if("history"===a.type)return a.resolveHistory();if(!this.states[r])throw Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(n)},e.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:rE(this.states,function(t,r){if(!e)return t.historyValue();var n=r$(e)?void 0:e[r];return t.historyValue(n||t.initialStateValue)},function(e){return!e.history})}},e.prototype.resolveHistory=function(e){var t,r=this;if("history"!==this.type)return[this];var n=this.parent;if(!e){var a=this.target;return a?rA(rN(a).map(function(e){return n.getFromRelativePath(e)})):n.initialStateNodes}var o=(t=n.path,function(e){var r,n,a=e;try{for(var o=re(t),i=o.next();!i.done;i=o.next()){var s=i.value;a=a.states[s]}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a})(e).current;return r$(o)?[n.getStateNode(o)]:rA(rN(o).map(function(e){return"deep"===r.history?n.getFromRelativePath(e):[n.states[e[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var e=this,t=rA(Object.keys(this.states).map(function(t){return e.states[t].stateIds}));return[this.id].concat(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){if(this.__cache.events)return this.__cache.events;var e,t,r,n,a=this.states,o=new Set(this.ownEvents);if(a)try{for(var i=re(Object.keys(a)),s=i.next();!s.done;s=i.next()){var l=a[s.value];if(l.states)try{for(var u=(r=void 0,re(l.events)),c=u.next();!c.done;c=u.next()){var d=c.value;o.add("".concat(d))}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){return Array.from(new Set(this.transitions.filter(function(e){return!(!e.target&&!e.actions.length&&e.internal)}).map(function(e){return e.eventType})))},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(e){var t=this;if(void 0!==e)return e.map(function(e){if(!r$(e))return e;var r=e[0]===t.delimiter;if(r&&!t.parent)return t.getStateNodeByPath(e.slice(1));var n=r?t.key+e:e;if(!t.parent)return t.getStateNodeByPath(n);try{return t.parent.getStateNodeByPath(n)}catch(e){throw Error("Invalid transition definition for state node '".concat(t.id,"':\n").concat(e.message))}})},e.prototype.formatTransition=function(e){var t=this,r=function(e){if(void 0!==e&&""!==e)return rC(e)}(e.target),n="internal"in e?e.internal:!r||r.some(function(e){return r$(e)&&e[0]===t.delimiter}),a=this.machine.options.guards,o=this.resolveTarget(r),i=t7(t7({},e),{actions:r8(rC(e.actions)),cond:rL(e.cond,a),target:o,source:this,internal:n,eventType:e.event,toJSON:function(){return t7(t7({},i),{target:i.target?i.target.map(function(e){return"#".concat(e.id)}):void 0,source:"#".concat(t.id)})}});return i},e.prototype.formatTransitions=function(){var e,t,r,n=this;if(this.config.on){if(Array.isArray(this.config.on))r=this.config.on;else{var a=this.config.on,o=a["*"],i=t9(a,["*"]);r=rA(Object.keys(i).map(function(e){return rV(e,i[e])}).concat(rV("*",void 0===o?[]:o)))}}else r=[];var s=this.config.always?rV("",this.config.always):[],l=this.config.onDone?rV(String(nt(this.id)),this.config.onDone):[],u=rA(this.invoke.map(function(e){var t=[];return e.onDone&&t.push.apply(t,rr([],rt(rV(String(nr(e.id)),e.onDone)),!1)),e.onError&&t.push.apply(t,rr([],rt(rV(String(nn(e.id)),e.onError)),!1)),t})),c=this.after,d=rA(rr(rr(rr(rr([],rt(l),!1),rt(u),!1),rt(r),!1),rt(s),!1).map(function(e){return rC(e).map(function(e){return n.formatTransition(e)})}));try{for(var p=re(c),h=p.next();!h.done;h=p.next()){var f=h.value;d.push(f)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}return d},e}(),nA=function(e){return{type:rd,assignment:e}};(mQ=gn||(gn={})).DARK="dark",mQ.BRIGHT="bright",mQ.NORMAL="normal",(mZ=ga||(ga={})).MATCHED="MATCHED",mZ.TOO_FAR="TOO FAR",mZ.CANT_IDENTIFY="CANNOT IDENTIFY",mZ.FACE_IDENTIFIED="ONE FACE IDENTIFIED",mZ.TOO_MANY="TOO MANY FACES",mZ.OFF_CENTER="OFF CENTER";let nC={CONNECTION_TIMEOUT:"CONNECTION_TIMEOUT",TIMEOUT:"TIMEOUT",RUNTIME_ERROR:"RUNTIME_ERROR",SERVER_ERROR:"SERVER_ERROR",CAMERA_FRAMERATE_ERROR:"CAMERA_FRAMERATE_ERROR",CAMERA_ACCESS_ERROR:"CAMERA_ACCESS_ERROR",FACE_DISTANCE_ERROR:"FACE_DISTANCE_ERROR",MOBILE_LANDSCAPE_ERROR:"MOBILE_LANDSCAPE_ERROR",MULTIPLE_FACES_ERROR:"MULTIPLE_FACES_ERROR"},nM={SUCCESS_CODE:1e3,DEFAULT_ERROR_CODE:4e3,FACE_FIT_TIMEOUT:4001,USER_CANCEL:4003,RUNTIME_ERROR:4005,USER_ERROR_DURING_CONNECTION:4007};function nR(e){let t=e.flippedCenterX-e.width/2,r=e.flippedCenterX+e.width/2,n=e.centerY-e.height/2,a=e.centerY+e.height/2;return{ovalBoundingBox:{left:t,top:n,right:r,bottom:a},minOvalX:t,maxOvalX:r,minOvalY:n,maxOvalY:a}}function nO(e,t){let r=Math.max(e.left,t.left),n=Math.max(e.top,t.top),a=Math.abs(Math.max(0,Math.min(e.right,t.right)-r)*Math.max(0,Math.min(e.bottom,t.bottom)-n));return 0===a?0:a/(Math.abs((e.right-e.left)*(e.bottom-e.top))+Math.abs((t.right-t.left)*(t.bottom-t.top))-a)}function nF({width:e,height:t,widthSeed:r=1,centerXSeed:n=.5,centerYSeed:a=.5,ratioMultiplier:o=.8}){let i=e,s=Math.floor(7*e/16),l=Math.floor(7*t/16),u=Math.floor(9*t/16),c=n*(Math.floor(9*e/16)-s)+s;e>=t&&(i=3/4*t);let d=r*o*i;return{flippedCenterX:Math.floor(i-c),centerX:Math.floor(c),centerY:Math.floor(a*(u-l)+l),width:Math.floor(d),height:Math.floor(1.618*d)}}function nD({canvas:e,oval:t,scaleFactor:r,videoEl:n,isStartScreen:a}){let{flippedCenterX:o,centerY:i,width:s,height:l}=t,{width:u,height:c}=e.getBoundingClientRect(),d=e.getContext("2d");if(d){d.restore(),d.clearRect(0,0,u,c),d.fillStyle=a?getComputedStyle(e).getPropertyValue("--amplify-colors-background-primary"):"#fff",d.fillRect(0,0,u,c);let t={width:n.videoWidth,height:n.videoHeight},p={x:(u-t.width*r)/2,y:(c-t.height*r)/2};d.setTransform(r,0,0,r,p.x,p.y),d.beginPath(),d.ellipse(o,i,s/2,l/2,0,0,2*Math.PI),d.strokeStyle=getComputedStyle(e).getPropertyValue("--amplify-colors-border-secondary"),d.lineWidth=3,d.stroke(),d.save(),d.clip(),d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,u,c)}else throw Error("Cannot find Canvas.")}function nP(e,t,r){let{width:n,height:a}=r.getTracks()[0].getSettings(),{width:o,height:i}=t.getBoundingClientRect();e.width=Math.ceil(o),e.height=Math.ceil(i);let s=nF({width:n,height:a,ratioMultiplier:.5});s.flippedCenterX=n-s.centerX,nD({canvas:e,oval:s,scaleFactor:o/t.videoWidth,videoEl:t,isStartScreen:!0})}function n$(e){let{leftEye:t,rightEye:r,mouth:n}=e,a=[];return a[0]=(t[0]+r[0])/2,a[1]=(t[1]+r[1])/2,{pupilDistance:Math.sqrt((t[0]-r[0])**2+(t[1]-r[1])**2),faceHeight:Math.sqrt((a[0]-n[0])**2+(a[1]-n[1])**2)}}function nL(e,t,r){let n,a;let{leftEye:o,rightEye:i,nose:s,leftEar:l,rightEar:u}=e,{height:c,centerY:d}=t,p=[];p[0]=(o[0]+i[0])/2,p[1]=(o[1]+i[1])/2;let{pupilDistance:h,faceHeight:f}=n$(e),m=(2*h+1.8*f)/2;p[1]<=(d-c/2+c)/2?(n=(p[0]+s[0])/2,a=(p[1]+s[1])/2):(n=p[0],a=p[1]);let g=1.68*m,y=Math.max(a-g/2,0);return{bottom:Math.min(a+g/2,r),left:Math.min(n-m/2,u[0]),right:Math.max(n+m/2,l[0]),top:y}}function nB(e){let t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight;let r=t.getContext("2d");if(r){r.drawImage(e,0,0,t.width,t.height);let n=r.getImageData(0,0,t.width,t.height).data,a=Array(8).fill(0);for(let e=0;e<n.length;e++){let t=Math.round(.2126*n[e++]+.7152*n[e++]+.0722*n[e++]);a[t%32]++}let o=-1,i=0;for(let e=0;e<8;e++)a[e]>i&&(i=a[e],o=e);return(t.remove(),0===o)?gn.DARK:8===o?gn.BRIGHT:gn.NORMAL}throw Error("Cannot find Video Element.")}function nz({ctx:e,prevColor:t,nextColor:r,fraction:n}){let a=e.canvas.width,o=e.canvas.height;e.fillStyle=r,e.fillRect(0,0,a,o*n),1!==n&&(e.fillStyle=t,e.fillRect(0,o*n,a,o*(1-n)))}let nW=e=>!!e;function nU(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(e=>parseInt(e))}async function nj(e,t){let r;switch((await e.detectFaces(t)).length){case 0:r=ga.CANT_IDENTIFY;break;case 1:r=ga.FACE_IDENTIFIED;break;default:r=ga.TOO_MANY}return r}async function nV({faceDetector:e,videoEl:t,ovalDetails:r,reduceThreshold:n=!1,isMobile:a=!1}){let o,i;let s=await e.detectFaces(t),l=!1;switch(s.length){case 0:i=nC.FACE_DISTANCE_ERROR;break;case 1:{o=s[0];let{width:e}=r,{pupilDistance:t,faceHeight:u}=n$(o);!e||(l=(2*t+1.8*u)/2/2/e<(n?a?.37:.4:.32))||(i=nC.FACE_DISTANCE_ERROR);break}default:i=nC.MULTIPLE_FACES_ERROR}return{isDistanceBelowThreshold:l,error:i}}function nH({deviceHeight:e,deviceWidth:t,height:r,width:n,top:a,left:o}){return{Height:r/e,Width:n/t,Top:a/e,Left:o/t}}class nG{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class nq{refCount(e){return nK("refCount")}incRef(e){return nK("incRef")}timerAvailable(){return!0}time(e){return nK("time")}read(e){return nK("read")}readSync(e){return nK("readSync")}readToGPU(e,t){return nK("readToGPU")}numDataIds(){return nK("numDataIds")}disposeData(e,t){return nK("disposeData")}write(e,t,r){return nK("write")}move(e,t,r,n,a){return nK("move")}createTensorFromGPUData(e,t,r){return nK("createTensorFromGPUData")}memory(){return nK("memory")}floatPrecision(){return nK("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return nK("dispose")}}function nK(e){throw Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function nY(e,t,r){return Math.max(e,Math.min(t,r))}function nX(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function nQ(e,t){if(!e)throw Error("string"==typeof t?t:t())}function nZ(e,t,r=""){nQ(n1(e,t),()=>r+` Shapes ${e} and ${t} must match`)}function nJ(e){nQ(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function n0(e){if(0===e.length)return 1;let t=e[0];for(let r=1;r<e.length;r++)t*=e[r];return t}function n1(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function n2(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function n3(e,t){let r=1,n=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)r*=e[t];else if(-1===e[t]){if(-1!==n)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${n} and dim ${t}`);n=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===n){if(t>0&&t!==r)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===r)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%r!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${r}`);let a=e.slice();return a[n]=t/r,a}function n4(e,t){let r=t.length;return nQ((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-r&&e<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${e}`),nQ(e.every(e=>e%1==0),()=>`All values in axis param must be integers but got axis ${e}`),e.map(e=>e<0?r+e:e)}function n6(e,t){let r=null;if(null==e||"float32"===e)r=new Float32Array(t);else if("int32"===e)r=new Int32Array(t);else if("bool"===e)r=new Uint8Array(t);else if("string"===e)r=Array(t);else throw Error(`Unknown data type ${e}`);return r}function n5(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw Error(`Unknown dtype ${e}`)}function n8(e){return"string"==typeof e||e instanceof String}function n7(e){if(Array.isArray(e))return n7(e[0]);if(e instanceof Float32Array);else{if(e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return"int32";if("number"==typeof e);else{if(n8(e))return"string";if("boolean"==typeof e)return"bool"}}return"float32"}function n9(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ae(e){let t=e.length;if(t<2)return[];let r=Array(t-1);r[t-2]=e[t-1];for(let n=t-3;n>=0;--n)r[n]=r[n+1]*e[n+1];return r}function at(e,t,r=!1){if(0===e.length)return t[0];let n=e.reduce((e,t)=>e*t)*(r?2:1);if(0===n)return[];if(n!==t.length)throw Error(`[${e}] does not match the input size ${t.length}${r?" for a complex tensor":""}.`);return function e(t,r,n,a=!1){let o=[];if(1===r.length){let e=r[0]*(a?2:1);for(let r=0;r<e;r++)o[r]=n[t+r]}else{let i=r[0],s=r.slice(1),l=s.reduce((e,t)=>e*t)*(a?2:1);for(let r=0;r<i;r++)o[r]=e(t+r*l,s,n,a)}return o}(0,e,t,r)}function ar(e,t){let r=an(e,t);for(let e=0;e<r.length;e++)r[e]=1;return r}function an(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw Error(`Unknown data type ${t}`)}function aa(e,t){let r=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return at(e,new Float32Array(r));if("int32"===t)return at(e,new Int32Array(r));if("bool"===t)return at(e,new Uint8Array(r));throw Error(`Unknown data type ${t}`)}function ao(e){e.forEach(t=>{nQ(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function ai(e,t,r){if(0===t)return 0;if(1===t)return e[0];let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=r[t]*e[t];return n}function as(e,t,r){if(0===t)return[];if(1===t)return[e];let n=Array(t);for(let t=0;t<n.length-1;++t)n[t]=Math.floor(e/r[t]),e-=n[t]*r[t];return n[n.length-1]=e,n}function al(e){return e&&e.then&&"function"==typeof e.then}let au="tfjsflags";class ac{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ad,this.populateURLFlags()}setPlatform(e,t){null==this.platform||ap.getBool("IS_TEST")||ap.getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},null!=this.urlFlags[e]){let t=this.urlFlags[e];ap.getBool("IS_TEST")||ap.getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(al(t))throw Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;let e=this.getQueryParams(this.global.location.search);au in e&&e[au].split(",").forEach(e=>{let[t,r]=e.split(":");this.urlFlags[t]=function(e,t){let r=t.toLowerCase();return"true"===r||"false"===r?"true"===r:`${+r}`===r?+r:t}(0,r)})}}function ad(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...r)=>{var n,a;return n=r[0],a=r[1],t[decodeURIComponent(n)]=decodeURIComponent(a||""),r.join("=")}),t}let ap=null;var ah=r(40257);function af(){if(null==n){let e;if("undefined"!=typeof window)e=window;else if(void 0!==r.g)e=r.g;else if(void 0!==ah)e=ah;else if("undefined"!=typeof self)e=self;else throw Error("Could not find a global object");n=e}return n}function am(e,t){let r=function(){let e=af();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(r.has(e))return r.get(e);{let n=t();return r.set(e,n),r.get(e)}}let ag="Acos",ay="Acosh",av="AddN",ab="ArgMax",aw="ArgMin",ak="Asin",aS="Asinh",ax="Atan",a_="Atanh",aI="Atan2",aE="AvgPool",aT="AvgPoolGrad",aN="AvgPool3D",aA="AvgPool3DGrad",aC="BatchMatMul",aM="BatchToSpaceND",aR="Bincount",aO="BitwiseAnd",aF="BroadcastArgs",aD="Cast",aP="Ceil",a$="ClipByValue",aL="Complex",aB="ComplexAbs",az="Concat",aW="Conv2D",aU="Conv2DBackpropFilter",aj="Conv2DBackpropInput",aV="Conv3D",aH="Conv3DBackpropFilterV2",aG="Conv3DBackpropInputV2",aq="Cosh",aK="Cumprod",aY="Cumsum",aX="CropAndResize",aQ="DenseBincount",aZ="DepthToSpace",aJ="DepthwiseConv2dNative",a0="DepthwiseConv2dNativeBackpropFilter",a1="DepthwiseConv2dNativeBackpropInput",a2="Diag",a3="Dilation2D",a4="Dilation2DBackpropInput",a6="Dilation2DBackpropFilter",a5="Draw",a8="RealDiv",a7="Einsum",a9="EluGrad",oe="Equal",ot="ExpandDims",or="Expm1",on="Fill",oa="FlipLeftRight",oo="Floor",oi="FloorDiv",os="FusedBatchNorm",ol="GatherV2",ou="GatherNd",oc="Greater",od="GreaterEqual",op="Identity",oh="IFFT",of="Imag",om="IsFinite",og="IsInf",oy="IsNan",ov="LeakyRelu",ob="Less",ow="LessEqual",ok="LinSpace",oS="Log1p",ox="LogicalAnd",o_="LogicalNot",oI="LogicalOr",oE="LRNGrad",oT="Maximum",oN="MaxPool",oA="MaxPoolGrad",oC="MaxPool3D",oM="MaxPool3DGrad",oR="MaxPoolWithArgmax",oO="Mean",oF="Minimum",oD="MirrorPad",oP="Multinomial",o$="Multiply",oL="NotEqual",oB="NonMaxSuppressionV3",oz="NonMaxSuppressionV4",oW="NonMaxSuppressionV5",oU="OnesLike",oj="OneHot",oV="Pack",oH="PadV2",oG="Prelu",oq="Prod",oK="RaggedGather",oY="RaggedRange",oX="RaggedTensorToTensor",oQ="Range",oZ="Real",oJ="Reciprocal",o0="Relu",o1="Reshape",o2="ResizeNearestNeighbor",o3="ResizeNearestNeighborGrad",o4="ResizeBilinear",o6="ResizeBilinearGrad",o5="Relu6",o8="Reverse",o7="Round",o9="Rsqrt",ie="ScatterNd",it="TensorScatterUpdate",ir="SearchSorted",ia="Select",io="Selu",ii="Slice",is="Sinh",il="Sign",iu="Sigmoid",ic="Softplus",id="Sqrt",ip="SpaceToBatchND",ih="SplitV",im="Softmax",ig="SparseFillEmptyRows",iy="SparseReshape",iv="SparseSegmentMean",ib="SparseSegmentSum",iw="SparseToDense",ik="SquaredDifference",iS="Square",ix="StaticRegexReplace",i_="StridedSlice",iI="StringNGrams",iE="StringSplit",iT="StringToHashBucketFast",iN="Tanh",iA="Tile",iC="TopK",iM="Transform",iR="Transpose",iO="Unique",iF="Unpack",iD="UnsortedSegmentSum",iP="ZerosLike",i$="Step",iL="FromPixels",iB="RotateWithOffset",iz="_FusedMatMul",iW="FusedConv2D",iU="FusedDepthwiseConv2D";function ij(...e){ap.getBool("IS_TEST")||ap.getBool("PROD")||console.warn(...e)}let iV=am("kernelRegistry",()=>new Map),iH=am("gradRegistry",()=>new Map);function iG(e,t){let r=`${t}_${e}`;return iV.get(r)}function iq(e){let t=iV.entries(),r=[];for(;;){let{done:n,value:a}=t.next();if(n)break;let[o,i]=a,[s]=o.split("_");s===e&&r.push(i)}return r}function iK(e){let{kernelName:t,backendName:r}=e,n=`${r}_${t}`;iV.has(n)&&ij(`The kernel '${t}' for backend '${r}' is already registered`),iV.set(n,e)}function iY(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var iX=r(398);let iQ=r.n(iX)()||iX;function iZ(e){return iQ.fromString(e,!0,16)}let iJ=iZ("c3a5c85c97cb3127"),i0=iZ("b492b66fbe98f273"),i1=iZ("9ae16a3b2f90404f");function i2(e){return e.xor(e.shru(47))}function i3(e,t,r){let n=e.slice(t,t+r);return iQ.fromBytes(Array.from(n),!0,!0)}function i4(e,t){return i3(e,t,8)}function i6(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function i5(e,t,r=iZ("9ddfea08eb382d69")){let n=e.xor(t).mul(r);n=n.xor(n.shru(47));let a=t.xor(n).mul(r);return(a=a.xor(a.shru(47))).mul(r)}function i8(e,t,r,n){return function(e,t,r,n,a,o){a=a.add(e),o=i6(o.add(a).add(n),21);let i=a;return a=(a=a.add(t)).add(r),o=o.add(i6(a,44)),[a.add(n),o.add(i)]}(i4(e,t),i4(e,t+8),i4(e,t+16),i4(e,t+24),r,n)}function i7(e,t){return"string"===t?st(e):i9([e],t)}function i9(e,t){var r;if("string"===t)throw Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=sa(e)),ap.getBool("DEBUG")&&function(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${t} being uploaded contains ${n}.`)}}(e,t),(r=e)instanceof Float32Array&&"float32"===t||r instanceof Int32Array&&"int32"===t||r instanceof Uint8Array&&"bool"===t)return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){let t=new Uint8Array(e.length);for(let r=0;r<t.length;++r)0!==Math.round(e[r])&&(t[r]=1);return t}throw Error(`Unknown data type ${t}`)}function se(){return ap.platform.now()}function st(e,t="utf-8"){return t=t||"utf-8",ap.platform.encode(e,t)}function sr(e,t="utf-8"){return t=t||"utf-8",ap.platform.decode(e,t)}function sn(e){return null!=ap.platform.isTypedArray?ap.platform.isTypedArray(e):iY(e)}function sa(e,t=[],r=!1){if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||al(e)||null==e||sn(e)&&r)t.push(e);else if(Array.isArray(e)||sn(e))for(let n=0;n<e.length;++n)sa(e[n],t,r);else{let n=-1;for(let t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(n=Math.max(n,Number(t)));for(let a=0;a<=n;a++)sa(e[a],t,r)}return t}class so{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new si)}profileKernel(e,t,r){let n,a;let o=()=>{n=r()},i=se();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{for(let e of(o(),n))e.dataSync();a=Promise.resolve({kernelMs:se()-i})}if(ap.getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<n.length;t++){let r=n[t];r.data().then(t=>{!function(e,t,r){if("float32"===t)for(let t=0;t<e.length;t++){let n=e[t];if(isNaN(n)||!isFinite(n))return console.warn(`Found ${n} in the result of '${r}'`),!0}}(t,r.dtype,e)})}return{kernelName:e,outputs:n,inputs:t,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:r,timeMs:n,inputs:a,extraInfo:o}=e;r.forEach(e=>{Promise.all([e.data(),n,o]).then(r=>{this.logger.logKernelProfile(t,e,r[0],r[1],a,r[2])})})}}class si{logKernelProfile(e,t,r,n,a,o){let i="number"==typeof n?n2(`${n}ms`,9):n.error,s=n2(e,25),l=t.rank,u=t.size,c=n2(t.shape.toString(),14),d="";for(let e in a){let r=a[e];if(null!=r){let n=r.shape||t.shape,a=n.length;d+=`${e}: ${a}D ${a>0?n:""} `}}console.log(`%c${s}	%c${i}	%c${l}D ${c}	%c${u}	%c${d}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function ss(e,t,r){return n2(Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:n8(e)?`'${e}'`:"bool"===r?sl(e):parseFloat(e.toFixed(7)).toString(),t)}function sl(e){return 0===e?"false":"true"}function su(e){let t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}class sc{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=n0(e),null!=r){let e=r.length;nQ(e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||n6(t,this.size),this.strides=ae(e)}set(e,...t){0===t.length&&(t=[0]),nQ(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let r=this.locToIndex(t);this.values[r]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(let r of e){if(r<0||r>=this.shape[t])throw Error(`Requested out of range element at ${e}.   Buffer shape=${this.shape}`);t++}let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=this.strides[t]*e[t];return this.values[r]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];let t=Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return sd().makeTensor(this.values,this.shape,this.dtype)}}let sd=null,sp=null;class sh{constructor(e,t,r,n){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=n0(e),this.strides=ae(e),this.dataId=r,this.id=n,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return sp.buffer(this.shape,this.dtype,e)}bufferSync(){return sp.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return at(this.shape,e,"complex64"===this.dtype)}arraySync(){return at(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();let e=sd().read(this.dataId);if("string"===this.dtype){let t=await e;try{return t.map(e=>sr(e))}catch(e){throw Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),sd().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=sd().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>sr(e))}catch(e){throw Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await sd().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),sd().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw Error("Tensor is disposed.")}print(e=!1){return sp.print(this,e)}clone(){return this.throwIfDisposed(),sp.clone(this)}toString(e=!1){return function(e,t,r,n){let a=ae(t),o=function(e,t,r,n){let a=n0(t),o=n[n.length-1],i=Array(o).fill(0),s=t.length,l="complex64"===r?su(e):e;if(s>1)for(let e=0;e<a/o;e++){let t=e*o;for(let e=0;e<o;e++)i[e]=Math.max(i[e],ss(l[t+e],0,r).length)}return i}(e,t,r,a),i=t.length,s=function e(t,r,n,a,o,i=!0){let s="complex64"===n?2:1,l=r[0],u=r.length;if(0===u)return"complex64"===n?[ss(su(t)[0],0,n)]:"bool"===n?[sl(t[0])]:[t[0].toString()];if(1===u){if(l>20){let e=Array.from(t.slice(0,3*s)),r=Array.from(t.slice((l-3)*s,l*s));return"complex64"===n&&(e=su(e),r=su(r)),["["+e.map((e,t)=>ss(e,o[t],n)).join(", ")+", ..., "+r.map((e,t)=>ss(e,o[l-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?su(t):Array.from(t)).map((e,t)=>ss(e,o[t],n)).join(", ")+"]"]}let c=r.slice(1),d=a.slice(1),p=a[0]*s,h=[];if(l>20){for(let r=0;r<3;r++){let a=r*p,i=a+p;h.push(...e(t.slice(a,i),c,n,d,o,!1))}h.push("...");for(let r=l-3;r<l;r++){let a=r*p,i=a+p;h.push(...e(t.slice(a,i),c,n,d,o,r===l-1))}}else for(let r=0;r<l;r++){let a=r*p,i=a+p;h.push(...e(t.slice(a,i),c,n,d,o,r===l-1))}let f=2===u?",":"";h[0]="["+(l>0?h[0]+f:"");for(let e=1;e<h.length-1;e++)h[e]=" "+h[e]+f;let m=",\n";for(let e=2;e<u;e++)m+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":m),h}(e,t,r,a,o),l=["Tensor"];return n&&(l.push(`  dtype: ${r}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(s.map(e=>"    "+e).join("\n")),l.join("\n")}(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),sp.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),sd().makeVariable(this,e,t,r)}}Object.defineProperty(sh,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),am("Tensor",()=>sh);class sf extends sh{constructor(e,t,r,n){super(e.shape,e.dtype,e.dataId,n),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!n1(e.shape,this.shape))throw Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);sd().disposeTensor(this),this.dataId=e.dataId,sd().incRef(this,null)}dispose(){sd().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(sf,Symbol.hasInstance,{value:e=>e instanceof sh&&null!=e.assign&&e.assign instanceof Function}),(mJ=go||(go={})).R0="R0",mJ.R1="R1",mJ.R2="R2",mJ.R3="R3",mJ.R4="R4",mJ.R5="R5",mJ.R6="R6",(m0=gi||(gi={})).float32="float32",m0.int32="int32",m0.bool="int32",m0.complex64="complex64",(m1=gs||(gs={})).float32="float32",m1.int32="int32",m1.bool="bool",m1.complex64="complex64",(m2=gl||(gl={})).float32="float32",m2.int32="float32",m2.bool="float32",m2.complex64="complex64",(m3=gu||(gu={})).float32="complex64",m3.int32="complex64",m3.bool="complex64",m3.complex64="complex64";let sm={float32:gl,int32:gi,bool:gs,complex64:gu};function sg(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw Error(`Can not upcast ${e} with ${t}`)}return sm[e][t]}function sy(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function sv(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function sb(e,t){if(e.dtype===t.dtype)return[e,t];let r=sg(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function sw(e){let t=[];return function e(t,r,n){if(null!=t){if(t instanceof sh){r.push(t);return}if(Array.isArray(t)||"object"==typeof t)for(let a in t){let o=t[a];n.has(o)||(n.add(o),e(o,r,n))}}}(e,t,new Set),t}function sk(e){return null!=e.kernelName}class sS{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}}class sx{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new sS}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{let{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(ij(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(null==this.registryFactory[e])throw Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;let{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new so(this.backendInstance),!0}setupRegisteredKernels(){iq(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){iq(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(null==t)throw Error(`Cannot initialize backend ${e}, no registration found.`);try{let r=t.factory();if(!r||r instanceof nq||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};{let t=++this.pendingBackendInitId,n=r.then(r=>!(t<this.pendingBackendInitId)&&(this.registry[e]=r,this.pendingBackendInit=null,!0)).catch(r=>!(t<this.pendingBackendInitId)&&(this.pendingBackendInit=null,ij(`Initialization of backend ${e} failed`),ij(r.stack||r.message),!1));return this.pendingBackendInit=n,{success:n,asyncInit:!0}}}catch(t){return ij(`Initialization of backend ${e} failed`),ij(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let r=e[t],{success:n,asyncInit:a}=this.initializeBackend(r);if(a||n)return{name:r,asyncInit:a}}throw Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let r=this.state.tensorInfo.get(t),n=r.backend,a=this.readSync(t),o=n.refCount(t);n.disposeData(t,!0),r.backend=e,e.move(t,a,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r,n=null;if(null==t){if("function"!=typeof e)throw Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}return this.scopedRun(()=>this.startScope(n),()=>this.endScope(r),()=>((r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,t,r){e();try{let e=r();return t(),e}catch(e){throw t(),e}}nextTensorId(){return sx.nextTensorId++}nextVariableId(){return sx.nextVariableId++}clone(e){let t=sI.runKernel(op,{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],e=>({x:()=>sI.runKernel(aD,{x:e},{dtype:"float32"})}),[],{}),t}runKernel(e,t,r){if(null==this.backendName&&this.backend,!(null!=iG(e,this.backendName)))throw Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){let n=this.backend.numDataIds(),a=0;r.forEach(e=>{a+="complex64"===e.dtype?3:1});let o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=n-t-a-o;if(i>0)throw Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,r,n,a;let o=[],i=this.isTapeOn(),s=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;let u=sk(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(sk(e)){let{kernelName:t,inputs:a,attrs:s}=e;null==this.backendName&&this.backend;let l=iG(t,this.backendName);nQ(null!=l,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),r=()=>{let e=this.backend.numDataIds(),r=Array.isArray(n=l.kernelFunc({inputs:a,attrs:s,backend:this.backend}))?n:[n];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,r);let u=r.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(i){let e=this.getTensorsForGradient(t,a,u);o=this.saveTensorsForBackwardMode(e)}return u}}else{let{forwardFunc:t}=e,a=e=>{i&&(o=e.map(e=>this.keep(this.clone(e))))};r=()=>{let e=this.backend.numDataIds(),r=Array.isArray(n=this.tidy(()=>t(this.backend,a)))?n:[n];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,e,r),r}}let{inputs:c,attrs:d}=e,p=sk(e)?null:e.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(a=this.profiler.profileKernel(u,c,()=>r()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(a),t=a.outputs):t=r()}),i&&this.addTapeNode(u,c,t,p,o,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(e=>null!=c[e]?c[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:a.timeMs,extraInfo:a.extraInfo}),Array.isArray(n)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,r){let n=iH.get(e);if(null!=n){let e;let a=n.inputsToSave||[],o=n.outputsToSave||[];n.saveAllInputs?(nQ(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),e=Object.keys(t).map(e=>t[e])):e=a.map(e=>t[e]);let i=r.filter((e,t)=>o[t]);return e.concat(i)}return[]}makeTensor(e,t,r,n){if(null==e)throw Error("Values passed to engine.makeTensor() are null");r=r||"float32",n=n||this.backend;let a=e;"string"===r&&n8(e[0])&&(a=e.map(e=>st(e)));let o=n.write(a,t,r),i=new sh(t,r,o,this.nextTensorId());if(this.trackTensor(i,n),"string"===r){let e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,r,n){let a={dataId:e,shape:t,dtype:r=r||"float32"};return this.makeTensorFromTensorInfo(a,n)}makeTensorFromTensorInfo(e,t){let{dataId:r,shape:n,dtype:a}=e,o=new sh(n,a,r,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e,t=!0,r,n){r=r||this.nextVariableId().toString(),null!=n&&n!==e.dtype&&(e=e.cast(n));let a=new sf(e,t,r,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*n5(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof sf||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){let t=e.size*n5(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,r=this.state.numTensors;for(let n of(this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,this.state.activeProfile.kernels))n.kernelTimeMs=await n.kernelTimeMs,n.extraInfo=await n.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,r,n,a,o){let i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:a},s=iH.get(e);null!=s&&(n=s.gradFunc),null!=n&&(i.gradient=e=>(e=e.map((e,t)=>{if(null==e){let e=r[t],n=an(e.size,e.dtype);return this.makeTensor(n,e.shape,e.dtype)}return e}),n(e.length>1?e:e[0],a,o))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=sw(e),r=new Set(t.map(e=>e.id));for(let e=0;e<this.state.activeScope.track.length;e++){let t=this.state.activeScope.track[e];t.kept||r.has(t.id)||t.dispose()}let n=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==n.id||this.track(e)})}gradients(e,t,r,n=!1){if(nQ(t.length>0,()=>"gradients() received an empty list of xs."),null!=r&&"float32"!==r.dtype)throw Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));nQ(a instanceof sh,()=>"The result y returned by f() must be a tensor.");let o=function(e,t,r){let n={},a={};for(let e=0;e<t.length;e++)n[t[e].id]=!0;for(let r=0;r<e.length;r++){let o=e[r],i=o.inputs;for(let e in i){let r=i[e],s=!1;for(let e=0;e<t.length;e++)if(n[r.id]){o.outputs.forEach(e=>n[e.id]=!0),s=!0,a[o.id]=!0;break}if(s)break}}let o={};o[r.id]=!0;let i={};for(let t=e.length-1;t>=0;t--){let r=e[t],n=r.inputs;for(let e=0;e<r.outputs.length;e++)if(o[r.outputs[e].id]){for(let e in n)o[n[e].id]=!0,i[r.id]=!0;break}}let s=[];for(let t=0;t<e.length;t++){let r=e[t];if(a[r.id]&&i[r.id]){let e={};for(let t in r.inputs){let a=r.inputs[t];n[a.id]&&(e[t]=a)}let t=Object.assign({},r);t.inputs=e,t.outputs=r.outputs,s.push(t)}}return s}(this.state.activeTape,t,a);if(!n&&0===o.length&&t.length>0)throw Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let e={};e[a.id]=null==r?function(e){let t=ar(n0(e),"float32");return sI.makeTensor(t,e,"float32")}(a.shape):r,function(e,t,r,n){for(let a=t.length-1;a>=0;a--){let o=t[a],i=[];if(o.outputs.forEach(t=>{let r=e[t.id];null!=r?i.push(r):i.push(null)}),null==o.gradient)throw Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);let s=o.gradient(i);for(let t in o.inputs){if(!(t in s))throw Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);let a=r(()=>s[t]());if("float32"!==a.dtype)throw Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${a.dtype}'`);let i=o.inputs[t];if(!n1(a.shape,i.shape))throw Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${t}' has shape '${a.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=a;else{let t=e[i.id];e[i.id]=n(t,a),t.dispose()}}}}(e,o,e=>this.tidy(e),sE);let n=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(let t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:n}})}customGrad(e){return nQ(n9(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let r;nQ(t.every(e=>e instanceof sh),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n={};return t.forEach((e,t)=>{n[t]=e}),this.runKernelFunc({forwardFunc:(n,a)=>(nQ((r=e(...t,a)).value instanceof sh,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),nQ(n9(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),backwardsFunc:(e,n)=>{let a=r.gradFunc(e,n),o=Array.isArray(a)?a:[a];nQ(o.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),nQ(o.every(e=>e instanceof sh),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let i={};return o.forEach((e,t)=>{i[t]=()=>e}),i},inputs:n})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){let t=se(),r=await this.backend.time(e);return r.wallMs=se()-t,r}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){for(let e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new sS,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function s_(){let e=af();if(null==e._tfengine){let t=new ac(e);e._tfengine=new sx(t)}return ap=e._tfengine.ENV,sd=()=>e._tfengine,e._tfengine}sx.nextTensorId=0,sx.nextVariableId=0;let sI=s_();function sE(e,t){return sI.runKernel("Add",{a:e,b:t})}var sT=r(40257);let sN=ap;function sA(e,t){let r=e;if(sn(e))return"string"===t?[]:[e.length];if(sy(e)){let t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(sv(e))return[e.buffer.size/(null==t?4:n5(t))];if(!Array.isArray(e))return[];let n=[];for(;Array.isArray(r)||sn(r)&&"string"!==t;)n.push(r.length),r=r[0];return Array.isArray(e)&&ap.getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,r,n){if(n=n||[],!Array.isArray(t)&&!sn(t)){nQ(0===r.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${r[0]} elements`);return}nQ(r.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),nQ(t.length===r[0],()=>`Element arr[${n.join("][")}] should have ${r[0]} elements, but has ${t.length} elements`);let a=r.slice(1);for(let r=0;r<t.length;++r)e(t[r],a,n.concat(r))}(e,n,[]),n}function sC(e,t,r,n){if("string_or_numeric"!==e){if(null==e)throw Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw Error(`Argument '${r}' passed to '${n}' must be ${e} tensor, but got ${t} tensor`)}}function sM(e,t,r,n="numeric"){if(e instanceof sh)return sC(n,e.dtype,t,r),e;let a=n7(e);if("string"!==a&&["bool","int32","float32"].indexOf(n)>=0&&(a=n),sC(n,a,t,r),null==e||!sn(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){let n=null==e?"null":e.constructor.name;throw Error(`Argument '${t}' passed to '${r}' must be a Tensor or TensorLike, but got '${n}'`)}let o=sA(e,a);sn(e)||Array.isArray(e)||(e=[e]);let i="string"!==a?i9(e,a):sa(e,[],!0);return sI.makeTensor(i,o,a)}function sR(e,t,r,n="numeric"){if(!Array.isArray(e))throw Error(`Argument ${t} passed to ${r} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((e,a)=>sM(e,`${t}[${a}]`,r,n))}sN.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),sN.registerFlag("IS_BROWSER",()=>"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope),sN.registerFlag("IS_NODE",()=>void 0!==sT&&void 0!==sT.versions&&void 0!==sT.versions.node),sN.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),sN.registerFlag("IS_SAFARI",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),sN.registerFlag("PROD",()=>!1),sN.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>sN.getBool("DEBUG")),sN.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),sN.registerFlag("IS_TEST",()=>!1),sN.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>sN.getBool("DEBUG")),sN.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),sN.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),sN.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);let sO="__op";function sF(e){let t=Object.keys(e);if(1!==t.length)throw Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let r=t[0],n=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1));let a=(...e)=>{sI.startScope(r);try{let t=n(...e);return al(t)&&console.error("Cannot return a Promise inside of tidy."),sI.endScope(t),t}catch(e){throw sI.endScope(null),e}};return Object.defineProperty(a,"name",{value:r+=sO,configurable:!0}),a}let sD=sF({complex_:function(e,t){let r=sM(e,"real","complex"),n=sM(t,"imag","complex");return nZ(r.shape,n.shape,`real and imag shapes, ${r.shape} and ${n.shape}, must match in call to tf.complex().`),sI.runKernel(aL,{real:r,imag:n})}});function sP(e,t,r,n){if(null==n)n=n7(e);else if("complex64"===n)throw Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(sv(e)||sy(e)){if("float32"!==n&&"int32"!==n)throw Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${n}.`);return sI.backend.createTensorFromGPUData(e,t||r,n)}if(!sn(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){ao(t);let e=n0(t),n=n0(r);nQ(e===n,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${n}`);for(let e=0;e<r.length;++e){let n=r[e],a=e!==r.length-1||n!==n0(t.slice(e));nQ(r[e]===t[e]||!a,()=>`Error creating a new Tensor. Inferred shape (${r}) does not match the provided shape (${t}). `)}}return sn(e)||Array.isArray(e)||(e=[e]),t=t||r,e="string"!==n?i9(e,n):sa(e,[],!0),sI.makeTensor(e,t,n)}function s$(e,t,r){let n=sA(e,r);return sP(e,t,n,r)}let sL={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class sB{static join(e){return new sB(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e||(e instanceof Array||(e=[e]),0===(e=e.map(e=>sn(e)?e.buffer:e)).length))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let r=0;r<e.length;r++){let n=e[r];r!==e.length-1&&n.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let a=t+n.byteLength;this.shards.push({buffer:n,start:t,end:a}),t=a}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(0===this.shards.length||(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),(t=Math.min(this.byteLength,t))<=e))return new ArrayBuffer(0);let r=this.findShardForByte(e);if(-1===r)throw Error(`Could not find start shard for byte ${e}`);let n=new ArrayBuffer(t-e),a=new Uint8Array(n),o=0;for(let n=r;n<this.shards.length;n++){let r=this.shards[n],i=e+o-r.start,s=o,l=Math.min(t,r.end)-r.start,u=new Uint8Array(r.buffer,i,l-i);if(a.set(u,s),o+=u.length,t<r.end)break}return n}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return -1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;let r=function(e,t){let r=0,n=e.length;for(;r<=n;){let a=Math.floor((n-r)/2)+r,o=t(e[a]);if(0===o)return a;o<0?n=a:r=a+1}return -1}(this.shards,t);return -1===r?-1:(this.previousShardIndex=r,this.previousShardIndex)}}var sz=r(82957).lW;async function sW(e,t){let r=[],n=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let o=0;o<a.length;++o){let i=a[o],s=Array.isArray(e)?e[o].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw Error(`Unsupported dtype in weight '${i}': ${s.dtype}`);let l={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){let e=new Promise(async e=>{let t=await s.bytes(),r=new Uint8Array(t.reduce((e,t)=>e+t.length,0)+4*t.length),n=0;for(let e=0;e<t.length;e++){let a=t[e],o=new Uint8Array(new Uint32Array([a.length]).buffer);r.set(o,n),n+=4,r.set(a,n),n+=a.length}e(r)});n.push(e)}else n.push(s.data());null!=t&&(l.group=t),r.push(l)}return{data:function(e){if(null===e)throw Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0,r=[];e.forEach(e=>{if(t+=e.byteLength,r.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});let n=new Uint8Array(t),a=0;return r.forEach(e=>{n.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),n.buffer}(await Promise.all(n)),specs:r}}function sU(e,t){let r;let n=new sB(e),a={},o=0;for(let e of t){let t;let i=e.name,s=e.dtype,l=e.shape,u=n0(l);if("quantization"in e){let a=e.quantization;if("uint8"===a.dtype||"uint16"===a.dtype){if(!("min"in a&&"scale"in a))throw Error(`Weight ${e.name} with quantization ${a.dtype} doesn't have corresponding metadata min and scale.`)}else if("float16"===a.dtype){if("float32"!==s)throw Error(`Weight ${e.name} is quantized with ${a.dtype} which only supports weights of type float32 not ${s}.`)}else throw Error(`Weight ${e.name} has unknown quantization dtype ${a.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let l=sL[a.dtype],c=n.slice(o,o+u*l),d="uint8"===a.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===s){if("uint8"===a.dtype||"uint16"===a.dtype){t=new Float32Array(d.length);for(let e=0;e<d.length;e++){let r=d[e];t[e]=r*a.scale+a.min}}else if("float16"===a.dtype)void 0===r&&(r=function(){let e=function(){let e=e=>{let t=e<<13,r=0;for(;(8388608&t)==0;)r-=8388608,t<<=1;return(t&=-8388609)|(r+=947912704)},t=new Uint32Array(2048);t[0]=0;for(let r=1;r<1024;r++)t[r]=e(r);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),r=function(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return n=>{let a=new ArrayBuffer(4*n.length),o=new Uint32Array(a);for(let a=0;a<n.length;a++){let i=n[a],s=e[r[i>>10]+(1023&i)]+t[i>>10];o[a]=s}return new Float32Array(a)}}()),t=r(d);else throw Error(`Unsupported quantization type ${a.dtype} for weight type float32.`)}else if("int32"===s){if("uint8"!==a.dtype&&"uint16"!==a.dtype)throw Error(`Unsupported quantization type ${a.dtype} for weight type int32.`);t=new Int32Array(d.length);for(let e=0;e<d.length;e++){let r=d[e];t[e]=Math.round(r*a.scale+a.min)}}else throw Error(`Unsupported dtype in weight '${i}': ${s}`);o+=u*l}else if("string"===s){let r=n0(e.shape);t=[];for(let e=0;e<r;e++){let e=new Uint32Array(n.slice(o,o+4))[0];o+=4;let r=new Uint8Array(n.slice(o,o+e));t.push(r),o+=e}}else{let e=sL[s],r=n.slice(o,o+u*e);if("float32"===s)t=new Float32Array(r);else if("int32"===s)t=new Int32Array(r);else if("bool"===s)t=new Uint8Array(r);else if("complex64"===s){t=new Float32Array(r);let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<e.length;r++)e[r]=t[2*r],n[r]=t[2*r+1];let o=s$(e,l,"float32"),s=s$(n,l,"float32");a[i]=sD(o,s),o.dispose(),s.dispose()}else throw Error(`Unsupported dtype in weight '${i}': ${s}`);o+=u*e}"complex64"!==s&&(a[i]=s$(t,l,s))}return a}let sj=void 0!==sz&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function sV(e){return sj?sz.byteLength(e,"utf8"):new Blob([e]).size}function sH(e){return sB.join(e)}function sG(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let t=e.split("/");return t[t.length-1]}function sq(e,t){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),r}function sK(e,t,r){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw Error("modelJSON has weightsManifest but weightSpecs is null");if(!r)throw Error("modelJSON has weightsManifest but weightData is null");n.weightSpecs=t,n.weightData=r}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),n}async function sY(e,t){let r,n;return null!=e.weightsManifest&&([r,n]=await t(e.weightsManifest)),sK(e,r,n)}function sX(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:sV(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:sV(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new sB(e.weightData).byteLength}}function sQ(e){let t=[];for(let r of e)t.push(...r.weights);return t}class sZ{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==sZ.instance&&(sZ.instance=new sZ),sZ.instance}static registerSaveRouter(e){sZ.getInstance().saveRouters.push(e)}static registerLoadRouter(e){sZ.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return sZ.getHandlers(e,"save")}static getLoadHandlers(e,t){return sZ.getHandlers(e,"load",t)}static getHandlers(e,t,r){let n=[];return("load"===t?sZ.getInstance().loadRouters:sZ.getInstance().saveRouters).forEach(t=>{let a=t(e,r);null!==a&&n.push(a)}),n}}let sJ=e=>sZ.registerSaveRouter(e),s0=e=>sZ.registerLoadRouter(e),s1=e=>sZ.getSaveHandlers(e),s2=(e,t)=>sZ.getLoadHandlers(e,t),s3="tensorflowjs",s4="models_store",s6="model_info_store";function s5(){if(!ap.getBool("IS_BROWSER"))throw Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw Error("The current browser does not appear to support IndexedDB.");return t}function s8(e){let t=e.result;t.createObjectStore(s4,{keyPath:"modelPath"}),t.createObjectStore(s6,{keyPath:"modelPath"})}class s7{constructor(e){if(this.indexedDB=s5(),null==e||!e)throw Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,r)=>{let n=this.indexedDB.open(s3,1);n.onupgradeneeded=()=>s8(n),n.onsuccess=()=>{let a=n.result;if(null==t){let t=a.transaction(s4,"readonly"),n=t.objectStore(s4).get(this.modelPath);n.onsuccess=()=>{if(null==n.result)return a.close(),r(Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(n.result.modelArtifacts)},n.onerror=e=>(a.close(),r(n.error)),t.oncomplete=()=>a.close()}else{let n,o;t.weightData=sB.join(t.weightData);let i=sX(t),s=a.transaction(s6,"readwrite"),l=s.objectStore(s6);try{n=l.put({modelPath:this.modelPath,modelArtifactsInfo:i})}catch(e){return r(e)}n.onsuccess=()=>{let n;let u=(o=a.transaction(s4,"readwrite")).objectStore(s4);try{n=u.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:i})}catch(e){return r(e)}n.onsuccess=()=>e({modelArtifactsInfo:i}),n.onerror=e=>{let t=(l=s.objectStore(s6)).delete(this.modelPath);t.onsuccess=()=>(a.close(),r(n.error)),t.onerror=e=>(a.close(),r(n.error))}},n.onerror=e=>(a.close(),r(n.error)),s.oncomplete=()=>{null==o?a.close():o.oncomplete=()=>a.close()}}},n.onerror=e=>r(n.error)})}}s7.URL_SCHEME="indexeddb://";let s9=e=>{var t;return ap.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(s7.URL_SCHEME)?(t=e.slice(s7.URL_SCHEME.length),new s7(t)):null};sZ.registerSaveRouter(s9),sZ.registerLoadRouter(s9);class le{constructor(){this.indexedDB=s5()}async listModels(){return new Promise((e,t)=>{let r=this.indexedDB.open(s3,1);r.onupgradeneeded=()=>s8(r),r.onsuccess=()=>{let n=r.result,a=n.transaction(s6,"readonly"),o=a.objectStore(s6).getAll();o.onsuccess=()=>{let t={};for(let e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(n.close(),t(o.error)),a.oncomplete=()=>n.close()},r.onerror=e=>t(r.error)})}async removeModel(e){var t;return e=(t=e).startsWith(s7.URL_SCHEME)?t.slice(s7.URL_SCHEME.length):t,new Promise((t,r)=>{let n=this.indexedDB.open(s3,1);n.onupgradeneeded=()=>s8(n),n.onsuccess=()=>{let a;let o=n.result,i=o.transaction(s6,"readwrite"),s=i.objectStore(s6),l=s.get(e);l.onsuccess=()=>{if(null==l.result)return o.close(),r(Error(`Cannot find model with path '${e}' in IndexedDB.`));{let n=s.delete(e),i=()=>{let n=(a=o.transaction(s4,"readwrite")).objectStore(s4).delete(e);n.onsuccess=()=>t(l.result.modelArtifactsInfo),n.onerror=e=>r(l.error)};n.onsuccess=i,n.onerror=e=>(i(),o.close(),r(l.error))}},l.onerror=e=>(o.close(),r(l.error)),i.oncomplete=()=>{null==a?o.close():a.oncomplete=()=>o.close()}},n.onerror=e=>r(n.error)})}}let lt="tensorflowjs_models",lr="info";function ln(e){return{info:[lt,e,lr].join("/"),topology:[lt,e,"model_topology"].join("/"),weightSpecs:[lt,e,"weight_specs"].join("/"),weightData:[lt,e,"weight_data"].join("/"),modelMetadata:[lt,e,"model_metadata"].join("/")}}function la(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}class lo{constructor(e){if(!ap.getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ln(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),n=sX(e),a=sB.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(n)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(sj)return sz.from(e).toString("base64");let t=new Uint8Array(e),r="";for(let e=0,n=t.length;e<n;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(a));let o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:n}}catch(e){throw la(this.keys),Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${n.modelTopologyBytes}, weightSpecsBytes=${n.weightSpecsBytes}, weightDataBytes=${n.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(null==r)throw Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;let n=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==n)throw Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=n;let a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){let e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}let o=this.LS.getItem(this.keys.weightData);if(null==o)throw Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(sj){let t=sz.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r.set([t.charCodeAt(e)],e);return r.buffer}(o),t}}lo.URL_SCHEME="localstorage://";let li=e=>{var t;return ap.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(lo.URL_SCHEME)?(t=e.slice(lo.URL_SCHEME.length),new lo(t)):null};sZ.registerSaveRouter(li),sZ.registerLoadRouter(li);class ls{constructor(){nQ(ap.getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),nQ("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=lt+"/",r="/"+lr;for(let n=0;n<this.LS.length;++n){let a=this.LS.key(n);a.startsWith(t)&&a.endsWith(r)&&(e[function(e){let t=e.split("/");if(t.length<3)throw Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join("/")}(a)]=JSON.parse(this.LS.getItem(a)))}return e}async removeModel(e){var t;let r=ln(e=(t=e).startsWith(lo.URL_SCHEME)?t.slice(lo.URL_SCHEME.length):t);if(null==this.LS.getItem(r.info))throw Error(`Cannot find model at path '${e}'`);let n=JSON.parse(this.LS.getItem(r.info));return la(r),n}}class ll{constructor(){this.managers={}}static getInstance(){return null==ll.instance&&(ll.instance=new ll),ll.instance}static registerManager(e,t){nQ(null!=e,()=>"scheme must not be undefined or null."),e.endsWith("://")&&(e=e.slice(0,e.indexOf("://"))),nQ(e.length>0,()=>"scheme must not be an empty string.");let r=ll.getInstance();nQ(null==r.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){let t=ll.getInstance().managers[e];if(null==t)throw Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(ll.getInstance().managers)}}function lu(e){if(-1===e.indexOf("://"))throw Error(`The url string provided does not contain a scheme. Supported schemes are: ${ll.getSchemes().join(",")}`);return{scheme:e.split("://")[0],path:e.split("://")[1]}}async function lc(e,t,r=!1){nQ(e!==t,()=>`Old path and new path are the same: '${e}'`);let n=sZ.getLoadHandlers(e);nQ(n.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),nQ(n.length<2,()=>`Copying failed because more than one (${n.length}) load handlers for source URL ${e}.`);let a=n[0],o=sZ.getSaveHandlers(t);nQ(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),nQ(o.length<2,()=>`Copying failed because more than one (${n.length}) save handlers for destination URL ${t}.`);let i=o[0],s=lu(e).scheme,l=lu(e).path,u=s===lu(e).scheme,c=await a.load();r&&u&&await ll.getManager(s).removeModel(l);let d=await i.save(c);return r&&!u&&await ll.getManager(s).removeModel(l),d.modelArtifactsInfo}async function ld(){let e=ll.getSchemes(),t={};for(let r of e){let e=await ll.getManager(r).listModels();for(let n in e)t[r+"://"+n]=e[n]}return t}async function lp(e){let t=lu(e);return ll.getManager(t.scheme).removeModel(t.path)}async function lh(e,t){return lc(e,t,!1)}async function lf(e,t){return lc(e,t,!0)}class lm{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if("undefined"==typeof window||!ap.getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{e.source===window&&e.data.name===this.messageName&&(e.stopPropagation(),(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0))}isTypedArray(e){return iY(e)}}if(ap.get("IS_BROWSER")){ap.setPlatform("browser",new lm);try{ll.registerManager(lo.URL_SCHEME,new ls)}catch(e){}try{ll.registerManager(s7.URL_SCHEME,new le)}catch(e){}}var lg=r(40257);let ly={importFetch:()=>r(75410)};class lv{constructor(){this.util=r(48628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=ap.global.fetch?ap.global.fetch(e,t):(null==a&&(a=ly.importFetch()),a(e,t))}now(){let e=lg.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function lb(e,t="float32",r){return t=t||"float32",ao(e),new sc(e,t,r)}ap.get("IS_NODE")&&!ap.get("IS_BROWSER")&&ap.setPlatform("node",new lv);let lw=sF({cast_:function(e,t){let r=sM(e,"x","cast");if(!("bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t))throw Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==r.dtype||"string"!==t&&"string"===r.dtype)throw Error("Only strings can be casted to strings");return sI.runKernel(aD,{x:r},{dtype:t})}}),lk=sF({clone_:function(e){let t=sM(e,"x","clone","string_or_numeric");return sI.runKernel(op,{x:t})}});function lS(e,t=!1){console.log(e.toString(t))}function lx(e,t){return sI.tidy(e,t)}function l_(e){sw(e).forEach(e=>e.dispose())}function lI(e){return sI.keep(e)}function lE(e){return sI.setBackend(e)}function lT(e,t,r=1){return sI.registerBackend(e,t,r)}s_(),sp={buffer:lb,cast:lw,clone:lk,print:lS};let lN=sF({add_:function(e,t){let r=sM(e,"a","add"),n=sM(t,"b","add");[r,n]=sb(r,n);let a={a:r,b:n};return sI.runKernel("Add",a)}}),lA=sF({floorDiv_:function(e,t){let r=sM(e,"a","floorDiv"),n=sM(t,"b","floorDiv");[r,n]=sb(r,n);let a={a:r,b:n};return sI.runKernel(oi,a)}}),lC=sF({div_:function(e,t){let r=sM(e,"a","div"),n=sM(t,"b","div");if([r,n]=sb(r,n),"int32"===r.dtype&&"int32"===n.dtype)return lA(r,n);let a={a:r,b:n};return sI.runKernel(a8,a,{})}}),lM=sF({mul_:function(e,t){let r=sM(e,"a","mul"),n=sM(t,"b","mul");[r,n]=sb(r,n);let a={a:r,b:n};return sI.runKernel(o$,a)}}),lR=sF({sqrt_:function(e){let t=sM(e,"x","sqrt","float32");return sI.runKernel(id,{x:t})}}),lO=sF({square_:function(e){let t=sM(e,"x","square");return sI.runKernel("Square",{x:t},{})}}),lF=sF({zerosLike_:function(e){let t=sM(e,"x","zerosLike");return sI.runKernel(iP,{x:t})}});function lD(e){return sI.customGrad(e)}function lP(e,t){if((sn(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&sn(e)&&!(e instanceof Uint8Array))throw Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return sP(e,[],[],t)}let l$=new Map,lL=new Map;class lB{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class lz{constructor(){this.classNameMap={}}static getMap(){return null==lz.instance&&(lz.instance=new lz),lz.instance}static register(e){lz.getMap().classNameMap[e.className]=[e,e.fromConfig]}}class lW extends lB{minimize(e,t=!1,r){let{value:n,grads:a}=this.computeGradients(e,r);if(null!=r){let e=r.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return(l_(a),t)?n:(n.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){nQ(n9(e),()=>"The f passed in variableGrads(f) must be a function"),nQ(null==t||Array.isArray(t)&&t.every(e=>e instanceof sf),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let r=null!=t;if(!r)for(let e in t=[],sI.registeredVariables)t.push(sI.registeredVariables[e]);let n=r?t.filter(e=>!e.trainable):null,a=t.length;nQ((t=t.filter(e=>e.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);let{value:o,grads:i}=sI.gradients(e,t,null,!0);nQ(i.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),nQ(0===o.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);let s={};return t.forEach((e,t)=>{null!=i[t]&&(s[e.name]=i[t])}),null!=n&&n.forEach(e=>s[e.name]=null),{value:o,grads:s}}(e,t)}dispose(){null!=this.iterations_&&l_(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:lP(this.iterations_,"int32")}}async getWeights(){throw Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(lW,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class lU extends lW{static get className(){return"Adadelta"}constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==r&&(this.epsilon=sI.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,r)=>{let n=sI.registeredVariables[t];null==this.accumulatedGrads[r]&&(this.accumulatedGrads[r]={originalName:`${t}/accum_grad`,variable:lx(()=>lF(n).variable(!1))}),null==this.accumulatedUpdates[r]&&(this.accumulatedUpdates[r]={originalName:`${t}/accum_var`,variable:lx(()=>lF(n).variable(!1))});let a=Array.isArray(e)?e[r].tensor:e[t];if(null==a)return;let o=this.accumulatedGrads[r].variable,i=this.accumulatedUpdates[r].variable;lx(()=>{let e=lN(lM(o,this.rho),lM(lO(a),1-this.rho)),t=lM(lC(lR(lN(i,this.epsilon)),lR(lN(o,this.epsilon))),a),r=lN(lM(i,this.rho),lM(lO(t),1-this.rho));o.assign(e),i.assign(r);let s=lN(lM(t,-this.learningRate),n);n.assign(s)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(l_(this.accumulatedGrads.map(e=>e.variable)),l_(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){let t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function lj(e,t,r){ao(e),r=r||n7(t);let n={shape:e,value:t,dtype:r};return sI.runKernel(on,{},n)}class lV extends lW{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,r)=>{let n=sI.registeredVariables[t];null==this.accumulatedGrads[r]&&(this.accumulatedGrads[r]={originalName:`${t}/accumulator`,variable:lx(()=>lj(n.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(e)?e[r].tensor:e[t];if(null==a)return;let o=this.accumulatedGrads[r].variable;lx(()=>{let e=lN(o,lO(a));o.assign(e);let t=lN(lM(lC(a,lR(lN(e,sI.backend.epsilon()))),-this.learningRate),n);n.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&l_(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}let lH=sF({pow_:function(e,t){let r=sM(e,"base","pow"),n=sM(t,"exp","pow");[r,n]=sb(r,n);let a={a:r,b:n};return sI.runKernel("Pow",a)}}),lG=sF({sub_:function(e,t){let r=sM(e,"a","sub"),n=sM(t,"b","sub");[r,n]=sb(r,n);let a={a:r,b:n};return sI.runKernel("Sub",a)}});class lq extends lW{static get className(){return"Adam"}constructor(e,t,r,n=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=n,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],lx(()=>{this.accBeta1=lP(t).variable(),this.accBeta2=lP(r).variable()}),null==n&&(this.epsilon=sI.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);lx(()=>{let r=lG(1,this.accBeta1),n=lG(1,this.accBeta2);t.forEach((t,a)=>{let o=sI.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:lx(()=>lF(o).variable(!1))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:`${t}/v`,variable:lx(()=>lF(o).variable(!1))});let i=Array.isArray(e)?e[a].tensor:e[t];if(null==i)return;let s=this.accumulatedFirstMoment[a].variable,l=this.accumulatedSecondMoment[a].variable,u=lN(lM(s,this.beta1),lM(i,1-this.beta1)),c=lN(lM(l,this.beta2),lM(lO(i),1-this.beta2)),d=lC(u,r),p=lC(c,n);s.assign(u),l.assign(c);let h=lN(lM(lC(d,lN(lR(p),this.epsilon)),-this.learningRate),o);o.assign(h)}),this.accBeta1.assign(lM(this.accBeta1,this.beta1)),this.accBeta2.assign(lM(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&l_(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&l_(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),lx(()=>{this.accBeta1.assign(lH(this.beta1,this.iterations_+1)),this.accBeta2.assign(lH(this.beta2,this.iterations_+1))});let t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}let lK=sF({abs_:function(e){let t=sM(e,"x","abs");return"complex64"===t.dtype?sI.runKernel(aB,{x:t}):sI.runKernel("Abs",{x:t})}});function lY(e,t){let r=e.length,n=[];for(let a=0;a<r;a++){let o=r-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&n.unshift(o)}return n}function lX(e,t){let r=Math.max(e.length,t.length),n=Array(r);for(let a=0;a<r;a++){let o=e[e.length-a-1];null==o&&(o=1);let i=t[t.length-a-1];if(null==i&&(i=1),1===o)n[r-a-1]=i;else if(1===i)n[r-a-1]=o;else if(o!==i)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);else n[r-a-1]=o}return n}let lQ=sF({maximum_:function(e,t){let r=sM(e,"a","maximum"),n=sM(t,"b","maximum");[r,n]=sb(r,n),"bool"===r.dtype&&(r=lw(r,"int32"),n=lw(n,"int32")),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(oT,a)}});class lZ extends lW{static get className(){return"Adamax"}constructor(e,t,r,n=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=n,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],lx(()=>{this.iteration=lP(0).variable(),this.accBeta1=lP(t).variable()}),null==n&&(this.epsilon=sI.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);lx(()=>{let r=lG(1,this.accBeta1),n=lC(-this.learningRate,lN(lM(this.iteration,this.decay),1));t.forEach((t,a)=>{let o=sI.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:lF(o).variable(!1)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:`${t}/v`,variable:lF(o).variable(!1)});let i=Array.isArray(e)?e[a].tensor:e[t];if(null==i)return;let s=this.accumulatedFirstMoment[a].variable,l=this.accumulatedWeightedInfNorm[a].variable,u=lN(lM(s,this.beta1),lM(i,1-this.beta1)),c=lQ(lM(l,this.beta2),lK(i));s.assign(u),l.assign(c);let d=lN(lM(lC(n,r),lC(u,lN(c,this.epsilon))),o);o.assign(d)}),this.iteration.assign(lN(this.iteration,1)),this.accBeta1.assign(lM(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&l_(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&l_(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class lJ extends lW{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,r)=>{let n=Array.isArray(e)?e[r].tensor:e[t];if(null==n)return;let a=sI.registeredVariables[t];lx(()=>{let e=lN(lM(this.c,n),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=lI(lP(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class l0 extends lJ{static get className(){return"Momentum"}constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=lP(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,r)=>{let n=sI.registeredVariables[t];null==this.accumulations[r]&&(this.accumulations[r]={originalName:`${t}/momentum`,variable:lx(()=>lF(n).variable(!1))});let a=this.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[t];null!=o&&lx(()=>{let e;let t=lN(lM(this.m,a),o);e=this.useNesterov?lN(lM(this.c,lN(o,lM(t,this.m))),n):lN(lM(this.c,t),n),a.assign(t),n.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&l_(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class l1 extends lW{static get className(){return"RMSProp"}constructor(e,t=.9,r=0,n=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=n,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==n&&(this.epsilon=sI.backend.epsilon()),null==e)throw Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,r)=>{let n=sI.registeredVariables[t];null==this.accumulatedMeanSquares[r]&&(this.accumulatedMeanSquares[r]={originalName:`${t}/rms`,variable:lx(()=>lF(n).variable(!1))}),null==this.accumulatedMoments[r]&&(this.accumulatedMoments[r]={originalName:`${t}/momentum`,variable:lx(()=>lF(n).variable(!1))}),null==this.accumulatedMeanGrads[r]&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${t}/mg`,variable:lx(()=>lF(n).variable(!1))});let a=Array.isArray(e)?e[r].tensor:e[t];if(null==a)return;let o=this.accumulatedMeanSquares[r].variable,i=this.accumulatedMoments[r].variable;lx(()=>{let e=lN(lM(o,this.decay),lM(lO(a),1-this.decay));if(this.centered){let t=this.accumulatedMeanGrads[r].variable,s=lN(lM(t,this.decay),lM(a,1-this.decay)),l=lC(lM(a,this.learningRate),lR(lG(e,lN(lO(s),this.epsilon)))),u=lN(lM(i,this.momentum),l);o.assign(e),t.assign(s),i.assign(u);let c=lG(n,u);n.assign(c)}else{let e=lN(lM(o,this.decay),lM(lO(a),1-this.decay)),t=lN(lM(i,this.momentum),lC(lM(a,this.learningRate),lR(lN(e,this.epsilon))));o.assign(e),i.assign(t);let r=lG(n,t);n.assign(r)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&l_(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&l_(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&l_(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}let l2=[lU,lV,lq,lZ,l0,l1,lJ];function l3(e){return new Promise(e=>setTimeout(e)).then(e)}class l4{constructor(e){if(!ap.getBool("IS_BROWSER"))throw Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(l4.URL_SCHEME)&&(e=e.slice(l4.URL_SCHEME.length)),(null==e||0===e.length)&&(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw Error("Browser downloads are not supported in this environment since `document` is not present");let t=sB.join(e.weightData),r=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let t=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],n=sq(e,t),a=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=a,await l3(()=>o.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){let e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=r,await l3(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:sX(e)}}}}l4.URL_SCHEME="downloads://";class l6{constructor(e){if(null==e||e.length<1)throw Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let r=new FileReader;r.onload=r=>{let n=JSON.parse(r.target.result),a=n.modelTopology;if(null==a){t(Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(null==n.weightsManifest){t(Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(0===this.weightsFiles.length){e({modelTopology:a});return}e(sY(n,e=>this.loadWeights(e)))},r.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){let t=[],r=[];for(let n of e)t.push(...n.weights),r.push(...n.paths);let n=this.checkManifestAndWeightFiles(e);return Promise.all(r.map(e=>this.loadWeightsFile(e,n[e]))).then(e=>[t,e])}loadWeightsFile(e,t){return new Promise((r,n)=>{let a=new FileReader;a.onload=e=>{r(e.target.result)},a.onerror=t=>n(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],r=this.weightsFiles.map(e=>sG(e.name)),n={};for(let a of e)a.paths.forEach(e=>{let a=sG(e);if(-1!==t.indexOf(a))throw Error(`Duplicate file basename found in weights manifest: '${a}'`);if(t.push(a),-1===r.indexOf(a))throw Error(`Weight file with basename '${a}' is not provided.`);n[e]=this.weightsFiles[r.indexOf(a)]});if(t.length!==this.weightsFiles.length)throw Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return n}}function l5(e){return new l6(e)}function l8(e,t,r,n){var a,o;nQ(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array"),a=r=null==r?0:r,o=n=null==n?1:n,nQ(a>=0&&a<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${a}`),nQ(o>=0&&o<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${o}`),nQ(o>=a,()=>`startFraction must be no more than endFraction, but got startFraction ${a} and endFraction ${o}`);let i=0;return Promise.all(e.map(a=>(a.then(a=>(t(r+ ++i/e.length*(n-r)),a)),a)))}async function l7(e,t){null==t&&(t={});let r=null==t.fetchFunc?ap.platform.fetch:t.fetchFunc,n=e.map(e=>r(e,t.requestInit,{isBinary:!0})),a=(null==t.onProgress?await Promise.all(n):await l8(n,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(a):await l8(a,t.onProgress,.5,1)}async function l9(e,t="",r,n){return ue(e=>l7(e,{requestInit:n}))(e,t,r)}function ue(e){return async(t,r="",n)=>{let a=t.map(()=>!1),o={},i=null!=n?n.map(()=>!1):[],s=[];if(t.forEach((e,t)=>{let r=0;e.weights.forEach(e=>{let l=sL["quantization"in e?e.quantization.dtype:e.dtype]*n0(e.shape),u=()=>{a[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=n?n.forEach((t,r)=>{t===e.name&&(u(),i[r]=!0)}):u(),s.push(e.name),r+=l})}),!i.every(e=>e)){let e=n.filter((e,t)=>!i[t]);throw Error(`Could not find weights in manifest with names: ${e.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}let l=a.reduce((e,t,r)=>(t&&e.push(r),e),[]),u=[];l.forEach(e=>{t[e].paths.forEach(e=>{let t=r+(r.endsWith("/")?"":"/")+e;u.push(t)})});let c=await e(u),d={},p=0;return l.forEach(e=>{let r=t[e].paths.length,n=new sB(c.slice(p,p+r));o[e].forEach(e=>{let t=sU(n.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(let e in t)d[e]=t[e]}),p+=r}),d}}sZ.registerSaveRouter(e=>ap.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(l4.URL_SCHEME)?function(e="model"){return new l4(e)}(e.slice(l4.URL_SCHEME.length)):null);class ut{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(nQ("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=ap.platform.fetch,nQ(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&nQ(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],n=sq(e,r);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){let r=sB.join(e.weightData);t.body.append("model.weights.bin",new Blob([r],{type:"application/octet-stream"}),"model.weights.bin")}let a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:sX(e),responses:[a]};throw Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async load(){let e;let t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);try{e=await t.json()}catch(t){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",Error(e)}let r=e.modelTopology,n=e.weightsManifest;if(null==r&&null==n)throw Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return sY(e,e=>this.loadWeights(e))}async loadWeights(e){let[t,r]=function(e){let t=e.lastIndexOf("/"),r=e.lastIndexOf("?");return[e.substring(0,t)+"/",r>t?e.substring(r):""]}(Array.isArray(this.path)?this.path[1]:this.path),n=this.weightPathPrefix||t,a=sQ(e),o=[],i=[];for(let t of e)for(let e of t.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):o.push(n+e+r);return this.weightUrlConverter&&o.push(...await Promise.all(i)),[a,await l7(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})]}}function ur(e){return null!=e.match(ut.URL_SCHEME_REGEX)}ut.URL_SCHEME_REGEX=/^https?:\/\//;let un=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc));else if(Array.isArray(e)?e.every(e=>ur(e)):ur(e))return ua(e,t);return null};function ua(e,t){return new ut(e,t)}function uo(e,t){return ua(e,t)}sZ.registerSaveRouter(un),sZ.registerLoadRouter(un);class ui{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class us{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class ul{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function uu(e,t,r,n){let a=arguments;return new ul(uc(...a))}function uc(e,t,r,n){return 1!=arguments.length?(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ui({modelTopology:e,weightSpecs:t,weightData:r,trainingConfig:n})):null!=e.modelTopology||null!=e.weightSpecs?new ui(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ui({modelTopology:e}))}function ud(e){return new us(e)}function up(e){return new us(e)}function uh(e,t,r){if(nJ(e),null!=t&&3!==t.length)throw Error("tensor3d() requires shape to have three numbers");let n=sA(e,r);if(3!==n.length&&1!==n.length)throw Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===n.length&&null==t)throw Error("tensor3d() requires shape to be provided when `values` are a flat array");return sP(e,t,n,r)}let uf=!1;async function um(e,t){let r=sM(e,"img","toPixels");if(!(e instanceof sh)){let e=r;r=lw(e,"int32"),e.dispose()}!function(e){if(2!==e.rank&&3!==e.rank)throw Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);let t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if("float32"!==e.dtype&&"int32"!==e.dtype)throw Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}(r);let[n,a]=r.shape.slice(0,2),o=2===r.rank?1:r.shape[2],i=await r.data(),s="float32"===r.dtype?255:1,l=new Uint8ClampedArray(a*n*4);for(let e=0;e<n*a;++e){let t=[0,0,0,255];for(let n=0;n<o;n++){let a=i[e*o+n];if("float32"===r.dtype){if(a<0||a>1)throw Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${a}.`)}else if("int32"===r.dtype&&(a<0||a>255))throw Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${a}.`);1===o?(t[0]=a*s,t[1]=a*s,t[2]=a*s):t[n]=a*s}let n=4*e;l[n+0]=Math.round(t[0]),l[n+1]=Math.round(t[1]),l[n+2]=Math.round(t[2]),l[n+3]=Math.round(t[3])}if(null!=t){uf||null==iG(a5,sI.backendName)||(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),uf=!0),t.width=a,t.height=n;let e=t.getContext("2d"),r=new ImageData(l,a,n);e.putImageData(r,0,0)}return r!==e&&r.dispose(),l}let ug=sF({fromPixels_:function(e,t=3){let r,n;if(t>4)throw Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw Error("pixels passed to tf.browser.fromPixels() can not be null");let a=!1,i=!1,s=!1,l=!1,u=!1,c=!1;if(e.data instanceof Uint8Array)a=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)i=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)s=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)l=!0;else if(null!=e.getContext)u=!0;else if("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)c=!0;else throw Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(null!=iG(iL,sI.backendName))return sI.runKernel(iL,{pixels:e},{numChannels:t});let[d,p]=s?[e.videoWidth,e.videoHeight]:[e.width,e.height];if(u)r=e.getContext("2d").getImageData(0,0,d,p).data;else if(i||a)r=e.data;else if(l||s||c){if(null==o){if("undefined"==typeof document){if("undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof OffscreenCanvasRenderingContext2D)o=new OffscreenCanvas(1,1).getContext("2d");else throw Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.")}else o=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}o.canvas.width=d,o.canvas.height=p,o.drawImage(e,0,0,d,p),r=o.getImageData(0,0,d,p).data}if(4===t)n=new Int32Array(r);else{let e=d*p;n=new Int32Array(e*t);for(let a=0;a<e;a++)for(let e=0;e<t;++e)n[a*t+e]=r[4*a+e]}return uh(n,[p,d,t],"int32")}});function uy(e,t){let r=e.shape.length,n=t.shape.length;if(r<1)throw Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${r}.`);if(n<1)throw Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${n}.`);if("int32"!==t.dtype)throw Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[n-1]>r)throw Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[n-1]} vs. ${r}`);if(0===n0(e.shape))throw Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let a=t.shape,o=a[a.length-1],i=1;for(let e=0;e<a.length-1;++e)i*=a[e];let s=e.shape,l=a.slice();l.pop();let u=1;for(let e=o;e<r;++e)u*=s[e],l.push(s[e]);let c=[...ae(e.shape).map(e=>e/u),1].slice(0,o);return[l,i,u,c]}function uv(e,t,r){if(t.rank<1)throw Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(r.length<1)throw Error(`Output rank must be greater or equal to 1, but got shape: ${r}`);if(0===r.length){if(0===t.size)throw Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw Error(`Updates specified for empty output. updates shape: ${e.shape}`)}!function(e,t,r){let n=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${r.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${n}, and batchDim: ${a}.`;if(r.rank<a)throw Error(o+` update.rank < ${a}. `);if(e.length<n+(r.rank-a))throw Error(o+` Output shape length < ${n+(r.rank-a)}`);if(r.rank!==a+e.length-n)throw Error(o+` update.rank != ${a+e.length-n}`);for(let e=0;e<a;++e)if(r.shape[e]!==t.shape[e])throw Error(o+` updates.shape[${e}] (${r.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<r.rank-a;++t)if(r.shape[t+a]!==e[t+n])throw Error(o+` updates.shape[${t+a}] (${r.shape[t+a]}) != shape[${t+a}] (${e[t+a]})`)}(r,t,e)}function ub(e,t,r){let n=t.shape.length,a=n>1?t.shape[n-1]:1,o=r.length,i=1;for(let e=a;e<o;++e)i*=r[e];let s=a<1?1:a,l=n0(t.shape)/s,u=[...ae(r.slice(0,a)),1];return{sliceRank:a,numUpdates:l,sliceSize:i,strides:u,outputSize:n0(r)}}function uw(e,t,r){let n=[];for(let a=0;a<e.length;a++)n[a]=Math.ceil((t[a]-e[a])/r[a]);return n}function uk(e,t,r){let n=r.length;for(let e=0;e<r.length;e++)if(r[e]>1){n=e;break}for(let a=n+1;a<r.length;a++)if(t[a]>0||r[a]!==e[a])return!1;return!0}function uS(e,t){let r=e.length>0?e[e.length-1]:1;for(let n=0;n<e.length-1;n++)r+=e[n]*t[n];return r}function ux(e,t,r){let n,a;let o=e.shape.length;return(n="number"==typeof t?[t,...Array(o-1).fill(0)]:t.length<o?t.concat(Array(o-t.length).fill(0)):t.slice()).forEach(e=>{nQ(-1!==e,()=>"slice() does not support negative begin indexing.")}),a=(a=null==r?Array(o).fill(-1):"number"==typeof r?[r,...Array(o-1).fill(-1)]:r.length<o?r.concat(Array(o-r.length).fill(-1)):r).map((t,r)=>t>=0?t:(nQ(-1===t,()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${r}.`),e.shape[r]-n[r])),[n,a]}function u_(e,t,r,n,a,o,i,s,l){let u;if(null==n?(u=Array(t.length)).fill(1):u=n,null!=i&&(i&i-1)!=0)throw Error("Multiple ellipses in slice is not allowed.");let c=!1,d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:r.slice(),strides:u.slice(),beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:l};for(let e=0;e<d.dims;e++)c&&(1<<e&s)!=0&&d.numAddAxisAfterEllipsis++,1<<e&i&&(c=!0);!c&&(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let r=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=Array(t.dims),t.end=Array(t.dims),t.strides=Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=Array(t.dims);for(let n=0;n<e.dims;n++)if(1<<n&e.ellipsisMask){let a=Math.min(t.dims-(e.dims-n)+1+e.numAddAxisAfterEllipsis,t.dims);for(;r<a;r++)t.begin[r]=0,t.end[r]=0,t.strides[r]=1,t.beginMask|=1<<r,t.endMask|=1<<r,t.finalShapeGatherIndices.push(r),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[r]=n}else if(1<<n&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(r===t.begin.length)throw Error(`Index out of range using input dim ${r}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[r]=e.begin[n]),null!=e.end&&(t.end[r]=e.end[n]),t.strides[r]=e.strides[n],e.beginMask&1<<n&&(t.beginMask|=1<<r),e.endMask&1<<n&&(t.endMask|=1<<r),e.shrinkAxisMask&1<<n?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<r):(t.finalShapeGatherIndices.push(r),t.finalShapeGatherIndicesSparse.push(n)),t.inputShapeGatherIndicesSparse[r]=n,r++}}(d,p);let h=!0,f=!0,m=!0,g=[],y=[];for(let t=0;t<e.length;++t){let r;if(0===p.strides[t])throw Error(`strides[${t}] must be non-zero`);let n=!!(p.shrinkAxisMask&1<<t),a=e[t];if(-1===a){g.push(n?1:-1);continue}let o=[p.beginMask&1<<t,p.endMask&1<<t],i=[p.strides[t]>0?0:-1,p.strides[t]>0?a:a-1];if(n&&p.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===p.strides[t];let s=!!(p.beginMask&1<<t&&p.endMask&1<<t);if(p.beginValid&&p.endValid){if(n){let e=p.begin[t]<0?a+p.begin[t]:p.begin[t];if(p.begin[t]=e,p.end[t]=p.begin[t]+1,e<0||e>=a)throw Error(`slice index ${p.begin[t]} of dimension ${t} out of bounds.`)}else p.begin[t]=uI(p.begin[t],0,p.strides[t],a,o,i),p.end[t]=uI(p.end[t],1,p.strides[t],a,o,i);let e=1===p.strides[t]&&0===p.begin[t]&&p.end[t]===a;h=h&&e,f=f&&(0===t&&1===p.strides[t]||e)}else h=h&&1===p.strides[t]&&s,f=f&&(0===t&&1===p.strides[t]||s);let l=!1;if(p.beginValid&&p.endValid?(r=p.end[t]-p.begin[t],l=!0):n?(r=1,l=!0):s&&a>=0&&(r=p.strides[t]<0?-a:a,l=!0),l){let e;e=0===r||r<0!=p.strides[t]<0?0:Math.trunc(r/p.strides[t])+(r%p.strides[t]!=0?1:0),g.push(e)}else g.push(-1)}for(let e=0;e<p.finalShapeGatherIndices.length;++e){let t=p.finalShapeGatherIndices[e];t>=0?y.push(g[t]):-2===t&&y.push(1)}return{finalShapeSparse:y.filter((e,t)=>-2!==p.finalShapeGatherIndices[t]),finalShape:y,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function uI(e,t,r,n,a,o){if(a[t])return r>0?o[t]:o[t+1&1];{let t=e<0?n+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}let uE=sF({acos_:function(e){let t=sM(e,"x","acos");return sI.runKernel(ag,{x:t})}}),uT=sF({acosh_:function(e){let t=sM(e,"x","acosh");return sI.runKernel(ay,{x:t})}}),uN=sF({addN_:function(e){nQ(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),nQ(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);let t=e.map((e,t)=>sM(e,`tensors${t}`,"addN")),r=t[0];return t.forEach(e=>{if(e.dtype!==r.dtype)throw Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!n1(e.shape,r.shape))throw Error("All tensors passed to tf.addN() must have the same shape")}),sI.runKernel(av,t)}}),uA=sF({all_:function(e,t=null,r=!1){let n=sM(e,"x","all","bool");return sI.runKernel("All",{x:n},{axis:t,keepDims:r})}}),uC=sF({any_:function(e,t=null,r=!1){let n=sM(e,"x","any","bool");return sI.runKernel("Any",{x:n},{axis:t,keepDims:r})}}),uM=sF({argMax_:function(e,t=0){let r=sM(e,"x","argMax");return sI.runKernel(ab,{x:r},{axis:t})}}),uR=sF({argMin_:function(e,t=0){let r=sM(e,"x","argMin");return sI.runKernel(aw,{x:r},{axis:t})}}),uO=sF({asin_:function(e){let t=sM(e,"x","asin");return sI.runKernel(ak,{x:t})}}),uF=sF({asinh_:function(e){let t=sM(e,"x","asinh");return sI.runKernel(aS,{x:t})}}),uD=sF({atan_:function(e){let t=sM(e,"x","atan");return sI.runKernel(ax,{x:t})}}),uP=sF({atan2_:function(e,t){let r=sM(e,"a","atan2"),n=sM(t,"b","atan2");[r,n]=sb(r,n);let a={a:r,b:n};return sI.runKernel(aI,a)}}),u$=sF({atanh_:function(e){let t=sM(e,"x","atanh");return sI.runKernel(a_,{x:t})}});function uL(e,t,r,n,a="NHWC",o){let i=[...t,e[3]];return uW(e,i,r,o,n,null,null,uQ(a))}function uB(e,t,r,n,a,o,i="channelsLast"){let s;let[l,u]=uV(t);if("channelsLast"===i)s=[l,u,e[3],e[3]];else if("channelsFirst"===i)s=[l,u,e[1],e[1]];else throw Error(`Unknown dataFormat ${i}`);return uW(e,s,r,n,a,o,!1,i)}function uz(e,t,r,n,a,o,i="NDHWC"){let s,l;let[u,c,d]=uH(t);if("NDHWC"===i)l="channelsLast",s=[u,c,d,e[4],e[4]];else if("NCDHW"===i)l="channelsFirst",s=[u,c,d,e[1],e[1]];else throw Error(`Unknown dataFormat ${i}`);return uU(e,s,r,n,a,!1,l,o)}function uW(e,t,r,n,a,o,i=!1,s="channelsLast"){let l,[u,c,d,p]=[-1,-1,-1,-1];if("channelsLast"===s)[u,c,d,p]=e;else if("channelsFirst"===s)[u,p,c,d]=e;else throw Error(`Unknown dataFormat ${s}`);let[h,f,,m]=t,[g,y]=uV(r),[v,b]=uV(n),w=uG(h,v),k=uG(f,b),{padInfo:S,outHeight:x,outWidth:_}=function(e,t,r,n,a,o,i,s,l){let u,c,d;if("number"==typeof e){let a=0===e?"VALID":"NUMBER";u={top:e,bottom:e,left:e,right:e,type:a};let i=function(e,t,r,n,a){null==n&&(n=uj(e,t,r));let o=e[0],i=e[1];return[uq((o-t+2*n)/r+1,a),uq((i-t+2*n)/r+1,a)]}([t,r],o,n,e,s);c=i[0],d=i[1]}else if("same"===e){let e=Math.max(0,((c=Math.ceil(t/n))-1)*n+o-t),s=Math.max(0,((d=Math.ceil(r/a))-1)*a+i-r),l=Math.floor(e/2),p=Math.floor(s/2);u={top:l,bottom:e-l,left:p,right:s-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/n),d=Math.ceil((r-i+1)/a);else if("object"==typeof e){let p="channelsLast"===l?e[1][0]:e[2][0],h="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:p,bottom:h,left:f,right:m,type:0===p&&0===h&&0===f&&0===m?"VALID":"EXPLICIT"},c=uq((t-o+p+h)/n+1,s),d=uq((r-i+f+m)/a+1,s)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outHeight:c,outWidth:d}}(a,c,d,g,y,w,k,o,s),I=i?m*p:m;return"channelsFirst"===s?l=[u,I,x,_]:"channelsLast"===s&&(l=[u,x,_,I]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:d,inChannels:p,outHeight:x,outWidth:_,outChannels:I,padInfo:S,strideHeight:g,strideWidth:y,filterHeight:h,filterWidth:f,effectiveFilterHeight:w,effectiveFilterWidth:k,dilationHeight:v,dilationWidth:b,inShape:e,outShape:l,filterShape:t}}function uU(e,t,r,n,a,o=!1,i="channelsLast",s){let l,[u,c,d,p,h]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[u,c,d,p,h]=e;else if("channelsFirst"===i)[u,h,c,d,p]=e;else throw Error(`Unknown dataFormat ${i}`);let[f,m,g,,y]=t,[v,b,w]=uH(r),[k,S,x]=uH(n),_=uG(f,k),I=uG(m,S),E=uG(g,x),{padInfo:T,outDepth:N,outHeight:A,outWidth:C}=function(e,t,r,n,a,o,i,s,l,u,c){let d,p,h,f;if("valid"===e&&(e=0),"number"==typeof e){let m=0===e?"VALID":"NUMBER";d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:m};let g=function(e,t,r,n,a,o){null==a&&(a=uj(e,t[0],n[0]));let i=[0,0,0,1];for(let r=0;r<3;r++)e[r]+2*a>=t[r]&&(i[r]=uq((e[r]-t[r]+2*a)/n[r]+1,o));return i}([t,r,n,1],[s,l,u],0,[a,o,i],e,c);p=g[0],h=g[1],f=g[2]}else if("same"===e){let e=((p=Math.ceil(t/a))-1)*a+s-t,c=((h=Math.ceil(r/o))-1)*o+l-r,m=((f=Math.ceil(n/i))-1)*i+u-n,g=Math.floor(e/2),y=Math.floor(c/2),v=Math.floor(m/2);d={top:y,bottom:c-y,left:v,right:m-v,front:g,back:e-g,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:f}}(a,c,d,p,v,b,w,_,I,E,s),M=o?y*h:y;return"channelsFirst"===i?l=[u,M,N,A,C]:"channelsLast"===i&&(l=[u,N,A,C,M]),{batchSize:u,dataFormat:i,inDepth:c,inHeight:d,inWidth:p,inChannels:h,outDepth:N,outHeight:A,outWidth:C,outChannels:M,padInfo:T,strideDepth:v,strideHeight:b,strideWidth:w,filterDepth:f,filterHeight:m,filterWidth:g,effectiveFilterDepth:_,effectiveFilterHeight:I,effectiveFilterWidth:E,dilationDepth:k,dilationHeight:S,dilationWidth:x,inShape:e,outShape:l,filterShape:t}}function uj(e,t,r,n=1){let a=uG(t,n);return Math.floor((e[0]*(r-1)-r+a)/2)}function uV(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function uH(e){return"number"==typeof e?[e,e,e]:e}function uG(e,t){return t<=1?e:e+(e-1)*(t-1)}function uq(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw Error(`Unknown roundingMode ${t}`)}}function uK(e){let[t,r,n]=uV(e);return 1===t&&1===r&&1===n}function uY(e,t){return uK(e)||uK(t)}function uX(e){return uV(e).every(e=>e>0)}function uQ(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw Error(`Unknown dataFormat ${e}`)}function uZ(e,t,r){if(null!=r){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${t}.`);if("number"==typeof t)nQ(t%1==0,()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${t}.`);else if("object"==typeof t)t.forEach(t=>{t.forEach(t=>{nQ(t%1==0,()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${r} but got pad ${t}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}let uJ=sF({reshape_:function(e,t){let r=sM(e,"x","reshape","string_or_numeric");return sI.runKernel(o1,{x:r},{shape:t})}}),u0=sF({avgPool_:function(e,t,r,n,a){let o=sM(e,"x","avgPool","float32");nQ(uY(r,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${r} and dilations '1'`);let i=o,s=!1;3===o.rank&&(s=!0,i=uJ(o,[1,o.shape[0],o.shape[1],o.shape[2]])),nQ(4===i.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`),uZ("avgPool",n,a);let l={x:i},u=sI.runKernel(aE,l,{filterSize:t,strides:r,pad:n,dimRoundingMode:a});return(u=lw(u,o.dtype),s)?uJ(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),u1=sF({avgPool3d_:function(e,t,r,n,a,o="NDHWC"){let i=sM(e,"x","avgPool3d","float32"),s=i,l=!1;4===i.rank&&(l=!0,s=uJ(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),nQ(5===s.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),nQ("NDHWC"===o,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),nQ("number"==typeof r&&r>0||Array.isArray(r)&&r[0]>0&&r[1]>0&&r[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${r}'`),uZ("avgPool3d",n,a);let u={x:s},c=sI.runKernel(aN,u,{filterSize:t,strides:r,pad:n,dimRoundingMode:a,dataFormat:o});return(c=lw(c,s.dtype),l)?uJ(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),u2=sF({concat_:function(e,t=0){nQ(e.length>=1,()=>"Pass at least one tensor to concat");let r=sR(e,"tensors","concat","string_or_numeric");return("complex64"===r[0].dtype&&r.forEach(e=>{if("complex64"!==e.dtype)throw Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${e.dtype}. `)}),1===r.length)?lk(r[0]):sI.runKernel(az,r,{axis:t})}}),u3=sF({matMul_:function(e,t,r=!1,n=!1){let a=sM(e,"a","matMul"),o=sM(t,"b","matMul");[a,o]=sb(a,o);let i={a:a,b:o};return sI.runKernel(aC,i,{transposeA:r,transposeB:n})}}),u4=sF({sigmoid_:function(e){let t=sM(e,"x","sigmoid","float32");return sI.runKernel(iu,{x:t})}}),u6=sF({slice_:function(e,t,r){let n=sM(e,"x","slice","string_or_numeric");if(0===n.rank)throw Error("Slicing scalar is not possible");return sI.runKernel(ii,{x:n},{begin:t,size:r})}}),u5=sF({tanh_:function(e){let t=sM(e,"x","tanh","float32");return sI.runKernel(iN,{x:t})}}),u8=sF({basicLSTMCell_:function(e,t,r,n,a,o){let i=sM(e,"forgetBias","basicLSTMCell"),s=sM(t,"lstmKernel","basicLSTMCell"),l=sM(r,"lstmBias","basicLSTMCell"),u=sM(n,"data","basicLSTMCell"),c=sM(a,"c","basicLSTMCell"),d=lN(u3(u2([u,sM(o,"h","basicLSTMCell")],1),s),l),p=d.shape[0],h=d.shape[1]/4,f=[p,h],m=u6(d,[0,0],f),g=u6(d,[0,h],f),y=u6(d,[0,2*h],f),v=u6(d,[0,3*h],f),b=lN(lM(u4(m),u5(g)),lM(c,u4(lN(i,y)))),w=lM(u5(b),u4(v));return[b,w]}}),u7=sF({batchToSpaceND_:function(e,t,r){let n=sM(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);return nQ(n.rank>=1+t.length,()=>`input rank is ${n.rank} but should be > than blockShape.length ${t.length}`),nQ(r.length===t.length,()=>`crops.length is ${r.length} but should be equal to blockShape.length  ${t.length}`),nQ(n.shape[0]%a==0,()=>`input tensor batch is ${n.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${a}`),sI.runKernel(aM,{x:n},{blockShape:t,crops:r})}}),u9=sF({batchNorm_:function(e,t,r,n,a,o){let i,s;null==o&&(o=.001);let l=sM(e,"x","batchNorm"),u=sM(t,"mean","batchNorm"),c=sM(r,"variance","batchNorm");null!=a&&(i=sM(a,"scale","batchNorm")),null!=n&&(s=sM(n,"offset","batchNorm")),nQ(u.rank===c.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),nQ(null==s||u.rank===s.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),nQ(null==i||u.rank===i.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let d={x:0===l.rank||1===l.rank?uJ(l,[1,1,1,l.size]):2===l.rank?uJ(l,[1,1,l.shape[0],l.shape[1]]):3===l.rank?uJ(l,[1,l.shape[0],l.shape[1],l.shape[2]]):l,scale:i,offset:s,mean:u,variance:c},p={varianceEpsilon:o};return uJ(sI.runKernel(os,d,p),l.shape)}}),ce=sF({batchNorm2d_:function(e,t,r,n,a,o){let i,s;let l=sM(e,"x","batchNorm"),u=sM(t,"mean","batchNorm"),c=sM(r,"variance","batchNorm");return null!=a&&(i=sM(a,"scale","batchNorm")),null!=n&&(s=sM(n,"offset","batchNorm")),nQ(2===l.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${l.rank}.`),nQ(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${u.rank}.`),nQ(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=i&&nQ(2===i.rank||1===i.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${i.rank}.`),null!=s&&nQ(2===s.rank||1===s.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${s.rank}.`),u9(l,u,c,s,i,o)}}),ct=sF({batchNorm3d_:function(e,t,r,n,a,o){let i,s;let l=sM(e,"x","batchNorm"),u=sM(t,"mean","batchNorm"),c=sM(r,"variance","batchNorm");return null!=a&&(i=sM(a,"scale","batchNorm")),null!=n&&(s=sM(n,"offset","batchNorm")),nQ(3===l.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${l.rank}.`),nQ(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${u.rank}.`),nQ(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=i&&nQ(3===i.rank||1===i.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${i.rank}.`),null!=s&&nQ(3===s.rank||1===s.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${s.rank}.`),u9(l,u,c,s,i,o)}}),cr=sF({batchNorm4d_:function(e,t,r,n,a,o){let i,s;let l=sM(e,"x","batchNorm"),u=sM(t,"mean","batchNorm"),c=sM(r,"variance","batchNorm");return null!=a&&(i=sM(a,"scale","batchNorm")),null!=n&&(s=sM(n,"offset","batchNorm")),nQ(4===l.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${l.rank}.`),nQ(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${u.rank}.`),nQ(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=i&&nQ(4===i.rank||1===i.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${i.rank}.`),null!=s&&nQ(4===s.rank||1===s.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${s.rank}.`),u9(l,u,c,s,i,o)}}),cn=sF({bincount_:function(e,t,r){let n=sM(e,"x","bincount"),a=sM(t,"weights","bincount");return nQ("int32"===n.dtype,()=>`Error in bincount: input dtype must be int32, but got ${n.dtype}`),nQ(r>=0,()=>`size must be non-negative, but got ${r}.`),nQ(a.size===n.size||0===a.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${n.shape}, weights shape: ${a.shape}.`),sI.runKernel(aR,{x:n,weights:a},{size:r})}}),ca=sF({bitwiseAnd_:function(e,t){let r=sM(e,"x","bitwiseAnd"),n=sM(t,"y","bitwiseAnd");if(!n1(r.shape,n.shape))throw Error(`BitwiseAnd: Tensors must have the same shape. x: ${r.shape}, y: ${n.shape}`);if("int32"!==r.dtype||"int32"!==n.dtype)throw Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${r.dtype} and type of y: ${n.dtype}`);return sI.runKernel(aO,{a:r,b:n})}}),co=sF({broadcastArgs_:function(e,t){let r=sM(e,"s0","broadcastArgs","int32"),n=sM(t,"s1","broadcastArgs","int32");if(1!==r.rank)throw Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${r.rank}`);if(1!==n.rank)throw Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${n.rank}`);return sI.runKernel(aF,{s0:r,s1:n})}}),ci=sF({broadcastTo_:function(e,t){let r=sM(e,"broadcastTo","x"),n=r.shape;if(ao(t),t.length<r.rank)throw Error(`broadcastTo(): shape.length=${t.length} < input.rank=${r.rank}.`);if(t.length>r.rank){let e=r.shape.slice();for(;e.length<t.length;)e.unshift(1);r=uJ(r,e)}let a=r.shape,o=Array.from(t);for(let e=t.length-1;e>=0;e--)if(a[e]===t[e])o[e]=1;else if(1!==r.shape[e])throw Error(`broadcastTo(): [${n}] cannot be broadcast to [${t}].`);if(0===o.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length)return lk(r);let i={x:r};return sI.runKernel(iA,i,{reps:o})}}),cs=sF({ceil_:function(e){let t=sM(e,"x","ceil","float32");return sI.runKernel(aP,{x:t})}}),cl=sF({clipByValue_:function(e,t,r){let n=sM(e,"x","clipByValue");return(nQ(t<=r,()=>`Error in clip: min (${t}) must be less than or equal to max (${r}).`),t===r)?lj(n.shape,t,n.dtype):sI.runKernel(a$,{x:n},{clipValueMin:t,clipValueMax:r})}}),cu=sF({concat1d_:function(e){return u2(e,0)}}),cc=sF({concat2d_:function(e,t){return u2(e,t)}}),cd=sF({concat3d_:function(e,t){return u2(e,t)}}),cp=sF({concat4d_:function(e,t){return u2(e,t)}}),ch=sF({conv2d_:function(e,t,r,n,a="NHWC",o=[1,1],i){let s=sM(e,"x","conv2d","float32"),l=sM(t,"filter","conv2d","float32"),u=s,c=!1;3===s.rank&&(c=!0,u=uJ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),nQ(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),nQ(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),uZ("conv2d",n,i);let d="NHWC"===a?u.shape[3]:u.shape[1];nQ(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),nQ(uY(r,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`),nQ(uX(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),nQ(uX(r),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:u,filter:l},h=sI.runKernel(aW,p,{strides:r,pad:n,dataFormat:a,dilations:o,dimRoundingMode:i});return c?uJ(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),cf=sF({conv1d_:function(e,t,r,n,a="NWC",o=1,i){let s=sM(e,"x","conv1d"),l=sM(t,"filter","conv1d"),u=s,c=!1;2===s.rank&&(c=!0,u=uJ(s,[1,s.shape[0],s.shape[1]])),nQ(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),nQ(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),uZ("conv1d",n,i),nQ(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),nQ(uY(r,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${r} and dilation '${o}'`),nQ(uX(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),nQ(uX(r),()=>"Error in conv1D: Stride should be larger than 0."),nQ("NWC"===a,()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);let d=uJ(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=ch(uJ(u,[u.shape[0],1,u.shape[1],u.shape[2]]),d,[1,r],n,"NHWC",[1,o],i);return c?uJ(p,[p.shape[2],p.shape[3]]):uJ(p,[p.shape[0],p.shape[2],p.shape[3]])}}),cm=sF({conv2DBackpropInput_:function(e,t,r,n,a,o="NHWC",i){nQ(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let s=e,l=t,u=!1;3===t.rank&&(u=!0,l=uJ(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),nQ(4===s.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),nQ(4===l.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),nQ(4===r.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${r.rank}`);let c="NHWC"===o?s[3]:s[1],d="NHWC"===o?l.shape[3]:l.shape[1];nQ(c===r.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${r.shape[2]}.`),nQ(d===r.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${r.shape[3]}.`),uZ("conv2dDerInput",a,i);let p={dy:l,filter:r},h={strides:n,pad:a,dataFormat:o,dimRoundingMode:i,inputShape:s},f=sI.runKernel(aj,p,h);return u?uJ(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),cg=sF({conv2dTranspose_:function(e,t,r,n,a,o){return cm(r,sM(e,"x","conv2dTranspose"),sM(t,"filter","conv2dTranspose"),n,a,"NHWC",o)}}),cy=sF({conv3d_:function(e,t,r,n,a="NDHWC",o=[1,1,1]){let i=sM(e,"x","conv3d"),s=sM(t,"filter","conv3d"),l=i,u=!1;4===i.rank&&(u=!0,l=uJ(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),nQ(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),nQ(5===s.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),nQ(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),nQ(uY(r,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`),nQ("NDHWC"===a,()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`),nQ(uX(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),nQ(uX(r),()=>"Error in conv3D: Strides should be larger than 0.");let c={x:l,filter:s},d=sI.runKernel(aV,c,{strides:r,pad:n,dataFormat:a,dilations:o});return u?uJ(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),cv=sF({conv3DBackpropInput_:function(e,t,r,n,a){nQ(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,i=t,s=!1;4===t.rank&&(s=!0,i=uJ(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);let l=o[4],u=i.shape[4];nQ(5===o.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),nQ(5===i.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),nQ(5===r.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${r.rank}`),nQ(l===r.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${r.shape[3]}.`),nQ(u===r.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${r.shape[4]}.`);let c={dy:i,filter:r},d={pad:a,strides:n,inputShape:o},p=sI.runKernel(aG,c,d);return s?uJ(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),cb=sF({conv3dTranspose_:function(e,t,r,n,a){return cv(r,sM(e,"x","conv3dTranspose"),sM(t,"filter","conv3dTranspose"),n,a)}}),cw=sF({cos_:function(e){let t=sM(e,"x","cos","float32");return sI.runKernel("Cos",{x:t})}}),ck=sF({cosh_:function(e){let t=sM(e,"x","cosh","float32");return sI.runKernel(aq,{x:t})}}),cS=sF({cumprod_:function(e,t=0,r=!1,n=!1){let a=sM(e,"x","cumprod");return sI.runKernel(aK,{x:a},{axis:t,exclusive:r,reverse:n})}}),cx=sF({cumsum_:function(e,t=0,r=!1,n=!1){let a=sM(e,"x","cumsum");return sI.runKernel(aY,{x:a},{axis:t,exclusive:r,reverse:n})}}),c_=sF({denseBincount_:function(e,t,r,n=!1){let a=sM(e,"x","denseBincount"),o=sM(t,"weights","denseBincount");return nQ("int32"===a.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),nQ(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),nQ(r>=0,()=>`size must be non-negative, but got ${r}.`),nQ(o.size===a.size||0===o.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${o.shape}.`),sI.runKernel(aQ,{x:a,weights:o},{size:r,binaryOutput:n})}}),cI=sF({depthToSpace_:function(e,t,r="NHWC"){let n=sM(e,"x","depthToSpace","float32"),a="NHWC"===r?n.shape[1]:n.shape[2],o="NHWC"===r?n.shape[2]:n.shape[3],i="NHWC"===r?n.shape[3]:n.shape[1];return nQ(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),nQ(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${t}  for depthToSpace with input shape
    ${n.shape}`),nQ(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t} for depthToSpace with input shape
        ${n.shape}`),nQ(i%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${n.shape}`),sI.runKernel(aZ,{x:n},{blockSize:t,dataFormat:r})}}),cE=sF({depthwiseConv2d_:function(e,t,r,n,a="NHWC",o=[1,1],i){let s=sM(e,"x","depthwiseConv2d","float32"),l=sM(t,"filter","depthwiseConv2d","float32"),u=s,c=!1;3===s.rank&&(c=!0,u=uJ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),nQ(4===u.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),nQ(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let d="NHWC"===a?u.shape[3]:u.shape[1];nQ(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),uZ("depthwiseConv2d",n,i);let p={x:u,filter:l},h=sI.runKernel(aJ,p,{strides:r,pad:n,dataFormat:a,dilations:o,dimRoundingMode:i});return c?uJ(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),cT=sF({diag_:function(e){let t=sM(e,"x","diag");return sI.runKernel(a2,{x:t})}}),cN=sF({dilation2d_:function(e,t,r,n,a=[1,1],o="NHWC"){let i=sM(e,"x","dilation2d"),s=sM(t,"filter","dilation2d");nQ(3===i.rank||4===i.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),nQ(3===s.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),nQ("NHWC"===o,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let l=i,u=!1;3===i.rank&&(l=uJ(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0),nQ(l.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`);let c={x:l,filter:s},d=sI.runKernel(a3,c,{strides:r,pad:n,dilations:a});return u?uJ(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),cA=sF({equal_:function(e,t){let r=sM(e,"a","equal","string_or_numeric"),n=sM(t,"b","equal","string_or_numeric");[r,n]=sb(r,n),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(oe,a)}}),cC=sF({where_:function(e,t,r){let n=sM(t,"a","where"),a=sM(r,"b","where"),o=sM(e,"condition","where","bool"),i=lX(lX(o.shape,n.shape),a.shape),s=ci(o,i),l=ci(n,i),u=ci(a,i);return sI.runKernel(ia,{condition:s,t:l,e:u})}}),cM=sF({divNoNan_:function(e,t){let r=sM(e,"a","div"),n=sM(t,"b","div");[r,n]=sb(r,n);let a=lC(r,n),o=lF(a);return cC(cA(n,o),o,a)}}),cR=sF({dot_:function(e,t){let r=sM(e,"t1","dot"),n=sM(t,"t2","dot");nQ((1===r.rank||2===r.rank)&&(1===n.rank||2===n.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${r.rank} and ${n.rank}.`);let a=1===r.rank?r.size:r.shape[1],o=1===n.rank?n.size:n.shape[0];if(nQ(a===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${o}.`),1===r.rank&&1===n.rank){let e=u3(uJ(r,[1,-1]),uJ(n,[-1,1]));return uJ(e,[])}if(1===r.rank&&2===n.rank){let e=u3(uJ(r,[1,-1]),uJ(n,[n.shape[0],n.shape[1]]));return uJ(e,[e.size])}if(2!==r.rank||1!==n.rank)return u3(r,uJ(n,[n.shape[0],n.shape[1]]));{let e=u3(r,uJ(n,[-1,1]));return uJ(e,[e.size])}}}),cO=sF({einsum_:function(e,...t){let r=t.map((e,t)=>sM(e,`tensors${t}`,"einsum"));return sI.runKernel(a7,r,{equation:e})}}),cF=sF({elu_:function(e){let t=sM(e,"x","elu","float32");return sI.runKernel("Elu",{x:t})}}),cD=sF({ensureShape_:function(e,t){let r=sM(e,"x","ensureShape","string_or_numeric");if(!function(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(null!==e[r]&&null!==t[r]&&e[r]!==t[r])return!1;return!0}(r.shape,t))throw Error(`EnsureShape: Shape of tensor ${r.shape} is not compatible with expected shape ${t}`);return e}}),cP=sF({erf_:function(e){let t=sM(e,"x","erf");nQ("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=lw(t,"float32"));let r={x:t};return sI.runKernel("Erf",r)}});function c$(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function cL(e,t){let r=[],n=e.length;for(let a=0;a<n;a++)-1===t.indexOf(a)&&r.push(e[a]);return[r,t.map(t=>e[t])]}function cB(e,t){return function(e,t,r){let n=e.length+t.length,a=[],o=0,i=0;for(let s=0;s<n;s++)-1===r.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}(e,t.map(e=>1),t)}function cz(e,t,r){nQ(c$(t,r),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${r} input.`)}function cW(e,t){if(c$(e,t))return null;let r=[];for(let n=0;n<t;++n)-1===e.indexOf(n)&&r.push(n);return e.forEach(e=>r.push(e)),r}function cU(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function cj(e,t){let r=[];for(let n=t-e;n<t;++n)r.push(n);return r}let cV=sF({max_:function(e,t=null,r=!1){let n=sM(e,"x","max");return sI.runKernel("Max",{x:n},{reductionIndices:t,keepDims:r})}}),cH=sF({min_:function(e,t=null,r=!1){let n=sM(e,"x","min");return sI.runKernel("Min",{x:n},{axis:t,keepDims:r})}}),cG=sF({sum_:function(e,t=null,r=!1){let n=sM(e,"x","sum");"bool"===n.dtype&&(n=lw(n,"int32"));let a={x:n};return sI.runKernel("Sum",a,{axis:t,keepDims:r})}}),cq=sF({norm_:function(e,t="euclidean",r=null,n=!1){let a=function e(t,r,n=null){if(0===t.rank)return lK(t);if(1!==t.rank&&null===n)return e(uJ(t,[-1]),r,n);if(1===t.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===r)return cG(lK(t),n);if(r===1/0)return cV(lK(t),n);if(r===-1/0)return cH(lK(t),n);if("euclidean"===r||2===r)return lR(cG(lH(lK(t),lP(2,"int32")),n));throw Error(`Error in norm: invalid ord value: ${r}`)}if(Array.isArray(n)&&2===n.length){if(1===r)return cV(cG(lK(t),n[0]),n[1]-1);if(r===1/0)return cV(cG(lK(t),n[1]),n[0]);if(r===-1/0)return cH(cG(lK(t),n[1]),n[0]);if("fro"===r||"euclidean"===r)return lR(cG(lO(t),n));throw Error(`Error in norm: invalid ord value: ${r}`)}throw Error(`Error in norm: invalid axis: ${n}`)}(e=sM(e,"x","norm"),t,r),o=a.shape;if(n){let t=n4(r,e.shape);o=cB(a.shape,t)}return uJ(a,o)}}),cK=sF({euclideanNorm_:function(e,t=null,r=!1){return cq(e,"euclidean",t,r)}}),cY=sF({exp_:function(e){let t=sM(e,"x","exp");return sI.runKernel("Exp",{x:t})}}),cX=sF({expandDims_:function(e,t=0){let r=sM(e,"x","expandDims","string_or_numeric");return nQ(t<=r.rank,()=>"Axis must be <= rank of the tensor"),sI.runKernel(ot,{input:r},{dim:t})}}),cQ=sF({expm1_:function(e){let t=sM(e,"x","expm1");return sI.runKernel(or,{x:t})}}),cZ=sF({tile_:function(e,t){let r=sM(e,"x","tile","string_or_numeric");return nQ(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of reps ${t}.`),sI.runKernel(iA,{x:r},{reps:t})}}),cJ=sF({eye_:function(e,t,r,n="float32"){null==t&&(t=e);let a=lb([e,t],n),o=e<=t?e:t;for(let e=0;e<o;++e)a.set(1,e,e);let i=uJ(a.toTensor(),[e,t]);if(null==r)return i;if(1===r.length)return cZ(cX(i,0),[r[0],1,1]);if(2===r.length)return cZ(cX(cX(i,0),0),[r[0],r[1],1,1]);if(3===r.length)return cZ(cX(cX(cX(i,0),0),0),[r[0],r[1],r[2],1,1]);throw Error(`eye() currently supports only 1D and 2D batchShapes, but received ${r.length}D.`)}}),c0=sF({floor_:function(e){let t=sM(e,"x","floor","float32");return sI.runKernel(oo,{x:t})}}),c1=sF({gather_:function(e,t,r=0,n=0){let a=sM(e,"x","gather"),o=sM(t,"indices","gather","int32");return sI.runKernel(ol,{x:a,indices:o},{axis:r,batchDims:n})}}),c2=sF({greater_:function(e,t){let r=sM(e,"a","greater","string_or_numeric"),n=sM(t,"b","greater","string_or_numeric");[r,n]=sb(r,n),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(oc,a)}}),c3=sF({greaterEqual_:function(e,t){let r=sM(e,"a","greaterEqual","string_or_numeric"),n=sM(t,"b","greaterEqual","string_or_numeric");[r,n]=sb(r,n),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(od,a)}}),c4=sF({imag_:function(e){let t=sM(e,"input","imag");return sI.runKernel(of,{input:t})}}),c6=sF({isFinite_:function(e){let t=sM(e,"x","isFinite");return sI.runKernel(om,{x:t})}}),c5=sF({isInf_:function(e){let t=sM(e,"x","isInf");return sI.runKernel(og,{x:t})}}),c8=sF({isNaN_:function(e){let t=sM(e,"x","isNaN");return sI.runKernel(oy,{x:t})}}),c7=sF({leakyRelu_:function(e,t=.2){let r=sM(e,"x","leakyRelu");return sI.runKernel(ov,{x:r},{alpha:t})}}),c9=sF({less_:function(e,t){let r=sM(e,"a","less","string_or_numeric"),n=sM(t,"b","less","string_or_numeric");[r,n]=sb(r,n),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(ob,a)}}),de=sF({lessEqual_:function(e,t){let r=sM(e,"a","lessEqual","string_or_numeric"),n=sM(t,"b","lessEqual","string_or_numeric");[r,n]=sb(r,n),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(ow,a)}});function dt(e,t,r){if(r<=0)throw Error("The number of values should be positive.");return sI.runKernel(ok,{},{start:e,stop:t,num:r})}let dr=sF({localResponseNormalization_:function(e,t=5,r=1,n=1,a=.5){let o=sM(e,"x","localResponseNormalization");nQ(4===o.rank||3===o.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),nQ(t%1==0,()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=o,s=!1;3===o.rank&&(s=!0,i=uJ(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let l={x:i},u=sI.runKernel("LRN",l,{depthRadius:t,bias:r,alpha:n,beta:a});return s?uJ(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),dn=sF({log_:function(e){let t=sM(e,"x","log","float32");return sI.runKernel("Log",{x:t})}}),da=sF({log1p_:function(e){let t=sM(e,"x","log1p");return sI.runKernel(oS,{x:t})}}),di=sF({neg_:function(e){let t=sM(e,"x","neg");return sI.runKernel("Neg",{x:t})}}),ds=sF({softplus_:function(e){let t=sM(e,"x","softplus");return sI.runKernel(ic,{x:t})}}),dl=sF({logSigmoid_:function(e){let t=sM(e,"x","logSigmoid");return lD(e=>({value:di(ds(di(e))),gradFunc:t=>lM(t,u4(di(e)))}))(t)}}),du=sF({logSoftmax_:function(e,t=-1){let r=sM(e,"logits","logSoftmax");if(-1===t&&(t=r.rank-1),t!==r.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${r.rank} and axis was ${t}`);return lD((e,r)=>{let n=cV(e,t,!0),a=lG(e,n),o=lG(lw(a,"float32"),dn(cG(cY(a),t,!0)));return r([o]),{value:o,gradFunc:(e,r)=>{let[n]=r,a=cY(n);return lG(e,lM(cG(e,t,!0),a))}}})(r)}}),dc=sF({logSumExp_:function(e,t=null,r=!1){let n=sM(e,"x","logSumExp"),a=n4(t,n.shape),o=cV(n,a,!0),i=dn(cG(cY(lG(n,o)),a)),s=lN(uJ(o,i.shape),i);if(r){let e=cB(s.shape,a);return uJ(s,e)}return s}}),dd=sF({logicalAnd_:function(e,t){let r=sM(e,"a","logicalAnd","bool"),n=sM(t,"b","logicalAnd","bool");return lX(r.shape,n.shape),sI.runKernel(ox,{a:r,b:n})}}),dp=sF({logicalNot_:function(e){let t=sM(e,"x","logicalNot","bool");return sI.runKernel(o_,{x:t})}}),dh=sF({logicalOr_:function(e,t){let r=sM(e,"a","logicalOr","bool"),n=sM(t,"b","logicalOr","bool");return lX(r.shape,n.shape),sI.runKernel(oI,{a:r,b:n})}}),df=sF({logicalXor_:function(e,t){let r=sM(e,"a","logicalXor","bool"),n=sM(t,"b","logicalXor","bool");return lX(r.shape,n.shape),dd(dh(e,t),dp(dd(e,t)))}}),dm=sF({searchSorted_:function(e,t,r="left"){let n=sM(e,"sortedSequence","searchSorted"),a=sM(t,"values","searchSorted"),o=n.shape[n.shape.length-1],i=a.shape[a.shape.length-1],s=uJ(n,[-1,o]),l=uJ(a,[-1,i]);if(s.rank<2)throw Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(n0(l.shape)>=2147483648)throw Error("values tensor size must less than 2147483648");if(s.shape[1]>=2147483648)throw Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${s.shape[1]}`);return sI.runKernel(ir,{sortedSequence:s,values:l},{side:r})}});function dg(e,t){return dm(e,t,"left")}let dy=sF({maxPool_:function(e,t,r,n,a){let o=sM(e,"x","maxPool"),i=o,s=!1;3===o.rank&&(s=!0,i=uJ(o,[1,o.shape[0],o.shape[1],o.shape[2]])),nQ(4===i.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`),nQ(uY(r,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '1'`),uZ("maxPool",n,a);let l={x:i},u=sI.runKernel(oN,l,{filterSize:t,strides:r,pad:n,dimRoundingMode:a});return s?uJ(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),dv=sF({maxPool3d_:function(e,t=[1,1,1],r,n,a,o="NDHWC"){let i=sM(e,"x","maxPool3d"),s=i,l=!1;4===i.rank&&(l=!0,s=uJ(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),nQ(5===s.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),nQ("NDHWC"===o,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),uZ("maxPool3d",n,a);let u={x:s},c=sI.runKernel(oC,u,{filterSize:t,strides:r,pad:n,dimRoundingMode:a,dataFormat:o});return l?uJ(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),db=sF({maxPoolWithArgmax_:function(e,t,r,n,a=!1){let o=sM(e,"x","maxPoolWithArgmax"),i=sI.runKernel(oR,{x:o},{filterSize:t,strides:r,pad:n,includeBatchInIndex:a});return{result:i[0],indexes:i[1]}}}),dw=sF({mean_:function(e,t=null,r=!1){let n=sM(e,"x","mean");return sI.runKernel(oO,{x:n},{axis:t,keepDims:r})}});function dk(e,t="float32"){if(ao(e),"complex64"===t)return sD(dk(e,"float32"),dk(e,"float32"));let r=an(n0(e),t);return sI.makeTensor(r,e,t)}function dS(e,t="float32"){if(ao(e),"complex64"===t)return sD(dS(e,"float32"),dk(e,"float32"));let r=ar(n0(e),t);return sI.makeTensor(r,e,t)}function dx(e,t,{indexing:r="xy"}={}){if("xy"!==r&&"ij"!==r)throw TypeError(`${r} is not a valid third argument to meshgrid`);if(void 0===e)return[];let n=sM(e,"x","meshgrid",e instanceof sh?e.dtype:"float32");if(void 0===t)return[n];let a=sM(t,"y","meshgrid",t instanceof sh?t.dtype:"float32"),o=n0(n.shape),i=n0(a.shape);return"xy"===r?(n=uJ(n,[1,-1]),a=uJ(a,[-1,1]),[u3(dS([i,1],n.dtype),n),u3(a,dS([1,o],a.dtype))]):(n=uJ(n,[-1,1]),a=uJ(a,[1,-1]),[u3(n,dS([1,i],n.dtype)),u3(dS([o,1],a.dtype),a)])}let d_=sF({minimum_:function(e,t){let r=sM(e,"a","minimum"),n=sM(t,"b","minimum");[r,n]=sb(r,n),"bool"===r.dtype&&(r=lw(r,"int32"),n=lw(n,"int32")),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(oF,a)}}),dI=sF({mirrorPad_:function(e,t,r){nQ("reflect"===r||"symmetric"===r,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${r}.`);let n=sM(e,"x","mirrorPad");if(0===n.rank)throw Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");nQ(t.length===n.rank,()=>`Padding doesn't match input. Must be ${n.rank}. Got ${t.length}.`);let a="reflect"===r?1:0;for(let e=0;e<n.rank;e++)nQ(2===t[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),nQ(t[e][0]>=0&&t[e][0]<=n.shape[e]-a&&t[e][1]>=0&&t[e][1]<=n.shape[e]-a,()=>`Padding in dimension ${e} cannot be greater than or equal to ${n.shape[e]-a} or less than 0 for input of shape ${n.shape}`);return sI.runKernel(oD,{x:n},{paddings:t,mode:r})}}),dE=sF({mod_:function(e,t){let r=sM(e,"a","mod"),n=sM(t,"b","mod");[r,n]=sb(r,n);let a={a:r,b:n};return sI.runKernel("Mod",a)}}),dT=sF({moments_:function(e,t=null,r=!1){let n=n4(t,(e=sM(e,"x","moments")).shape),a=dw(e,n,r),o=a.shape;r||(o=cB(a.shape,n));let i=dw(lO(lG(lw(e,"float32"),uJ(a,o))),n,r);return{mean:a,variance:i}}}),dN=sF({multiRNNCell_:function(e,t,r,n){let a=sM(t,"data","multiRNNCell"),o=sR(r,"c","multiRNNCell"),i=sR(n,"h","multiRNNCell"),s=a,l=[];for(let t=0;t<e.length;t++){let r=e[t](s,o[t],i[t]);l.push(r[0]),l.push(r[1]),s=r[1]}let u=[],c=[];for(let e=0;e<l.length;e+=2)u.push(l[e]),c.push(l[e+1]);return[u,c]}}),dA=sF({multinomial_:function(e,t,r,n=!1){let a=sM(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw Error(`Error in multinomial: you need at least 2 outcomes, but got ${o}.`);if(i>2)throw Error(`Rank of probabilities must be 1 or 2, but is ${i}`);r=r||Math.random();let s=1===i?uJ(a,[1,-1]):a,l={numSamples:t,seed:r,normalized:n},u=sI.runKernel(oP,{logits:s},l);return 1===i?uJ(u,[u.size]):u}}),dC=sF({notEqual_:function(e,t){let r=sM(e,"a","notEqual","string_or_numeric"),n=sM(t,"b","notEqual","string_or_numeric");[r,n]=sb(r,n),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(oL,a)}}),dM=sF({oneHot_:function(e,t,r=1,n=0,a="int32"){if(t<2)throw Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let o=sM(e,"indices","oneHot","int32");return sI.runKernel(oj,{indices:o},{dtype:a,depth:t,onValue:r,offValue:n})}}),dR=sF({onesLike_:function(e){let t=sM(e,"x","onesLike");return sI.runKernel(oU,{x:t})}}),dO=sF({outerProduct_:function(e,t){let r=sM(e,"v1","outerProduct"),n=sM(t,"v2","outerProduct");return nQ(1===r.rank&&1===n.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${r.rank} and ${n.rank}.`),u3(uJ(r,[-1,1]),uJ(n,[1,-1]))}}),dF=sF({pad_:function(e,t,r=0){let n=sM(e,"x","pad");if(0===n.rank)throw Error("pad(scalar) is not defined. Pass non-scalar to pad");return sI.runKernel(oH,{x:n},{paddings:t,constantValue:r})}}),dD=sF({pad1d_:function(e,t,r=0){return nQ(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),dF(e,[t],r)}}),dP=sF({pad2d_:function(e,t,r=0){return nQ(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),dF(e,t,r)}}),d$=sF({pad3d_:function(e,t,r=0){return nQ(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),dF(e,t,r)}}),dL=sF({pad4d_:function(e,t,r=0){return nQ(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),dF(e,t,r)}}),dB=sF({spaceToBatchND_:function(e,t,r){let n=sM(e,"x","spaceToBatchND");return nQ(n.rank>=1+t.length,()=>`input rank ${n.rank} should be > than [blockShape] ${t.length}`),nQ(r.length===t.length,()=>`paddings.shape[0] ${r.length} must be equal to [blockShape] ${t.length}`),nQ(n.shape.reduce((e,n,a)=>a>0&&a<=t.length?e&&(n+r[a-1][0]+r[a-1][1])%t[a-1]==0:e,!0),()=>`input spatial dimensions ${n.shape.slice(1)} with paddings ${r.toString()} must be divisible by blockShapes ${t.toString()}`),sI.runKernel(ip,{x:n},{blockShape:t,paddings:r})}}),dz=sF({pool_:function(e,t,r,n,a,o,i){let s;null==a&&(a=[1,1]),null==o&&(o=1),0===n&&(n="valid");let l=sM(e,"x","maxPool"),u=l,c=!1;3===l.rank&&(c=!0,u=uJ(l,[1,l.shape[0],l.shape[1],l.shape[2]])),nQ(uY(o,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${a}'`);let d=uB(u.shape,t,o,a,n),p=[d.dilationHeight,d.dilationWidth];s="same"===n?function(e,t){let r=e.map((e,r)=>e+(e-1)*(t[r]-1)).map(e=>e-1),n=r.map(e=>Math.floor(e/2)),a=r.map((e,t)=>e-n[t]);return r.map((e,t)=>[n[t],a[t]])}([d.filterHeight,d.filterWidth],p):[[0,0],[0,0]];let h=1===p[0]&&1===p[1],[f,m]=function(e,t,r){let n=r.map(e=>e[0]),a=r.map(e=>e[1]),o=e.concat(n,a),i=t.map((e,t)=>(e-o[t]%e)%e),s=a.map((e,t)=>e+i[t]);return[t.map((e,t)=>[n[t],s[t]]),t.map((e,t)=>[0,i[t]])]}([d.inHeight,d.inWidth],p,s),g=h?n:"valid",y=h?u:dB(u,p,f),v=("avg"===r?()=>u0(y,t,o,g,i):()=>dy(y,t,o,g,i))(),b=h?v:u7(v,p,m);return c?uJ(b,[b.shape[1],b.shape[2],b.shape[3]]):b}}),dW=sF({prelu_:function(e,t){let r=sM(e,"x","prelu"),n=sM(t,"alpha","prelu");return sI.runKernel(oG,{x:r,alpha:n})}}),dU=sF({prod_:function(e,t=null,r=!1){let n=sM(e,"x","prod");"bool"===n.dtype&&(n=lw(n,"int32"));let a={x:n};return sI.runKernel(oq,a,{axis:t,keepDims:r})}}),dj=sF({raggedGather_:function(e,t,r,n){let a=e.map((e,t)=>sM(e,`tensors${t}`,"raggedGather","int32")),o=sM(t,"paramsDenseValues","raggedGather"),i=sM(r,"indices","raggedGather","int32"),s=sI.runKernel(oK,{paramsNestedSplits:a,paramsDenseValues:o,indices:i},{outputRaggedRank:n});return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}}),dV=sF({raggedRange_:function(e,t,r){let n=sM(e,"starts","raggedRange"),a=sM(t,"limits","raggedRange",n.dtype),o=sM(r,"deltas","raggedRange",n.dtype),i=sI.runKernel(oY,{starts:n,limits:a,deltas:o});return{rtNestedSplits:i[0],rtDenseValues:i[1]}}}),dH=sF({raggedTensorToTensor_:function(e,t,r,n,a){let o=sM(e,"shape","raggedTensorToTensor","int32"),i=sM(t,"values","raggedTensorToTensor"),s=sM(r,"defaultValue","raggedTensorToTensor",i.dtype),l=n.map((e,t)=>sM(e,`tensors${t}`,"raggedTensorToTensor","int32"));return sI.runKernel(oX,{shape:o,values:i,defaultValue:s,rowPartitionTensors:l},{rowPartitionTypes:a})}}),dG=sF({rand_:function(e,t,r){ao(e);let n=n0(e),a=null;if(null==r||"float32"===r)a=new Float32Array(n);else if("int32"===r)a=new Int32Array(n);else if("bool"===r)a=new Uint8Array(n);else throw Error(`Unknown data type ${r}`);for(let e=0;e<n;e++)a[e]=t();return sI.makeTensor(a,e,r)}});var dq=r(59900);class dK{constructor(e,t,r,n,a){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=n,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let o=a||Math.random();this.random=dq.alea(o.toString())}nextValue(){let e,t;if(!isNaN(this.nextVal)){let e=this.nextVal;return this.nextVal=NaN,e}let r=!1;for(;!r;){let n,a,o;do o=(n=2*this.random()-1)*n+(a=2*this.random()-1)*a;while(o>=1||0===o);let i=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*n*i,t=this.mean+this.stdDev*a*i,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class dY{constructor(e,t,r,n){this.alpha=e,this.beta=1/t,this.dtype=r;let a=n||Math.random();this.randu=dq.alea(a.toString()),this.randn=new dK(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,n,a,o;for(;;){do n=this.randn.nextValue(),o=1+this.c*n;while(o<=0);if(o*=o*o,t=1-.331*(e=n*n)*e,r=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<t||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class dX{constructor(e=0,t=1,r,n){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=r,null==n&&(n=Math.random()),"number"==typeof n&&(n=n.toString()),!this.canReturnFloat()&&this.range<=1)throw Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=dq.alea(n)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}let dQ=sF({randomGamma_:function(e,t,r=1,n="float32",a){if(ao(e),null==r&&(r=1),null==n&&(n="float32"),"float32"!==n&&"int32"!==n)throw Error(`Unsupported data type ${n}`);let o=new dY(t,r,n,a),i=lb(e,n);for(let e=0;e<i.values.length;e++)i.values[e]=o.nextValue();return i.toTensor()}}),dZ=sF({randomNormal_:function(e,t=0,r=1,n,a){if(ao(e),null!=n&&"bool"===n)throw Error(`Unsupported data type ${n}`);let o=new dK(t,r,n,!1,a),i=lb(e,n);for(let e=0;e<i.values.length;e++)i.values[e]=o.nextValue();return i.toTensor()}}),dJ=sF({randomStandardNormal_:function(e,t,r){if(null!=t&&"bool"===t)throw Error(`Unsupported data type ${t}`);return dZ(e,0,1,t,r)}}),d0=sF({randomUniform_:function(e,t=0,r=1,n="float32",a){ao(e);let o=lb(e,n),i=new dX(t,r,null,a);for(let e=0;e<o.values.length;e++)o.values[e]=i.nextValue();return o.toTensor()}}),d1=sF({randomUniformInt_:function(e,t,r,n){return d0(e,t,r,"int32",n)}});function d2(e,t,r=1,n="float32"){if(0===r)throw Error("Cannot have a step of zero");return sI.runKernel(oQ,{},{start:e,stop:t,step:r,dtype:n})}let d3=sF({real_:function(e){let t=sM(e,"input","real");return sI.runKernel(oZ,{input:t})}}),d4=sF({reciprocal_:function(e){let t=sM(e,"x","reciprocal");return sI.runKernel(oJ,{x:t})}}),d6=sF({relu_:function(e){let t=sM(e,"x","relu");return sI.runKernel(o0,{x:t})}}),d5=sF({relu6_:function(e){let t=sM(e,"x","relu6");return sI.runKernel(o5,{x:t})}}),d8=sF({reverse_:function(e,t){let r=sM(e,"x","reverse");return sI.runKernel(o8,{x:r},{dims:t})}}),d7=sF({reverse1d_:function(e){let t=sM(e,"x","reverse");return nQ(1===t.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),d8(t,0)}}),d9=sF({reverse2d_:function(e,t){let r=sM(e,"x","reverse");return nQ(2===r.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${r.rank}.`),d8(r,t)}}),pe=sF({reverse3d_:function(e,t){let r=sM(e,"x","reverse");return nQ(3===r.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${r.rank}.`),d8(r,t)}}),pt=sF({reverse4d_:function(e,t){let r=sM(e,"x","reverse");return nQ(4===r.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${r.rank}.`),d8(r,t)}}),pr=sF({round_:function(e){let t=sM(e,"x","round");return sI.runKernel(o7,{x:t})}}),pn=sF({rsqrt_:function(e){let t=sM(e,"x","rsqrt","float32");return sI.runKernel(o9,{x:t})}}),pa=sF({selu_:function(e){let t=sM(e,"x","selu");return sI.runKernel(io,{x:t})}}),po=sF({separableConv2d_:function(e,t,r,n,a,o=[1,1],i="NHWC"){let s=sM(e,"x","separableConv2d"),l=sM(t,"depthwiseFilter","separableConv2d"),u=sM(r,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=uJ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");nQ(4===c.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),nQ(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),nQ(4===u.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),nQ(1===u.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),nQ(1===u.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);let p=l.shape[2],h=l.shape[3];nQ(u.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${u.shape[2]}.`);let f=ch(cE(c,l,n,a,i,o),u,1,"valid",i);return d?uJ(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),pi=async function(e,t){let r=sM(e,"x","setdiff1d"),n=sM(t,"y","setdiff1d");nQ(r.dtype===n.dtype,()=>`x and y should have the same dtype, but got x (${r.dtype}) and y (${n.dtype}).`),nQ(1===r.rank,()=>`x should be 1D tensor, but got x (${r.shape}).`),nQ(1===n.rank,()=>`y should be 1D tensor, but got y (${n.shape}).`);let a=await r.data(),o=new Set(await n.data()),i=0;for(let e=0;e<a.length;e++)!o.has(a[e])&&i++;let s=new sc([i],r.dtype),l=new sc([i],"int32");for(let e=0,t=0;e<a.length;e++)!o.has(a[e])&&(s.values[t]=a[e],l.values[t]=e,t++);return[s.toTensor(),l.toTensor()]},ps=sF({sign_:function(e){let t=sM(e,"x","sign");return sI.runKernel(il,{x:t})}}),pl=sF({sin_:function(e){let t=sM(e,"x","sin","float32");return sI.runKernel("Sin",{x:t})}}),pu=sF({sinh_:function(e){let t=sM(e,"x","sinh");return sI.runKernel(is,{x:t})}}),pc=sF({slice1d_:function(e,t,r){let n=sM(e,"x","slice1d");return nQ(1===n.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${n.rank} tensor`),u6(n,[t],[r])}}),pd=sF({slice2d_:function(e,t,r){let n=sM(e,"x","slice2d");return nQ(2===n.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${n.rank} tensor`),u6(n,t,r)}}),pp=sF({slice3d_:function(e,t,r){let n=sM(e,"x","slice3d");return nQ(3===n.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${n.rank} tensor`),u6(n,t,r)}}),ph=sF({slice4d_:function(e,t,r){let n=sM(e,"x","slice4d");return nQ(4===n.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${n.rank} tensor`),u6(n,t,r)}}),pf=sF({softmax_:function(e,t=-1){let r=sM(e,"logits","softmax","float32");if(-1===t&&(t=r.rank-1),t!==r.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${r.rank} and dim was ${t}`);let n={dim:t};return sI.runKernel(im,{logits:r},n)}}),pm=sF({fft_:function(e){return nQ("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`),sI.runKernel("FFT",{input:e})}}),pg=sF({ifft_:function(e){return nQ("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`),sI.runKernel(oh,{input:e})}}),py=sF({irfft_:function(e){let t;let r=e.shape[e.shape.length-1],n=e.size/r;if(r<=2)t=pg(uJ(e,[n,r]));else{let a=[n,2*(r-1)],o=uJ(d3(e),[n,r]),i=uJ(c4(e),[n,r]),s=d8(u6(o,[0,1],[n,r-2]),1),l=lM(d8(u6(i,[0,1],[n,r-2]),1),lP(-1));t=pg(uJ(sD(u2([o,s],1),u2([i,l],1)),[a[0],a[1]]))}if(t=d3(t),3===e.rank&&0!==e.shape[0]){let r=t,n=e.shape[0];t=uJ(t,[n,t.shape[0]/n,t.shape[1]]),r.dispose()}return t}}),pv=sF({split_:function(e,t,r=0){let n=sM(e,"x","split");return sI.runKernel(ih,{x:n},{numOrSizeSplits:t,axis:r})}}),pb=sF({rfft_:function(e,t){let r;nQ("float32"===e.dtype,()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1],a=e.size/n;if(null!=t&&t<n){let a=e.shape.map(e=>0),o=e.shape.map(e=>e);o[e.shape.length-1]=t,r=u6(e,a,o),n=t}else if(null!=t&&t>n){let a=e.shape.map(e=>e);a[e.shape.length-1]=t-n,r=u2([e,dk(a)],e.shape.length-1),n=t}else r=e;let o=lF(r),i=pm(uJ(sD(r,o),[a,n])),s=Math.floor(n/2)+1,l=d3(i),u=c4(i),c=pv(l,[s,n-s],l.shape.length-1),d=pv(u,[s,n-s],u.shape.length-1),p=r.shape.slice();return p[r.shape.length-1]=s,uJ(sD(c[0],d[0]),p)}}),pw=sF({squaredDifference_:function(e,t){let r=sM(e,"a","squaredDifference"),n=sM(t,"b","squaredDifference");[r,n]=sb(r,n),lX(r.shape,n.shape);let a={a:r,b:n};return sI.runKernel(ik,a,{})}}),pk=sF({squeeze_:function(e,t){let r=sM(e,"x","squeeze","string_or_numeric");return uJ(r,function(e,t){let r=[],n=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:n4(t,e).sort(),i=0;for(let t=0;t<e.length;++t){if(null!=o){if(o[i]===t&&1!==e[t])throw Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==o[i]||o[i]>t)&&1===e[t]&&(r.push(e[t]),n.push(t)),o[i]<=t&&i++}1!==e[t]&&(r.push(e[t]),n.push(t))}return{newShape:r,keptDims:n}}(r.shape,t).newShape)}}),pS=sF({stack_:function(e,t=0){let r=sR(e,"tensors","stack","string_or_numeric");return nQ(r.length>=1,()=>"Pass at least one tensor to tf.stack"),r.length>0&&nQ(t<=r[0].rank,()=>"Axis must be <= rank of the tensor"),sI.runKernel(oV,r,{axis:t})}}),px=sF({step_:function(e,t=0){let r=sM(e,"x","step");return sI.runKernel(i$,{x:r},{alpha:t})}}),p_=sF({stridedSlice_:function(e,t,r,n,a=0,o=0,i=0,s=0,l=0){let u=sM(e,"x","stridedSlice","string_or_numeric");return sI.runKernel(i_,{x:u},{begin:t,end:r,strides:n,beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:l})}}),pI=sF({tan_:function(e){let t=sM(e,"x","tan","float32");return sI.runKernel("Tan",{x:t})}});function pE(e,t){nJ(e);let r=sA(e,t);if(1!==r.length)throw Error("tensor1d() requires values to be a flat/TypedArray");return sP(e,null,r,t)}function pT(e,t,r){if(nJ(e),null!=t&&2!==t.length)throw Error("tensor2d() requires shape to have two numbers");let n=sA(e,r);if(2!==n.length&&1!==n.length)throw Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===n.length&&null==t)throw Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return sP(e,t,n,r)}function pN(e,t,r){if(nJ(e),null!=t&&4!==t.length)throw Error("tensor4d() requires shape to have four numbers");let n=sA(e,r);if(4!==n.length&&1!==n.length)throw Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===n.length&&null==t)throw Error("tensor4d() requires shape to be provided when `values` are a flat array");return sP(e,t,n,r)}function pA(e,t,r){if(nJ(e),null!=t&&5!==t.length)throw Error("tensor5d() requires shape to have five numbers");let n=sA(e,r);if(5!==n.length&&1!==n.length)throw Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===n.length&&null==t)throw Error("tensor5d() requires shape to be provided when `values` are a flat array");return sP(e,t,n,r)}function pC(e,t,r){if(nJ(e),null!=t&&6!==t.length)throw Error("tensor6d() requires shape to have six numbers");let n=sA(e,r);if(6!==n.length&&1!==n.length)throw Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===n.length&&null==t)throw Error("tensor6d() requires shape to be provided when `values` are a flat array");return sP(e,t=t||n,n,r)}let pM=sF({tensorScatterUpdate_:function(e,t,r){let n=sM(e,"tensor","tensorScatterupdate"),a=sM(t,"indices","tensorScatterupdate","int32"),o=sM(r,"updates","tensorScatterupdate");if(uv(o,a,n.shape),n.dtype!==o.dtype)throw Error(`tensor and updates must have the same dtype, instead they are ${n.dtype} and ${o.dtype}.`);return sI.runKernel(it,{tensor:n,indices:a,updates:o},{})}}),pR=sF({topk_:function(e,t=1,r=!0){let n=sM(e,"x","topk");if(0===n.rank)throw Error("topk() expects the input to be of rank 1 or higher");let a=n.shape[n.shape.length-1];if(t<0)throw Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>a)throw Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${t}`);let[o,i]=sI.runKernel(iC,{x:n},{k:t,sorted:r});return{values:o,indices:i}}}),pO=sF({truncatedNormal_:function(e,t=0,r=1,n,a){if(ao(e),null!=n&&"bool"===n)throw Error("Unsupported data type $ { dtype }");let o=new dK(t,r,n,!0,a),i=lb(e,n);for(let e=0;e<i.values.length;e++)i.values[e]=o.nextValue();return i.toTensor()}}),pF=sF({unique_:function(e,t=0){let r=sM(e,"x","unique","string_or_numeric");nQ(r.rank>0,()=>"The input tensor must be at least 1D");let[n,a]=sI.runKernel(iO,{x:r},{axis:t});return{values:n,indices:a}}}),pD=sF({unsortedSegmentSum_:function(e,t,r){let n=sM(e,"x","unsortedSegmentSum"),a=sM(t,"segmentIds","unsortedSegmentSum","int32");return nQ(r%1==0,()=>"numSegments must be of dtype int"),sI.runKernel(iD,{x:n,segmentIds:a},{numSegments:r})}}),pP=sF({unstack_:function(e,t=0){let r=sM(e,"x","unstack","string_or_numeric");return nQ(t>=-r.shape.length&&t<r.shape.length,()=>`Axis = ${t} is not in [-${r.shape.length}, ${r.shape.length})`),sI.runKernel(iF,{value:r},{axis:t})}});function p$(e,t){return dm(e,t,"right")}function pL(e,t=!0,r,n){return sI.makeVariable(e,t,r,n)}function pB(e,t){let r=[];for(let e=0;e<t.length;e++)t[e]&&r.push(e);let n=lb(e,"int32"),a=lb([r.length,e.length],"int32");for(let t=0;t<r.length;t++){let o=n.indexToLoc(r[t]),i=t*e.length;a.values.set(o,i)}return a.toTensor()}let pz=async function(e){let t=sM(e,"condition","whereAsync","bool"),r=await t.data(),n=pB(t.shape,r);return e!==t&&t.dispose(),n},pW=async function(e,t,r){let n=sM(e,"tensor","boolMask"),a=sM(t,"mask","boolMask","bool"),o=null==r?0:r,i=a.rank,s=n.shape;nQ(i>0,()=>"mask cannot be scalar"),nZ(s.slice(o,o+i),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let e=o;e<o+i;e++)l*=s[e];let u=uJ(n,s.slice(0,o).concat([l],s.slice(o+i))),c=uJ(a,[-1]),d=await pz(c),p=pk(d,[1]),h=c1(u,p,o);return e!==n&&n.dispose(),t!==a&&a.dispose(),p.dispose(),u.dispose(),c.dispose(),d.dispose(),h},pU=sF({transpose_:function(e,t,r){let n=sM(e,"x","transpose");if(null==t&&(t=n.shape.map((e,t)=>t).reverse()),nQ(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(e=>{nQ(e>=0&&e<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1)return n.clone();let a={perm:t};return"complex64"===n.dtype?lx(()=>{let e=d3(n),t=c4(n);return e=sI.runKernel(iR,{x:e},a),t=sI.runKernel(iR,{x:t},a),r&&(t=di(t)),sD(e,t)}):sI.runKernel(iR,{x:n},a)}}),pj=sF({movingAverage_:function(e,t,r,n,a=!0){let o=sM(e,"v","movingAverage"),i=sM(t,"x","movingAverage"),s=sM(r,"decay","movingAverage");nQ(o.dtype===i.dtype,()=>`The dtypes of the first(${o.dtype}) and second(${i.dtype}) input must match`),nQ(n1(o.shape,i.shape),()=>"Shape mismatch in v and x");let l=lP(1),u=lG(l,s),c=lM(lG(i,o),u);return a&&(nQ(null!=n,()=>"When using zeroDebias: true, step is required."),c=lC(c,lG(l,lH(s,sM(n,"step","movingAverage"))))),lN(o,c)}}),pV=sF({scatterND_:function(e,t,r){ao(r);let n=sM(e,"indices","scatterND","int32"),a=sM(t,"updates","scatterND");return uv(a,n,r),sI.runKernel(ie,{indices:n,updates:a},{shape:r})}}),pH=sF({sparseToDense_:function(e,t,r,n=0){ao(r);let a=sM(e,"sparseIndices","sparseToDense","int32"),o=sM(t,"sparseValues","sparseToDense","string_or_numeric"),i=sM(n,"defaultValue","sparseToDense",o.dtype);return!function(e,t,r,n){if("int32"!==e.dtype)throw Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(r.length!==o)throw Error(`outputShape has incorrect number of elements:, ${r.length}, should be: ${o}.`);let i=t.size;if(!(0===t.rank||1===t.rank&&i===a))throw Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==n.dtype)throw Error("sparseValues.dtype must match defaultValues.dtype")}(a,o,r,i),sI.runKernel(iw,{sparseIndices:a,sparseValues:o,defaultValue:i},{outputShape:r})}}),pG=sF({gatherND_:function(e,t){let r=sM(t,"indices","gatherND","int32"),n=sM(e,"x","gatherND","string_or_numeric");return sI.runKernel(ou,{params:n,indices:r})}}),pq=sF({dropout_:function(e,t,r,n){let a=sM(e,"x","dropout");if(nQ("float32"===a.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),nQ(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),0===t)return e instanceof sh?a.clone():a;let o=function(e,t){if(null==t)return e.shape.slice();if(n1(e.shape,t))return t;if(e.shape.length===t.length){let r=[];for(let n=0;n<e.shape.length;n++)null==t[n]&&null!=e.shape[n]?r.push(e.shape[n]):r.push(t[n]);return r}return t}(a,r),i=1-t;return lM(a,lC(c0(lN(d0(o,0,1,"float32",n),i)),i))}});function pK(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function pY(e,t,r){let n=1-e%2,a=new Float32Array(e);for(let o=0;o<e;++o){let i=2*Math.PI*o/(e+n-1);a[o]=t-r*Math.cos(i)}return pE(a,"float32")}let pX=async function(e,t,r=1){let n=sM(e,"predictions","inTopK"),a=sM(t,"targets","inTopK");nQ(n.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${n.rank}`),nQ(n.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${n.rank} and targets rank ${a.rank}`),nZ(n.shape.slice(0,n.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let o=n.shape[n.shape.length-1];nQ(r>0&&r<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${r}`);let i=await n.data(),s=await a.data(),[l,u]=[i.length/o,o],c=n6("bool",l);for(let e=0;e<l;e++){let t=e*u,n=i.subarray(t,t+u),a=[];for(let e=0;e<n.length;e++)a.push({value:n[e],index:e});a.sort((e,t)=>t.value-e.value),c[e]=0;for(let t=0;t<r;t++)if(a[t].index===s[e]){c[e]=1;break}}return e!==n&&n.dispose(),t!==a&&a.dispose(),s$(c,a.shape,"bool")},pQ=sF({conv2DBackpropFilter_:function(e,t,r,n,a,o="NHWC",i){let s=e;3===e.rank&&(s=uJ(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=uJ(t,[1,t.shape[0],t.shape[1],t.shape[2]])),nQ(4===s.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),nQ(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),nQ(4===r.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${r}.`);let u="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?l.shape[3]:l.shape[1];nQ(u===r[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${r[2]}.`),nQ(c===r[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${r[3]}).`),uZ("conv2dDerFilter",a,i);let d={x:s,dy:l};return sI.runKernel(aU,d,{strides:n,pad:a,dataFormat:o,dimRoundingMode:i,filterShape:r})}});function pZ(e,t,r){if(null==r||"linear"===r)return e;if("relu"===r)return lM(e,px(t));throw Error(`Cannot compute gradient for fused activation ${r}.`)}function pJ(e,t){let r=t,n=function(e,t){let r=[];for(let n=0;n<t.length;n++){let a=e[e.length-n-1],o=t.length-n-1,i=t[o];(null==a||1===a&&i>1)&&r.unshift(o)}return r}(e.shape,t.shape);return n.length>0&&(r=cG(r,n)),uJ(r,e.shape)}function p0(e,t,r,n){if("linear"===t)return e;if("relu"===t)return d6(e);if("elu"===t)return cF(e);if("relu6"===t)return d5(e);if("prelu"===t)return dW(e,r);if("leakyrelu"===t)return c7(e,n);if("sigmoid"===t)return u4(e);throw Error(`Unknown fused activation ${t}.`)}let p1=(e,t)=>!(e>0)||"linear"===t,p2=sF({fusedConv2d_:function({x:e,filter:t,strides:r,pad:n,dataFormat:a="NHWC",dilations:o=[1,1],dimRoundingMode:i,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){let d,p;if(l=l||"linear",!1===p1(sI.state.gradientDepth,l)){nQ("NHWC"===a,()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let d=ch(e,t,r,n,a,o,i);return null!=s&&(d=lN(d,s)),p0(d,l,u,c)}let h=sM(e,"x","conv2d","float32"),f=sM(t,"filter","conv2d","float32"),m=h,g=!1;3===h.rank&&(g=!0,m=uJ(h,[1,h.shape[0],h.shape[1],h.shape[2]])),nQ(4===m.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),nQ(4===f.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),uZ("fused conv2d",n,i);let y="NHWC"===a?m.shape[3]:m.shape[1];nQ(f.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${f.shape[2]}.`),nQ(uY(r,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`);let v=uW(m.shape,f.shape,r,o,n,i);if(null!=s&&(d=sM(s,"bias","fused conv2d"),[d]=sb(d,h),"NHWC"===a?lX(v.outShape,d.shape):(nQ(d.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${d.shape.length}.`),nQ(0===d.shape.length||d.shape[0]===v.outChannels||1===d.shape[0],()=>`Error in fused conv2d: bias shape (${d.shape}) is not compatible with the number of output channels (${v.outChannels})`))),null!=u){let e=u.shape;if(nQ(e.length<=1||3===e.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`),1===e.length)nQ(1===e[0]||e[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${v.outChannels}).`);else if(3===e.length)try{lX(e,v.outShape)}catch(t){throw Error(`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${v.outShape}).`)}p=sM(u,"prelu weights","fused conv2d")}let b=(e,t)=>{nQ("NHWC"===a,()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);let[i,s,u,c]=t,d=pZ(e,u,l);nQ(uK(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let p=[cm(s.shape,d,i,r,n),pQ(s,d,i.shape,r,n)];if(null!=c){let e=pJ(c,d);p.push(e)}return p},w={x:m,filter:f,bias:d,preluActivationWeights:p},k={strides:r,pad:n,dataFormat:a,dilations:o,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return null==s?lD((e,t,r)=>{let n=sI.runKernel(iW,w,k);return r([t,e,n]),g&&(n=uJ(n,[n.shape[1],n.shape[2],n.shape[3]])),{value:n,gradFunc:b}})(m,f):lD((e,t,r,n)=>{let a=sI.runKernel(iW,w,k);return n([t,e,a,r]),g&&(a=uJ(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}})(m,f,d)}}),p3=sF({depthwiseConv2dNativeBackpropFilter_:function(e,t,r,n,a,o=[1,1],i){let s=e;3===e.rank&&(s=uJ(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=uJ(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u={x:s,dy:l};return sI.runKernel(a0,u,{strides:n,pad:a,dimRoundingMode:i,dilations:o,filterShape:r})}}),p4=sF({depthwiseConv2dNativeBackpropInput_:function(e,t,r,n,a,o=[1,1],i){let s=t,l=!1;3===t.rank&&(l=!0,s=uJ(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u={dy:s,filter:r},c=sI.runKernel(a1,u,{strides:n,pad:a,dimRoundingMode:i,dilations:o,inputShape:e});return l?uJ(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),p6=sF({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:r,pad:n,dataFormat:a="NHWC",dilations:o=[1,1],dimRoundingMode:i,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){let d,p;if(!1===p1(sI.state.gradientDepth,l)){let d=cE(e,t,r,n,a,o,i);return null!=s&&(d=lN(d,s)),p0(d,l,u,c)}let h=sM(e,"x","depthwiseConv2d","float32"),f=sM(t,"filter","depthwiseConv2d","float32"),m=h,g=!1;3===h.rank&&(g=!0,m=uJ(h,[1,h.shape[0],h.shape[1],h.shape[2]])),nQ(4===m.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),nQ(4===f.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),nQ(m.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),null==o&&(o=[1,1]),nQ(uY(r,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`),uZ("fused depthwiseConv2d",n,i);let y=uW(m.shape,f.shape,r,o,n,i,!0);null!=s&&(d=sM(s,"bias","fused conv2d"),[d]=sb(d,h),lX(y.outShape,d.shape)),null!=u&&(p=sM(u,"prelu weights","fused depthwiseConv2d"));let v=(e,t)=>{nQ(uK(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[a,s,u,c]=t,p=pZ(e,u,l),h=p4(s.shape,p,a,r,n,o,i),f=p3(s,p,a.shape,r,n,o,i);return null!=c?[h,f,pJ(d,p)]:[h,f]},b={x:m,filter:f,bias:d,preluActivationWeights:p},w={strides:r,pad:n,dataFormat:a,dilations:o,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return null==s?lD((e,t,r)=>{let n=sI.runKernel(iU,b,w);return r([t,e,n]),g&&(n=uJ(n,[n.shape[1],n.shape[2],n.shape[3]])),{value:n,gradFunc:v}})(m,f):lD((e,t,r,n)=>{let a=sI.runKernel(iU,b,w);return n([t,e,a,r]),g&&(a=uJ(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:v}})(m,f,d)}}),p5=sF({fusedMatMul_:function({a:e,b:t,transposeA:r=!1,transposeB:n=!1,bias:a,activation:o="linear",preluActivationWeights:i,leakyreluAlpha:s=.2}){let l,u;if(!1===p1(sI.state.gradientDepth,o)){let l=u3(e,t,r,n);return null!=a&&(l=lN(l,a)),p0(l,o,i,s)}let c=sM(e,"a","fused matMul"),d=sM(t,"b","fused matMul");[c,d]=sb(c,d);let p=r?c.shape[c.rank-2]:c.shape[c.rank-1],h=n?d.shape[d.rank-1]:d.shape[d.rank-2],f=r?c.shape[c.rank-1]:c.shape[c.rank-2],m=n?d.shape[d.rank-2]:d.shape[d.rank-1],g=c.shape.slice(0,-2),y=d.shape.slice(0,-2),v=n0(g),b=n0(y);nQ(p===h,()=>`Error in fused matMul: inner shapes (${p}) and (${h}) of Tensors with shapes ${c.shape} and ${d.shape} and transposeA=${r} and transposeB=${n} must match.`);let w=lX(c.shape.slice(0,-2),d.shape.slice(0,-2)).concat([f,m]),k=r?uJ(c,[v,p,f]):uJ(c,[v,f,p]),S=n?uJ(d,[b,m,h]):uJ(d,[b,h,m]);null!=a&&(l=sM(a,"bias","fused matMul"),[l]=sb(l,c),lX(w,l.shape)),null!=i&&(u=sM(i,"prelu weights","fused matMul"));let x=(e,t)=>{let i,s;let[l,u,c,d]=t,p=pZ(uJ(e,c.shape),c,o);return(r||n?!r&&n?(i=u3(p,u,!1,!1),s=u3(p,l,!0,!1)):r&&!n?(i=u3(u,p,!1,!0),s=u3(l,p,!1,!1)):(i=u3(u,p,!0,!0),s=u3(p,l,!0,!0)):(i=u3(p,u,!1,!0),s=u3(l,p,!0,!1)),null!=a)?[i,s,pJ(d,p)]:[i,s]},_={a:k,b:S,bias:l,preluActivationWeights:u},I={transposeA:r,transposeB:n,activation:o,leakyreluAlpha:s};return null==a?lD((e,t,r)=>{let n=sI.runKernel(iz,_,I);return r([e,t,n]),{value:uJ(n,w),gradFunc:x}})(k,S):lD((e,t,r,n)=>{let a=sI.runKernel(iz,_,I);return n([e,t,a,r]),{value:uJ(a,w),gradFunc:x}})(k,S,l)}}),p8=sF({hammingWindow_:function(e){return pY(e,.54,.46)}}),p7=sF({hannWindow_:function(e){return pY(e,.5,.5)}}),p9=sF({frame_:function(e,t,r,n=!1,a=0){let o=0,i=[];for(;o+t<=e.size;)i.push(u6(e,o,t)),o+=r;if(n)for(;o<e.size;){let n=o+t-e.size,s=u2([u6(e,o,t-n),lj([n],a)]);i.push(s),o+=r}return 0===i.length?pT([],[0,t]):uJ(u2(i),[i.length,t])}}),he=sF({stft_:function(e,t,r,n,a=p7){return null==n&&(n=pK(t)),pb(lM(p9(e,t,r),a(t)),n)}}),ht=sF({cropAndResize_:function(e,t,r,n,a="bilinear",o=0){let i=sM(e,"image","cropAndResize"),s=sM(t,"boxes","cropAndResize","float32"),l=sM(r,"boxInd","cropAndResize","int32"),u=s.shape[0];return nQ(4===i.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),nQ(2===s.rank&&4===s.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),nQ(1===l.rank&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),nQ(2===n.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${n.length}.`),nQ(n[0]>=1&&n[1]>=1,()=>`cropSize must be atleast [1,1], but was ${n}`),nQ("bilinear"===a||"nearest"===a,()=>`method must be bilinear or nearest, but was ${a}`),sI.runKernel(aX,{image:i,boxes:s,boxInd:l},{method:a,extrapolationValue:o,cropSize:n})}}),hr=sF({flipLeftRight_:function(e){let t=sM(e,"image","flipLeftRight","float32");return nQ(4===t.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`),sI.runKernel(oa,{image:t},{})}}),hn=sF({grayscaleToRGB_:function(e){let t=sM(e,"image","grayscaleToRGB"),r=t.rank-1,n=t.shape[r];nQ(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),nQ(1===n,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${n}.`);let a=Array(t.rank);return a.fill(1,0,r),a[r]=3,cZ(t,a)}}),ha=sF({rgbToGrayscale_:function(e){let t;let r=sM(e,"image","RGBToGrayscale"),n=r.rank-1,a=r.shape[n];nQ(r.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${r.rank}.`),nQ(3===a,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${a}.`);let o=r.dtype,i=lw(r,"float32"),s=pE([.2989,.587,.114]);switch(r.rank){case 2:t=cO("ij,j->i",i,s);break;case 3:t=cO("ijk,k->ij",i,s);break;case 4:t=cO("ijkl,l->ijk",i,s);break;case 5:t=cO("ijklm,m->ijkl",i,s);break;case 6:t=cO("ijklmn,n->ijklm",i,s);break;default:throw Error("Not a valid tensor rank.")}return lw(t=cX(t,-1),o)}}),ho=sF({rotateWithOffset_:function(e,t,r=0,n=.5){let a=sM(e,"image","rotateWithOffset","float32");return nQ(4===a.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`),sI.runKernel(iB,{image:a},{radians:t,fillValue:r,center:n})}});function hi(e,t,r,n,a,o){null==n&&(n=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);let i=e.shape[0];return r=Math.min(r,i),nQ(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),nQ(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),nQ(4===e.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),nQ(1===t.rank,()=>"scores must be a 1D tensor"),nQ(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),nQ(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:r,iouThreshold:n,scoreThreshold:a,softNmsSigma:o}}let hs=sF({nonMaxSuppression_:function(e,t,r,n=.5,a=Number.NEGATIVE_INFINITY){let o=sM(e,"boxes","nonMaxSuppression","float32"),i=sM(t,"scores","nonMaxSuppression","float32"),s=hi(o,i,r,n,a),l={maxOutputSize:r=s.maxOutputSize,iouThreshold:n=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return sI.runKernel(oB,{boxes:o,scores:i},l)}});function hl(e,t){return e>t?1:e<t?-1:0}function hu(e,t,r,n,a,o){return hc(e,t,r,n,a,0,!1,o,!0)}function hc(e,t,r,n,a,o,i=!1,s=!1,l=!1){let u=[];for(let e=0;e<t.length;e++)t[e]>a&&u.push({score:t[e],boxIndex:e,suppressBeginIndex:0});u.sort(hd);let c=o>0?-.5/o:0,d=[],p=[];for(;d.length<r&&u.length>0;){let t=u.pop(),{score:r,boxIndex:o,suppressBeginIndex:i}=t;if(r<a)break;let s=!1;for(let r=d.length-1;r>=i;--r){let i=function(e,t,r){let n=e.subarray(4*t,4*t+4),a=e.subarray(4*r,4*r+4),o=Math.min(n[0],n[2]),i=Math.min(n[1],n[3]),s=Math.max(n[0],n[2]),l=Math.max(n[1],n[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),h=(s-o)*(l-i),f=(d-u)*(p-c);if(h<=0||f<=0)return 0;let m=Math.max(Math.min(s,d)-Math.max(o,u),0)*Math.max(Math.min(l,p)-Math.max(i,c),0);return m/(h+f-m)}(e,o,d[r]);if(i>=n){s=!0;break}if(t.score=t.score*function(e,t,r){let n=Math.exp(t*r*r);return r<=e?n:0}(n,c,i),t.score<=a)break}t.suppressBeginIndex=d.length,!s&&(t.score===r?(d.push(o),p.push(t.score)):t.score>a&&function(e,t,r){let n=function(e,t,r){let n=0,a=e.length,o=0,i=!1;for(;n<a;){let s=r(t,e[o=n+(a-n>>>1)]);s>0?n=o+1:(a=o,i=!s)}return i?n:-n-1}(e,t,r||hl);e.splice(n<0?-(n+1):n,0,t)}(u,t,hd))}let h=d.length,f=r-h;s&&f>0&&(d.push(...Array(f).fill(0)),p.push(...Array(f).fill(0)));let m={selectedIndices:d};return i&&(m.selectedScores=p),l&&(m.validOutputs=h),m}function hd(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}async function hp(e,t,r,n=.5,a=Number.NEGATIVE_INFINITY){var o;let i=sM(e,"boxes","nonMaxSuppressionAsync"),s=sM(t,"scores","nonMaxSuppressionAsync"),l=hi(i,s,r,n,a);r=l.maxOutputSize,n=l.iouThreshold,a=l.scoreThreshold;let u=await Promise.all([i.data(),s.data()]),{selectedIndices:c}=(o=u[0],hc(o,u[1],r,n,a,0));return i!==e&&i.dispose(),s!==t&&s.dispose(),pE(c,"int32")}let hh=sF({nonMaxSuppressionWithScore_:function(e,t,r,n=.5,a=Number.NEGATIVE_INFINITY,o=0){let i=sM(e,"boxes","nonMaxSuppression"),s=sM(t,"scores","nonMaxSuppression"),l=hi(i,s,r,n,a,o);r=l.maxOutputSize,n=l.iouThreshold;let u={maxOutputSize:r,iouThreshold:n,scoreThreshold:a=l.scoreThreshold,softNmsSigma:o=l.softNmsSigma},c=sI.runKernel(oW,{boxes:i,scores:s},u);return{selectedIndices:c[0],selectedScores:c[1]}}});async function hf(e,t,r,n=.5,a=Number.NEGATIVE_INFINITY,o=0){var i;let s=sM(e,"boxes","nonMaxSuppressionAsync"),l=sM(t,"scores","nonMaxSuppressionAsync"),u=hi(s,l,r,n,a,o);r=u.maxOutputSize,n=u.iouThreshold,a=u.scoreThreshold,o=u.softNmsSigma;let c=await Promise.all([s.data(),l.data()]),{selectedIndices:d,selectedScores:p}=(i=c[0],hc(i,c[1],r,n,a,o,!0));return s!==e&&s.dispose(),l!==t&&l.dispose(),{selectedIndices:pE(d,"int32"),selectedScores:pE(p)}}let hm=sF({nonMaxSuppressionPadded_:function(e,t,r,n=.5,a=Number.NEGATIVE_INFINITY,o=!1){let i=sM(e,"boxes","nonMaxSuppression"),s=sM(t,"scores","nonMaxSuppression"),l=hi(i,s,r,n,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,p=sI.runKernel(oz,{boxes:i,scores:s},{maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:o});return{selectedIndices:p[0],validOutputs:p[1]}}});async function hg(e,t,r,n=.5,a=Number.NEGATIVE_INFINITY,o=!1){let i=sM(e,"boxes","nonMaxSuppressionAsync"),s=sM(t,"scores","nonMaxSuppressionAsync"),l=hi(i,s,r,n,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[p,h]=await Promise.all([i.data(),s.data()]),{selectedIndices:f,validOutputs:m}=hu(p,h,u,c,d,o);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:pE(f,"int32"),validOutputs:lP(m,"int32")}}let hy=sF({resizeBilinear_:function(e,t,r=!1,n=!1){let a=sM(e,"images","resizeBilinear");nQ(3===a.rank||4===a.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),nQ(2===t.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),nQ(!1===n||!1===r,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=a,i=!1;3===a.rank&&(i=!0,o=uJ(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,s={images:o},l=sI.runKernel(o4,s,{alignCorners:r,halfPixelCenters:n,size:t});return i?uJ(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),hv=sF({resizeNearestNeighbor_:function(e,t,r=!1,n=!1){let a=sM(e,"images","resizeNearestNeighbor");nQ(3===a.rank||4===a.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),nQ(2===t.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),nQ("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),nQ(!1===n||!1===r,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=a,i=!1;3===a.rank&&(i=!0,o=uJ(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,s={images:o},l=sI.runKernel(o2,s,{alignCorners:r,halfPixelCenters:n,size:t});return i?uJ(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),hb=sF({threshold_:function(e,t="binary",r=!1,n=.5){let a,o,i,s;let l=sM(e,"image","threshold"),u=l.shape[0]*l.shape[1],c=lM(pE([n]),255);if(nQ(3===l.rank,()=>`Error in threshold: image must be rank 3,but got rank ${l.rank}.`),nQ(3===l.shape[2]||1===l.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${l.shape[2]}.`),nQ("int32"===l.dtype||"float32"===l.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${l.dtype}.`),nQ("otsu"===t||"binary"===t,()=>`Method must be binary or otsu, but was ${t}`),3===l.shape[2]){[a,o,i]=pv(l,[1,1,1],-1);let e=lM(a,.2989),t=lM(o,.587),r=lM(i,.114);s=lN(lN(e,t),r)}else s=e;return"otsu"===t&&(c=function(e,t){let r,n,a,o,i,s,l=pE([-1]),u=pE([0]),c=pE([0]);for(let d=0;d<e.size-1;d++){r=u6(e,0,d+1),n=u6(e,d+1),i=lC(cG(r),t),s=lC(cG(n),t),a=lC(cG(lM(r,d2(0,r.size))),cG(r));let p=lj(n.shape,r.size),h=lN(d2(0,n.size),p),f=lG(a,o=lC(cG(lM(n,h)),cG(n))),m=lG(a,o),g=lM(i,s),y=c2(c=lM(lM(g,f),m),u);u=cC(y,c,u),l=cC(y,pE([d]),l)}return l}(cn(lw(pr(s),"int32"),s$([]),256),u)),lw(lM(r?de(s,c):c2(s,c),255),"int32")}}),hw=sF({transform_:function(e,t,r="nearest",n="constant",a=0,o){let i=sM(e,"image","transform","float32"),s=sM(t,"transforms","transform","float32");return nQ(4===i.rank,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),nQ(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),nQ(null==o||2===o.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`),sI.runKernel(iM,{image:i,transforms:s},{interpolation:r,fillMode:n,fillValue:a,outputShape:o})}}),hk=sF({bandPart_:function(e,t,r){let n,a;let o=sM(e,"a","bandPart");nQ(o.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${o.rank}.`);let i=o.shape,[s,l]=o.shape.slice(-2);"number"==typeof t?(nQ(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),nQ(t<=s,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`),n=sM(t<0?s:t,"numLower","bandPart")):(nQ("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),n=cC(c9(t,0),s,d_(t,s))),"number"==typeof r?(nQ(r%1==0,()=>`bandPart(): numUpper must be an integer, got ${r}.`),nQ(r<=l,()=>`bandPart(): numUpper (${r}) must not be greater than the number of columns (${l}).`),a=sM(r<0?l:r,"numUpper","bandPart")):(nQ("int32"===r.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),a=cC(c9(r,0),l,d_(r,l)));let u=lG(uJ(d2(0,s,1,"int32"),[-1,1]),d2(0,l,1,"int32")),c=dd(de(u,n),c3(u,di(a))),d=dk([s,l],o.dtype);return uJ(pS(pP(uJ(o,[-1,s,l])).map(e=>cC(c,e,d))),i)}}),hS=sF({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,nQ(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let r=e[0].shape[0];for(let t=1;t<e.length;++t)nQ(e[t].shape[0]===r,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${r})`)}else t=!0,e=pv(e,e.shape[0],0).map(e=>pk(e,[0]));nQ(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let r=[],n=e;for(let t=0;t<e.length;++t)r.push(sI.tidy(()=>{let e=n[t];if(t>0)for(let n=0;n<t;++n){let t=lM(cG(lM(r[n],e)),r[n]);e=lG(e,t)}return lC(e,cq(e,"euclidean"))}));return t?pS(r,0):r}});function hx(e,t=!1){return sI.tidy(()=>{nQ(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let r=e.shape[0],n=e.shape[1],a=cJ(r),o=lk(e),i=pT([[1]],[1,1]),s=lk(i),l=r>=n?n:r;for(let e=0;e<l;++e){let t=o,l=s,u=a;[s,o,a]=sI.tidy(()=>{let t=u6(o,[e,e],[r-e,1]),l=cq(t),u=u6(o,[e,e],[1,1]),c=cC(c2(u,0),pT([[-1]]),pT([[1]])),d=lG(u,lM(c,l)),p=lC(t,d);s=1===p.shape[0]?lk(i):u2([i,u6(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);let h=di(lC(u3(c,d),l)),f=u6(o,[e,0],[r-e,n]),m=lM(h,s),g=pU(s);if(0===e)o=lG(f,u3(m,u3(g,f)));else{let t=lG(f,u3(m,u3(g,f)));o=u2([u6(o,[0,0],[e,n]),t],0)}let y=pU(m),v=u6(a,[0,e],[r,a.shape[1]-e]);if(0===e)a=lG(v,u3(u3(v,s),y));else{let t=lG(v,u3(u3(v,s),y));a=u2([u6(a,[0,0],[r,e]),t],1)}return[s,o,a]}),l_([t,l,u])}return!t&&r>n&&(a=u6(a,[0,0],[r,n]),o=u6(o,[0,0],[n,n])),[a,o]})}let h_=sF({qr_:function(e,t=!1){if(nQ(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return hx(e,t);{let r=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),n=pP(uJ(e,[r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];return n.forEach(e=>{let[r,n]=hx(e,t);a.push(r),o.push(n)}),[uJ(pS(a,0),e.shape),uJ(pS(o,0),e.shape)]}}});(m4=gc||(gc={}))[m4.NONE=0]="NONE",m4[m4.MEAN=1]="MEAN",m4[m4.SUM=2]="SUM",m4[m4.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS";let hI=sF({computeWeightedLoss_:function(e,t,r=gc.SUM_BY_NONZERO_WEIGHTS){let n=sM(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=sM(t,"weights","computeWeightedLoss"));let o=null==a?n:lM(n,a);if(r===gc.NONE)return o;if(r===gc.SUM)return cG(o);if(r===gc.MEAN){if(null==a)return dw(o);{let e=n.size/a.size,t=lC(cG(o),cG(a));return e>1?lC(t,lP(e)):t}}if(r===gc.SUM_BY_NONZERO_WEIGHTS){if(null==a)return lC(cG(o),lP(n.size));{let e=lw(cG(dC(lM(a,dS(n.shape)),lP(0))),"float32");return lC(cG(o),e)}}throw Error(`Unknown reduction: ${r}`)}}),hE=sF({absoluteDifference_:function(e,t,r,n=gc.SUM_BY_NONZERO_WEIGHTS){let a=sM(e,"labels","absoluteDifference"),o=sM(t,"predictions","absoluteDifference"),i=null;return null!=r&&(i=sM(r,"weights","absoluteDifference")),nZ(a.shape,o.shape,"Error in absoluteDifference: "),hI(lK(lG(a,o)),i,n)}}),hT=sF({cosineDistance_:function(e,t,r,n,a=gc.SUM_BY_NONZERO_WEIGHTS){let o=sM(e,"labels","cosineDistance"),i=sM(t,"predictions","cosineDistance"),s=null;return null!=n&&(s=sM(n,"weights","cosineDistance")),nZ(o.shape,i.shape,"Error in cosineDistance: "),hI(lG(lP(1),cG(lM(o,i),r,!0)),s,a)}}),hN=sF({hingeLoss_:function(e,t,r,n=gc.SUM_BY_NONZERO_WEIGHTS){let a=sM(e,"labels","hingeLoss"),o=sM(t,"predictions","hingeLoss"),i=null;null!=r&&(i=sM(r,"weights","hingeLoss")),nZ(a.shape,o.shape,"Error in hingeLoss: ");let s=lP(1);return a=lG(lM(lP(2),a),s),hI(d6(lG(s,lM(a,o))),i,n)}}),hA=sF({huberLoss_:function(e,t,r,n=1,a=gc.SUM_BY_NONZERO_WEIGHTS){let o=sM(e,"labels","huberLoss"),i=sM(t,"predictions","huberLoss"),s=null;null!=r&&(s=sM(r,"weights","huberLoss")),nZ(o.shape,i.shape,"Error in huberLoss: ");let l=lP(n),u=lK(lG(i,o)),c=d_(u,l),d=lG(u,c);return hI(lN(lM(lP(.5),lO(c)),lM(l,d)),s,a)}}),hC=sF({logLoss_:function(e,t,r,n=1e-7,a=gc.SUM_BY_NONZERO_WEIGHTS){let o=sM(e,"labels","logLoss"),i=sM(t,"predictions","logLoss"),s=null;null!=r&&(s=sM(r,"weights","logLoss")),nZ(o.shape,i.shape,"Error in logLoss: ");let l=lP(1),u=lP(n),c=di(lM(o,dn(lN(i,u)))),d=lM(lG(l,o),dn(lN(lG(l,i),u)));return hI(lG(c,d),s,a)}}),hM=sF({meanSquaredError_:function(e,t,r,n=gc.SUM_BY_NONZERO_WEIGHTS){let a=sM(e,"labels","meanSquaredError"),o=sM(t,"predictions","meanSquaredError"),i=null;return null!=r&&(i=sM(r,"weights","meanSquaredError")),nZ(a.shape,o.shape,"Error in meanSquaredError: "),hI(pw(a,o),i,n)}}),hR=sF({sigmoidCrossEntropy_:function(e,t,r,n=0,a=gc.SUM_BY_NONZERO_WEIGHTS){let o=sM(e,"multiClassLabels","sigmoidCrossEntropy"),i=sM(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=r&&(s=sM(r,"weights","sigmoidCrossEntropy")),nZ(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),n>0){let e=lP(n),t=lP(1),r=lP(.5);o=lN(lM(o,lG(t,e)),lM(r,e))}return hI(function(e,t){let r=sM(e,"labels","sigmoidCrossEntropyWithLogits"),n=sM(t,"logits","sigmoidCrossEntropyWithLogits");nZ(r.shape,n.shape,"Error in sigmoidCrossEntropyWithLogits: ");let a=d6(n),o=lM(n,r),i=da(cY(di(lK(n))));return lN(lG(a,o),i)}(o,i),s,a)}}),hO=sF({softmaxCrossEntropy_:function(e,t,r,n=0,a=gc.SUM_BY_NONZERO_WEIGHTS){let o=sM(e,"onehotLabels","softmaxCrossEntropy"),i=sM(t,"logits","softmaxCrossEntropy"),s=null;if(null!=r&&(s=sM(r,"weights","softmaxCrossEntropy")),nZ(o.shape,i.shape,"Error in softmaxCrossEntropy: "),n>0){let e=lP(n),t=lP(1),r=lP(o.shape[1]);o=lN(lM(o,lG(t,e)),lC(e,r))}return hI(function(e,t,r=-1){if(-1===r&&(r=t.rank-1),r!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${r}`);return lD((e,t,n)=>{let a=dc(t,[r],!0),o=lG(lw(t,"float32"),a);return n([e,o]),{value:cG(di(lM(o,e)),[r]),gradFunc:(e,t)=>{let[n,a]=t,o=cB(e.shape,[r]);return[lM(uJ(e,o),lG(lw(n,"float32"),cY(a))),lM(uJ(e,o),lG(cY(a),lw(n,"float32")))]}}})(e,t)}(o,i),s,a)}}),hF=sF({sparseFillEmptyRows_:function(e,t,r,n){let a=sM(e,"indices","sparseFillEmptyRows","int32"),o=sM(t,"values","sparseFillEmptyRows"),i=sM(r,"denseShape","sparseFillEmptyRows","int32"),s=sM(n,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==a.rank)throw Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(1!==o.rank)throw Error(`Values should be Tensor1D but received shape ${o.shape}`);if(1!==i.rank)throw Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(0!==s.rank)throw Error(`Default value should be a scalar but received shape ${s.shape}`);let l=sI.runKernel(ig,{indices:a,values:o,denseShape:i,defaultValue:s});return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}}),hD=sF({sparseReshape_:function(e,t,r){let n=sM(e,"inputIndices","sparseReshape","int32"),a=sM(t,"inputShape","sparseReshape","int32"),o=sM(r,"newShape","sparseReshape","int32");if(2!==n.rank)throw Error(`Input indices should be Tensor2D but received shape
        ${n.shape}`);if(1!==a.rank)throw Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(1!==o.rank)throw Error(`New shape should be Tensor1D but received shape ${o.shape}`);let i=sI.runKernel(iy,{inputIndices:n,inputShape:a,newShape:o});return{outputIndices:i[0],outputShape:i[1]}}}),hP=sF({sparseSegmentMean_:function(e,t,r){let n=sM(e,"data","sparseSegmentMean"),a=sM(t,"indices","sparseSegmentMean","int32"),o=sM(r,"segmentIds","sparseSegmentMean","int32");if(n.rank<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(1!==o.rank)throw Error(`Segment ids should be Tensor1D but received shape
          ${o.shape}`);return sI.runKernel(iv,{data:n,indices:a,segmentIds:o})}}),h$=sF({sparseSegmentSum_:function(e,t,r){let n=sM(e,"data","sparseSegmentSum"),a=sM(t,"indices","sparseSegmentSum","int32"),o=sM(r,"segmentIds","sparseSegmentSum","int32");if(n.rank<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(1!==o.rank)throw Error(`Segment ids should be Tensor1D but received shape
         ${o.shape}`);return sI.runKernel(ib,{data:n,indices:a,segmentIds:o})}}),hL=sF({stringNGrams_:function(e,t,r,n,a,o,i,s){let l=sM(e,"data","stringNGrams","string");if("string"!==l.dtype)throw Error("Data must be of datatype string");if(1!==l.shape.length)throw Error(`Data must be a vector, saw: ${l.shape}`);let u=sM(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw Error("Data splits must be of datatype int32");let c=sI.runKernel(iI,{data:l,dataSplits:u},{separator:r,nGramWidths:n,leftPad:a,rightPad:o,padWidth:i,preserveShortSequences:s});return{nGrams:c[0],nGramsSplits:c[1]}}}),hB=sF({stringSplit_:function(e,t,r=!0){let n=sM(e,"input","stringSplit","string"),a=sM(t,"delimiter","stringSplit","string");if(1!==n.rank)throw Error(`Input should be Tensor1D but received shape ${n.shape}`);if(0!==a.rank)throw Error(`Delimiter should be a scalar but received shape ${a.shape}`);let o=sI.runKernel(iE,{input:n,delimiter:a},{skipEmpty:r});return{indices:o[0],values:o[1],shape:o[2]}}}),hz=sF({stringToHashBucketFast_:function(e,t){let r=sM(e,"input","stringToHashBucketFast","string");if(t<=0)throw Error("Number of buckets must be at least 1");return sI.runKernel(iT,{input:r},{numBuckets:t})}}),hW=sF({staticRegexReplace_:function(e,t,r,n=!0){let a=sM(e,"input","staticRegexReplace","string");return sI.runKernel(ix,{x:a},{pattern:t,rewrite:r,replaceGlobal:n})}}),hU={fft:pm,ifft:pg,rfft:pb,irfft:py},hj={hammingWindow:p8,hannWindow:p7,frame:p9,stft:he},hV={flipLeftRight:hr,grayscaleToRGB:hn,resizeNearestNeighbor:hv,resizeBilinear:hy,rgbToGrayscale:ha,rotateWithOffset:ho,cropAndResize:ht,nonMaxSuppression:hs,nonMaxSuppressionAsync:hp,nonMaxSuppressionWithScore:hh,nonMaxSuppressionWithScoreAsync:hf,nonMaxSuppressionPadded:hm,nonMaxSuppressionPaddedAsync:hg,threshold:hb,transform:hw},hH={bandPart:hk,gramSchmidt:hS,qr:h_},hG={absoluteDifference:hE,computeWeightedLoss:hI,cosineDistance:hT,hingeLoss:hN,huberLoss:hA,logLoss:hC,meanSquaredError:hM,sigmoidCrossEntropy:hR,softmaxCrossEntropy:hO},hq={sparseFillEmptyRows:hF,sparseReshape:hD,sparseSegmentMean:hP,sparseSegmentSum:h$},hK={stringNGrams:hL,stringSplit:hB,stringToHashBucketFast:hz,staticRegexReplace:hW};function hY(e,t){let r=e[0].length;e.forEach((e,t)=>{nQ(e.length===r,()=>`Error in concat${r}D: rank of tensors[${t}] must be the same as the rank of the rest (${r})`)}),nQ(t>=0&&t<r,()=>`Error in concat${r}D: axis must be between 0 and ${r-1}.`);let n=e[0];e.forEach((e,a)=>{for(let o=0;o<r;o++)nQ(o===t||e[o]===n[o],()=>`Error in concat${r}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${n}) along the non-concatenated axis ${a}.`)})}function hX(e,t){let r=e[0].slice();for(let n=1;n<e.length;n++)r[t]+=e[n][t];return r}function hQ(e,t,r){return[r*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function hZ(e,t,r,n=!0){let a=[];if(n)(a=a.concat(t.slice(0))).push(e[0]/r),a=a.concat(e.slice(1));else{a=a.concat(e[0]);let r=t.length;for(let n=0;n<r;++n)a=a.concat([e[n+1]/t[n],t[n]]);a=a.concat(e.slice(r+1))}return a}function hJ(e,t,r=!0){let n=[];if(r){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{let r=[],a=[];for(let n=1;n<e;++n)n>=2*t+1||n%2==1?a.push(n):r.push(n);n.push(...r),n.push(0),n.push(...a)}return n}function h0(e,t,r,n=!0){let a=[];n?a.push(e[0]/r):a.push(e[0]*r);for(let r=1;r<e.length;++r)r<=t.length?n?a.push(t[r-1]*e[r]):a.push(e[r]/t[r-1]):a.push(e[r]);return a}function h1(e,t){let r=[0];for(let n=0;n<t;++n)r.push(e[n][0]);return r}function h2(e,t,r){let n=e.slice(0,1);for(let a=0;a<r;++a)n.push(e[a+1]-t[a][0]-t[a][1]);return n}function h3(e,t){if(e.length!==t.length)throw Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let r=new Float32Array(2*e.length);for(let n=0;n<r.length;n+=2)r[n]=e[n/2],r[n+1]=t[n/2];return r}function h4(e,t){return{real:e[2*t],imag:e[2*t+1]}}(m6=gd||(gd={}))[m6.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",m6[m6.VALUE_ROWIDS=1]="VALUE_ROWIDS",m6[m6.ROW_LENGTHS=2]="ROW_LENGTHS",m6[m6.ROW_SPLITS=3]="ROW_SPLITS",m6[m6.ROW_LIMITS=4]="ROW_LIMITS",m6[m6.ROW_STARTS=5]="ROW_STARTS";let h6=/->/g;function h5(e,t,r=0){let n=[];if("number"==typeof t)nQ(e.shape[r]%t==0,()=>"Number of splits must evenly divide the axis."),n=Array(t).fill(e.shape[r]/t);else{nQ(1>=t.reduce((e,t)=>(-1===t&&(e+=1),e),0),()=>"There should be only one negative value in split array.");let a=t.indexOf(-1);if(-1!==a){let n=t.reduce((e,t)=>t>0?e+t:e);t[a]=e.shape[r]-n}nQ(e.shape[r]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),n=t}return n}function h8(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function h7(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function h9(e,t,r){return`indices(${e}, 0) is invalid: ${t} >= ${r}`}function fe(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function ft(e,t){return`size ${e} must be non-negative, not ${t}`}function fr(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function fn(e,t){let r=n0(e),n=n0(t);return`Input to reshape is a SparseTensor with ${r}
  dense values, but the requested shape requires a multiple of ${n}. inputShape=${e} outputShape= ${t}`}function fa(e,t){let r=n0(e),n=n0(t);return`Input to reshape is a tensor with ${r} dense values, but the requested shape has ${n}. inputShape=${e} outputShape=${t}`}function fo(){return"segment ids must be >= 0"}function fi(){return"segment ids are not increasing"}function fs(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function fl(e,t,r){return`Bad: indices[${e}] == ${t} out of range [0, ${r})`}function fu(e,t,r,n){let a=t.shape.length,o=e.shape.length;if(0!==n&&(n<-a||n>a))throw Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${n}`);if(n<0&&(n+=a),n>o)throw Error(`batchDims (${n}) must be less than rank(x) (
    ${o}).`);if(r<n)throw Error(`batchDims (${n}) must be less than or equal to axis (${r}).`);for(let r=0;r<n;++r)if(e.shape[r]!==t.shape[r])throw Error(`x.shape[${r}]: ${e.shape[r]} should be equal to indices.shape[${r}]: ${t.shape[r]}.`);let i=e.shape[r],s=[],l=1,u=1,c=1;for(let t=0;t<n;++t)s.push(e.shape[t]),l*=e.shape[t];for(let t=n;t<r;t++)s.push(e.shape[t]),u*=e.shape[t];for(let e=n;e<a;e++)s.push(t.shape[e]);for(let t=r+1;t<o;t++)s.push(e.shape[t]),c*=e.shape[t];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:s}}function fc(e){try{return e.map(e=>sr(e))}catch(e){throw Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function fd(e){return e.map(e=>st(e))}!function(){for(let e of l2)!function(e,t,r){nQ(null!=e.className,()=>"Class being registered does not have the static className property defined."),nQ("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),nQ(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),void 0===t&&(t="Custom"),void 0===r&&(r=e.className);let n=t+">"+r;lz.register(e),l$.set(n,e),lL.set(e,n)}(e)}();var fp=r(39532);ap.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),(m5=gp||(gp={}))[m5.DT_INVALID=0]="DT_INVALID",m5[m5.DT_FLOAT=1]="DT_FLOAT",m5[m5.DT_DOUBLE=2]="DT_DOUBLE",m5[m5.DT_INT32=3]="DT_INT32",m5[m5.DT_UINT8=4]="DT_UINT8",m5[m5.DT_INT16=5]="DT_INT16",m5[m5.DT_INT8=6]="DT_INT8",m5[m5.DT_STRING=7]="DT_STRING",m5[m5.DT_COMPLEX64=8]="DT_COMPLEX64",m5[m5.DT_INT64=9]="DT_INT64",m5[m5.DT_BOOL=10]="DT_BOOL",m5[m5.DT_QINT8=11]="DT_QINT8",m5[m5.DT_QUINT8=12]="DT_QUINT8",m5[m5.DT_QINT32=13]="DT_QINT32",m5[m5.DT_BFLOAT16=14]="DT_BFLOAT16",m5[m5.DT_QINT16=15]="DT_QINT16",m5[m5.DT_QUINT16=16]="DT_QUINT16",m5[m5.DT_UINT16=17]="DT_UINT16",m5[m5.DT_COMPLEX128=18]="DT_COMPLEX128",m5[m5.DT_HALF=19]="DT_HALF",m5[m5.DT_RESOURCE=20]="DT_RESOURCE",m5[m5.DT_VARIANT=21]="DT_VARIANT",m5[m5.DT_UINT32=22]="DT_UINT32",m5[m5.DT_UINT64=23]="DT_UINT64",m5[m5.DT_FLOAT_REF=101]="DT_FLOAT_REF",m5[m5.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",m5[m5.DT_INT32_REF=103]="DT_INT32_REF",m5[m5.DT_UINT8_REF=104]="DT_UINT8_REF",m5[m5.DT_INT16_REF=105]="DT_INT16_REF",m5[m5.DT_INT8_REF=106]="DT_INT8_REF",m5[m5.DT_STRING_REF=107]="DT_STRING_REF",m5[m5.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",m5[m5.DT_INT64_REF=109]="DT_INT64_REF",m5[m5.DT_BOOL_REF=110]="DT_BOOL_REF",m5[m5.DT_QINT8_REF=111]="DT_QINT8_REF",m5[m5.DT_QUINT8_REF=112]="DT_QUINT8_REF",m5[m5.DT_QINT32_REF=113]="DT_QINT32_REF",m5[m5.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",m5[m5.DT_QINT16_REF=115]="DT_QINT16_REF",m5[m5.DT_QUINT16_REF=116]="DT_QUINT16_REF",m5[m5.DT_UINT16_REF=117]="DT_UINT16_REF",m5[m5.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",m5[m5.DT_HALF_REF=119]="DT_HALF_REF",m5[m5.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",m5[m5.DT_VARIANT_REF=121]="DT_VARIANT_REF",m5[m5.DT_UINT32_REF=122]="DT_UINT32_REF",m5[m5.DT_UINT64_REF=123]="DT_UINT64_REF",(m7=(m8=gh||(gh={})).CheckpointFormatVersion||(m8.CheckpointFormatVersion={}))[m7.LEGACY=0]="LEGACY",m7[m7.V1=1]="V1",m7[m7.V2=2]="V2";let fh={};function ff(e,t,r,n,a){let o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){let e=o.inputIndexStart,i=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?e+1:o.inputIndexEnd,s=e<0?t.inputNames.length+e:e;if("tensor"===o.type)return fm(t.inputNames[s],r,n,a);if("tensors"===o.type){let o=t.inputs.slice(e,i);return t.inputNames.slice(e,i).filter((e,t)=>{var r;return(null===(r=o[t])||void 0===r?void 0:r.op)!=="NoOp"}).map(e=>fm(e,r,n,a))}let l=fm(t.inputNames[s],r,n,a),u=l.dataSync();return"number"===o.type?u[0]:at(l.shape,u)}let i=t.attrParams[e];return i&&i.value}function fm(e,t,r,n){let[a,o]=fb(e,r);if(null!=n){let e=n.getHashTableHandleByName(a);if(null!=e)return e}let i=r.currentContextIds.find(e=>!!t[fv(a,e)]);return void 0!==i?t[fv(a,i)][o]:void 0}function fg(e,t,r){return t[fv(e,r.currentContextId)]}function fy(e,t){let[r,n,a]=fb(e,t);return[fv(r,t&&t.currentContextId),n,a]}function fv(e,t){return t?`${e}-${t}`:e}function fb(e,t){let r;if(""===e)return["",0,void 0];let n=null!=t&&null!=t.parseNodeNameCache;if(n){let r=t.parseNodeNameCache.get(e);if(null!=r)return r}let a=e.split(":");if(1===a.length)r=[e,0,void 0];else{let e=a[0],t=3===a.length?a[1]:void 0;r=[e,Number(a[a.length-1]),t]}return n&&t.parseNodeNameCache.set(e,r),r}function fw(e,t,r){let n=ff("pad",e,t,r);if("explicit"===n){n=ff("explicitPaddings",e,t,r);let a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=n[2*e],a[e][1]=n[2*e+1];return a}return n}function fk(e){return e.kept?e:lk(e)}let fS=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],fx=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],f_=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],fI=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],fE=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],fT=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],fN=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],fA=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],fC=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],fM=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],fR=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],fO=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],fF=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],fD=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],fP=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],f$=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],fL=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],fB=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],fz=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var fW=r(82957).lW;class fU{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[].concat(...[tP,t$,tL,tB,tz,tW,tU,tj,tV,tH,tG,tq,tK,tY,tX,tQ,tZ,tJ,t0].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){let r=e.node,n=[],a=[],o=[],i=r.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?n.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):(null==t.input||0===t.input.length)&&o.push(e[t.name]),e),{}),s=[],l=[],u={},c={};null!=t&&(u=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));let d=Object.keys(i);d.forEach(e=>{let t=i[e];t.inputNames.forEach((e,r)=>{let[n,,a]=fy(e),o=i[n];if(null!=o.outputs){let e=o.outputs.indexOf(a);if(-1!==e){let a=`${n}:${e}`;t.inputNames[r]=a}}t.inputs.push(o),o.children.push(t)})}),0===Object.keys(c).length?d.forEach(e=>{let t=i[e];0===t.children.length&&l.push(t)}):Object.keys(c).forEach(e=>{let[t]=fy(e),r=i[t];null!=r&&(r.signatureKey=c[e],l.push(r))}),Object.keys(u).length>0?Object.keys(u).forEach(e=>{let[t]=fy(e),r=i[t];r&&(r.signatureKey=u[e],s.push(r))}):s=n;let p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));let h={nodes:i,inputs:s,outputs:l,weights:a,placeholders:n,signature:t,functions:p};return o.length>0&&(h.initNodes=o),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){let t=fh[e.op]||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});let r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.slice(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(r.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(r.attrParams=t.attrs.reduce((t,r)=>{let n;let a=r.type;switch(r.type){case"string":void 0===(n=fV(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=fV(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"string[]":void 0===(n=f0(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=f0(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"number":void 0===(n=fG(e.attr,r.tfName,r.defaultValue||0))&&r.tfDeprecatedName&&(n=fG(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"number[]":void 0===(n=fJ(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=fJ(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"bool":void 0===(n=fH(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=fH(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"bool[]":void 0===(n=f2(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=f2(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"shape":void 0===(n=fZ(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=fZ(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"shape[]":void 0===(n=f1(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=f1(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"dtype":void 0===(n=fY(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=fY(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"dtype[]":void 0===(n=fX(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=fX(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"func":void 0===(n=fK(e.attr,r.tfName,r.defaultValue))&&r.tfDeprecatedName&&(n=fK(e.attr,r.tfDeprecatedName,r.defaultValue));break;case"tensor":case"tensors":break;default:throw Error(`Unsupported param type: ${r.type} for op: ${e.op}`)}return t[r.name]={value:n,type:a},t},{})),r}mapFunction(e){let t=e.nodeDef,r=[],n={};null!=t&&(n=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&r.push(e[t.name]),e),{}));let a=[],o=[];e.signature.inputArg.forEach(e=>{let[t]=fy(e.name),r={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:fq(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,a.push(r),n[t]=r}),Object.keys(n).forEach(e=>{let t=n[e];t.inputNames.forEach((e,r)=>{let[a,,o]=fy(e),i=n[a];if(null!=i.outputs){let e=i.outputs.indexOf(o);if(-1!==e){let n=`${a}:${e}`;t.inputNames[r]=n}}t.inputs.push(i),i.children.push(t)})});let i=e.ret;e.signature.outputArg.forEach(e=>{let[t,r]=fy(i[e.name]),a=n[t];null!=a&&(a.defaultOutput=r,o.push(a))});let s=this.mapArgsToSignature(e);return{nodes:n,inputs:a,outputs:o,weights:r,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return null!=t&&(r=t[r]),{name:r,dtype:e.type}}}function fj(e,t){let r=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){let t=ap.global;if(void 0!==t.atob)return t.atob(e);if(void 0!==fW)return new fW(e,"base64").toString();throw Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?r:r.toLowerCase()}function fV(e,t,r,n=!1){let a=e[t];return null!=a?fj(a.s,n):r}function fH(e,t,r){let n=e[t];return n?n.b:r}function fG(e,t,r){let n=e[t]||{},a=null!=n.i?n.i:null!=n.f?n.f:r;return"number"==typeof a?a:parseInt(a,10)}function fq(e){switch("string"==typeof e&&(e=gp[e]),e){case gp.DT_FLOAT:case gp.DT_HALF:return"float32";case gp.DT_INT32:case gp.DT_INT64:case gp.DT_INT8:case gp.DT_UINT8:return"int32";case gp.DT_BOOL:return"bool";case gp.DT_DOUBLE:return"float32";case gp.DT_STRING:return"string";default:return null}}function fK(e,t,r){let n=e[t];return n&&n.func?n.func.name:r}function fY(e,t,r){let n=e[t];return n&&n.type?fq(n.type):r}function fX(e,t,r){let n=e[t];return n&&n.list&&n.list.type?n.list.type.map(e=>fq(e)):r}function fQ(e){return e.unknownRank?void 0:null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function fZ(e,t,r){let n=e[t];return n&&n.shape?fQ(n.shape):r}function fJ(e,t,r){let n=e[t];return n?((n.list.f&&n.list.f.length?n.list.f:n.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):r}function f0(e,t,r,n=!1){let a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>fj(e,n)):r}function f1(e,t,r){let n=e[t];return n&&n.list&&n.list.shape?n.list.shape.map(e=>fQ(e)):r}function f2(e,t,r){let n=e[t];return n&&n.list&&n.list.b?n.list.b:r}class f3{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return fm(e,this.tensorMap,this.context)}getAttr(e,t){let r=this.node.rawAttrs[e];if(null!=r.tensor)return fm(e,this.tensorMap,this.context);if(null!=r.i||null!=r.f)return fG(this.node.rawAttrs,e,t);if(null!=r.s)return fV(this.node.rawAttrs,e,t);if(null!=r.b)return fH(this.node.rawAttrs,e,t);if(null!=r.shape)return fZ(this.node.rawAttrs,e,t);if(null!=r.type)return fY(this.node.rawAttrs,e,t);if(null!=r.list){if(null!=r.list.i||null!=r.list.f)return fJ(this.node.rawAttrs,e,t);if(null!=r.list.s)return f0(this.node.rawAttrs,e,t);if(null!=r.list.shape)return f1(this.node.rawAttrs,e,t);if(null!=r.list.b)return f2(this.node.rawAttrs,e,t);if(null!=r.list.type)return fX(this.node.rawAttrs,e,t)}return t}}let f4=(e,t,r,n=t1)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[n.add(ff("a",e,t,r),ff("b",e,t,r))];case"AddN":return[n.addN(ff("tensors",e,t,r))];case"FloorMod":case"Mod":return[n.mod(ff("a",e,t,r),ff("b",e,t,r))];case"Mul":return[n.mul(ff("a",e,t,r),ff("b",e,t,r))];case"RealDiv":case"Div":return[n.div(ff("a",e,t,r),ff("b",e,t,r))];case"DivNoNan":return[n.divNoNan(ff("a",e,t,r),ff("b",e,t,r))];case"FloorDiv":return[n.floorDiv(ff("a",e,t,r),ff("b",e,t,r))];case"Sub":return[n.sub(ff("a",e,t,r),ff("b",e,t,r))];case"Minimum":return[n.minimum(ff("a",e,t,r),ff("b",e,t,r))];case"Maximum":return[n.maximum(ff("a",e,t,r),ff("b",e,t,r))];case"Pow":return[n.pow(ff("a",e,t,r),ff("b",e,t,r))];case"SquaredDifference":return[n.squaredDifference(ff("a",e,t,r),ff("b",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},f6=(e,t,r,n=t1)=>{switch(e.op){case"Abs":case"ComplexAbs":return[n.abs(ff("x",e,t,r))];case"Acos":return[n.acos(ff("x",e,t,r))];case"Acosh":return[n.acosh(ff("x",e,t,r))];case"Asin":return[n.asin(ff("x",e,t,r))];case"Asinh":return[n.asinh(ff("x",e,t,r))];case"Atan":return[n.atan(ff("x",e,t,r))];case"Atan2":return[n.atan2(ff("x",e,t,r),ff("y",e,t,r))];case"Atanh":return[n.atanh(ff("x",e,t,r))];case"Ceil":return[n.ceil(ff("x",e,t,r))];case"Complex":return[n.complex(ff("real",e,t,r),ff("imag",e,t,r))];case"Cos":return[n.cos(ff("x",e,t,r))];case"Cosh":return[n.cosh(ff("x",e,t,r))];case"Elu":return[n.elu(ff("x",e,t,r))];case"Erf":return[n.erf(ff("x",e,t,r))];case"Exp":return[n.exp(ff("x",e,t,r))];case"Expm1":return[n.expm1(ff("x",e,t,r))];case"Floor":return[n.floor(ff("x",e,t,r))];case"Log":return[n.log(ff("x",e,t,r))];case"Log1p":return[n.log1p(ff("x",e,t,r))];case"Imag":return[n.imag(ff("x",e,t,r))];case"Neg":return[n.neg(ff("x",e,t,r))];case"Reciprocal":return[n.reciprocal(ff("x",e,t,r))];case"Real":return[n.real(ff("x",e,t,r))];case"Relu":return[n.relu(ff("x",e,t,r))];case"Round":return[n.round(ff("x",e,t,r))];case"Selu":return[n.selu(ff("x",e,t,r))];case"Sigmoid":return[n.sigmoid(ff("x",e,t,r))];case"Sin":return[n.sin(ff("x",e,t,r))];case"Sign":return[n.sign(ff("x",e,t,r))];case"Sinh":return[n.sinh(ff("x",e,t,r))];case"Softplus":return[n.softplus(ff("x",e,t,r))];case"Sqrt":return[n.sqrt(ff("x",e,t,r))];case"Square":return[n.square(ff("x",e,t,r))];case"Tanh":return[n.tanh(ff("x",e,t,r))];case"Tan":return[n.tan(ff("x",e,t,r))];case"ClipByValue":return[n.clipByValue(ff("x",e,t,r),ff("clipValueMin",e,t,r),ff("clipValueMax",e,t,r))];case"Relu6":return[n.relu6(ff("x",e,t,r))];case"Rsqrt":return[n.rsqrt(fm(e.inputNames[0],t,r))];case"LeakyRelu":return[n.leakyRelu(ff("x",e,t,r),ff("alpha",e,t,r))];case"Prelu":return[n.prelu(ff("x",e,t,r),ff("alpha",e,t,r))];case"IsNan":return[n.isNaN(fm(e.inputNames[0],t,r))];case"IsInf":return[n.isInf(fm(e.inputNames[0],t,r))];case"IsFinite":return[n.isFinite(fm(e.inputNames[0],t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function f5(e,t,r=""){if("number"!=typeof e&&"number"!=typeof t){nQ(e.length===t.length,()=>r+` Shapes ${e} and ${t} must match`);for(let n=0;n<e.length;n++){let a=e[n],o=t[n];nQ(a<0||o<0||a===o,()=>r+` Shapes ${e} and ${t} must match`)}}}function f8(e){return!("number"==typeof e||e.some(e=>e<0))}function f7(e,t,r){let n=f9(e,r),a=!f8(n);if(a&&0===t.length)throw Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${n}`);if(a&&t.forEach(e=>{n=f9(e.shape,n)}),!f8(n))throw Error(`Non-fully-defined elementShape: ${n}`);return n}function f9(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let r=[];for(let n=0;n<e.length;++n){let a=e[n],o=t[n];if(a>=0&&o>=0&&a!==o)throw Error(`Incompatible shape during merge: ${e} vs. ${t}`);r[n]=a>=0?a:o}return r}class me{constructor(e,t,r,n,a,o,i){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=n,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=lP(0),lI(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let t=this.tensors[e];if(t.cleared)throw Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),f5(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,lI(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,r)=>this.write(e,t[r]))}gather(e,t){if(t&&t!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return s$([],[0].concat(this.elementShape));let r=this.readMany(e);return f5(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),pS(r,0)}concat(e){if(e&&e!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return s$([],[0].concat(this.elementShape));let t=[];for(let e=0;e<this.size();e++)t.push(e);let r=this.readMany(t);return f5(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),u2(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,pP(t,0))}split(e,t){if(t.dtype!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0,n=e.map(e=>r+=e);if(r!==t.shape[0])throw Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let a=0===r?0:t.size/r,o=[];lx(()=>{t=uJ(t,[1,r,a]);for(let r=0;r<e.length;++r){let i=[0,0===r?0:n[r-1],0],s=[1,e[r],a];o[r]=uJ(u6(t,i,s),this.elementShape)}return o});let i=[];for(let t=0;t<e.length;t++)i[t]=t;this.writeMany(i,o)}}class mt{get id(){return this.idTensor.id}constructor(e,t,r,n=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,null!=e&&e.forEach(e=>{if(r!==e.dtype)throw Error(`Invalid data types; op elements ${r}, but list elements ${e.dtype}`);f5(t,e.shape,"TensorList shape mismatch: "),lI(e)}),this.idTensor=lP(0),this.maxNumElements=n,lI(this.idTensor)}copy(){return new mt([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==r&&this.tensors.length!==r)throw Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);f5(e,this.elementShape,"TensorList shape mismatch: ");let n=f7(this.elementShape,this.tensors,e);return lx(()=>pS(this.tensors.map(e=>uJ(e,n)),0))}popBack(e,t){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw Error("Trying to pop from an empty list.");let r=f7(this.elementShape,this.tensors,e),n=this.tensors.pop();return n.kept=!1,f5(n.shape,e,"TensorList shape mismatch: "),uJ(n,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(f5(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw Error("Trying to push element into a full list.");lI(e),this.tensors.push(e)}resize(e){if(e<0)throw Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let t=new mt([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw Error(`element at index ${e} is null.`);f5(this.tensors[e].shape,t,"TensorList shape mismatch: ");let n=f7(this.elementShape,this.tensors,t);return uJ(this.tensors[e],n)}setItem(e,t){if(t.dtype!==this.elementDtype)throw Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);f5(this.elementShape,t.shape,"TensorList shape mismatch: "),lI(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);f5(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());let n=f7(this.elementShape,this.tensors,r);return 0===e.length?s$([],[0].concat(n)):lx(()=>pS(e.map(e=>uJ(this.tensors[e],n)),0))}concat(e,t){if(e&&e!==this.elementDtype)throw Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);f5(this.elementShape,t,"TensorList shape mismatch: ");let r=f7(this.elementShape,this.tensors,t);return 0===this.size()?s$([],[0].concat(r)):lx(()=>u2(this.tensors.map(e=>uJ(e,r)),0))}}let mr=async(e,t,r)=>{switch(e.op){case"If":case"StatelessIf":{let n=ff("thenBranch",e,t,r),a=ff("elseBranch",e,t,r),o=ff("cond",e,t,r),i=ff("args",e,t,r);if((await o.data())[0])return r.functionMap[n].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap);return r.functionMap[a].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap)}case"While":case"StatelessWhile":{let n=ff("body",e,t,r),a=ff("cond",e,t,r),o=ff("args",e,t,r),i=await r.functionMap[a].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap),s=o.map(e=>e.id),l=await i[0].data();i.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()});let u=o;for(;l[0];){let e=u,t=(u=await r.functionMap[n].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap)).map(e=>e.id);e.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});let o=await r.functionMap[a].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap);l=await o[0].data(),o.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return u}case"LoopCond":return[fk(ff("pred",e,t,r))];case"Switch":{let n=ff("pred",e,t,r),a=ff("data",e,t,r);return a.kept||(a=fk(a)),(await n.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{let n=e.inputNames.find(e=>void 0!==fm(e,t,r));if(n)return[fk(fm(n,t,r))];return}case"Enter":{let n=ff("frameName",e,t,r),a=ff("tensor",e,t,r);return r.enterFrame(n),[fk(a)]}case"Exit":{let n=ff("tensor",e,t,r);return r.exitFrame(),[fk(n)]}case"NextIteration":{let n=ff("tensor",e,t,r);return r.nextIteration(),[fk(n)]}case"TensorArrayV3":{let n=ff("size",e,t,r),a=ff("dtype",e,t,r),o=ff("elementShape",e,t,r),i=ff("dynamicSize",e,t,r),s=ff("clearAfterRead",e,t,r),l=ff("identicalElementShapes",e,t,r),u=new me(ff("name",e,t,r),a,n,o,l,i,s);return r.addTensorArray(u),[u.idTensor,lP(1)]}case"TensorArrayWriteV3":{let n=ff("tensorArrayId",e,t,r),a=ff("index",e,t,r),o=ff("tensor",e,t,r),i=r.getTensorArray(n.id);return i.write(a,o),[i.idTensor]}case"TensorArrayReadV3":{let n=ff("tensorArrayId",e,t,r),a=ff("index",e,t,r);return[r.getTensorArray(n.id).read(a)]}case"TensorArrayGatherV3":{let n=ff("tensorArrayId",e,t,r),a=ff("indices",e,t,r),o=ff("dtype",e,t,r);return[r.getTensorArray(n.id).gather(a,o)]}case"TensorArrayScatterV3":{let n=ff("tensorArrayId",e,t,r),a=ff("indices",e,t,r),o=ff("tensor",e,t,r),i=r.getTensorArray(n.id);return i.scatter(a,o),[i.idTensor]}case"TensorArrayConcatV3":{let n=ff("tensorArrayId",e,t,r),a=r.getTensorArray(n.id),o=ff("dtype",e,t,r);return[a.concat(o)]}case"TensorArraySplitV3":{let n=ff("tensorArrayId",e,t,r),a=ff("tensor",e,t,r),o=ff("lengths",e,t,r),i=r.getTensorArray(n.id);return i.split(o,a),[i.idTensor]}case"TensorArraySizeV3":{let n=ff("tensorArrayId",e,t,r);return[lP(r.getTensorArray(n.id).size(),"int32")]}case"TensorArrayCloseV3":{let n=ff("tensorArrayId",e,t,r),a=r.getTensorArray(n.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{let n=ff("tensorListId",e,t,r),a=ff("index",e,t,r),o=ff("tensor",e,t,r),i=r.getTensorList(n.id);return i.setItem(a,o),[i.idTensor]}case"TensorListGetItem":{let n=ff("tensorListId",e,t,r),a=ff("index",e,t,r),o=ff("elementShape",e,t,r),i=ff("elementDType",e,t,r);return[r.getTensorList(n.id).getItem(a,o,i)]}case"TensorListScatterV2":case"TensorListScatter":{let n=ff("indices",e,t,r),a=function(e,t,r,n){if(t.length!==e.shape[0])throw Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let a=Math.max(...t);if(null!=n&&-1!==n&&a>=n)throw Error(`Max index must be < array size (${a}  vs. ${n})`);let o=new mt([],r,e.dtype,n),i=pP(e,0);return t.forEach((e,t)=>{o.setItem(e,i[t])}),o}(ff("tensor",e,t,r),n,ff("elementShape",e,t,r),ff("numElements",e,t,r));return r.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let n=ff("elementShape",e,t,r),a=ff("elementDType",e,t,r),o=ff("TensorListReserve"===e.op?"numElements":"maxNumElements",e,t,r),i=new mt([],n,a,"TensorListReserve"===e.op?-1:o);return r.addTensorList(i),[i.idTensor]}case"TensorListGather":{let n=ff("tensorListId",e,t,r),a=ff("indices",e,t,r),o=ff("elementShape",e,t,r),i=ff("elementDType",e,t,r);return[r.getTensorList(n.id).gather(a,i,o)]}case"TensorListStack":{let n=ff("tensorListId",e,t,r),a=ff("elementShape",e,t,r),o=ff("elementDType",e,t,r),i=ff("numElements",e,t,r);return[r.getTensorList(n.id).stack(a,o,i)]}case"TensorListFromTensor":{let n=function(e,t,r){let n=e.dtype;if(e.shape.length<1)throw Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==r)throw Error(`Invalid data types; op elements ${e.dtype}, but list elements ${r}`);return f5(e.shape.slice(1),t,"TensorList shape mismatch: "),new mt(pP(e),t,n)}(ff("tensor",e,t,r),ff("elementShape",e,t,r),ff("elementDType",e,t,r));return r.addTensorList(n),[n.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let n=ff("tensorListId",e,t,r),a=r.getTensorList(n.id),o=ff("dtype",e,t,r),i=ff("elementShape",e,t,r);return[a.concat(o,i)]}case"TensorListPushBack":{let n=ff("tensorListId",e,t,r),a=ff("tensor",e,t,r),o=r.getTensorList(n.id);return o.pushBack(a),[o.idTensor]}case"TensorListPopBack":{let n=ff("tensorListId",e,t,r),a=ff("elementShape",e,t,r),o=ff("elementDType",e,t,r);return[r.getTensorList(n.id).popBack(a,o)]}case"TensorListSplit":{let n=ff("tensor",e,t,r),a=ff("elementShape",e,t,r),o=function(e,t,r){let n=0,a=t.map(e=>n+=e);if(n!==e.shape[0])throw Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${n}, and tensor's shape is: ${e.shape}`);let o=f9(e.shape.slice(1),r),i=0===n?0:e.size/n,s=lx(()=>{let r=[];e=uJ(e,[1,n,i]);for(let n=0;n<t.length;++n){let s=[0,0===n?0:a[n-1],0],l=[1,t[n],i];r[n]=uJ(u6(e,s,l),o)}return e.dispose(),r}),l=new mt([],r,e.dtype,t.length);for(let e=0;e<s.length;e++)l.setItem(e,s[e]);return l}(n,ff("lengths",e,t,r),a);return r.addTensorList(o),[o.idTensor]}case"TensorListLength":{let n=ff("tensorListId",e,t,r);return[lP(r.getTensorList(n.id).size(),"int32")]}case"TensorListResize":{let n=ff("tensorListId",e,t,r),a=ff("size",e,t,r),o=r.getTensorList(n.id).resize(a);return r.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function mn(e,t,r){let[n,a]=ff("fusedOps",e,t,r),o="biasadd"===n,i="prelu"===a,s=ff("numArgs",e,t,r);if(o){if(i&&2!==s)throw Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&o&&1!==s)throw Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if("fusedbatchnorm"===n)throw Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let l=ff("strides",e,t,r),u=fw(e,t,r),c=ff("dataFormat",e,t,r).toUpperCase(),d=ff("dilations",e,t,r),[p,h]=ff("args",e,t,r);return o||(h=p,p=void 0),{stride:l,pad:u,dataFormat:c,dilations:d,biasArg:p,preluArg:h,activationFunc:a,leakyreluAlpha:ff("leakyreluAlpha",e,t,r)}}let ma=(e,t,r,n=t1)=>{switch(e.op){case"Conv1D":{let a=ff("stride",e,t,r),o=ff("pad",e,t,r),i=ff("dataFormat",e,t,r).toUpperCase(),s=ff("dilation",e,t,r);return[n.conv1d(ff("x",e,t,r),ff("filter",e,t,r),a,o,i,s)]}case"Conv2D":{let a=ff("strides",e,t,r),o=fw(e,t,r),i=ff("dataFormat",e,t,r).toUpperCase(),s=ff("dilations",e,t,r);return[n.conv2d(ff("x",e,t,r),ff("filter",e,t,r),[a[1],a[2]],o,i,[s[1],s[2]])]}case"_FusedConv2D":{let{stride:a,pad:o,dataFormat:i,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=mn(e,t,r);return[n.fused.conv2d({x:ff("x",e,t,r),filter:ff("filter",e,t,r),strides:[a[1],a[2]],pad:o,dataFormat:i,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:a,pad:o,dataFormat:i,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=mn(e,t,r);return[n.fused.depthwiseConv2d({x:ff("x",e,t,r),filter:ff("filter",e,t,r),strides:[a[1],a[2]],pad:o,dataFormat:i,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let a=ff("outputShape",e,t,r),o=ff("strides",e,t,r),i=fw(e,t,r);return[n.conv2dTranspose(ff("x",e,t,r),ff("filter",e,t,r),a,[o[1],o[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let a=ff("strides",e,t,r),o=fw(e,t,r),i=ff("dilations",e,t,r),s=ff("dataFormat",e,t,r).toUpperCase();return[n.depthwiseConv2d(ff("input",e,t,r),ff("filter",e,t,r),[a[1],a[2]],o,s,[i[1],i[2]])]}case"Conv3D":{let a=ff("strides",e,t,r),o=ff("pad",e,t,r),i=ff("dataFormat",e,t,r).toUpperCase(),s=ff("dilations",e,t,r);return[n.conv3d(ff("x",e,t,r),ff("filter",e,t,r),[a[1],a[2],a[3]],o,i,[s[1],s[2],s[3]])]}case"AvgPool":{let a=ff("strides",e,t,r),o=ff("pad",e,t,r),i=ff("kernelSize",e,t,r);return[n.avgPool(ff("x",e,t,r),[i[1],i[2]],[a[1],a[2]],o)]}case"MaxPool":{let a=ff("strides",e,t,r),o=ff("pad",e,t,r),i=ff("kernelSize",e,t,r);return[n.maxPool(ff("x",e,t,r),[i[1],i[2]],[a[1],a[2]],o)]}case"MaxPoolWithArgmax":{let a=ff("strides",e,t,r),o=ff("pad",e,t,r),i=ff("kernelSize",e,t,r),s=ff("includeBatchInIndex",e,t,r),{result:l,indexes:u}=n.maxPoolWithArgmax(ff("x",e,t,r),[i[1],i[2]],[a[1],a[2]],o,s);return[l,u]}case"AvgPool3D":{let a=ff("strides",e,t,r),o=ff("pad",e,t,r),i=ff("kernelSize",e,t,r);return[n.avgPool3d(ff("x",e,t,r),[i[1],i[2],i[3]],[a[1],a[2],a[3]],o)]}case"MaxPool3D":{let a=ff("strides",e,t,r),o=ff("pad",e,t,r),i=ff("kernelSize",e,t,r);return[n.maxPool3d(ff("x",e,t,r),[i[1],i[2],i[3]],[a[1],a[2],a[3]],o)]}case"Dilation2D":{let a=ff("strides",e,t,r),o=ff("pad",e,t,r),i=ff("dilations",e,t,r),s=a[1],l=a[2],u=i[1],c=i[2];return[n.dilation2d(ff("x",e,t,r),ff("filter",e,t,r),[s,l],o,[u,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},mo=(e,t,r,n=t1)=>{switch(e.op){case"Fill":{let a=ff("shape",e,t,r),o=ff("dtype",e,t,r),i=ff("value",e,t,r);return[n.fill(a,i,o)]}case"LinSpace":{let a=ff("start",e,t,r),o=ff("stop",e,t,r),i=ff("num",e,t,r);return[n.linspace(a,o,i)]}case"Multinomial":{let a=ff("logits",e,t,r),o=ff("numSamples",e,t,r),i=ff("seed",e,t,r);return[n.multinomial(a,o,i)]}case"OneHot":{let a=ff("indices",e,t,r),o=ff("depth",e,t,r),i=ff("onValue",e,t,r),s=ff("offValue",e,t,r),l=ff("dtype",e,t,r);return[n.oneHot(a,o,i,s,l)]}case"Ones":return[n.ones(ff("shape",e,t,r),ff("dtype",e,t,r))];case"OnesLike":return[n.onesLike(ff("x",e,t,r))];case"RandomStandardNormal":return[n.randomStandardNormal(ff("shape",e,t,r),ff("dtype",e,t,r),ff("seed",e,t,r))];case"RandomUniform":return[n.randomUniform(ff("shape",e,t,r),ff("minval",e,t,r),ff("maxval",e,t,r),ff("dtype",e,t,r))];case"RandomUniformInt":return[n.randomUniformInt(ff("shape",e,t,r),ff("minval",e,t,r),ff("maxval",e,t,r),ff("seed",e,t,r))];case"Range":{let a=ff("start",e,t,r),o=ff("stop",e,t,r),i=ff("step",e,t,r);return[n.range(a,o,i,ff("dtype",e,t,r))]}case"TruncatedNormal":{let a=ff("shape",e,t,r),o=ff("mean",e,t,r),i=ff("stdDev",e,t,r),s=ff("seed",e,t,r);return[n.truncatedNormal(a,o,i,ff("dtype",e,t,r),s)]}case"Zeros":return[n.zeros(ff("shape",e,t,r),ff("dtype",e,t,r))];case"ZerosLike":return[n.zerosLike(ff("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function mi(e,t,r){let n=ff("boxes",e,t,r),a=ff("scores",e,t,r),o=ff("maxOutputSize",e,t,r);return{boxes:n,scores:a,maxOutputSize:o,iouThreshold:ff("iouThreshold",e,t,r),scoreThreshold:ff("scoreThreshold",e,t,r),softNmsSigma:ff("softNmsSigma",e,t,r)}}let ms=async(e,t,r,n,a=t1)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:n,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=mi(e,t,r),c=await a.image.nonMaxSuppressionWithScoreAsync(n,o,i,s,l,u);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:n,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=mi(e,t,r),u=ff("padToMaxOutputSize",e,t,r),c=await a.image.nonMaxSuppressionPaddedAsync(n,o,i,s,l,u);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:n,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=mi(e,t,r);return[await a.image.nonMaxSuppressionAsync(n,o,i,s,l)]}case"Where":{let n=a.cast(ff("condition",e,t,r),"bool"),o=[await a.whereAsync(n)];return n.dispose(),o}case"ListDiff":return a.setdiff1dAsync(ff("x",e,t,r),ff("y",e,t,r));default:throw TypeError(`Node type ${e.op} is not implemented`)}},ml=(e,t,r,n=t1)=>{switch(e.op){case"LowerBound":{let a=ff("sortedSequence",e,t,r),o=ff("values",e,t,r);return[n.lowerBound(a,o)]}case"TopKV2":{let a=ff("x",e,t,r),o=ff("k",e,t,r),i=ff("sorted",e,t,r),s=n.topk(a,o,i);return[s.values,s.indices]}case"UpperBound":{let a=ff("sortedSequence",e,t,r),o=ff("values",e,t,r);return[n.upperBound(a,o)]}case"Unique":{let a=ff("x",e,t,r),o=n.unique(a);return[o.values,o.indices]}case"UniqueV2":{let a=ff("x",e,t,r),o=ff("axis",e,t,r),i=n.unique(a,o);return[i.values,i.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},mu=(e,t,r,n=t1)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let a=ff("default",e,t,r);return[fm(e.name,t,r)||a];case"Placeholder":return[fm(e.name,t,r)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[fk(ff("x",e,t,r))];case"IdentityN":return ff("x",e,t,r).map(e=>fk(e));case"Shape":return[n.tensor1d(ff("x",e,t,r).shape,"int32")];case"ShapeN":return ff("x",e,t,r).map(e=>n.tensor1d(e.shape));case"Size":return[n.scalar(ff("x",e,t,r).size,"int32")];case"Rank":return[n.scalar(ff("x",e,t,r).rank,"int32")];case"NoOp":return[n.scalar(1)];case"Print":let o=ff("x",e,t,r),i=ff("data",e,t,r),s=ff("message",e,t,r),l=ff("summarize",e,t,r);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${e.op} is not implemented`)}};class mc{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=lP(0),this.tensorMap=new Map,lI(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return lP(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let r=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),lx(()=>{let e=pP(t),n=r.length,a=e.length;nQ(n===a,()=>`The number of elements doesn't match, keys has ${n} elements, the values has ${a} elements.`);for(let t=0;t<n;t++){let n=r[t],a=e[t];lI(a),this.tensorMap.set(n,a)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let r=await e.data();return lx(()=>{let e=[];for(let n=0;n<r.length;n++){let a=r[n],o=this.findWithDefault(a,t);e.push(o)}return pS(e)})}findWithDefault(e,t){let r=this.tensorMap.get(e);return null!=r?r:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}let md=async(e,t,r,n)=>{switch(e.op){case"HashTable":case"HashTableV2":{let a=n.getHashTableHandleByName(e.name);if(null!=a)return[a];{let a=new mc(ff("keyDType",e,t,r),ff("valueDType",e,t,r));return n.addHashTable(e.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let a=ff("tableHandle",e,t,r,n),o=ff("keys",e,t,r),i=ff("values",e,t,r),s=n.getHashTableById(a.id);return[await s.import(o,i)]}case"LookupTableFind":case"LookupTableFindV2":{let a=ff("tableHandle",e,t,r,n),o=ff("keys",e,t,r),i=ff("defaultValue",e,t,r),s=n.getHashTableById(a.id);return[await s.find(o,i)]}case"LookupTableSize":case"LookupTableSizeV2":{let a=ff("tableHandle",e,t,r,n);return[n.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},mp=(e,t,r,n=t1)=>{switch(e.op){case"ResizeBilinear":{let a=ff("images",e,t,r),o=ff("size",e,t,r),i=ff("alignCorners",e,t,r),s=ff("halfPixelCenters",e,t,r);return[n.image.resizeBilinear(a,[o[0],o[1]],i,s)]}case"ResizeNearestNeighbor":{let a=ff("images",e,t,r),o=ff("size",e,t,r),i=ff("alignCorners",e,t,r),s=ff("halfPixelCenters",e,t,r);return[n.image.resizeNearestNeighbor(a,[o[0],o[1]],i,s)]}case"CropAndResize":{let a=ff("image",e,t,r),o=ff("boxes",e,t,r),i=ff("boxInd",e,t,r),s=ff("cropSize",e,t,r),l=ff("method",e,t,r),u=ff("extrapolationValue",e,t,r);return[n.image.cropAndResize(a,o,i,s,l,u)]}case"ImageProjectiveTransformV3":{let a=ff("images",e,t,r),o=ff("transforms",e,t,r),i=ff("outputShape",e,t,r),s=ff("fillValue",e,t,r),l=ff("interpolation",e,t,r),u=ff("fillMode",e,t,r);return[n.image.transform(a,o,l.toLowerCase(),u.toLowerCase(),s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},mh=(e,t,r,n=t1)=>{switch(e.op){case"Equal":return[n.equal(ff("a",e,t,r),ff("b",e,t,r))];case"NotEqual":return[n.notEqual(ff("a",e,t,r),ff("b",e,t,r))];case"Greater":return[n.greater(ff("a",e,t,r),ff("b",e,t,r))];case"GreaterEqual":return[n.greaterEqual(ff("a",e,t,r),ff("b",e,t,r))];case"Less":return[n.less(ff("a",e,t,r),ff("b",e,t,r))];case"LessEqual":return[n.lessEqual(ff("a",e,t,r),ff("b",e,t,r))];case"LogicalAnd":return[n.logicalAnd(ff("a",e,t,r),ff("b",e,t,r))];case"LogicalNot":return[n.logicalNot(ff("a",e,t,r))];case"LogicalOr":return[n.logicalOr(ff("a",e,t,r),ff("b",e,t,r))];case"Select":case"SelectV2":return[n.where(ff("condition",e,t,r),ff("a",e,t,r),ff("b",e,t,r))];case"BitwiseAnd":return[n.bitwiseAnd(ff("a",e,t,r),ff("b",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},mf=(e,t,r,n=t1)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[n.matMul(ff("a",e,t,r),ff("b",e,t,r),ff("transposeA",e,t,r),ff("transposeB",e,t,r))];case"Einsum":return[n.einsum(ff("equation",e,t,r),...ff("tensors",e,t,r))];case"Transpose":return[n.transpose(ff("x",e,t,r),ff("perm",e,t,r))];case"_FusedMatMul":let[a,o]=ff("fusedOps",e,t,r),i="prelu"===o,s=ff("numArgs",e,t,r),l=ff("leakyreluAlpha",e,t,r);if("biasadd"===a){if(i&&2!==s)throw Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==s)throw Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,c]=ff("args",e,t,r);return[n.fused.matMul({a:ff("a",e,t,r),b:ff("b",e,t,r),transposeA:ff("transposeA",e,t,r),transposeB:ff("transposeB",e,t,r),bias:u,activation:o,preluActivationWeights:c,leakyreluAlpha:l})];case"MatrixBandPart":return[n.linalg.bandPart(ff("a",e,t,r),ff("numLower",e,t,r),ff("numUpper",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},mm=(e,t,r,n=t1)=>{switch(e.op){case"EuclideanNorm":return[n.euclideanNorm(ff("x",e,t,r),ff("axis",e,t,r),ff("keepDims",e,t,r))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[n.batchNorm(ff("x",e,t,r),ff("mean",e,t,r),ff("variance",e,t,r),ff("offset",e,t,r),ff("scale",e,t,r),ff("epsilon",e,t,r))];case"LRN":return[n.localResponseNormalization(ff("x",e,t,r),ff("radius",e,t,r),ff("bias",e,t,r),ff("alpha",e,t,r),ff("beta",e,t,r))];case"Softmax":return[n.softmax(ff("x",e,t,r))];case"LogSoftmax":return[n.logSoftmax(ff("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},mg=(e,t,r,n=t1)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:a,outputDenseValues:o}=n.raggedGather(ff("paramsNestedSplits",e,t,r),ff("paramsDenseValues",e,t,r),ff("indices",e,t,r),ff("outputRaggedRank",e,t,r));return a.concat(o)}case"RaggedRange":{let{rtNestedSplits:a,rtDenseValues:o}=n.raggedRange(ff("starts",e,t,r),ff("limits",e,t,r),ff("splits",e,t,r));return[a,o]}case"RaggedTensorToTensor":return[n.raggedTensorToTensor(ff("shape",e,t,r),ff("values",e,t,r),ff("defaultValue",e,t,r),ff("rowPartitionTensors",e,t,r),ff("rowPartitionTypes",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},my=(e,t,r,n=t1)=>{switch(e.op){case"Max":{let a=ff("axis",e,t,r),o=ff("keepDims",e,t,r);return[n.max(ff("x",e,t,r),a,o)]}case"Mean":{let a=ff("axis",e,t,r),o=ff("keepDims",e,t,r);return[n.mean(ff("x",e,t,r),a,o)]}case"Min":{let a=ff("axis",e,t,r),o=ff("keepDims",e,t,r);return[n.min(ff("x",e,t,r),a,o)]}case"Sum":{let a=ff("axis",e,t,r),o=ff("keepDims",e,t,r);return[n.sum(ff("x",e,t,r),a,o)]}case"All":{let a=ff("axis",e,t,r),o=ff("keepDims",e,t,r);return[n.all(ff("x",e,t,r),a,o)]}case"Any":{let a=ff("axis",e,t,r),o=ff("keepDims",e,t,r);return[n.any(ff("x",e,t,r),a,o)]}case"ArgMax":{let a=ff("axis",e,t,r);return[n.argMax(ff("x",e,t,r),a)]}case"ArgMin":{let a=ff("axis",e,t,r);return[n.argMin(ff("x",e,t,r),a)]}case"Prod":{let a=ff("axis",e,t,r),o=ff("keepDims",e,t,r);return[n.prod(ff("x",e,t,r),a,o)]}case"Cumprod":{let a=ff("axis",e,t,r),o=ff("exclusive",e,t,r),i=ff("reverse",e,t,r);return[n.cumprod(ff("x",e,t,r),a,o,i)]}case"Cumsum":{let a=ff("axis",e,t,r),o=ff("exclusive",e,t,r),i=ff("reverse",e,t,r);return[n.cumsum(ff("x",e,t,r),a,o,i)]}case"Bincount":let a=ff("x",e,t,r),o=ff("weights",e,t,r),i=ff("size",e,t,r);return[n.bincount(a,o,i)];case"DenseBincount":{let a=ff("x",e,t,r),o=ff("weights",e,t,r),i=ff("size",e,t,r),s=ff("binaryOutput",e,t,r);return[n.denseBincount(a,o,i,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},mv=(e,t,r,n=t1)=>{switch(e.op){case"ConcatV2":case"Concat":{let a=ff("n",e,t,r),o=ff("axis",e,t,r),i=ff("tensors",e,t,r);return i=i.slice(0,a),[n.concat(i,o)]}case"Gather":{let a=ff("x",e,t,r),o=ff("indices",e,t,r);return[n.gather(a,n.cast(o,"int32"),0)]}case"GatherV2":{let a=ff("axis",e,t,r),o=ff("batchDims",e,t,r),i=ff("x",e,t,r),s=ff("indices",e,t,r);return[n.gather(i,n.cast(s,"int32"),a,o)]}case"Reverse":{let a=ff("dims",e,t,r),o=[];for(let e=0;e<a.length;e++)a[e]&&o.push(e);let i=ff("x",e,t,r);return[n.reverse(i,o)]}case"ReverseV2":{let a=ff("axis",e,t,r),o=ff("x",e,t,r);return[n.reverse(o,a)]}case"Slice":{let a=ff("begin",e,t,r),o=ff("size",e,t,r);return[n.slice(ff("x",e,t,r),a,o)]}case"StridedSlice":{let a=ff("begin",e,t,r),o=ff("end",e,t,r),i=ff("strides",e,t,r),s=ff("beginMask",e,t,r),l=ff("endMask",e,t,r),u=ff("ellipsisMask",e,t,r),c=ff("newAxisMask",e,t,r),d=ff("shrinkAxisMask",e,t,r),p=ff("x",e,t,r);return[n.stridedSlice(p,a,o,i,s,l,u,c,d)]}case"Pack":return lx(()=>{let a=ff("axis",e,t,r),o=ff("tensors",e,t,r),i=o[0].shape,s=n.squeeze(o[0]).shape,l=o.map(e=>{let t=n1(e.shape,i);if(!t&&!n1(n.squeeze(e).shape,s))throw Error("the input tensors shape does not match");return t?e:n.reshape(e,i)});return[n.stack(l,a)]});case"Unpack":{let a=ff("axis",e,t,r),o=ff("tensor",e,t,r);return n.unstack(o,a)}case"Tile":{let a=ff("reps",e,t,r);return[n.tile(ff("x",e,t,r),a)]}case"Split":case"SplitV":{let a=ff("axis",e,t,r),o=ff("numOrSizeSplits",e,t,r),i=ff("x",e,t,r);return n.split(i,o,a)}case"ScatterNd":{let a=ff("indices",e,t,r),o=ff("values",e,t,r),i=ff("shape",e,t,r);return[n.scatterND(a,o,i)]}case"GatherNd":{let a=ff("x",e,t,r),o=ff("indices",e,t,r);return[n.gatherND(a,o)]}case"SparseToDense":{let a=ff("sparseIndices",e,t,r),o=ff("outputShape",e,t,r),i=ff("sparseValues",e,t,r),s=ff("defaultValue",e,t,r);return[n.sparseToDense(a,i,o,i.dtype===s.dtype?s:n.cast(s,i.dtype))]}case"TensorScatterUpdate":{let a=ff("indices",e,t,r),o=ff("values",e,t,r),i=ff("tensor",e,t,r);return[n.tensorScatterUpdate(i,a,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},mb=(e,t,r,n=t1)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:a,outputValues:o,emptyRowIndicator:i,reverseIndexMap:s}=n.sparse.sparseFillEmptyRows(ff("indices",e,t,r),ff("values",e,t,r),ff("denseShape",e,t,r),ff("defaultValue",e,t,r));return[a,o,i,s]}case"SparseReshape":{let{outputIndices:a,outputShape:o}=n.sparse.sparseReshape(ff("inputIndices",e,t,r),ff("inputShape",e,t,r),ff("newShape",e,t,r));return[a,o]}case"SparseSegmentMean":return[n.sparse.sparseSegmentMean(ff("data",e,t,r),ff("indices",e,t,r),ff("segmentIds",e,t,r))];case"SparseSegmentSum":return[n.sparse.sparseSegmentSum(ff("data",e,t,r),ff("indices",e,t,r),ff("segmentIds",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},mw=(e,t,r,n=t1)=>{switch(e.op){case"FFT":return[n.fft(ff("x",e,t,r))];case"IFFT":return[n.ifft(ff("x",e,t,r))];case"RFFT":return[n.rfft(ff("x",e,t,r))];case"IRFFT":return[n.irfft(ff("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},mk=(e,t,r,n=t1)=>{switch(e.op){case"StaticRegexReplace":return[n.string.staticRegexReplace(ff("input",e,t,r),ff("pattern",e,t,r),ff("rewrite",e,t,r),ff("replaceGlobal",e,t,r))];case"StringNGrams":{let{nGrams:a,nGramsSplits:o}=n.string.stringNGrams(ff("data",e,t,r),ff("dataSplits",e,t,r),ff("separator",e,t,r),ff("nGramWidths",e,t,r),ff("leftPad",e,t,r),ff("rightPad",e,t,r),ff("padWidth",e,t,r),ff("preserveShortSequences",e,t,r));return[a,o]}case"StringSplit":{let{indices:a,values:o,shape:i}=n.string.stringSplit(ff("input",e,t,r),ff("delimiter",e,t,r),ff("skipEmpty",e,t,r));return[a,o,i]}case"StringToHashBucketFast":return[n.string.stringToHashBucketFast(ff("input",e,t,r),ff("numBuckets",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},mS=(e,t,r,n=t1)=>{switch(e.op){case"Cast":return[n.cast(ff("x",e,t,r),ff("dtype",e,t,r))];case"ExpandDims":{let a=ff("axis",e,t,r);return[n.expandDims(ff("x",e,t,r),a)]}case"Squeeze":{let a=ff("axis",e,t,r);return[n.squeeze(ff("x",e,t,r),a)]}case"Reshape":return[n.reshape(ff("x",e,t,r),ff("shape",e,t,r))];case"EnsureShape":return[n.ensureShape(ff("x",e,t,r),ff("shape",e,t,r))];case"MirrorPad":return[n.mirrorPad(ff("x",e,t,r),ff("padding",e,t,r),ff("mode",e,t,r))];case"PadV2":case"Pad":return[n.pad(ff("x",e,t,r),ff("padding",e,t,r),ff("constantValue",e,t,r))];case"SpaceToBatchND":{let a=ff("blockShape",e,t,r),o=ff("paddings",e,t,r);return[n.spaceToBatchND(ff("x",e,t,r),a,o)]}case"BatchToSpaceND":{let a=ff("blockShape",e,t,r),o=ff("crops",e,t,r);return[n.batchToSpaceND(ff("x",e,t,r),a,o)]}case"DepthToSpace":{let a=ff("blockSize",e,t,r),o=ff("dataFormat",e,t,r).toUpperCase();return[n.depthToSpace(ff("x",e,t,r),a,o)]}case"BroadcastTo":return[n.broadcastTo(ff("x",e,t,r),ff("shape",e,t,r))];case"BroadcastArgs":return[n.broadcastArgs(ff("s0",e,t,r),ff("s1",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function mx(e,t,r,n,a=lx){let o=((e,t,r)=>{switch(e.category){case"arithmetic":return a(()=>f4(e,t,r));case"basic_math":return a(()=>f6(e,t,r));case"control":return mr(e,t,r);case"convolution":return a(()=>ma(e,t,r));case"creation":return a(()=>mo(e,t,r));case"dynamic":return ms(e,t,r);case"evaluation":return a(()=>ml(e,t,r));case"image":return a(()=>mp(e,t,r));case"graph":return a(()=>mu(e,t,r));case"logical":return a(()=>mh(e,t,r));case"matrices":return a(()=>mf(e,t,r));case"normalization":return a(()=>mm(e,t,r));case"ragged":return a(()=>mg(e,t,r));case"reduction":return a(()=>my(e,t,r));case"slice_join":return a(()=>mv(e,t,r));case"sparse":return a(()=>mb(e,t,r));case"spectral":return a(()=>mw(e,t,r));case"string":return a(()=>mk(e,t,r));case"transformation":return a(()=>mS(e,t,r));case"hash_table":return md(e,t,r,n);case"custom":let o=fh[e.op];if(o&&o.customExecutor)return o.customExecutor(new f3(e,t,r));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,r);return al(o)?o.then(e=>[].concat(e)):[].concat(o)}class m_{constructor(e={},t={},r={},n={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=n,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function mI(e,t,r,n){let a=new Set,o=[],i=null,s=null,l=new Set,u=new Set(Object.keys(e).map(e=>fb(e)[0])),c=new Set((n=n||[]).map(e=>fb(e.name)[0])),d=[...t];for(;d.length>0;){let e=d.pop();if((mC(e)||mN.has(e.op)||mA.has(e.op))&&null==i&&(s=(i=e).children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),!(null!=r[e.name]||u.has(e.name)||c.has(e.name))){if(0===e.inputs.length){o.push(e.name);continue}e.inputs.forEach(e=>{l.has(e.name)||(l.add(e.name),d.push(e))})}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:o,dynamicNode:i,syncInputs:s}}class mE extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}let mT=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),mN=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),mA=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function mC(e){return mT.has(e.op)}class mM{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new mM(e.functions[t],this)})}getCompilationKey(e,t){let r=e.map(e=>e.name).sort(),n=t.map(e=>e.name).sort();return r.join(this.SEPARATOR)+"--"+n.join(this.SEPARATOR)}compile(e,t){let r=mI(e,t,this.weightMap,this._initNodes),{missingInputs:n,dynamicNode:a,syncInputs:o}=r;if(null!=a)throw Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(n.length>0){let r=t.map(e=>e.name),a=Object.keys(e);throw Error(`Cannot compute the outputs [${r}] from the provided inputs [${a}]. Missing the following inputs: [${n}]`)}let i=function(e,t){let{usedNodes:r,inputs:n}=t,a=Object.keys(n).map(e=>fb(e)[0]).map(t=>e.nodes[t]),o=e.initNodes||[],i=e=>r.has("string"==typeof e?e:e.name);function s(e){return[...new Map(e.map(e=>[e.name,e])).values()]}let l=s([...a,...e.weights,...o]).filter(i),u=s([...l,...Object.values(e.nodes)]).filter(i),c=new Map(u.map(e=>[e.name,e])),d={};for(let e of u)for(let t of(d[e.name]=d[e.name]||0,e.children))i(t)||(d[t.name]=Number.POSITIVE_INFINITY),d[t.name]=(d[t.name]||0)+1;let p=Object.entries(d).filter(([,e])=>0===e).map(([e])=>e),h=[...p];for(;p.length>0;){let e=p.pop();for(let t of c.get(e).children.filter(i))0==--d[t.name]&&(h.push(t.name),p.push(t.name))}let f=function(e,t){let r=new Map(e.map(e=>[e.name,e])),n=t.map(e=>e.name),a=new Set(n);for(;n.length>0;){let e=n.pop();for(let t of r.get(e).children)!r.has(t.name)||a.has(t.name)||(a.add(t.name),n.push(t.name))}return e.filter(e=>a.has(e.name))}(h.map(e=>c.get(e)),l);return function(e,t){let r=new Map(e.map((e,t)=>[e.name,t])),n=new Set(t.map(e=>e.name)),a=e=>n.has("string"==typeof e?e:e.name),o=new Set(e.map(e=>e.name)),i=e=>o.has("string"==typeof e?e:e.name);for(let t of e){for(let e of t.children.filter(i)){if(!r.has(e.name))throw new mE(`Child ${e.name} of node ${t.name} is unreachable.`);if(r.get(t.name)>r.get(e.name))throw new mE(`Node ${t.name} is scheduled to run after its child ${e.name}.`)}if(!a(t))for(let e of t.inputs){if(!r.has(e.name))throw new mE(`Input ${e.name} of node ${t.name} is unreachable.`);if(r.get(e.name)>r.get(t.name))throw new mE(`Node ${t.name} is scheduled to run before its input ${e.name}.`)}}}(f,l),f}(this.graph,r),s=function(e){let t=new Map(e.map((e,t)=>[e.name,t])),r=Number.MAX_SAFE_INTEGER,n=e.map((e,t)=>mC(e)?r:t),a=e=>{let r=n[t.get(e.name)];return null==r?-1:r},o=e.map((e,t)=>e.children.map(a).reduce((e,t)=>Math.max(e,t),n[t])),i=new Map;for(let t=0;t<e.length;++t){let n=o[t];if(n===r)continue;let a=e[t],s=e[n];i.has(s.name)||i.set(s.name,[]),i.get(s.name).push(a)}return i}(i);return{orderedNodes:i,nodeLiveUntilMap:s}}cloneAndKeepTensor(e){if(null==e)return null;let t=e.clone();return lI(t),t}cloneTensorList(e){return e?e.map(e=>this.cloneAndKeepTensor(e)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,this.cloneTensorList(t)]))}execute(e,t){this.disposeIntermediateTensors();let r=Object.keys(e=this.mapInputs(e)).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let n=r.map(e=>this.graph.nodes[fb(e)[0]]),a=t.map(e=>fb(e)[0]),o=new Set(a),i=a.map(e=>this.graph.nodes[e]);0===i.length&&(i=this._outputs);let s=this.getCompilationKey(n,i),l=this.compiledMap.get(s);null==l&&(l=this.compile(e,i),this.compiledMap.set(s,l));try{this.keepIntermediateTensors=ap.getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}let u={},c={};return lx(()=>{let r=new m_(this.weightMap,u,c,this.functionExecutorMap,this.parseNodeNameCache),n=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(t=>{let[a,o]=fb(t,r),i=[];i[o]=e[t],n[a]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[a]=this.cloneTensorList(i))});let a=this.getFrozenTensorIds(n),{orderedNodes:i,nodeLiveUntilMap:s}=l;for(let e of i){if(n[e.name])continue;let t=mx(e,n,r,this._resourceManager);if(al(t))throw Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);n[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,a,o,s.get(e.name))}return null==this.parent&&r.dispose(a),t.map(e=>fm(e,n,r))})}getFrozenTensorIds(e){return new Set([].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id))))}checkTensorForDisposal(e,t,r,n,a,o,i){if(!(mC(t)||o.has(e))){for(let n of r[e])null!=n&&(i[n.id]=(i[n.id]||0)+t.children.length);for(let e of t.inputs){if(mC(e))continue;let t=fg(e.name,r,n);if(null!=t)for(let e of t){if(!e||e.kept||a.has(e.id))continue;let t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,r,n,a,o){if(!mC(e)&&null!=o){for(let e of o)if(!(mC(e)||a.has(e.name)))for(let a of fg(e.name,t,r))!a||a.kept||n.has(a.id)||a.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,r=!1,n={},a={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=ap.getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}let o=new m_(this.weightMap,n,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let i=await this.executeWithControlFlow(e,o,t,r),s=t.map(e=>fm(e,i,o)),l=new Set([...s.map(e=>e.id),...Object.keys(e).map(t=>e[t].id),...this.weightIds]);return Object.values(i).forEach(e=>{e.forEach(e=>{!e||e.isDisposed||l.has(e.id)||e.dispose()})}),null==this.parent&&o.dispose(l),s}async executeFunctionAsync(e,t,r){let n=e.reduce((e,t,r)=>(e[this.inputs[r].name]=t,e),{});return this._executeAsync(n,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,n){let a=Object.keys(e),o=a.map(e=>this.graph.nodes[fb(e)[0]]),i=r.map(e=>fb(e)[0]),s=new Set(i),l=i.map(e=>this.graph.nodes[e]);0===l.length&&(l=this._outputs);let{usedNodes:u,missingInputs:c,dynamicNode:d,syncInputs:p}=mI(e,l,this.weightMap,this._initNodes),h=[...o,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),f=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{let[r,n]=fb(t),a=[];a[n]=e[t],f[r]=a});let m={},g=this.getFrozenTensorIds(f),y={};for(;h.length>0;){let e=this.processStack(o,h,t,f,y,g,s,m,u);await Promise.all(e)}null!=d||n||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let v=l.filter(e=>!mC(e)&&!fm(e.name,f,t)).map(e=>e.name);if(v.length>0){let e="";throw null!=d&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),Error(`Cannot compute the outputs [${v}] from the provided inputs [${a}]. Consider providing the following inputs: [${c}]. ${e}`)}return f}processStack(e,t,r,n,a,o,i,s,l){let u=[];for(;t.length>0;){let e=t.pop();r.currentContext=e.contexts;let c="";if("Enter"===e.node.op&&ff("isConstant",e.node,n,r)&&([c]=fy(e.node.name,r)),null==n[e.node.name]){let d=mx(e.node,n,r,this._resourceManager);c||([c]=fy(e.node.name,r));let p=r.currentContext;al(d)?u.push(d.then(u=>(n[c]=u,this.keepIntermediateTensors&&(this.clonedTensorsMap[c]=this.cloneTensorList(u)),r.currentContext=p,this.checkTensorForDisposal(c,e.node,n,r,o,i,s),this.processChildNodes(e.node,t,r,n,a,l),u))):(n[c]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[c]=this.cloneTensorList(d)),this.checkTensorForDisposal(c,e.node,n,r,o,i,s),this.processChildNodes(e.node,t,r,n,a,l))}else this.processChildNodes(e.node,t,r,n,a,l)}return u}processChildNodes(e,t,r,n,a,o){e.children.forEach(e=>{let[i]=fy(e.name,r);!a[i]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!fm(e,n,r))&&(a[i]=!0,t.push({contexts:r.currentContext,node:e})):e.inputNames.every(e=>!!fm(e,n,r))&&(a[i]=!0,t.push({contexts:r.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let r=e[t],[n]=fb(t),a=this.graph.nodes[n];if(a.attrParams.shape&&a.attrParams.shape.value){let e=a.attrParams.shape.value;nQ(e.length===r.shape.length&&r.shape.every((t,r)=>-1===e[r]||e[r]===t),()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${e}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&nQ(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var t,r;let n={};for(let a in e){let o=null===(r=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===r?void 0:r[a];null!=o?n[o.name]=e[a]:n[a]=e[a]}return n}checkInputs(e){let t=Object.keys(e).filter(e=>{let[t]=fb(e);return null==this.graph.nodes[t]});if(t.length>0)throw Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(e=>{var t,r;let n=null===(r=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===r?void 0:r[e];return null!=n?n.name:e},{})}checkOutputs(e){e.forEach(e=>{let[t]=fb(e);if(!this.graph.nodes[t])throw Error(`The output '${e}' is not found in the graph`)})}}class mR{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class mO{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},r=tF){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,null==t&&(this.loadOptions={}),this.resourceManager=new mR}findIOHandler(){let e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return al(e)?e.then(e=>this.loadSync(e)):this.loadSync(e)}loadSync(e){this.artifacts=e;let t=this.artifacts.modelTopology,r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){let e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}this.signature=r,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;let n=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new mM(fU.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){let t=fU.Instance.transformGraph(e.modelInitializer);this.initializer=new mM(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"==typeof e){let t=this.io.getSaveHandlers(e);if(0===t.length)throw Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let t={};return(e instanceof sh?[e]:e).forEach((e,r)=>t[this.structuredOutputKeys[r]]=e),t}return e}predict(e,t){let r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,t){let r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var t;if(!(e instanceof sh)&&!Array.isArray(e)){let r=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=r)for(let t in r){let n=r[t];null!=n.resourceId&&(e[t]=this.resourceIdToCapturedInput[n.resourceId])}return e}e=Array.isArray(e)?e:[e];let r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let n=0;return this.inputNodes.reduce((t,r)=>{var a,o,i;let s=null===(i=null===(o=null===(a=this.signature)||void 0===a?void 0:a.inputs)||void 0===o?void 0:o[r])||void 0===i?void 0:i.resourceId;return null!=s?t[r]=this.resourceIdToCapturedInput[s]:t[r]=e[n++],t},{})}normalizeOutputs(e){return Array.isArray(e=e||this.outputNodes)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let t=this.initializerSignature.outputs,r=Object.keys(t);for(let n=0;n<r.length;n++){let a=t[r[n]];this.resourceIdToCapturedInput[a.resourceId]=e[n]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&l_(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function mF(e,t={},r=tF){var n;if(null==e)throw Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&((n=e).endsWith("/")||(n+="/"),e=`${n}model.json?tfjs-format=file`);let a=new mO(e,t,r);return await a.load(),a}var mD=function(){return(mD=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function mP(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})}function m$(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var mL=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],mB={modelType:"short",runtime:"mediapipe",maxFaces:1},mz=function(){function e(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new fp.FaceDetection({locateFile:function(t,r){if(e.solutionPath){var n=e.solutionPath.replace(/\/+$/,"");return"".concat(n,"/").concat(t)}return"".concat(r,"/").concat(t)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(e){if(t.height=e.image.height,t.width=e.image.width,t.faces=[],null!==e.detections)for(var r,n,a,o,i=0,s=e.detections;i<s.length;i++){var l=s[i];t.faces.push(t.normalizedToAbsolute(l.landmarks,(r=l.boundingBox,n=void 0,a=void 0,o=void 0,a=(n=r.xCenter-r.width/2)+r.width,{xMin:n,xMax:a,yMin:o=r.yCenter-r.height/2,yMax:o+r.height,width:r.width,height:r.height})))}})}return e.prototype.normalizedToAbsolute=function(e,t){var r=this;return{keypoints:e.map(function(e,t){return{x:e.x*r.width,y:e.y*r.height,name:mL[t]}}),box:{xMin:t.xMin*this.width,yMin:t.yMin*this.height,xMax:t.xMax*this.width,yMax:t.yMax*this.height,width:t.width*this.width,height:t.height*this.height}}},e.prototype.estimateFaces=function(e,t){return mP(this,void 0,void 0,function(){var r,n;return m$(this,function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof sh?(n=ImageData.bind,[4,um(e)]):[3,2];case 1:return r=new(n.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,a.label=3;case 3:return e=r,[4,this.faceDetectorSolution.send({image:e})];case 4:return a.sent(),[2,this.faces]}})})},e.prototype.dispose=function(){this.faceDetectorSolution.close()},e.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},e}();function mW(e){return e instanceof sh?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function mU(e){return e instanceof sh?e:ug(e)}function mj(e,t){nQ(0!==e.width,function(){return"".concat(t," width cannot be 0.")}),nQ(0!==e.height,function(){return"".concat(t," height cannot be 0.")})}function mV(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],r=0;r<e.numLayers;){for(var n=[],a=[],o=[],i=[],s=r;s<e.strides.length&&e.strides[s]===e.strides[r];){var l=mH(e.minScale,e.maxScale,s,e.strides.length);if(0===s&&e.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),i.push(.1),i.push(l),i.push(l);else{for(var u=0;u<e.aspectRatios.length;++u)o.push(e.aspectRatios[u]),i.push(l);if(e.interpolatedScaleAspectRatio>0){var c=s===e.strides.length-1?1:mH(e.minScale,e.maxScale,s+1,e.strides.length);i.push(Math.sqrt(l*c)),o.push(e.interpolatedScaleAspectRatio)}}s++}for(var d=0;d<o.length;++d){var p=Math.sqrt(o[d]);n.push(i[d]/p),a.push(i[d]*p)}var h=0,f=0;if(e.featureMapHeight.length>0)h=e.featureMapHeight[r],f=e.featureMapWidth[r];else{var m=e.strides[r];h=Math.ceil(e.inputSizeHeight/m),f=Math.ceil(e.inputSizeWidth/m)}for(var g=0;g<h;++g)for(var y=0;y<f;++y)for(var v=0;v<n.length;++v){var b={xCenter:(y+e.anchorOffsetX)/f,yCenter:(g+e.anchorOffsetY)/h,width:0,height:0};e.fixedAnchorSize?(b.width=1,b.height=1):(b.width=a[v],b.height=n[v]),t.push(b)}r=s}return t}function mH(e,t,r,n){return 1===n?.5*(e+t):e+(t-e)*r/(n-1)}function mG(e,t){var r=t[0],n=t[1];return[r*e[0]+n*e[1]+e[3],r*e[4]+n*e[5]+e[7]]}var mq,mK,mY,mX,mQ,mZ,mJ,m0,m1,m2,m3,m4,m6,m5,m8,m7,m9,ge,gt,gr,gn,ga,go,gi,gs,gl,gu,gc,gd,gp,gh,gf,gm={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},gg={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},gy={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},gv={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},gb={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},gw={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},gk={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},gS=function(){function e(e,t,r){this.detectorModel=t,this.maxFaces=r,"full"===e?(this.imageToTensorConfig=gk,this.tensorsToDetectionConfig=gb,this.anchors=mV(gg)):(this.imageToTensorConfig=gw,this.tensorsToDetectionConfig=gv,this.anchors=mV(gm));var n=pE(this.anchors.map(function(e){return e.width})),a=pE(this.anchors.map(function(e){return e.height})),o=pE(this.anchors.map(function(e){return e.xCenter})),i=pE(this.anchors.map(function(e){return e.yCenter}));this.anchorTensor={x:o,y:i,w:n,h:a}}return e.prototype.dispose=function(){this.detectorModel.dispose(),l_([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){},e.prototype.detectFaces=function(e,t){return void 0===t&&(t=!1),mP(this,void 0,void 0,function(){var r,n,a,o,i,s,l,u,c,d;return m$(this,function(p){var h,f,m,g,y,v,b,w,k,S,x,_,I,E,T,N,A,C,M,R,O,F,D,P,$,L;switch(p.label){case 0:return null==e?(this.reset(),[2,[]]):(h=r=lx(function(){var r=lw(mU(e),"float32");return t&&(r=pk(hV.flipLeftRight(cX(r,0)),[0])),r}),T=(f=this.imageToTensorConfig).outputTensorSize,N=f.keepAspectRatio,A=f.borderMode,C=f.outputTensorFloatRange,O=function(e,t,r){if(void 0===r&&(r=!1),!r)return{top:0,left:0,right:0,bottom:0};var n=t.height,a=t.width;mj(t,"targetSize"),mj(e,"roi");var o,i,s=n/a,l=e.height/e.width,u=0,c=0;return s>l?(o=e.width,i=e.width*s,c=(1-l/s)/2):(o=e.height/s,i=e.height,u=(1-s/l)/2),e.width=o,e.height=i,{top:c,left:u,right:u,bottom:c}}(R={xCenter:.5*(m=M=mW(h)).width,yCenter:.5*m.height,width:m.width,height:m.height,rotation:0},T,N),g=M.width,y=M.height,v=R.width,b=R.height,w=Math.cos(R.rotation),k=Math.sin(R.rotation),S=R.xCenter,x=R.yCenter,_=1/g,I=1/y,(E=Array(16))[0]=v*w*1*_,E[1]=-b*k*_,E[2]=0,E[3]=(-.5*v*w*1+.5*b*k+S)*_,E[4]=v*k*1*I,E[5]=b*w*I,E[6]=0,E[7]=(-.5*b*w-.5*v*k*1+x)*I,E[8]=0,E[9]=0,E[10]=v*_,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,F=function(e){if(16!==e.length)throw Error("Array length must be 16 but got ".concat(e.length));return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}(E),a=(n={imageTensor:lx(function(){var e,t,r,n,a=mU(h),o=pT((mj(T,"inputResolution"),[1/T.width*F[0][0]*M.width,1/T.height*F[0][1]*M.width,F[0][3]*M.width,1/T.width*F[1][0]*M.height,1/T.height*F[1][1]*M.height,F[1][3]*M.height,0,0]),[1,8]),i=hV.transform(cX(lw(a,"float32")),o,"bilinear","zero"===A?"constant":"nearest",0,[T.height,T.width]);return null!=C?(e=0,t=C[0],n={scale:r=(C[1]-t)/255,offset:t-0*r},lx(function(){return lN(lM(i,n.scale),n.offset)})):i}),padding:O,transformationMatrix:F}).imageTensor,o=n.transformationMatrix,D=i=this.detectorModel.execute(a,"Identity:0"),l=(s=lx(function(){var e=lx(function(){return[u6(D,[0,0,0],[1,-1,1]),u6(D,[0,0,1],[1,-1,-1])]}),t=e[0];return{boxes:pk(e[1]),logits:pk(t)}})).boxes,[4,function(e,t,r){return mP(this,void 0,void 0,function(){var n,a,o,i;return m$(this,function(s){switch(s.label){case 0:var l;return n=e[0],l=e[1],a=lx(function(){r.reverseOutputOrder?(n=pk(u6(l,[0,r.boxCoordOffset+0],[-1,1])),e=pk(u6(l,[0,r.boxCoordOffset+1],[-1,1])),o=pk(u6(l,[0,r.boxCoordOffset+2],[-1,1])),a=pk(u6(l,[0,r.boxCoordOffset+3],[-1,1]))):(e=pk(u6(l,[0,r.boxCoordOffset+0],[-1,1])),n=pk(u6(l,[0,r.boxCoordOffset+1],[-1,1])),a=pk(u6(l,[0,r.boxCoordOffset+2],[-1,1])),o=pk(u6(l,[0,r.boxCoordOffset+3],[-1,1]))),n=lN(lM(lC(n,r.xScale),t.w),t.x),e=lN(lM(lC(e,r.yScale),t.h),t.y),r.applyExponentialOnBoxSize?(a=lM(cY(lC(a,r.hScale)),t.h),o=lM(cY(lC(o,r.wScale)),t.w)):(a=lM(lC(a,r.hScale),t.h),o=lM(lC(o,r.wScale),t.h));var e,n,a,o,i=lG(e,lC(a,2)),s=lG(n,lC(o,2)),u=lN(e,lC(a,2)),c=lN(n,lC(o,2)),d=u2([uJ(i,[r.numBoxes,1]),uJ(s,[r.numBoxes,1]),uJ(u,[r.numBoxes,1]),uJ(c,[r.numBoxes,1])],1);if(r.numKeypoints)for(var p=0;p<r.numKeypoints;++p){var h=r.keypointCoordOffset+p*r.numValuesPerKeypoint,f=void 0,m=void 0;r.reverseOutputOrder?(f=pk(u6(l,[0,h],[-1,1])),m=pk(u6(l,[0,h+1],[-1,1]))):(m=pk(u6(l,[0,h],[-1,1])),f=pk(u6(l,[0,h+1],[-1,1])));var g=lN(lM(lC(f,r.xScale),t.w),t.x),y=lN(lM(lC(m,r.yScale),t.h),t.y);d=u2([d,uJ(g,[r.numBoxes,1]),uJ(y,[r.numBoxes,1])],1)}return d}),o=lx(function(){var e=n;return r.sigmoidScore?(null!=r.scoreClippingThresh&&(e=cl(n,-r.scoreClippingThresh,r.scoreClippingThresh)),e=u4(e)):e}),[4,function(e,t,r){return mP(this,void 0,void 0,function(){var n,a,o,i,s,l,u,c,d,p,h,f;return m$(this,function(m){switch(m.label){case 0:return n=[],[4,e.data()];case 1:return a=m.sent(),[4,t.data()];case 2:for(o=m.sent(),i=0;i<r.numBoxes;++i){var g,y,v,b,w,k;if(!(null!=r.minScoreThresh&&o[i]<r.minScoreThresh||(u=(g=a[(s=i*r.numCoords)+0],y=a[s+1],v=a[s+2],b=a[s+3],w=o[i],k=r.flipVertically,l={score:[w],ind:i,locationData:{relativeBoundingBox:{xMin:y,yMin:k?1-v:g,xMax:b,yMax:k?1-g:v,width:b-y,height:v-g}}}).locationData.relativeBoundingBox).width<0||u.height<0)){if(r.numKeypoints>0)for((c=l.locationData).relativeKeypoints=[],d=r.numKeypoints*r.numValuesPerKeypoint,p=0;p<d;p+=r.numValuesPerKeypoint)f={x:a[(h=s+r.keypointCoordOffset+p)+0],y:r.flipVertically?1-a[h+1]:a[h+1]},c.relativeKeypoints.push(f);n.push(l)}}return[2,n]}})})}(a,o,r)];case 1:return i=s.sent(),l_([a,o]),[2,i]}})})}([u=s.logits,l],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return 0===(c=p.sent()).length?(l_([r,a,i,u,l]),[2,c]):[4,function(e,t,r,n){return mP(this,void 0,void 0,function(){var r,n,a,o,i;return m$(this,function(s){switch(s.label){case 0:return e.sort(function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)}),r=pT(e.map(function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]})),n=pE(e.map(function(e){return e.score[0]})),[4,hV.nonMaxSuppressionAsync(r,n,t,.3)];case 1:return[4,(a=s.sent()).array()];case 2:return o=s.sent(),i=e.filter(function(e,t){return o.indexOf(t)>-1}),l_([r,n,a]),[2,i]}})})}(c,this.maxFaces,0)];case 2:return P=p.sent(),$=o,void 0===P&&(P=[]),L=[].concat.apply([],$),P.forEach(function(e){var t=e.locationData;t.relativeKeypoints.forEach(function(e){var t=mG(L,[e.x,e.y]),r=t[0],n=t[1];e.x=r,e.y=n});var r=t.relativeBoundingBox,n=Number.MAX_VALUE,a=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE;[[r.xMin,r.yMin],[r.xMin+r.width,r.yMin],[r.xMin+r.width,r.yMin+r.height],[r.xMin,r.yMin+r.height]].forEach(function(e){var t=mG(L,e),r=t[0],s=t[1];n=Math.min(n,r),o=Math.max(o,r),a=Math.min(a,s),i=Math.max(i,s)}),t.relativeBoundingBox={xMin:n,xMax:o,yMin:a,yMax:i,width:o-n,height:i-a}}),d=P,l_([r,a,i,u,l]),[2,d]}})})},e.prototype.estimateFaces=function(e,t){return mP(this,void 0,void 0,function(){var r,n;return m$(this,function(a){return r=mW(e),n=!!t&&t.flipHorizontal,[2,this.detectFaces(e,n).then(function(e){return e.map(function(e){for(var t=e.locationData.relativeKeypoints.map(function(e,t){return mD(mD({},e),{x:e.x*r.width,y:e.y*r.height,name:mL[t]})}),n=e.locationData.relativeBoundingBox,a=0,o=["width","xMax","xMin"];a<o.length;a++)n[o[a]]*=r.width;for(var i=0,s=["height","yMax","yMin"];i<s.length;i++)n[s[i]]*=r.height;return{keypoints:t,box:n}})})]})})},e}();function gx(e,t){let r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){let{backend:n,inputs:{x:a}}=e,o=n.dataIdMap.get(a.dataId).id,i=n.makeOutput(a.shape,t||a.dtype),s=n.dataIdMap.get(i.dataId).id;return 0===n0(i.shape)||r(o,e7[a.dtype],s),i}}}(gf||(gf={})).MediaPipeFaceDetector="MediaPipeFaceDetector",(eC=e7||(e7={}))[eC.float32=0]="float32",eC[eC.int32=1]="int32",eC[eC.bool=2]="bool",eC[eC.string=3]="string",eC[eC.complex64=4]="complex64",(eM=e9||(e9={}))[eM.linear=0]="linear",eM[eM.relu=1]="relu",eM[eM.relu6=2]="relu6",eM[eM.prelu=3]="prelu",eM[eM.leakyrelu=4]="leakyrelu",eM[eM.sigmoid=5]="sigmoid",eM[eM.elu=6]="elu";let g_=gx("Abs"),gI=gx(ag),gE=gx(ay);function gT(e,t,r){let n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:a}=e,{a:o,b:i}=a,s=t.dataIdMap.get(o.dataId).id,l=t.dataIdMap.get(i.dataId).id,u=null!=r?r:o.dtype,c=lX(o.shape,i.shape),d=t.makeOutput(c,u);if(0===n0(c))return d;let p=new Uint8Array(new Int32Array(o.shape).buffer),h=new Uint8Array(new Int32Array(i.shape).buffer),f=t.dataIdMap.get(d.dataId).id;return n(s,p,o.shape.length,l,h,i.shape.length,e7[o.dtype],f),d}}}let gN=gT("Add",!0);function gA(e){let{inputs:{x:t},backend:r}=e;if("string"===t.dtype)return s$(r.readSync(t.dataId),t.shape,t.dtype);let n=r.makeOutput(t.shape,t.dtype),a=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(n).set(a),n}function gC(e){let{inputs:t,backend:r,attrs:n}=e,[a,o]=function(e,t){let r=[],n=[];for(let a=0;a<e.length;++a)1!==e[a]&&r.push(e[a]),1!==e[t[a]]&&n.push(t[a]);for(let e=0;e<n.length;++e){let t=-1;for(let r=0;r<n.length;++r)n[r]>=e&&(-1===t||n[t]>n[r])&&(t=r);n[t]=e}return[r,n]}(t.x.shape,n.perm),i=!0;for(let e=0;e<o.length;e++)o[e]!==e&&(i=!1);let s=function(e,t){let r=Array(e.length);for(let n=0;n<r.length;n++)r[n]=e[t[n]];return r}(t.x.shape,n.perm),u={dataId:t.x.dataId,shape:a,dtype:t.x.dtype};if(i){let e=gA({inputs:t,backend:r});return e.shape=s,e}let c=r.makeOutput(s,u.dtype),d=r.dataIdMap.get(u.dataId).id,p=r.dataIdMap.get(c.dataId).id,h=new Uint8Array(new Int32Array(o).buffer),f=new Uint8Array(new Int32Array(u.shape).buffer);return l(d,f,u.shape.length,e7[u.dtype],p,h,o.length),c}function gM(e,t,r){let n=e.shape,a=e.shape.length,o=n4(t,n),i=o,s=cW(i,a),l=null,u=!1;if(null!=s){let t=Array(a);for(let e=0;e<t.length;e++)t[e]=n[s[e]];i=cj(i.length,a),l=gC({inputs:{x:e},attrs:{perm:s},backend:r});let o=r.dataIdMap.get(e.dataId).id;r.dataIdMap.get(l.dataId).id!==o&&(u=!0)}return{transposed:l,originalAxes:o,axes:i,inputWasTransposed:u}}function gR(e){let t;return{kernelName:e,backendName:"wasm",setupFunc:function(r){t=r.wasm.cwrap(e,null,["number","number","number","number","number"])},kernelFunc:function(e){let{backend:r,inputs:n,attrs:a}=e,{axis:o}=a,{x:i}=n,s=r.dataIdMap.get(i.dataId).id,l=s,u=i,{transposed:c,axes:d,inputWasTransposed:p}=gM(i,o,r);if(p){let e=r.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e)}let h=u.shape.slice(0,-1),f=r.makeOutput(h,"int32"),m=r.dataIdMap.get(f.dataId).id,g=n0(f.shape),y=u.shape[d[0]];return t(l,e7[u.dtype],g,y,m),p&&r.disposeData(c.dataId),f}}}let gO=gR(ab),gF=gR(aw),gD=gx(ak),gP=gx(aS),g$=gx(ax),gL=gT(aI,!1),gB=gx(a_);function gz(e){let{inputs:t,attrs:r}=e,{x:n}=t,{shape:a}=r,o=n0(n.shape),i=n3(a,o);return nQ(o===n0(i),()=>`new shape: ${i}, old shape: ${n.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(n.dataId),{dataId:n.dataId,shape:i,dtype:n.dtype}}function gW(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&nQ("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}function gU(e,t,r,n,a){let o=uk(n,t,r),i=n0(r),s=ae(n);if(o){let r=uS(t,s);return"string"===a?e.slice(r,r+i):e.subarray(r,r+i)}let l="string"===a?fc(e):e,u=lb(n,a,l),c=lb(r,a);for(let e=0;e<c.size;++e){let r=c.indexToLoc(e),n=r.map((e,r)=>e+t[r]);c.set(u.get(...n),...r)}return"string"===a?fd(c.values):c.values}function gj(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{begin:o,size:i}=n;gW(a,"slice");let[s,l]=ux(a,o,i);!function(e,t,r){let n=e.shape.length;nQ(n===t.length,()=>`Error in slice${n}D: Length of begin ${t} must match the rank of the array (${n}).`),nQ(n===r.length,()=>`Error in slice${n}D: Length of size ${r} must match the rank of the array (${n}).`);for(let a=0;a<n;++a)nQ(t[a]+r[a]<=e.shape[a],()=>`Error in slice${n}D: begin[${a}] + size[${a}] (${t[a]+r[a]}) would overflow input.shape[${a}] (${e.shape[a]})`)}(a,s,l);let u=gU(r.data.get(a.dataId).values,s,l,a.shape,a.dtype);return r.makeTensorInfo(l,a.dtype,u)}function gV(e){let{inputs:{x:t},attrs:{begin:r,size:n},backend:a}=e,[o,i]=ux(t,r,n),s=uk(t.shape,o,i),l=a.readSync(t.dataId),u=a.makeOutput(i,t.dtype),c=ae(t.shape),d=a.dataIdMap.get(u.dataId);if(s){let e=uS(o,c);return"string"===t.dtype?d.stringBytes=l.slice(e,e+n0(i)):a.typedArrayFromHeap(u).set(l.subarray(e,e+n0(i))),u}if("string"===t.dtype){let e=gU(l,o,i,t.shape,t.dtype);return d.stringBytes=e,u}let p=a.typedArrayFromHeap(u),h=t.shape.length;if(2===h)!function(e,t,r,n,a){let o=0,i=n[0],s=n[1],l=i+a[0];for(let n=i;n<l;n++){let i=n*t+s;r.set(e.subarray(i,i+a[1]),o),o+=a[1]}}(l,c[0],p,o,i);else if(3===h)!function(e,t,r,n,a,o){let i=0,s=a[0],l=a[1],u=a[2],c=s+o[0],d=l+o[1];for(let a=s;a<c;a++)for(let s=l;s<d;s++){let l=a*t+s*r+u;n.set(e.subarray(l,l+o[2]),i),i+=o[2]}}(l,c[0],c[1],p,o,i);else if(4===h)!function(e,t,r,n,a,o,i){let s=0,l=o[0],u=o[1],c=o[2],d=l+i[0],p=u+i[1],h=c+i[2],f=o[3];for(let o=l;o<d;o++)for(let l=u;l<p;l++)for(let u=c;u<h;u++){let c=o*t+l*r+u*n+f;a.set(e.subarray(c,c+i[3]),s),s+=i[3]}}(l,c[0],c[1],c[2],p,o,i);else{let e=gU(l,o,i,t.shape,t.dtype);p.set(e)}return u}let gH=gT(aO,!0);function gG(e){let{inputs:{x:t},attrs:{dtype:r},backend:n}=e,a=n.makeOutput(t.shape,r),o=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(a).set(o),a}let gq=gx(aP);function gK(e,t,r,n){let a=n6(r,n0(t));if(n&&"string"!==r){let t=0;e.forEach(e=>{let r=n0(e.shape);a.set(e.vals,t),t+=r})}else{let n=0;e.forEach(e=>{let o="string"===r?fc(e.vals):e.vals,i=0;for(let r=0;r<e.shape[0];++r){let s=r*t[1]+n;for(let t=0;t<e.shape[1];++t)a[s+t]=o[i++]}n+=e.shape[1]})}return a}function gY(e){let{inputs:t,backend:r}=e,n=n4(e.attrs.axis,t[0].shape)[0];hY(t.map(e=>e.shape),n);let a=hX(t.map(e=>e.shape),n),o=t.filter(e=>n0(e.shape)>0);if(1===o.length)return gA({inputs:{x:o[0]},backend:r});let i=r.makeOutput(a,t[0].dtype);if(0===n0(a))return i;if("string"===o[0].dtype){let e=o.map(e=>{let t=n0(e.shape.slice(n));return gz({inputs:{x:e},backend:r,attrs:{shape:[-1,t]}})}),s=e.map(e=>({vals:r.readSync(e.dataId),shape:e.shape}));a=hX(e.map(e=>e.shape),1);let l=1===e[0].shape[0],u=gK(s,a,t[0].dtype,l),c=hX(o.map(e=>e.shape),n);return i.shape=c,r.dataIdMap.get(i.dataId).stringBytes=fd(u),e.forEach(e=>r.disposeData(e.dataId)),i}let s=n0(o[0].shape.slice(0,n)),l=0,u=o.map(e=>{let t=n0(e.shape.slice(n));return l+=t,t}),c=o.map(e=>r.typedArrayFromHeap(e)),d=r.typedArrayFromHeap(i);for(let e=0;e<s;e++){let t=e*l;for(let r=0;r<c.length;r++){let n=u[r],a=e*n,o=c[r].subarray(a,a+n);d.set(o,t),t+=n}}return i}let gX=gx("Cos"),gQ=gx(aq);(eR=te||(te={}))[eR.bilinear=0]="bilinear",eR[eR.nearest=1]="nearest";let gZ=gx("Elu"),gJ=gT(oe,!1,"bool"),g0=gx("Erf"),g1=gx("Exp","float32");function g2(e){let{inputs:t,attrs:r,backend:n}=e,{input:a}=t,{dim:o}=r,i=a.shape.length,s=a.shape.slice(),l=o;return o<0&&(nQ(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),s.splice(l,0,1),gz({inputs:{x:a},backend:n,attrs:{shape:s}})}let g3=gx(or,"float32");function g4(e){let{attrs:{shape:t,value:r,dtype:n},backend:a}=e,o=a.makeOutput(t,n);return a.typedArrayFromHeap(o).fill(r),o}let g6=gx(oo),g5=gT(oi,!1),g8=gT(oc,!1,"bool"),g7=gT(od,!1,"bool"),g9=gx(om,"bool"),ye=gx(og,"bool"),yt=gx(oy,"bool"),yr=gT(ob,!1,"bool"),yn=gT(ow,!1,"bool"),ya=gx("Log"),yo=gx(oS),yi=gT(ox,!1,"bool"),ys=gx(o_),yl=gT(oI,!1,"bool"),yu=gT("LogicalXor",!1,"bool"),yc=gT(oT,!1),yd=gT(oF,!1);function yp(e){let{backend:t,inputs:{logits:r},attrs:{dim:n}}=e,a=t.dataIdMap.get(r.dataId).id,o=t.makeOutput(r.shape,r.dtype),i=t.dataIdMap.get(o.dataId).id,s=r.shape[n],l=n0(r.shape)/s;return 0===n0(o.shape)||J(a,i,s,l),o}(eO=tt||(tt={}))[eO.reflect=0]="reflect",eO[eO.symmetric=1]="symmetric";let yh=gT("Mod",!0),yf=gT(o$,!0),ym=gx("Neg");function yg(e,t){let r=new Int32Array(e.wasm.HEAPU8.buffer,t,4),n=r[0],a=r[1],o=r[2],i=r[3];return e.wasm._free(t),{pSelectedIndices:n,selectedSize:a,pSelectedScores:o,pValidOutputs:i}}let yy=gT(oL,!1,"bool"),yv={kernelName:oH,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:r,attrs:{paddings:n,constantValue:a}}=e,o=n.map((e,r)=>e[0]+t.shape[r]+e[1]);if(0===n0(t.shape))return g4({backend:r,attrs:{shape:o,value:a,dtype:t.dtype}});let i=r.dataIdMap.get(t.dataId).id,s=r.makeOutput(o,t.dtype),l=r.dataIdMap.get(s.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),c=n.map(e=>e[0]),d=n.map(e=>e[1]),p=new Uint8Array(new Int32Array(c).buffer),h=new Uint8Array(new Int32Array(d).buffer);return eo(i,u,t.shape.length,e7[t.dtype],p,h,a,l),s},setupFunc:function(e){eo=e.wasm.cwrap(oH,null,["number","array","number","number","array","array","number","number"])}},yb=gT("Pow",!1);function yw(e,t,r,n){let a=e<t&&r<0,o=t<e&&r>1;if(e===t||a||o)return an(0,n);let i=an(Math.abs(Math.ceil((t-e)/r)),n);t<e&&1===r&&(r=-1),i[0]=e;for(let e=1;e<i.length;e++)i[e]=i[e-1]+r;return i}let yk=gT(a8,!0),yS=gx(oJ),yx=gx(o0),y_=gx(o5),yI=gx(o7),yE=gx(o9),yT=gx(io),yN=gx(il),yA=gx("Sin"),yC=gx(is),yM=gx(ic);function yR(e){ew=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function yO(e,t){let r;let{backend:n,inputs:a}=e,{data:o,indices:i,segmentIds:s}=a,l=i.shape[0],u=n.readSync(s.dataId,l-1,l)[0],c=l>0?u+1:0;if(c<0)throw Error(fo());let d=o.shape.slice();d[0]=c;let p=n.dataIdMap.get(o.dataId).id,h=n.dataIdMap.get(i.dataId).id,f=n.dataIdMap.get(s.dataId).id,m=n.makeOutput(d,o.dtype),g=n.dataIdMap.get(m.dataId).id,y=n.makeOutput([4],"int32"),v=n.dataIdMap.get(y.dataId).id;ew(p,e7[o.dtype],o.shape[0],h,f,g,v,t,0);let b=n.readSync(y.dataId);switch(b[0]){case 0:r=fo();break;case 1:r=fi();break;case 2:r=fs(b[1],b[2]);break;case 3:r=fl(b[1],b[2],b[3]);break;default:r=""}if(n.disposeData(y.dataId),r)throw n.disposeData(m.dataId),Error(r);return m}let yF=gx(id),yD=gx(iS),yP=gT(ik,!0);class y${constructor(e,t,r,n,a,o){this.separator=st(e),this.nGramWidths=t,this.leftPad=st(r),this.rightPad=st(n),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){return Math.max(0,e+2*this.getPadWidth(t)-t+1)}createNGrams(e,t,r,n,a,o){for(let i=0;i<a;++i){let s;let l=this.getPadWidth(o),u=Math.max(0,l-i),c=Math.max(0,l-(a-(i+1))),d=o-(u+c),p=t+(u>0?0:i-l);s=0+u*this.leftPad.length;for(let t=0;t<d;++t)s+=e[p+t].length;s+=c*this.rightPad.length+(u+c+d-1)*this.separator.length,r[n+i]=new Uint8Array(s);let h=r[n+i],f=0,m=e=>e.forEach(e=>h[f++]=e);for(let e=0;e<u;++e)m(this.leftPad),m(this.separator);for(let t=0;t<d-1;++t)m(e[p+t]),m(this.separator);if(d>0){m(e[p+d-1]);for(let e=0;e<c;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<c-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){let r=e.length,n=t.length;if(n>0){let e=t[0];if(0!==e)throw Error(`First split value must be 0, got ${e}`);for(let a=1;a<n;++a){let n=t[a]>=e;if(!(n=n&&t[a]<=r))throw Error(`Invalid split value ${t[a]}, must be in [${e}, ${r}]`);e=t[a]}if(e!==r)throw Error(`Last split value must be data size. Expected ${r}, got ${e}`)}let a=n-1,o=n6("int32",n);if(0===r||0===n){let e=Array(r);for(let e=0;e<=a;++e)o[e]=0;return[e,o]}o[0]=0;for(let e=1;e<=a;++e){let r=t[e]-t[e-1],n=0;this.nGramWidths.forEach(e=>{n+=this.getNumNGrams(r,e)}),this.preserveShort&&r>0&&0===n&&(n=1),o[e]=o[e-1]+n}let i=Array(o[a]);for(let r=0;r<a;++r){let n=t[r],a=o[r];if(this.nGramWidths.forEach(o=>{let s=t[r+1]-t[r],l=this.getNumNGrams(s,o);this.createNGrams(e,n,i,a,l,o),a+=l}),this.preserveShort&&a===o[r]){let o=t[r+1]-t[r];if(0===o)continue;let s=o+2*this.padWidth;this.createNGrams(e,n,i,a,1,s)}}return[i,o]}}function yL(e,t,r,n,a,o,i,s){return new y$(r,n,a,o,i,s).compute(e,t)}function yB(e,t,r){let n=e.length,a=[],o=0,i=0,s=Array(n);for(let l=0;l<n;++l){let n=a.length;!function(e,t,r,n){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)n.push(e.subarray(t,t+1));return}if(1===t.length){let a=t[0],o=e.indexOf(a);for(;-1!==o;){let t=e.subarray(0,o);r&&0===t.length||n.push(t),o=(e=e.subarray(o+1)).indexOf(a)}r&&0===e.length||n.push(e);return}let a=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){let t=e.subarray(a,o);r&&0===t.length||n.push(t),a=o+1}}(e[l],t,r,a);let u=a.length-n;s[l]=u,o+=u,i=Math.max(i,u)}let l=n6("int32",2*o),u=Array(o),c=[n,i],d=0;for(let e=0;e<n;++e)for(let t=0;t<s[e];++t)l[2*d]=e,l[2*d+1]=t,u[d]=a[d],++d;return[l,u,c]}function yz(e,t){let r=n6("int32",e.length);for(let n=0;n<e.length;++n)r[n]=(function(e,t=e.length){let r=iQ.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){let r=i1.add(2*t),n=i4(e,0).add(i1),a=i4(e,t-8);return i5(i6(a,37).mul(r).add(n),i6(n,25).add(a).mul(r),r)}if(t>=4){let r=i1.add(2*t);return i5(i3(e,0,4).shl(3).add(t),i3(e,t-4,4),r)}if(t>0){let r=e[0],n=e[t>>1],a=e[t-1];return i2(i1.mul(r+(n<<8)).xor(iJ.mul(t+(a<<2)))).mul(i1)}return i1}(e,t):function(e,t=e.length){let r=i1.add(2*t),n=i4(e,0).mul(i0),a=i4(e,8),o=i4(e,t-8).mul(r),i=i4(e,t-16).mul(i1);return i5(i6(n.add(a),43).add(i6(o,30)).add(i),n.add(i6(a.add(i1),18)).add(o),r)}(e,t);if(t<=64)return function(e,t=e.length){let r=i1.add(2*t),n=i4(e,0).mul(i1),a=i4(e,8),o=i4(e,t-8).mul(r),i=i4(e,t-16).mul(i1),s=i6(n.add(a),43).add(i6(o,30)).add(i),l=i5(s,n.add(i6(a.add(i1),18)).add(o),r),u=i4(e,16).mul(r),c=i4(e,24),d=s.add(i4(e,t-32)).mul(r),p=l.add(i4(e,t-24)).mul(r);return i5(i6(u.add(c),43).add(i6(d,30)).add(p),u.add(i6(c.add(n),18)).add(d),r)}(e,t);let n=r,a=r.mul(i0).add(113),o=i2(a.mul(i1).add(113)).mul(i1),i=[iQ.UZERO,iQ.UZERO],s=[iQ.UZERO,iQ.UZERO];n=n.mul(i1).add(i4(e,0));let l=0,u=(t-1>>6)*64;do n=i6(n.add(a).add(i[0]).add(i4(e,l+8)),37).mul(i0),a=i6(a.add(i[1]).add(i4(e,l+48)),42).mul(i0),n=n.xor(s[1]),a=a.add(i[0]).add(i4(e,l+40)),o=i6(o.add(s[0]),33).mul(i0),i=i8(e,l,i[1].mul(i0),n.add(s[0])),s=i8(e,l+32,o.add(s[1]),a.add(i4(e,l+16))),[o,n]=[n,o],l+=64;while(l!==u);let c=i0.add(o.and(255).shl(1));return l=u+(t-1&63)-63,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),n=i6(n.add(a).add(i[0]).add(i4(e,l+8)),37).mul(c),a=i6(a.add(i[1]).add(i4(e,l+48)),42).mul(c),n=n.xor(s[1].mul(9)),a=a.add(i[0].mul(9).add(i4(e,l+40))),o=i6(o.add(s[0]),33).mul(c),i=i8(e,l,i[1].mul(c),n.add(s[0])),s=i8(e,l+32,o.add(s[1]),a.add(i4(e,l+16))),[o,n]=[n,o],i5(i5(i[0],s[0],c).add(i2(a).mul(iJ)).add(o),i5(i[1],s[1],c).add(n),c)})(e[n]).modulo(t).getLowBitsUnsigned();return r}let yW=gT("Sub",!0);function yU(e,t,r,n){let a=n4(t,r)[0],o=[1,r[0],1];for(let e=0;e<a;e++)o[0]*=r[e];o[1]=r[a];for(let e=a+1;e<r.length;e++)o[2]*=r[e];let i=new Map,s=new Int32Array(r[a]),l=new sc(o,n,e),u=[],c=1===o[0]&&1===o[2];for(let t=0;t<r[a];t++){let r;if(c)r=e[t].toString();else{let e=[];for(let r=0;r<o[0];r++)for(let n=0;n<o[2];n++)e.push(l.get(r,t,n));r=e.join(",")}let n=i.get(r);if(null!=n)s[t]=n;else{let e=i.size;i.set(r,e),s[t]=e,u.push(t)}}let d=o.slice();d[1]=i.size;let p=new sc(d,n);u.forEach((e,t)=>{for(let r=0;r<o[0];r++)for(let n=0;n<o[2];n++)p.set(l.get(r,e,n),r,t,n)});let h=r.slice();return h[a]=d[1],{outputValues:p.values,outputShape:h,indices:s}}for(let e of[{kernelName:iz,backendName:"wasm",setupFunc:function(e){i=e.wasm.cwrap(iz,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{a,b:o,bias:s,preluActivationWeights:l}=t;if("float32"!==a.dtype||"float32"!==o.dtype)throw Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:u,transposeB:c,activation:d,leakyreluAlpha:p}=n,h=r.dataIdMap.get(a.dataId).id,f=r.dataIdMap.get(o.dataId).id,m=0;if(null!=s){let e=r.dataIdMap.get(s.dataId);if(1!==e.shape.length)throw Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);m=e.id}let g=null==l?0:r.dataIdMap.get(l.dataId).id,y=e9[d];if(null==y)throw Error(`${d} activation not yet supported for FusedConv2D in the wasm backend.`);let v=u?a.shape[2]:a.shape[1],b=c?o.shape[1]:o.shape[2],w=lX(a.shape.slice(0,-2),o.shape.slice(0,-2)),k=r.makeOutput([...w,v,b],a.dtype),S=r.dataIdMap.get(k.dataId).id,x=new Uint8Array(new Int32Array(a.shape).buffer),_=new Uint8Array(new Int32Array(o.shape).buffer);return i(h,x,a.shape.length,f,_,o.shape.length,u,c,y,m,g,p||0,S),k}},g_,gI,gE,gN,{kernelName:av,backendName:"wasm",setupFunc:function(e){s=e.wasm.cwrap(av,null,["array","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r}=e,n=r.makeOutput(t[0].shape,t[0].dtype);if(0===n0(n.shape))return n;let a=t.map(e=>r.dataIdMap.get(e.dataId).id),o=new Uint8Array(new Int32Array(a).buffer),i=r.dataIdMap.get(n.dataId).id;return s(o,a.length,e7[n.dtype],i),n}},{kernelName:"All",backendName:"wasm",setupFunc:function(e){u=e.wasm.cwrap("All",null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{axis:a,keepDims:o}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,l=i,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=gM(i,a,t);if(h){let e=t.dataIdMap.get(c.dataId).id;l=c,s=e}cz("all",d,l.shape.length);let[f,m]=cL(l.shape,d),g=n0(m),y=t.makeOutput(f,i.dtype);if(0!==n0(l.shape)){let e=t.dataIdMap.get(y.dataId).id;u(s,g,e)}if(h&&t.disposeData(c.dataId),o){let e=cB(y.shape,p);y.shape=e}return y}},{kernelName:"Any",backendName:"wasm",setupFunc:function(e){c=e.wasm.cwrap("Any",null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{axis:a,keepDims:o}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,l=i,{transposed:u,axes:d,originalAxes:p,inputWasTransposed:h}=gM(i,a,t);if(h){let e=t.dataIdMap.get(u.dataId).id;l=u,s=e}cz("any",d,l.shape.length);let[f,m]=cL(l.shape,d),g=n0(m),y=t.makeOutput(f,i.dtype);if(0!==n0(l.shape)){let e=t.dataIdMap.get(y.dataId).id;c(s,g,e)}if(h&&t.disposeData(u.dataId),o){let e=cB(y.shape,p);y.shape=e}return y}},gO,gF,gD,gP,g$,gL,gB,{kernelName:aE,backendName:"wasm",setupFunc:function(e){d=e.wasm.cwrap(aE,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,a=t.x,o=n.dataIdMap.get(a.dataId).id,{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=r,c=uB(a.shape,i,s,1,l,u),p=c.filterHeight,h=c.filterWidth,f=c.padInfo.top,m=c.padInfo.right,g=c.padInfo.bottom,y=c.padInfo.left,v=c.strideHeight,b=c.strideWidth,w=c.inChannels;if("channelsLast"!==c.dataFormat)throw Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);if(1!==c.dilationWidth||1!==c.dilationHeight)throw Error(`was backend only supports average pooling with dilation = [1, 1], got [${c.dilationHeight}, ${c.dilationWidth}].`);let k=n.makeOutput(c.outShape,"float32"),S=n.dataIdMap.get(k.dataId).id;return d(o,a.shape[0],a.shape[1],a.shape[2],p,h,f,m,g,y,v,b,w,S),k}},{kernelName:aT,backendName:"wasm",setupFunc:function(e){f=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,input:o}=t,{filterSize:i,strides:s,pad:l}=n,u=uB(o.shape,i,s,1,l),c=r.makeOutput(o.shape,o.dtype);return f(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(c.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left,u.filterHeight,u.filterWidth),c}},{kernelName:aN,backendName:"wasm",setupFunc:function(e){p=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:l,dataFormat:u}=n,c=uz(a.shape,o,i,1,s,l,u),d=r.makeOutput(c.outShape,a.dtype);return p(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),d}},{kernelName:aA,backendName:"wasm",setupFunc:function(e){h=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,input:o}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=n,c=uz(o.shape,i,s,1,l,u),d=r.makeOutput(o.shape,o.dtype);return h(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left,c.filterDepth,c.filterHeight,c.filterWidth),d}},{kernelName:aC,backendName:"wasm",setupFunc:function(e){m=e.wasm.cwrap(aC,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{a,b:o}=t,{transposeA:i,transposeB:s}=n;if("float32"!==a.dtype||"float32"!==o.dtype)throw Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=a.shape.length,u=o.shape.length,c=i?a.shape[l-2]:a.shape[l-1],d=s?o.shape[u-1]:o.shape[u-2],p=i?a.shape[l-1]:a.shape[l-2],h=s?o.shape[u-2]:o.shape[u-1],f=a.shape.slice(0,-2),g=o.shape.slice(0,-2),y=n0(f),v=n0(g),b=lX(a.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,h]);nQ(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${a.shape} and ${o.shape} and transposeA=${i} and transposeB=${s} must match.`);let w=gz({inputs:{x:a},backend:r,attrs:{shape:i?[y,c,p]:[y,p,c]}}),k=gz({inputs:{x:o},backend:r,attrs:{shape:s?[v,h,d]:[v,d,h]}}),S=r.dataIdMap.get(w.dataId).id,x=r.dataIdMap.get(k.dataId).id,_=i?w.shape[2]:w.shape[1],I=s?k.shape[1]:k.shape[2],E=Math.max(y,v),T=r.makeOutput([E,_,I],w.dtype),N=r.dataIdMap.get(T.dataId).id,A=new Uint8Array(new Int32Array(w.shape).buffer),C=new Uint8Array(new Int32Array(k.shape).buffer);return m(S,A,w.shape.length,x,C,k.shape.length,i,s,N),r.disposeData(w.dataId),r.disposeData(k.dataId),T.shape=b,T}},{kernelName:aM,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{blockShape:o,crops:i}=n,s=o.reduce((e,t)=>e*t),l=hZ(a.shape,o,s),u=hJ(l.length,o.length),c=h0(a.shape,o,s),d=h1(i,o.length),p=h2(c,i,o.length),h=gz({inputs:{x:a},backend:r,attrs:{shape:l}}),f=gC({inputs:{x:h},backend:r,attrs:{perm:u}}),m=gz({inputs:{x:f},backend:r,attrs:{shape:c}}),g=gV({inputs:{x:m},backend:r,attrs:{begin:d,size:p}});return r.disposeData(h.dataId),r.disposeData(f.dataId),r.disposeData(m.dataId),g}},{kernelName:aR,backendName:"wasm",setupFunc:function(e){g=e.wasm.cwrap(aR,null,["number","number","boolean","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{x:a,weights:o}=r,{size:i}=n,s=0!==o.shape.reduce((e,t)=>e*t,1),l=1===a.shape.length?[i]:[a.shape[0],i],u=t.makeOutput(l,o.dtype);function c(e){return t.dataIdMap.get(e.dataId).id}return g(c(a),i,s,c(o),e7[o.dtype],c(u)),u}},gH,{kernelName:aF,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r}=e,{s0:n,s1:a}=t,o=r.typedArrayFromHeap(n),i=r.typedArrayFromHeap(a),s=lX(Array.from(o),Array.from(i));return r.makeOutput([s.length],"int32",void 0,new Int32Array(s))}},{kernelName:aD,backendName:"wasm",kernelFunc:gG},gq,{kernelName:a$,backendName:"wasm",setupFunc:function(e){y=e.wasm.cwrap(a$,null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{clipValueMin:o,clipValueMax:i}=n,s=r.dataIdMap.get(a.dataId).id,l=r.makeOutput(a.shape,a.dtype),u=r.dataIdMap.get(l.dataId).id;return y(s,o,i,u),l}},{kernelName:az,backendName:"wasm",kernelFunc:gY},{kernelName:aW,backendName:"wasm",setupFunc:function(e){v=e.wasm.cwrap(aW,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,{x:a,filter:o}=t,i=n.dataIdMap.get(a.dataId).id,s=n.dataIdMap.get(o.dataId).id,{strides:l,dilations:u,pad:c,dimRoundingMode:d,dataFormat:p}=r,h=uQ(p),f=uW(a.shape,o.shape,l,u,c,d,!1,h),m=f.filterHeight,g=f.filterWidth,y=f.padInfo.top,b=f.padInfo.right,w=f.padInfo.bottom,k=f.padInfo.left,S=f.dilationHeight,x=f.dilationWidth,_=f.strideHeight,I=f.strideWidth,E=f.inChannels,T=f.outChannels,N="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw Error(`wasm backend Conv2D does not support dataFormat:'${f.dataFormat}'. Please use 'channelsLast'.`);let A=n.makeOutput(f.outShape,"float32"),C=n.dataIdMap.get(A.dataId).id;return v(i,a.shape[0],a.shape[1],a.shape[2],s,m,g,y,b,w,k,N,S,x,_,I,E,T,C),A}},{kernelName:aj,backendName:"wasm",setupFunc:function(e){b=e.wasm.cwrap(aj,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{dy:a,filter:o}=r,{strides:i,pad:s,dataFormat:l,dimRoundingMode:u,inputShape:c}=n,d=uQ(l),p=uW(c,o.shape,i,1,s,u,!1,d),{batchSize:h,filterHeight:f,filterWidth:m,inChannels:g,inHeight:y,inWidth:v,outChannels:w,outHeight:k,outWidth:S,strideHeight:x,strideWidth:_}=p,I=f-1-p.padInfo.top,E=m-1-p.padInfo.left,T="channelsLast"===p.dataFormat,N=ae(p.inShape),A=ae(a.shape),[C,M,R]=ae(o.shape),O=N[0],F=T?N[1]:N[2],D=T?N[2]:1,P=T?1:N[1],$=A[0],L=T?A[1]:A[2],B=T?A[2]:1,z=T?1:A[1],W=t.makeOutput(p.inShape,"float32"),U=t.dataIdMap.get(W.dataId).id,j=t.dataIdMap.get(a.dataId).id,V=t.dataIdMap.get(o.dataId).id;return b(j,V,h,f,m,y,v,g,k,S,w,x,_,I,E,C,M,R,O,F,D,P,$,L,B,z,U),W}},{kernelName:aV,backendName:"wasm",setupFunc:function(e){w=e.wasm.cwrap(aV,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:l}=n;if("float32"!==a.dtype)throw Error(`Tensor x must have dtype float32, got ${a.dtype}`);if("float32"!==o.dtype)throw Error(`Tensor filter must have dtype float32, got ${o.dtype}`);let u=uU(a.shape,o.shape,i,l,s),c=r.makeOutput(u.outShape,a.dtype);return w(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}},{kernelName:aH,backendName:"wasm",setupFunc:function(e){k=e.wasm.cwrap(aH,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,dy:o}=t,{strides:i,pad:s,filterShape:l}=n;if("float32"!==a.dtype)throw Error(`Tensor dy must have dtype float32, got ${a.dtype}`);if("float32"!==o.dtype)throw Error(`Tensor filter must have dtype float32, got ${o.dtype}`);let u=uU(a.shape,l,i,1,s),c=r.makeOutput(u.filterShape,o.dtype);return k(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}},{kernelName:aG,backendName:"wasm",setupFunc:function(e){S=e.wasm.cwrap(aG,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,filter:o}=t,{pad:i,strides:s,inputShape:l}=n;if("float32"!==a.dtype)throw Error(`Tensor dy must have dtype float32, got ${a.dtype}`);if("float32"!==o.dtype)throw Error(`Tensor filter must have dtype float32, got ${o.dtype}`);let u=uU(l,o.shape,s,1,i),c=r.makeOutput(u.inShape,a.dtype);return S(r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}},gX,gQ,{kernelName:aX,backendName:"wasm",setupFunc:function(e){x=e.wasm.cwrap(aX,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){let t;let{backend:r,inputs:n,attrs:a}=e,{method:o,extrapolationValue:i,cropSize:s}=a,{image:l,boxes:u,boxInd:c}=n,d=u.shape[0],[p,h]=s,f=[d,p,h,l.shape[3]],m=r.dataIdMap.get(l.dataId);"float32"!==l.dtype&&(t=gG({backend:r,inputs:{x:l},attrs:{dtype:"float32"}}),m=r.dataIdMap.get(t.dataId));let g=m.id,y=r.dataIdMap.get(u.dataId).id,v=r.dataIdMap.get(c.dataId).id,b=r.makeOutput(f,"float32"),w=r.dataIdMap.get(b.dataId).id,k=new Uint8Array(new Int32Array(l.shape).buffer);return x(g,y,v,d,k,p,h,te[o],i,w),null!=t&&r.disposeData(t.dataId),b}},{kernelName:aK,backendName:"wasm",setupFunc:function(e){_=e.wasm.cwrap(aK,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,exclusive:i,reverse:s}=n,l=a.shape.length;nQ("float32"===a.dtype||"int32"===a.dtype,()=>`cumprod does not support ${a.dtype} tensors in the WASM backend`);let u=cW([o],l),c=a;null!==u&&(c=gC({inputs:{x:a},attrs:{perm:u},backend:r}));let d=cj(1,l)[0];cz("cumprod",[d],l);let p=r.makeOutput(c.shape,c.dtype),h=c.shape[d],f=r.dataIdMap.get(c.dataId).id,m=r.dataIdMap.get(p.dataId).id;_(f,i?1:0,s?1:0,h,m,e7[a.dtype]);let g=p;return null!==u&&(g=gC({inputs:{x:p},attrs:{perm:cU(u)},backend:r}),r.disposeData(c.dataId),r.disposeData(p.dataId)),g}},{kernelName:aY,backendName:"wasm",setupFunc:function(e){I=e.wasm.cwrap(aY,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,exclusive:i,reverse:s}=n,l=a.shape.length;nQ("float32"===a.dtype||"int32"===a.dtype,()=>`cumsum does not support ${a.dtype} tensors in the WASM backend`);let u=cW([o],l),c=a;null!==u&&(c=gC({inputs:{x:a},attrs:{perm:u},backend:r}));let d=cj(1,l)[0];cz("cumsum",[d],l);let p=r.makeOutput(c.shape,c.dtype),h=c.shape[d],f=r.dataIdMap.get(c.dataId).id,m=r.dataIdMap.get(p.dataId).id;I(f,i?1:0,s?1:0,h,m,e7[a.dtype]);let g=p;return null!==u&&(g=gC({inputs:{x:p},attrs:{perm:cU(u)},backend:r}),r.disposeData(c.dataId),r.disposeData(p.dataId)),g}},{kernelName:aQ,backendName:"wasm",setupFunc:function(e){E=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{x:a,weights:o}=r,{size:i,binaryOutput:s}=n,l=0!==o.shape.reduce((e,t)=>e*t,1),u=1===a.shape.length?[i]:[a.shape[0],i],c=t.makeOutput(u,o.dtype);function d(e){return t.dataIdMap.get(e.dataId).id}return E(d(a),new Uint8Array(new Int32Array(a.shape).buffer),a.shape.length,i,l,d(o),e7[o.dtype],s,d(c)),c}},{kernelName:aZ,backendName:"wasm",setupFunc:function(e){T=e.wasm.cwrap(aZ,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{x:a}=r,{blockSize:o,dataFormat:i}=n,s=a.shape[0],l="NHWC"===i?a.shape[1]:a.shape[2],u="NHWC"===i?a.shape[2]:a.shape[3],c="NHWC"===i?a.shape[3]:a.shape[1],d=l*o,p=u*o,h=c/(o*o),f="NHWC"===i?[s,d,p,h]:[s,h,d,p],m=t.makeOutput(f,"float32"),g=t.dataIdMap.get(a.dataId).id,y=new Uint8Array(new Int32Array(ae(a.shape)).buffer),v=new Uint8Array(new Int32Array(f).buffer),b=new Uint8Array(new Int32Array(ae(f)).buffer),w=t.dataIdMap.get(m.dataId).id;return T(g,o,"NHWC"===i?1:0,y,a.shape.length-1,v,b,f.length,w),m}},{kernelName:aJ,backendName:"wasm",setupFunc:function(e){N=e.wasm.cwrap(aJ,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,{x:a,filter:o}=t,i=n.dataIdMap.get(a.dataId).id,s=n.dataIdMap.get(o.dataId).id,{strides:l,dilations:u,pad:c,dimRoundingMode:d}=r,p=uW(a.shape,o.shape,l,null==u?[1,1]:u,c,d,!0),h=p.filterHeight,f=p.filterWidth,m=p.padInfo.top,g=p.padInfo.right,y=p.padInfo.bottom,v=p.padInfo.left,b=p.dilationHeight,w=p.dilationWidth,k=p.strideHeight,S=p.strideWidth,x=p.inChannels,_=p.outChannels,I="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${p.dataFormat}'. Please use 'channelsLast'.`);let E=n.makeOutput(p.outShape,"float32"),T=n.dataIdMap.get(E.dataId).id;return N(i,a.shape[0],a.shape[1],a.shape[2],s,h,f,m,g,y,v,I,b,w,k,S,x,_,T),E}},{kernelName:a2,backendName:"wasm",setupFunc:function(e){A=e.wasm.cwrap("Diag",null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r}=e,{x:n}=t,a=n0(n.shape),o=r.makeOutput([...n.shape,...n.shape],n.dtype);return A(r.dataIdMap.get(n.dataId).id,e7[n.dtype],a,r.dataIdMap.get(o.dataId).id),o}},{kernelName:a3,backendName:"wasm",setupFunc:function(e){C=e.wasm.cwrap(a3,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:l}=n;if(a.dtype!==o.dtype)throw Error(`Dilation2D error: x must have the same dtype as filter. Got ${a.dtype} and ${o.dtype}`);let u=uL(a.shape,o.shape,i,s,"NHWC",l),c=r.makeOutput(u.outShape,a.dtype);return C(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(c.dataId).id,e7[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),c}},{kernelName:a6,backendName:"wasm",setupFunc:function(e){M=e.wasm.cwrap(a6,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o,dy:i}=t,{strides:s,pad:l,dilations:u}=n;if(a.dtype!==o.dtype||a.dtype!==i.dtype)throw Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${a.dtype}, ${o.dtype}, and ${i.dtype}`);let c=uL(a.shape,o.shape,s,l,"NHWC",u),d=r.makeOutput(o.shape,o.dtype);return M(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(i.dataId).id,r.dataIdMap.get(d.dataId).id,e7[a.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),d}},{kernelName:a4,backendName:"wasm",setupFunc:function(e){R=e.wasm.cwrap(a4,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o,dy:i}=t,{strides:s,pad:l,dilations:u}=n;if(a.dtype!==o.dtype||a.dtype!==i.dtype)throw Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${a.dtype}, ${o.dtype}, and ${i.dtype}`);let c=uL(a.shape,o.shape,s,l,"NHWC",u),d=r.makeOutput(a.shape,a.dtype);return R(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(i.dataId).id,r.dataIdMap.get(d.dataId).id,e7[a.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),d}},gZ,{kernelName:a9,backendName:"wasm",setupFunc:function(e){O=e.wasm.cwrap(a9,null,["number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r}=e,{dy:n,y:a}=t,o=r.makeOutput(a.shape,"float32");return O(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(n.dataId).id,r.dataIdMap.get(o.dataId).id),o}},gJ,g0,g1,{kernelName:ot,backendName:"wasm",kernelFunc:g2},g3,{kernelName:on,backendName:"wasm",kernelFunc:g4},{kernelName:oa,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r}=e,{image:n}=t,a=r.makeOutput(n.shape,n.dtype),o=r.dataIdMap.get(n.dataId).id,i=r.dataIdMap.get(a.dataId).id,[s,l,u,c]=n.shape;return F(o,s,l,u,c,i),a},setupFunc:function(e){F=e.wasm.cwrap(oa,null,["number","number","number","number","number","number"])}},g6,g5,{kernelName:os,backendName:"wasm",setupFunc:function(e){D=e.wasm.cwrap(os,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{varianceEpsilon:a}=n,{x:o,mean:i,variance:s,offset:l,scale:u}=r,c=t.dataIdMap.get(o.dataId).id,d=t.dataIdMap.get(i.dataId).id,p=t.dataIdMap.get(s.dataId).id,h=null!=l?t.dataIdMap.get(l.dataId).id:0,f=null!=u?t.dataIdMap.get(u.dataId).id:0,m=t.makeOutput(o.shape,o.dtype);if(0===n0(o.shape))return m;let g=t.dataIdMap.get(m.dataId).id;return D(c,d,p,h,f,a,g),m}},{kernelName:iW,backendName:"wasm",setupFunc:function(e){P=e.wasm.cwrap(iW,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,{x:a,filter:o,bias:i,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dataFormat:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=uW(a.shape,o.shape,l,c,u,p),g=e9[h];if(null==g)throw Error(`${h} activation not yet supported for FusedConv2D in the wasm backend.`);let y=n.dataIdMap.get(a.dataId).id,v=n.dataIdMap.get(o.dataId).id,b=m.outChannels,w=0;if(null!=i){let e=n.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==b)throw Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${b})`);w=e.id}let k=m.filterHeight,S=m.filterWidth,x=m.padInfo.top,_=m.padInfo.right,I=m.padInfo.bottom,E=m.padInfo.left,T=m.dilationHeight,N=m.dilationWidth,A=m.strideHeight,C=m.strideWidth,M=m.inChannels,R="SAME"===m.padInfo.type?1:0,O=m.batchSize,F=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw Error(`wasm backend FusedConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);let $=n.makeOutput(m.outShape,"float32"),L=n.dataIdMap.get($.dataId).id,B=null==s?0:n.dataIdMap.get(s.dataId).id;return P(y,O,F,D,v,k,S,w,x,_,I,E,R,T,N,A,C,M,b,g,B,f||0,L),$}},{kernelName:iU,backendName:"wasm",setupFunc:function(e){$=e.wasm.cwrap(iU,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,{x:a,filter:o,bias:i,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dataFormat:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=uW(a.shape,o.shape,l,c,u,p,!0),g=e9[h];if(null==g)throw Error(`${h} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);let y=n.dataIdMap.get(a.dataId).id,v=n.dataIdMap.get(o.dataId).id,b=m.outChannels,w=0;if(null!=i){let e=n.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==b)throw Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${b})`);w=e.id}let k=m.filterHeight,S=m.filterWidth,x=m.padInfo.top,_=m.padInfo.right,I=m.padInfo.bottom,E=m.padInfo.left,T=m.dilationHeight,N=m.dilationWidth,A=m.strideHeight,C=m.strideWidth,M=m.inChannels,R="SAME"===m.padInfo.type?1:0,O=m.batchSize,F=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);let P=n.makeOutput(m.outShape,"float32"),L=n.dataIdMap.get(P.dataId).id,B=null==s?0:n.dataIdMap.get(s.dataId).id;return $(y,O,F,D,v,k,S,w,x,_,I,E,R,T,N,A,C,M,b,g,B,f||0,L),P}},{kernelName:ou,backendName:"wasm",setupFunc:function(e){L=e.wasm.cwrap(ou,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){let{backend:t,inputs:r}=e,{params:n,indices:a}=r,[o,i,s,l]=uy(n,a),u=t.makeOutput(o,n.dtype);if(0===i)return u;let c=a.shape,d=c[c.length-1],p=t.dataIdMap.get(n.dataId).id,h=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(l).buffer),m=t.dataIdMap.get(u.dataId).id;return L(p,e7[n.dtype],h,i,d,s,f,m),u}},{kernelName:ol,backendName:"wasm",setupFunc:function(e){B=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{x:a,indices:o}=r,{axis:i,batchDims:s}=n,l=n4(i,a.shape)[0],u=t.readSync(o.dataId),c=a.shape[l];for(let e=0;e<u.length;++e){let t=u[e];nQ(t<=c-1&&t>=0,()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`)}let d=fu(a,o,l,s),p=gz({inputs:{x:a},attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]},backend:t}),h=n0(o.shape),f=gz({inputs:{x:o},attrs:{shape:[d.batchSize,h/d.batchSize]},backend:t}),m=[d.batchSize,d.outerSize,h/d.batchSize,d.sliceSize],g=t.makeOutput(m,a.dtype);if(0===n0(a.shape))return g;let y=p.shape.length-1,v=t.dataIdMap.get(p.dataId).id,b=t.dataIdMap.get(f.dataId).id,w=t.dataIdMap.get(g.dataId).id,k=new Uint8Array(new Int32Array(ae(p.shape)).buffer),S=new Uint8Array(new Int32Array(ae(m)).buffer);return B(v,e7[a.dtype],k,y,b,d.batchSize,S,w),t.disposeData(p.dataId),t.disposeData(f.dataId),g.shape=d.outputShape,g}},g8,g7,{kernelName:op,backendName:"wasm",kernelFunc:gA},g9,ye,yt,{kernelName:ov,backendName:"wasm",setupFunc:function(e){z=e.wasm.cwrap(ov,null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:{x:t},attrs:{alpha:r},backend:n}=e,a=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(t.shape,"float32");if(0!==n0(t.shape)){let e=n.dataIdMap.get(o.dataId).id;z(a,e7[t.dtype],r,e)}return o}},yr,yn,{kernelName:ok,backendName:"wasm",setupFunc:function(e){W=e.wasm.cwrap(ok,null,["number","number","number","number"])},kernelFunc:function(e){let{attrs:t,backend:r}=e,{start:n,stop:a,num:o}=t,i=Math.floor(o),s=r.makeOutput([i],"float32");return W(r.dataIdMap.get(s.dataId).id,n,a,i),s}},yo,ya,yi,ys,yl,yu,{kernelName:"LRN",backendName:"wasm",setupFunc:function(e){U=e.wasm.cwrap("LRN",null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{depthRadius:o,bias:i,alpha:s,beta:l}=n;if("float32"!==a.dtype)throw Error("LRN error: x must have dtype float32");let u=r.makeOutput(a.shape,a.dtype);return U(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(u.dataId).id,a.shape[3],o,i,s,l),u}},{kernelName:oE,backendName:"wasm",setupFunc:function(e){j=e.wasm.cwrap(oE,null,["number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,y:o,dy:i}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=n;if("float32"!==a.dtype||"float32"!==o.dtype||"float32"!==i.dtype)throw Error("LRNGrad error: x, y, and dy must have dtype float32");let d=r.makeOutput(a.shape,a.dtype);return j(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(i.dataId).id,r.dataIdMap.get(d.dataId).id,i.shape[3],s,l,u,c),d}},{kernelName:"Max",backendName:"wasm",setupFunc:function(e){V=e.wasm.cwrap("Max",null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{reductionIndices:a,keepDims:o}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,l=i,{transposed:u,axes:c,originalAxes:d,inputWasTransposed:p}=gM(i,a,t);if(p){let e=t.dataIdMap.get(u.dataId).id;l=u,s=e}cz("max",c,l.shape.length);let[h,f]=cL(l.shape,c),m=n0(f),g=t.makeOutput(h,i.dtype);if(0!==n0(l.shape)){let e=t.dataIdMap.get(g.dataId).id;V(s,e7[i.dtype],m,e)}if(p&&t.disposeData(u.dataId),o){let e=cB(g.shape,d);g.shape=e}return g}},yc,{kernelName:oN,backendName:"wasm",setupFunc:function(e){H=e.wasm.cwrap(oN,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,a=t.x,o=n.dataIdMap.get(a.dataId).id;nQ("float32"===a.dtype,()=>`Error in MaxPool: only float32 input is supported. Got ${a.dtype}.`);let{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=r,c=uB(a.shape,i,s,1,l,u),d=c.filterHeight,p=c.filterWidth,h=c.padInfo.top,f=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,y=c.dilationHeight,v=c.dilationWidth,b=c.strideHeight,w=c.strideWidth,k=c.inChannels,S=c.outChannels;if("channelsLast"!==c.dataFormat)throw Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);let x=n.makeOutput(c.outShape,"float32"),_=n.dataIdMap.get(x.dataId).id;return H(o,a.shape[0],a.shape[1],a.shape[2],d,p,h,f,m,g,y,v,b,w,k,S,_),x}},{kernelName:oC,backendName:"wasm",setupFunc:function(e){G=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:l,dataFormat:u}=n,c=uz(a.shape,o,i,1,s,l,u),d=r.makeOutput(c.outShape,a.dtype);return G(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),d}},{kernelName:oM,backendName:"wasm",setupFunc:function(e){q=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,input:o}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=n,c=uz(o.shape,i,s,1,l,u),d=r.makeOutput(o.shape,o.dtype);return q(r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),d}},{kernelName:oA,backendName:"wasm",setupFunc:function(e){K=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,input:o}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=n,c=uB(o.shape,i,s,1,l,u),d=r.makeOutput(o.shape,o.dtype);return K(r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left),d}},{kernelName:oR,backendName:"wasm",setupFunc:function(e){Y=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:l}=n;nQ(4===a.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${a.shape.length}.`);let u=[1,1];nQ(uY(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);let c=uB(a.shape,o,i,[1,1],s),d=r.makeOutput(c.outShape,a.dtype),p=r.makeOutput(c.outShape,"int32");return Y(r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(d.dataId).id,r.dataIdMap.get(p.dataId).id,e7[a.dtype],l,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left),[d,p]}},{kernelName:oO,backendName:"wasm",setupFunc:function(e){X=e.wasm.cwrap(oO,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{axis:a,keepDims:o}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,l=s,u=i,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=gM(i,a,t),f=d;if(h){let e=t.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e,f=cj(f.length,u.shape.length))}cz("mean",f,u.shape.length);let[m,g]=cL(u.shape,f),y=n0(g),v=u;"float32"!==u.dtype&&(v=gG({backend:t,inputs:{x:u},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(v.dataId).id);let b=t.makeOutput(m,"float32");if(0!==n0(u.shape)){let e=t.dataIdMap.get(b.dataId).id;X(l,y,e)}if(h&&t.disposeData(c.dataId),o){let e=cB(b.shape,p);b.shape=e}return"float32"!==u.dtype&&t.disposeData(v.dataId),b}},{kernelName:"Min",backendName:"wasm",setupFunc:function(e){Q=e.wasm.cwrap("Min",null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{axis:a,keepDims:o}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,l=s,u=i,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=gM(i,a,t);if(h){let e=t.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e)}cz("min",d,u.shape.length);let[f,m]=cL(u.shape,d),g=n0(m),y=t.makeOutput(f,u.dtype);if(0!==n0(u.shape)){let e=t.dataIdMap.get(y.dataId).id;Q(l,e7[i.dtype],g,e)}if(h&&t.disposeData(c.dataId),o){let e=cB(y.shape,p);y.shape=e}return y}},yd,{kernelName:oD,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:r,attrs:{paddings:n,mode:a}}=e,o=n.map((e,r)=>e[0]+t.shape[r]+e[1]),i=r.dataIdMap.get(t.dataId).id,s=r.makeOutput(o,t.dtype),l=r.dataIdMap.get(s.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),c=n.map(e=>e[0]),d=n.map(e=>e[1]),p=new Uint8Array(new Int32Array(c).buffer),h=new Uint8Array(new Int32Array(d).buffer);return Z(i,u,t.shape.length,e7[t.dtype],p,h,tt[a],l),s},setupFunc:function(e){Z=e.wasm.cwrap(oD,null,["number","array","number","number","array","array","number","number"])}},{kernelName:oP,backendName:"wasm",setupFunc:function(e){ee=e.wasm.cwrap(oP,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{logits:a}=t,{numSamples:o,seed:i,normalized:s}=n;if("float32"!==a.dtype)throw Error(`Tensor logits must have dtype float32, got ${a.dtype}`);let l=s?a:yp({inputs:{logits:a},backend:r,attrs:{dim:a.shape.length-1}}),[u,c]=l.shape,d=r.makeOutput([u,o],"int32");return ee(r.dataIdMap.get(l.dataId).id,u,c,o,i,r.dataIdMap.get(d.dataId).id),s||r.disposeData(l.dataId),d}},yh,yf,ym,{kernelName:oB,backendName:"wasm",setupFunc:function(e){et=e.wasm.cwrap(oB,"number",["number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{iouThreshold:a,maxOutputSize:o,scoreThreshold:i}=n,{boxes:s,scores:l}=r,u=t.dataIdMap.get(s.dataId).id,c=t.dataIdMap.get(l.dataId).id,{pSelectedIndices:d,selectedSize:p,pSelectedScores:h,pValidOutputs:f}=yg(t,et(u,c,o,a,i));return t.wasm._free(h),t.wasm._free(f),t.makeOutput([p],"int32",d)}},{kernelName:oz,backendName:"wasm",setupFunc:function(e){er=e.wasm.cwrap(oz,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{iouThreshold:a,maxOutputSize:o,scoreThreshold:i,padToMaxOutputSize:s}=n,{boxes:l,scores:u}=r,c=t.dataIdMap.get(l.dataId).id,d=t.dataIdMap.get(u.dataId).id,{pSelectedIndices:p,selectedSize:h,pSelectedScores:f,pValidOutputs:m}=yg(t,er(c,d,o,a,i,s));return t.wasm._free(f),[t.makeOutput([h],"int32",p),t.makeOutput([],"int32",m)]}},{kernelName:oW,backendName:"wasm",setupFunc:function(e){en=e.wasm.cwrap(oW,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{iouThreshold:a,maxOutputSize:o,scoreThreshold:i,softNmsSigma:s}=n,{boxes:l,scores:u}=r,c=t.dataIdMap.get(l.dataId).id,d=t.dataIdMap.get(u.dataId).id,{pSelectedIndices:p,selectedSize:h,pSelectedScores:f,pValidOutputs:m}=yg(t,en(c,d,o,a,i,s));return t.wasm._free(m),[t.makeOutput([h],"int32",p),t.makeOutput([h],"float32",f)]}},yy,{kernelName:oj,backendName:"wasm",setupFunc:function(e){ea=e.wasm.cwrap(oj,null,["number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{indices:a}=t,{dtype:o,depth:i,onValue:s,offValue:l}=n,u=r.makeOutput([...a.shape,i],o),c=r.dataIdMap.get(u.dataId).id,d=r.dataIdMap.get(a.dataId).id;return ea(d,i,s,l,c),u}},{kernelName:oU,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:r}=e,n=r.makeOutput(t.shape,t.dtype);return r.typedArrayFromHeap(n).fill(1),n}},{kernelName:oV,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{axis:a}=n;if(1===t.length)return g2({inputs:{input:t[0]},backend:r,attrs:{dim:a}});let o=t[0].shape,i=t[0].dtype;t.forEach(e=>{nZ(o,e.shape,"All tensors passed to stack must have matching shapes"),nQ(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],l=gY({inputs:t.map(e=>{let t=g2({inputs:{input:e},backend:r,attrs:{dim:a}});return s.push(t),t}),backend:r,attrs:{axis:a}});return s.forEach(e=>r.disposeData(e.dataId)),l}},yv,yb,{kernelName:oG,backendName:"wasm",setupFunc:function(e){ei=e.wasm.cwrap(oG,null,["number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r}=e,{x:n,alpha:a}=t,o=r.dataIdMap.get(n.dataId).id,i=r.dataIdMap.get(a.dataId).id,s=o,l=n;"float32"!==n.dtype&&(l=gG({backend:r,inputs:{x:n},attrs:{dtype:"float32"}}),s=r.dataIdMap.get(l.dataId).id);let u=r.makeOutput(n.shape,"float32"),c=r.dataIdMap.get(u.dataId).id;return ei(s,i,c),"float32"!==n.dtype&&r.disposeData(l.dataId),u}},{kernelName:oq,backendName:"wasm",setupFunc:function(e){es=e.wasm.cwrap(oq,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{axis:a,keepDims:o}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,l=s,u=i,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=gM(i,a,t),f=d;if(h){let e=t.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e,f=cj(f.length,u.shape.length))}cz("prod",f,u.shape.length);let[m,g]=cL(u.shape,f),y=n0(g),v=t.makeOutput(m,u.dtype);if(0!==n0(u.shape)){let e=t.dataIdMap.get(v.dataId).id;es(l,y,e7[v.dtype],e)}if(h&&t.disposeData(c.dataId),o){let e=cB(v.shape,p);v.shape=e}return v}},{kernelName:oQ,backendName:"wasm",kernelFunc:e=>{let{backend:t,attrs:r}=e,{start:n,stop:a,step:o,dtype:i}=r,s=yw(n,a,o,i),l=t.makeOutput([s.length],i);return t.typedArrayFromHeap(l).set(s),l}},yk,yS,yx,y_,{kernelName:o1,backendName:"wasm",kernelFunc:gz},{kernelName:o4,backendName:"wasm",setupFunc:function(e){el=e.wasm.cwrap(o4,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let t;let{backend:r,inputs:n,attrs:a}=e,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:l}=a,[u,c]=l,[d,p,h,f]=o.shape,m=[d,u,c,f],g=r.dataIdMap.get(o.dataId);"float32"!==g.dtype&&(t=gG({backend:r,inputs:{x:o},attrs:{dtype:"float32"}}),g=r.dataIdMap.get(t.dataId));let y=g.id,v=r.makeOutput(m,"float32");if(0===n0(o.shape))return v;let b=r.dataIdMap.get(v.dataId).id;return el(y,d,p,h,f,u,c,i?1:0,s?1:0,b),null!=t&&r.disposeData(t.dataId),v}},{kernelName:o6,backendName:"wasm",setupFunc:function(e){eu=e.wasm.cwrap(o6,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){let t;let{inputs:r,backend:n,attrs:a}=e,{images:o,dy:i}=r,{alignCorners:s}=a,l=n.makeOutput(o.shape,"float32"),u=n.dataIdMap.get(o.dataId);return"float32"!==u.dtype&&(t=gG({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),u=n.dataIdMap.get(t.dataId)),eu(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(l.dataId).id,new Uint8Array(new Int32Array(o.shape).buffer),new Uint8Array(new Int32Array(i.shape).buffer),s),null!=t&&n.disposeData(t.dataId),l}},{kernelName:o2,backendName:"wasm",setupFunc:function(e){ec=e.wasm.cwrap(o2,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let t;let{backend:r,inputs:n,attrs:a}=e,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:l}=a,[u,c]=l,[d,p,h,f]=o.shape,m=r.makeOutput([d,u,c,f],"float32");if(0===n0(o.shape))return m;let g=r.dataIdMap.get(o.dataId);"float32"!==g.dtype&&(t=gG({backend:r,inputs:{x:o},attrs:{dtype:"float32"}}),g=r.dataIdMap.get(t.dataId));let y=g.id,v=r.dataIdMap.get(m.dataId).id;return ec(y,d,p,h,f,u,c,i?1:0,s?1:0,v),null!=t&&r.disposeData(t.dataId),m}},{kernelName:o3,backendName:"wasm",setupFunc:function(e){ed=e.wasm.cwrap(o3,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){let t;let{inputs:r,backend:n,attrs:a}=e,{images:o,dy:i}=r,{alignCorners:s}=a,l=n.makeOutput(o.shape,"float32"),u=n.dataIdMap.get(o.dataId);return"float32"!==u.dtype&&(t=gG({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),u=n.dataIdMap.get(t.dataId)),ed(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(l.dataId).id,new Uint8Array(new Int32Array(o.shape).buffer),new Uint8Array(new Int32Array(i.shape).buffer),s),null!=t&&n.disposeData(t.dataId),l}},{kernelName:o8,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{dims:o}=n,i=n4(o,a.shape);if(0===a.shape.length)return gA({inputs:{x:a},backend:r});let s=r.makeOutput(a.shape,a.dtype),l=r.dataIdMap.get(a.dataId).id,u=r.dataIdMap.get(s.dataId).id,c=new Uint8Array(new Int32Array(i).buffer),d=new Uint8Array(new Int32Array(a.shape).buffer);ep(l,c,i.length,d,a.shape.length,u);let p=gz({inputs:{x:s},attrs:{shape:a.shape},backend:r});return r.disposeData(s.dataId),p},setupFunc:function(e){ep=e.wasm.cwrap(o8,null,["number","array","number","array","number","number"])}},{kernelName:iB,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{image:a}=t,{radians:o,fillValue:i,center:s}=n,l=r.makeOutput(a.shape,a.dtype),u=r.dataIdMap.get(a.dataId).id,c=r.dataIdMap.get(l.dataId).id,[d,p,h,f]=a.shape,[m,g]=hQ(s,p,h),y="number"==typeof i?[i,i,i,0===i?0:255]:[...i,255],v=new Uint8Array(new Int32Array(y).buffer);return eh(u,d,p,h,f,o,m,g,v,y.length,c),l},setupFunc:function(e){eh=e.wasm.cwrap(iB,null,["number","number","number","number","number","number","number","number","array","number","number"])}},yI,yE,{kernelName:ie,backendName:"wasm",setupFunc:function(e){ef=e.wasm.cwrap(ie,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{indices:a,updates:o}=r,{shape:i}=n,s=t.makeOutput(i,o.dtype);if(0===n0(i))return s;let{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=ub(o,a,i),h=t.dataIdMap.get(a.dataId).id,f=t.dataIdMap.get(o.dataId).id,m=new Uint8Array(new Int32Array(d).buffer),g=t.dataIdMap.get(s.dataId).id;return ef(h,f,e7[o.dtype],l,u,c,m,p,g),s}},{kernelName:ir,backendName:"wasm",setupFunc:function(e){em=e.wasm.cwrap(ir,null,["number","number","number","number","number","number","bool","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{sortedSequence:a,values:o}=t,{side:i}=n;if(a.dtype!==o.dtype)throw Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${a.dtype} and ${o.dtype}`);let s=r.makeOutput(o.shape,"int32");function l(e){return r.dataIdMap.get(e.dataId).id}return em(l(a),l(o),a.shape[0],a.shape[1],o.shape[1],e7[a.dtype],"left"===i,l(s)),s}},{kernelName:ia,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r}=e,{condition:n,t:a,e:o}=t,i=r.dataIdMap.get(n.dataId).id,s=r.dataIdMap.get(a.dataId).id,l=r.dataIdMap.get(o.dataId).id,u=r.makeOutput(a.shape,a.dtype),c=r.dataIdMap.get(u.dataId).id,d=n.shape.length,p=a.shape.length,h=0===d||d>1||1===p?1:n0(a.shape.slice(1));return eg(i,s,l,h,c),u},setupFunc:function(e){eg=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},yT,{kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){ey=e.wasm.cwrap(iu,null,["number","number"])},kernelFunc:function(e){let{backend:t,inputs:{x:r}}=e,n=t.dataIdMap.get(r.dataId).id,a=t.makeOutput(r.shape,r.dtype),o=t.dataIdMap.get(a.dataId).id;return 0===n0(a.shape)||ey(n,o),a}},yN,yA,yC,{kernelName:ii,backendName:"wasm",kernelFunc:gV},{kernelName:im,backendName:"wasm",setupFunc:function(e){J=e.wasm.cwrap(im,null,["number","number","number","number"])},kernelFunc:yp},yM,{kernelName:ip,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{blockShape:o,paddings:i}=n,s=n0(o),l=[[0,0]];l.push(...i);for(let e=1+o.length;e<a.shape.length;++e)l.push([0,0]);let u=yv.kernelFunc({inputs:{x:a},backend:r,attrs:{paddings:l,constantValue:0}}),c=hZ(u.shape,o,s,!1),d=hJ(c.length,o.length,!1),p=h0(u.shape,o,s,!1),h=gz({inputs:{x:u},backend:r,attrs:{shape:c}}),f=gC({inputs:{x:h},backend:r,attrs:{perm:d}}),m=gz({inputs:{x:f},backend:r,attrs:{shape:p}});return r.disposeData(u.dataId),r.disposeData(h.dataId),r.disposeData(f.dataId),m}},{kernelName:ig,backendName:"wasm",setupFunc:function(e){ev=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let t;let{backend:r,inputs:n}=e,{indices:a,values:o,denseShape:i,defaultValue:s}=n,l=a.shape[0],u=a.shape[1],c=r.readSync(i.dataId)[0],d=[l+c,u],p=r.dataIdMap.get(a.dataId).id,h=r.dataIdMap.get(o.dataId).id,f=r.dataIdMap.get(s.dataId).id,m=r.makeOutput(d,a.dtype),g=r.dataIdMap.get(m.dataId).id,y=r.makeOutput(d.slice(0,1),o.dtype),v=r.dataIdMap.get(y.dataId).id,b=r.makeOutput([c],"bool"),w=r.dataIdMap.get(b.dataId).id,k=r.makeOutput([l],a.dtype),S=r.dataIdMap.get(k.dataId).id,x=r.makeOutput([4],"int32"),_=r.dataIdMap.get(x.dataId).id,I=ev(p,h,e7[o.dtype],l,c,u,f,g,v,w,S,_),E=r.readSync(x.dataId);switch(E[0]){case 1:t=h8(E[1]);break;case 2:t=h7(E[1],E[2]);break;case 3:t=h9(E[1],E[2],E[3]);break;default:t=""}if(r.disposeData(x.dataId),t)throw r.disposeData(m.dataId),r.disposeData(y.dataId),r.disposeData(b.dataId),r.disposeData(k.dataId),Error(t);let T=m,N=y;return I!==d[0]&&(T=gV({inputs:{x:m},attrs:{begin:0,size:[I,u]},backend:r}),N=gV({inputs:{x:y},attrs:{begin:0,size:I},backend:r}),r.disposeData(m.dataId),r.disposeData(y.dataId)),[T,N,b,k]}},{kernelName:iy,backendName:"wasm",setupFunc:function(e){eb=e.wasm.cwrap(iy,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let t;let{backend:r,inputs:n}=e,{inputIndices:a,inputShape:o,newShape:i}=n;if(2!==a.shape.length)throw Error(`Input indices should be a matrix but received shape
        ${a.shape}`);if(1!==o.shape.length)throw Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(1!==i.shape.length)throw Error(`Target shape should be a vector but received shape ${i.shape}`);let s=r.dataIdMap.get(a.dataId).id,l=r.dataIdMap.get(o.dataId).id,u=r.dataIdMap.get(i.dataId).id,c=a.shape[0],d=n0(i.shape),p=r.makeOutput([c,d],a.dtype),h=r.dataIdMap.get(p.dataId).id,f=r.makeOutput([d],i.dtype),m=r.dataIdMap.get(f.dataId).id,g=r.makeOutput([3],"int32"),y=r.dataIdMap.get(g.dataId).id;eb(s,l,u,c,h,m,y);let v=r.readSync(g.dataId);switch(v[0]){case 0:t=fe(v[1],v[2]);break;case 1:t=ft(v[1],v[2]);break;case 2:t=fr();break;case 3:t=fn(Array.from(r.readSync(o.dataId)),Array.from(r.readSync(f.dataId)));break;case 4:t=fa(Array.from(r.readSync(o.dataId)),Array.from(r.readSync(f.dataId)));break;default:t=""}if(r.disposeData(g.dataId),t)throw r.disposeData(p.dataId),r.disposeData(f.dataId),Error(t);return[p,f]}},{kernelName:iv,backendName:"wasm",setupFunc:yR,kernelFunc:function(e){return yO(e,!0)}},{kernelName:ib,backendName:"wasm",setupFunc:yR,kernelFunc:function(e){return yO(e,!1)}},{kernelName:iw,backendName:"wasm",setupFunc:function(e){ek=e.wasm.cwrap(iw,null,["number","number","number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{sparseIndices:a,sparseValues:o,defaultValue:i}=r,{outputShape:s}=n,l=t.makeOutput(s,i.dtype);if(0===n0(s))return l;let{sliceRank:u,numUpdates:c,sliceSize:d,strides:p,outputSize:h}=ub(o,a,s),f=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(o.dataId).id,g=t.dataIdMap.get(i.dataId).id,y=new Uint8Array(new Int32Array(p).buffer),v=t.dataIdMap.get(l.dataId).id;return ek(f,m,o.shape.length,g,e7[i.dtype],u,c,d,y,h,v),l}},{kernelName:ih,backendName:"wasm",kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,{x:a}=t,{numOrSizeSplits:o,axis:i}=r,s=n4(i,a.shape)[0],l=h5(a,o,s),u=Array(a.shape.length).fill(0),c=a.shape.slice();return l.map(e=>{let t=[...c];t[s]=e;let r=gV({inputs:{x:a},attrs:{begin:u,size:t},backend:n});return u[s]+=e,r})}},yF,yD,yP,{kernelName:i$,backendName:"wasm",setupFunc:function(e){eS=e.wasm.cwrap(i$,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{alpha:a}=n,{x:o}=r,i=t.dataIdMap.get(o.dataId).id,s=t.makeOutput(o.shape,o.dtype),l=t.dataIdMap.get(s.dataId).id;return eS(i,a,e7[o.dtype],l),s}},{kernelName:i_,backendName:"wasm",setupFunc:function(e){ex=e.wasm.cwrap(i_,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){let t;let{backend:r,inputs:n,attrs:a}=e,{x:o}=n,{begin:i,end:s,strides:l,beginMask:u,endMask:c,ellipsisMask:d,newAxisMask:p,shrinkAxisMask:h}=a,{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:w,strides:k}=u_(o.shape,i,s,l,u,c,d,p,h);if(g)t=gz({inputs:{x:o},backend:r,attrs:{shape:m}});else if(y||v){nQ(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let e=uw(b,w,k),n=gV({inputs:{x:o},backend:r,attrs:{begin:b,size:e}});t=gz({inputs:{x:n},backend:r,attrs:{shape:m}}),r.disposeData(n.dataId)}else{let e=r.makeOutput(f,"float32"),n=r.dataIdMap.get(o.dataId).id,a=new Uint8Array(new Int32Array(ae(o.shape)).buffer),i=new Uint8Array(new Int32Array(b).buffer),s=new Uint8Array(new Int32Array(w).buffer),l=new Uint8Array(new Int32Array(k).buffer),u=new Uint8Array(new Int32Array(f).buffer),c=new Uint8Array(new Int32Array(ae(f)).buffer),d=r.dataIdMap.get(e.dataId).id;ex(n,a,o.shape.length,i,s,l,u,c,f.length,d),t=gz({inputs:{x:e},backend:r,attrs:{shape:m}}),r.disposeData(e.dataId)}return t}},{kernelName:iI,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{data:a,dataSplits:o}=r,{separator:i,nGramWidths:s,leftPad:l,rightPad:u,padWidth:c,preserveShortSequences:d}=n,[p,h]=yL(t.readSync(a.dataId),t.readSync(o.dataId),i,s,l,u,c,d),f=t.makeOutput([p.length],"string");t.dataIdMap.get(f.dataId).stringBytes=p;let m=t.makeOutput(o.shape,"int32");return t.typedArrayFromHeap(m).set(h),[f,m]}},{kernelName:iE,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{input:a,delimiter:o}=r,{skipEmpty:i}=n,[s,l,u]=yB(t.readSync(a.dataId),t.readSync(o.dataId)[0],i),c=l.length,d=t.makeOutput([c,2],"int32");t.typedArrayFromHeap(d).set(s);let p=t.makeOutput([c],"string");t.dataIdMap.get(p.dataId).stringBytes=l;let h=t.makeOutput([2],"int32");return t.typedArrayFromHeap(h).set(u),[d,p,h]}},{kernelName:iT,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{input:a}=r,{numBuckets:o}=n,i=yz(t.readSync(a.dataId),o),s=t.makeOutput(a.shape,"int32");return t.typedArrayFromHeap(s).set(i),s}},yW,{kernelName:"Sum",backendName:"wasm",setupFunc:function(e){e_=e.wasm.cwrap("Sum",null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{axis:a,keepDims:o}=n,{x:i}=r,s=t.dataIdMap.get(i.dataId).id,l=s,u=i,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=gM(i,a,t),f=d;if(h){let e=t.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e,f=cj(f.length,u.shape.length))}cz("sum",f,u.shape.length);let[m,g]=cL(u.shape,f),y=n0(g),v=t.makeOutput(m,u.dtype);if(0!==n0(u.shape)){let e=t.dataIdMap.get(v.dataId).id;e_(l,y,e7[v.dtype],e)}if(h&&t.disposeData(c.dataId),o){let e=cB(v.shape,p);v.shape=e}return v}},gx("Tan"),gx(iN),{kernelName:it,backendName:"wasm",setupFunc:function(e){eI=e.wasm.cwrap(it,null,["number","number","number","number","number","number","array","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:r,attrs:n}=e,{tensor:a,indices:o,updates:i}=r,{}=n,s=t.makeOutput(a.shape,a.dtype);if(0===n0(a.shape))return s;let{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=ub(i,o,a.shape),h=t.dataIdMap.get(o.dataId).id,f=t.dataIdMap.get(i.dataId).id,m=t.dataIdMap.get(a.dataId).id,g=new Uint8Array(new Int32Array(d).buffer),y=t.dataIdMap.get(s.dataId).id;return eI(h,f,e7[i.dtype],l,u,c,g,p,y,m),s}},{kernelName:iA,backendName:"wasm",setupFunc:function(e){eE=e.wasm.cwrap(iA,null,["number","array","number","array","number","number"])},kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,o=r.dataIdMap.get(a.dataId).id,{reps:i}=n,s=Array(a.shape.length);for(let e=0;e<s.length;e++)s[e]=a.shape[e]*i[e];let l=new Uint8Array(new Int32Array(a.shape).buffer),u=new Uint8Array(new Int32Array(s).buffer),c=r.makeOutput(s,a.dtype),d=r.dataIdMap.get(c.dataId).id;return eE(o,l,a.shape.length,u,s.length,e7[c.dtype],d),c}},{kernelName:iC,backendName:"wasm",setupFunc:function(e){eT=e.wasm.cwrap(iC,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:t,attrs:r})=>{let{x:n}=e,{k:a,sorted:o}=r,i=t.dataIdMap.get(n.dataId).id,s=new Uint8Array(new Int32Array(n.shape).buffer),l=n.shape.slice();l[l.length-1]=a;let u=t.makeOutput(l,n.dtype),c=t.dataIdMap.get(u.dataId).id,d=t.makeOutput(l,"int32"),p=t.dataIdMap.get(d.dataId).id;return eT(i,s,n.shape.length,e7[n.dtype],a,o,c,p),[u,d]}},{kernelName:iM,backendName:"wasm",setupFunc:function(e){eN=e.wasm.cwrap(iM,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){let t;let{backend:r,inputs:n,attrs:a}=e,{image:o,transforms:i}=n,{interpolation:s,fillMode:l,fillValue:u,outputShape:c}=a,[d,p,h,f]=o.shape,[m,g]=null!=c?c:[p,h],y=[d,m,g,f],v=new Uint8Array(new Int32Array(ae(o.shape)).buffer),b=new Uint8Array(new Int32Array(ae(y)).buffer),w=r.makeOutput(y,o.dtype),k=r.dataIdMap.get(w.dataId).id,S=r.dataIdMap.get(o.dataId).id,x=r.dataIdMap.get(i.dataId).id;switch(l){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return eN(S,x,i.shape[0]>1,d,m,g,f,h,p,v,o.shape.length-1,b,y.length-1,"nearest"===s?1:2,t,u,k),w}},{kernelName:iR,backendName:"wasm",kernelFunc:gC,setupFunc:function(e){l=e.wasm.cwrap(iR,null,["number","array","number","number","number","array","number"])}},{kernelName:iO,backendName:"wasm",kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,{axis:a}=r,{x:o}=t,{outputValues:i,outputShape:s,indices:l}=yU(n.readSync(o.dataId),a,o.shape,o.dtype);return[n.makeOutput(s,o.dtype,void 0,i),n.makeOutput([l.length],"int32",void 0,l)]}},{kernelName:iF,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{value:a}=t,{axis:o}=n;o<0&&(o+=a.shape.length);let i=a.shape[o],s=a.shape.length,l=Array(s-1),u=0;for(let e=0;e<s;e++)e!==o&&(l[u++]=a.shape[e]);let c=Array(i),d=Array(s).fill(0),p=a.shape.slice();p[o]=1;for(let e=0;e<c.length;e++)d[o]=e,c[e]=gV({inputs:{x:a},attrs:{begin:d,size:p},backend:r});return c.map(({dataId:e,dtype:t})=>({dataId:e,dtype:t,shape:l}))}},{kernelName:iP,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:r}=e,n=r.makeOutput(t.shape,t.dtype);return r.typedArrayFromHeap(n).fill(0),n}}])iK(e);let yj=ap;yj.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(e){return!1}}),yj.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(yj.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}});var yV=r(135),yH=r.n(yV),yG=r(6743),yq=r(63110),yK=r.n(yq);let yY=yH()||yV,yX=yK()||yq;class yQ extends nq{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(y5),this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new nG(this,sI)}write(e,t,r){let n={id:this.dataIdNextNumber++};return this.move(n,e,t,r,1),n}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){let t=se();return e(),{kernelMs:se()-t}}move(e,t,r,n,a){let o=this.dataIdNextNumber++;if("string"===n){this.dataIdMap.set(e,{id:o,stringBytes:t,shape:r,dtype:n,memoryOffset:null,refCount:a});return}let i=n0(r),s=i*n5(n),l=this.wasm._malloc(s)>>>0;this.dataIdMap.set(e,{id:o,memoryOffset:l,shape:r,dtype:n,refCount:a}),this.wasm.tfjs.registerTensor(o,i,l),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),l)}async read(e){return this.readSync(e)}readSync(e,t,r){let{memoryOffset:n,dtype:a,shape:o,stringBytes:i}=this.dataIdMap.get(e);if("string"===a)return(null==t||0===t)&&(null==r||r>=i.length)?i:i.slice(t,r);t=t||0,r=r||n0(o);let s=n5(a);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw Error(`Unknown dtype ${t}`)}}(this.wasm.HEAPU8.slice(n+t*s,n+r*s).buffer,a)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){let r=this.dataIdMap.get(e);if(r.refCount--,!t&&r.refCount>0)return!1;this.wasm._free(r.memoryOffset),this.wasm.tfjs.disposeData(r.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,r,n){let a;if(null==r)a=this.write(null!=n?n:null,e,t);else{let n=this.dataIdNextNumber++;a={id:n},this.dataIdMap.set(a,{id:n,memoryOffset:r,shape:e,dtype:t,refCount:1});let o=n0(e);this.wasm.tfjs.registerTensor(n,o,r)}return{dataId:a,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:r}){let n=this.wasm.HEAPU8.buffer,{memoryOffset:a}=this.dataIdMap.get(r),o=n0(e);switch(t){case"float32":return new Float32Array(n,a,o);case"int32":return new Int32Array(n,a,o);case"bool":return new Uint8Array(n,a,o);default:throw Error(`Unknown dtype ${t}`)}}}function yZ(e,t,r){if(null!=y1)return y1;let n="tfjs-backend-wasm.wasm";return(e&&t?n="tfjs-backend-wasm-threaded-simd.wasm":e&&(n="tfjs-backend-wasm-simd.wasm"),null!=y3&&null!=y3[n])?y3[n]:r+n}async function yJ(){let[e,t]=await Promise.all([ap.getAsync("WASM_HAS_SIMD_SUPPORT"),ap.getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((r,n)=>{let a;let o={};if(o.locateFile=(r,n)=>{if(r.endsWith(".worker.js")){let e=new Blob([yG.g.replace(/\n/g,"\\n")],{type:"application/javascript"});return URL.createObjectURL(e)}return r.endsWith(".wasm")?yZ(e,t,null!=y2?y2:n):n+r},y6){var i;o.instantiateWasm=(i=yZ(e,t,null!=y2?y2:""),(e,t)=>{var r;return(r={credentials:"same-origin"},ap.platform.fetch(i,r)).then(r=>{r.ok||e.env.a(`failed to load wasm binary file at '${i}'`),r.arrayBuffer().then(r=>{WebAssembly.instantiate(r,e).then(e=>{t(e.instance,e.module)})})}),{}})}let s=!1;o.onAbort=()=>{s||y4||(y4=!0,n({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e&&null==y1?(o.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+yY.toString()],{type:"text/javascript"}),a=yY(o)):a=yX(o),a.then(e=>{s=!0,y4=!1,e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},r({wasm:e})}).catch(n)})}let y0=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],y1=null,y2=null,y3={},y4=!1,y6=!1,y5=-1;lT("wasm",async()=>{let{wasm:e}=await yJ();return new yQ(e)},2);class y8 extends nq{nextDataId(){return y8.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new nG(this,sI)}write(e,t,r){this.firstUse&&(this.firstUse=!1,ap.get("IS_NODE")&&ij("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let n={id:this.nextDataId()};return this.data.set(n,{values:e,dtype:r,refCount:1}),n}makeTensorInfo(e,t,r){let n;if("string"===t&&null!=r&&r.length>0&&n8(r[0])){let a=r.map(e=>st(e));n=this.write(a,e,t)}else n=this.write(r,e,t);return{dataId:n,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){let t=this.data.get(e);t.refCount--}}move(e,t,r,n,a){this.data.set(e,{values:t,dtype:n,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:r}=this.data.get(e);return"complex64"===t?h3(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw Error(`Unknown dtype ${t}`)}(this.data.get(e).values,t)}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let r=t.map(e=>sr(e));return lb(e.shape,e.dtype,r)}catch(e){throw Error("Failed to decode encoded string bytes into utf-8")}return lb(e.shape,e.dtype,t)}makeOutput(e,t,r){return sI.makeTensorFromTensorInfo(this.makeTensorInfo(t,r,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:r}=this.data.get(e);null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=se();return e(),{kernelMs:se()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){gW([e],"where");let t=this.readSync(e.dataId);return pB(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function y7(e){return(t,r,n)=>{let a=n6(r,t.length);for(let r=0;r<t.length;++r)a[r]=e(t[r],n);return a}}function y9(e,t,r){return ve(e,y7(t),r)}function ve(e,t,r){return({inputs:n,attrs:a,backend:o})=>{let i;let{x:s}=n;gW(s,e);let l=o.data.get(s.dataId).values;if("string"===s.dtype){if(!Array.isArray(l))throw Error("String tensor's value was not an instance of Array");i=fc(l)}else i=l;let u=r||s.dtype,c=t(i,u,a);return o.makeTensorInfo(s.shape,u,c)}}y8.nextDataId=0,lT("cpu",()=>new y8,1);let vt=y9("Elu",e=>e>=0?e:Math.exp(e)-1);function vr(e){let{inputs:t,backend:r}=e,{x:n}=t;return r.incRef(n.dataId),{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}function vn(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{alpha:o}=n;gW([a],"leakyRelu");let i=n0(a.shape),s=r.data.get(a.dataId).values,l=n6("float32",i);for(let e=0;e<s.length;e++)l[e]=s[e]<0?o*s[e]:s[e];return r.makeTensorInfo(a.shape,"float32",l)}function va(e){return(t,r,n,a,o)=>{let i=lX(t,r),s=i.length,l=ae(i),u=n6(o,n0(i)),c=t.length,d=r.length,p=ae(t),h=ae(r),f=lY(t,i),m=lY(r,i);if(f.length+m.length===0)for(let t=0;t<u.length;++t)u[t]=e(n[t%n.length],a[t%a.length]);else for(let t=0;t<u.length;++t){let r=as(t,s,l),o=r.slice(-c);f.forEach(e=>o[e]=0);let i=ai(o,c,p),g=r.slice(-d);m.forEach(e=>g[e]=0);let y=ai(g,d,h);u[t]=e(n[i],a[y])}return[u,i]}}let vo=va((e,t)=>e<0?t*e:e);function vi(e){let{inputs:t,backend:r}=e,{x:n,alpha:a}=t;gW([n,a],"prelu");let o=r.data.get(n.dataId).values,i=r.data.get(a.dataId).values,[s,l]=vo(n.shape,a.shape,o,i,"float32");return r.makeTensorInfo(l,"float32",s)}let vs=y9(o0,e=>Math.max(0,e)),vl=y9(o5,e=>Math.min(Math.max(0,e),6));y7(e=>1/(1+Math.exp(-e)));let vu=y9(iu,e=>1/(1+Math.exp(-e)));function vc(e,t,r,n,a){if("linear"===r)return vr({inputs:{x:t},backend:e});if("relu"===r)return vs({inputs:{x:t},backend:e});if("elu"===r)return vt({inputs:{x:t},backend:e});if("relu6"===r)return vl({inputs:{x:t},backend:e});if("prelu"===r)return vi({inputs:{x:t,alpha:n},backend:e});if("leakyrelu"===r)return vn({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===r)return vu({inputs:{x:t},backend:e});throw Error(`Activation ${r} has not been implemented for the CPU backend.`)}function vd(e){let{inputs:t,backend:r}=e,{real:n,imag:a}=t,o=r.data.get(n.dataId).values,i=r.data.get(a.dataId).values,s=r.makeTensorInfo(n.shape,"complex64");return r.data.get(s.dataId).complexTensorInfos={real:r.makeTensorInfo(n.shape,"float32",o),imag:r.makeTensorInfo(a.shape,"float32",i)},s}function vp(e,t,r="float32"){if("complex64"===r)return vd({inputs:{real:vp(e,t,"float32"),imag:vp(e,t,"float32")},backend:e});let n=an(n0(t),r);return e.makeTensorInfo(t,r,n)}function vh(e){let{inputs:t,backend:r}=e,{input:n}=t,a=r.data.get(n.dataId).complexTensorInfos.real,o=r.data.get(a.dataId).values;return r.makeTensorInfo(a.shape,a.dtype,o)}function vf(e){var t;let{inputs:r,backend:n,attrs:a}=e,{x:o}=r,{dtype:i}=a;if("complex64"===i){if("complex64"===o.dtype)return vr({inputs:{x:o},backend:n});let e=vp(n,o.shape,o.dtype),t=vf({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=vd({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){let e=vh({inputs:{input:o},backend:n}),t=vf({inputs:{x:e},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(e),t}if(t=o.dtype,"complex64"===i||"float32"===i&&"complex64"!==t||"int32"===i&&"float32"!==t&&"complex64"!==t||"bool"===i&&"bool"===t){let e=vr({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:i}}let[s,l,u]=function(e,t,r,n){if("int32"===n)return[t,"int32",Int32Array.from(e)];if("bool"===n){let n=i9([0],r),[a,o]=va((e,t)=>e!==t?1:0)(t,[],e,n,"bool");return[o,"bool",a]}throw Error(`Error in Cast: failed to cast ${r} to ${n}`)}(n.data.get(o.dataId).values,o.shape,o.dtype,i);return n.makeTensorInfo(s,l,u)}function vm(e,t,r,n){return null==r?({inputs:r,backend:a})=>{let{a:o,b:i}=r;gW([o,i],e);let s=a.data.get(o.dataId).values,l=a.data.get(i.dataId).values,u="string"===o.dtype?fc(s):s,c="string"===o.dtype?fc(l):l,d=n||o.dtype,[p,h]=t(o.shape,i.shape,u,c,d);return a.makeTensorInfo(h,d,p)}:({inputs:e,backend:a})=>{let{a:o,b:i}=e;if("complex64"===o.dtype||"complex64"===i.dtype){let e=vf({inputs:{x:o},backend:a,attrs:{dtype:"complex64"}}),t=a.data.get(e.dataId),n=t.complexTensorInfos.real,s=t.complexTensorInfos.imag,l=a.data.get(n.dataId).values,u=a.data.get(s.dataId).values,c=vf({inputs:{x:i},backend:a,attrs:{dtype:"complex64"}}),d=a.data.get(c.dataId),p=d.complexTensorInfos.real,h=d.complexTensorInfos.imag,f=a.data.get(p.dataId).values,m=a.data.get(h.dataId).values,[g,y,v]=r(o.shape,i.shape,l,u,f,m),b=a.makeTensorInfo(v,"float32",g),w=a.makeTensorInfo(v,"float32",y),k=vd({inputs:{real:b,imag:w},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(w),k}{let e=a.data.get(o.dataId).values,r=a.data.get(i.dataId).values,s=n||o.dtype,[l,u]=t(o.shape,i.shape,e,r,s);return a.makeTensorInfo(u,s,l)}}}function vg(e){return(t,r,n,a,o,i)=>{let s=lX(t,r),l=n0(s),u=s.length,c=ae(s),d=n6("float32",l),p=n6("float32",l),h=lY(t,s),f=lY(r,s),m=h3(n,a),g=h3(o,i),y=t.length,v=ae(t),b=r.length,w=ae(r);if(h.length+f.length===0)for(let t=0;t<d.length;t++){let r=t%m.length,n=t%g.length,a=e(m[2*r],m[2*r+1],g[2*n],g[2*n+1]);d[t]=a.real,p[t]=a.imag}else for(let t=0;t<d.length;t++){let r=as(t,u,c),n=r.slice(-y);h.forEach(e=>n[e]=0);let a=ai(n,y,v),o=r.slice(-b);f.forEach(e=>o[e]=0);let i=ai(o,b,w),s=e(m[2*a],m[2*a+1],g[2*i],g[2*i+1]);d[t]=s.real,p[t]=s.imag}return[d,p,s]}}let vy=vm("Add",va((e,t)=>e+t),vg((e,t,r,n)=>({real:e+r,imag:t+n})));function vv(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{shape:o}=n,i=n0(a.shape),s=n3(o,i),l=n0(s);nQ(i===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${a.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),r.incRef(a.dataId);let u=r.data.get(a.dataId);if(null!=u.complexTensorInfos){let e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}function vb(e){let{inputs:t,backend:r,attrs:n}=e,{a,b:o}=t,{transposeA:i,transposeB:s}=n;gW([a,o],"matMul");let l=a.shape.length,u=o.shape.length,c=i?a.shape[l-2]:a.shape[l-1],d=s?o.shape[u-1]:o.shape[u-2],p=i?a.shape[l-1]:a.shape[l-2],h=s?o.shape[u-2]:o.shape[u-1],f=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=n0(f),y=n0(m),v=lX(a.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,h]);nQ(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${a.shape} and ${o.shape} and transposeA=${i} and transposeB=${s} must match.`);let b=vv({inputs:{x:a},backend:r,attrs:{shape:i?[g,c,p]:[g,p,c]}}),w=vv({inputs:{x:o},backend:r,attrs:{shape:s?[y,h,d]:[y,d,h]}}),k=i?b.shape[1]:b.shape[2],S=i?b.shape[2]:b.shape[1],x=s?w.shape[1]:w.shape[2],_=Math.max(g,y),I=r.data.get(b.dataId).values,E=r.data.get(w.dataId).values,T=ae(b.shape),N=ae(w.shape),[A,C,M]=i?[T[0],1,T[1]]:[T[0],T[1],1],[R,O,F]=s?[1,N[1],N[0]]:[N[1],1,N[0]],D=S*x,P=lb([_,S,x],b.dtype),$=P.values,L=r.blockSize;for(let e=0;e<_;e++){let t=e%g,r=e%y;for(let n=0;n<S;n+=L){let a=Math.min(n+L,S);for(let o=0;o<x;o+=L){let i=Math.min(o+L,x);for(let s=0;s<k;s+=L){let l=Math.min(s+L,k);for(let u=n;u<a;u++)for(let n=o;n<i;n++){let a=0;for(let e=s;e<l;e++)a+=I[t*A+u*C+e*M]*E[e*R+n*O+r*F];$[e*D+(u*x+n)]+=a}}}}}return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(w),r.makeTensorInfo(v,P.dtype,P.values)}let vw=y9(ag,e=>Math.acos(e)),vk=y9(ay,e=>Math.acosh(e));function vS(e,t,r,n,a){let o=t.length,i=n0(t),s=ae(t),l=ae(a),u=n6(r,n0(a));for(let t=0;t<i;++t){let r=as(t,o,s),a=Array(r.length);for(let e=0;e<a.length;e++)a[e]=r[n[e]];u[ai(a,o,l)]=e[t]}return u}function vx(e){let{inputs:t,attrs:r,backend:n}=e,{x:a}=t,{perm:o}=r;gW(a,"transpose");let i=Array(a.shape.length);for(let e=0;e<i.length;e++)i[e]=a.shape[o[e]];let s=vS(n.data.get(a.dataId).values,a.shape,a.dtype,o,i);return{dataId:n.write(s,i,a.dtype),shape:i,dtype:a.dtype}}let v_=y9(ak,e=>Math.asin(e)),vI=y9(aS,e=>Math.asinh(e)),vE=y9(ax,e=>Math.atan(e)),vT=vm(aI,va((e,t)=>Math.atan2(e,t))),vN=y9(a_,e=>Math.atanh(e));function vA(e,t,r,n,a,o){let i=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,h=a.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=lb(a.outShape,r),g=m.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],v=a.outShape[2]*a.outShape[3],b=a.outShape[3];for(let t=0;t<a.batchSize;++t){let r=t*y,m=t*n[0];for(let t=0;t<a.inChannels;++t)for(let y=0;y<a.outHeight;++y){let w=y*i-p,k=Math.max(0,w),S=Math.min(a.inHeight,c+w),x=r+y*v;for(let r=0;r<a.outWidth;++r){let i=r*s-h,c=Math.max(0,i),p=Math.min(a.inWidth,d+i),y=f,v=0,w=0;for(let r=k;r<S;r+=l){let a=m+r*n[1];for(let r=c;r<p;r+=u){let i=e[a+r*n[2]+t];"max"===o&&i>y?y=i:"avg"===o&&(v+=i,w++)}if(isNaN(y))break}g[x+r*b+t]="avg"===o?v/w:y}}}return m}function vC(e,t,r,n,a=!1,o=!1){let i=lb(n.outShape,"int32"),s=n.strideHeight,l=n.strideWidth,u=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,h=n.padInfo.top,f=n.padInfo.left,m=lb(t,r,e);for(let e=0;e<n.batchSize;++e)for(let t=0;t<n.inChannels;++t)for(let r=0;r<n.outHeight;++r){let g=r*s-h,y=g;for(;y<0;)y+=u;let v=Math.min(n.inHeight,d+g);for(let s=0;s<n.outWidth;++s){let d=s*l-f,h=d;for(;h<0;)h+=c;let b=Math.min(n.inWidth,p+d),w=Number.NEGATIVE_INFINITY,k=-1;for(let r=y;r<v;r+=u){let i=r-g;for(let s=h;s<b;s+=c){let l=s-d,u=m.get(e,r,s,t);u>w&&(w=u,k=a?o?((e*n.inHeight+r)*n.inWidth+s)*n.inChannels+t:(r*n.inWidth+s)*n.inChannels+t:i*p+l)}}i.set(k,e,r,s,t)}}return i}function vM(e,t,r,n,a,o){let i=a.strideDepth,s=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,h=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,y=a.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=lb(a.outShape,r),w=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[2]*a.outShape[3]*a.outShape[4],x=a.outShape[3]*a.outShape[4],_=a.outShape[4];for(let t=0;t<a.batchSize;++t){let r=t*k,b=t*n[0];for(let t=0;t<a.inChannels;++t)for(let k=0;k<a.outDepth;++k){let I=k*i-m,E=I;for(;E<0;)E+=u;let T=Math.min(a.inDepth,p+I),N=r+k*S;for(let r=0;r<a.outHeight;++r){let i=r*s-g,p=i;for(;p<0;)p+=c;let m=Math.min(a.inHeight,h+i),k=N+r*x;for(let r=0;r<a.outWidth;++r){let i=r*l-y,s=i;for(;s<0;)s+=d;let h=Math.min(a.inWidth,f+i),g=k+r*_,S=v,x=0,I=0;for(let r=E;r<T;r+=u){let a=b+r*n[1];for(let r=p;r<m;r+=c){let i=a+r*n[2];for(let r=s;r<h;r+=d){let a=e[i+r*n[3]+t];if("max"===o&&a>S?S=a:"avg"===o&&(x+=a,I++),isNaN(S))break}if(isNaN(S))break}if(isNaN(S))break}w[g+t]="avg"===o?x/Math.max(I,1):S}}}}return b}function vR(e,t,r,n,a){let o=n0(n),i=an(a,r);for(let r=0;r<e.length;r++){let n=e[r];if(n<0)throw Error("Input x must be non-negative!");n>=a||(o>0?i[n]+=t[r]:i[n]+=1)}return i}let vO=vm(aO,va((e,t)=>e&t)),vF=ve(aP,y7(e=>Math.ceil(e))),vD=y9(a$,(e,t)=>e>t.clipValueMax?t.clipValueMax:e<t.clipValueMin?t.clipValueMin:e);function vP(e){let{inputs:t,backend:r}=e,{input:n}=t,a=r.data.get(n.dataId).complexTensorInfos.imag,o=r.data.get(a.dataId).values;return r.makeTensorInfo(a.shape,a.dtype,o)}function v$(e){let{inputs:t,backend:r,attrs:n}=e,{axis:a}=n,o=n4(a,t[0].shape)[0];hY(t.map(e=>e.shape),o);let i=hX(t.map(e=>e.shape),o);if(0===n0(i))return r.makeTensorInfo(i,t[0].dtype,[]);let s=t.filter(e=>n0(e.shape)>0);if(1===s.length)return vr({inputs:{x:s[0]},backend:r});if("complex64"===s[0].dtype){let e=s.map(e=>vh({inputs:{input:e},backend:r})),t=s.map(e=>vP({inputs:{input:e},backend:r})),n=v$({inputs:e,backend:r,attrs:{axis:o}}),a=v$({inputs:t,backend:r,attrs:{axis:o}}),i=vd({inputs:{real:n,imag:a},backend:r});return e.forEach(e=>r.disposeIntermediateTensorInfo(e)),t.forEach(e=>r.disposeIntermediateTensorInfo(e)),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),i}let l=s.map(e=>{let t=n0(e.shape.slice(o));return vv({inputs:{x:e},backend:r,attrs:{shape:[-1,t]}})}),u=l.map(e=>({vals:r.data.get(e.dataId).values,shape:e.shape}));i=hX(l.map(e=>e.shape),1);let c=1===l[0].shape[0],d=gK(u,i,t[0].dtype,c),p=hX(s.map(e=>e.shape),o),h=r.makeTensorInfo(p,t[0].dtype,d);return l.forEach(e=>r.disposeIntermediateTensorInfo(e)),h}function vL(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o}=t,{strides:i,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=n;gW([a,o],"conv2d");let d=uQ(l),p=uW(a.shape,o.shape,i,u,s,c,!1,d),h=p.filterHeight,f=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,y=p.padInfo.left,v=p.padInfo.top,b="channelsLast"===p.dataFormat,w=new sc(p.outShape,a.dtype),k=ae(a.shape),S=ae(o.shape),x=k[0],_=b?k[1]:k[2],I=b?k[2]:1,E=b?1:k[1],T=w.strides[0],N=b?w.strides[1]:w.strides[2],A=b?w.strides[2]:1,C=b?1:w.strides[1],M=r.data.get(a.dataId).values,R=r.data.get(o.dataId).values,O=w.values;for(let e=0;e<p.batchSize;++e){let t=e*x,r=e*T;for(let e=0;e<p.outHeight;++e){let n=r+e*N,a=e*p.strideHeight-v;for(let e=0;e<h;++e){let r=a+e*m;if(r<0||r>=p.inHeight)continue;let o=e*S[0],i=t+r*_;for(let e=0;e<p.outWidth;++e){let t=n+e*A,r=e*p.strideWidth-y;for(let e=0;e<f;++e){let n=r+e*g;if(n<0||n>=p.inWidth)continue;let a=o+e*S[1],s=i+n*I,l=a;for(let e=0;e<p.inChannels;++e){let r=M[s+e*E];for(let e=0;e<p.outChannels;++e)O[t+e*C]+=r*R[l+e];l+=p.outChannels}}}}}}return r.makeTensorInfo(w.shape,w.dtype,O)}let vB=y9("Cos",e=>Math.cos(e)),vz=y9(aq,e=>Math.cosh(e));function vW(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:l,dimRoundingMode:u}=n;gW([a,o],"depthwiseConv2DNative");let c=ae(a.shape),d=ae(o.shape),p=l;null==p&&(p=[1,1]),nQ(uY(i,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${p}'`);let h=uW(a.shape,o.shape,i,p,s,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=h,b=v.left,w=v.top,k=h.outChannels/h.inChannels,S=new sc(h.outShape,a.dtype),x=r.data.get(a.dataId).values,_=r.data.get(o.dataId).values,I=S.values;for(let e=0;e<h.batchSize;++e){let t=e*c[0],r=e*S.strides[0];for(let e=0;e<h.outHeight;++e){let n=r+e*S.strides[1],a=e*h.strideHeight-w;for(let e=0;e<f;++e){let r=a+e*g;if(r<0||r>=h.inHeight)continue;let o=e*d[0],i=t+r*c[1];for(let e=0;e<h.outWidth;++e){let t=n+e*S.strides[2],r=e*h.strideWidth-b;for(let e=0;e<m;++e){let n=r+e*y;if(n<0||n>=h.inWidth)continue;let a=o+e*d[1],s=i+n*h.inChannels,l=t,u=a;for(let e=0;e<h.inChannels;++e){let t=x[s+e];for(let e=0;e<k;++e)I[l+e]+=t*_[u+e];l+=k,u+=k}}}}}}return r.makeTensorInfo(S.shape,S.dtype,S.values)}let vU=va((e,t)=>e*t),vj=vm(o$,vU,vg((e,t,r,n)=>({real:e*r-t*n,imag:e*n+t*r})));function vV(e){let t;let{inputs:r,backend:n,attrs:a}=e,{x:o}=r,{axis:i,keepDims:s}=a;gW(o,"sum");let l=(t="bool"===o.dtype?vf({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):vr({inputs:{x:o},backend:n})).shape.length,u=n4(i,t.shape),c=cW(u,l),d=u,p=t;null!=c&&(p=vx({inputs:{x:t},backend:n,attrs:{perm:c}}),d=cj(d.length,l)),cz("sum",d,p.shape.length);let[h,f]=cL(p.shape,d),m=vp(n,h,sg(p.dtype,"int32")),g=n0(f),y=n.data.get(m.dataId).values,v=n.data.get(p.dataId).values;for(let e=0;e<y.length;++e){let t=e*g,r=0;for(let e=0;e<g;++e)r+=v[t+e];y[e]=r}if(s){let e=cB(m.shape,u),t=m;m=vv({inputs:{x:m},backend:n,attrs:{shape:e}}),n.disposeIntermediateTensorInfo(t)}return n.disposeIntermediateTensorInfo(t),null!=c&&n.disposeIntermediateTensorInfo(p),m}let vH=vm(oe,va((e,t)=>e===t?1:0),null,"bool"),vG=y9("Erf",e=>{let t=Math.sign(e),r=Math.abs(e),n=1/(1+.3275911*r);return t*(1-((((1.061405429*n+-1.453152027)*n+1.421413741)*n+-.284496736)*n+.254829592)*n*Math.exp(-r*r))}),vq=ve("Exp",y7(e=>Math.exp(e)),"float32");function vK(e){let{inputs:t,backend:r,attrs:n}=e,{input:a}=t,{dim:o}=n,i=a.shape.length,s=a.shape.slice(),l=o;return o<0&&(nQ(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),s.splice(l,0,1),vv({inputs:{x:a},backend:r,attrs:{shape:s}})}let vY=ve(or,y7(e=>Math.expm1(e))),vX=vm(a8,va((e,t)=>e/t)),vQ={kernelName:a8,backendName:"cpu",kernelFunc:vX},vZ=vm("Sub",va((e,t)=>e-t),vg((e,t,r,n)=>({real:e-r,imag:t-n})));function vJ(e,t,r){let n=e.shape,a=n[0],o=n[1],i=r.data.get(e.dataId),s=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[a,o],c=n0(u),d=n6("float32",c),p=n6("float32",c);for(let e=0;e<a;e++){let n=gj({inputs:{x:s},backend:r,attrs:{begin:[e,0],size:[1,o]}}),a=gj({inputs:{x:l},backend:r,attrs:{begin:[e,0],size:[1,o]}}),i=vd({inputs:{real:n,imag:a},backend:r}),{real:u,imag:c}=function(e,t,r){let n=n0(e.shape),a=r.data.get(e.dataId),o=r.data.get(a.complexTensorInfos.real.dataId).values,i=r.data.get(a.complexTensorInfos.imag.dataId).values;if((n&n-1)!=0)return function(e){let t=new Float32Array(e.length/2),r=new Float32Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=e[n],r[n/2]=e[n+1];return{real:t,imag:r}}(function(e,t,r){let n=new Float32Array(2*t);for(let s=0;s<t;s++){var a,o,i;let l=0,u=0;for(let n=0;n<t;n++){let a=function(e,t,r){let n=(r?2:-2)*Math.PI*(e/t);return{real:Math.cos(n),imag:Math.sin(n)}}(s*n,t,r),o=h4(e,n);l+=o.real*a.real-o.imag*a.imag,u+=o.real*a.imag+o.imag*a.real}r&&(l/=t,u/=t),a=l,o=u,n[2*(i=s)]=a,n[2*i+1]=o}return n}(h3(o,i),n,t));{let a=function e(t,r,n,a,o){if(1===n)return{real:t,imag:r};let i=h3(t,r),s=n/2,l=function(e){let t=Math.ceil(e.length/4),r=new Float32Array(t),n=new Float32Array(t);for(let t=0;t<e.length;t+=4)r[Math.floor(t/4)]=e[t],n[Math.floor(t/4)]=e[t+1];return{real:r,imag:n}}(i),u=l.real,c=l.imag,d=[u.length],p=o.makeTensorInfo(d,"float32",u),h=o.makeTensorInfo(d,"float32",c),f=vd({inputs:{real:p,imag:h},backend:o}),m=function(e){let t=Math.floor(e.length/4),r=new Float32Array(t),n=new Float32Array(t);for(let t=2;t<e.length;t+=4)r[Math.floor(t/4)]=e[t],n[Math.floor(t/4)]=e[t+1];return{real:r,imag:n}}(i),g=m.real,y=m.imag,v=[g.length],b=o.makeTensorInfo(v,"float32",g),w=o.makeTensorInfo(v,"float32",y),k=vd({inputs:{real:b,imag:w},backend:o}),S=e(u,c,s,a,o),x=S.real,_=S.imag,I=[x.length],E=o.makeTensorInfo(I,"float32",x),T=o.makeTensorInfo(I,"float32",_),N=vd({inputs:{real:E,imag:T},backend:o}),A=e(g,y,s,a,o),C=A.real,M=A.imag,R=[C.length],O=o.makeTensorInfo(R,"float32",C),F=o.makeTensorInfo(R,"float32",M),D=vd({inputs:{real:O,imag:F},backend:o}),P=function(e,t){let r=new Float32Array(e/2),n=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){let o=(t?2:-2)*Math.PI*(a/e);r[a]=Math.cos(o),n[a]=Math.sin(o)}return{real:r,imag:n}}(n,a),$=[P.real.length],L=o.makeTensorInfo($,"float32",P.real),B=o.makeTensorInfo($,"float32",P.imag),z=vd({inputs:{real:L,imag:B},backend:o}),W=vj({inputs:{a:z,b:D},backend:o}),U=vy({inputs:{a:N,b:W},backend:o}),j=vZ({inputs:{a:N,b:W},backend:o}),V=vh({inputs:{input:U},backend:o}),H=vh({inputs:{input:j},backend:o}),G=vP({inputs:{input:U},backend:o}),q=vP({inputs:{input:j},backend:o}),K=v$({inputs:[V,H],backend:o,attrs:{axis:0}}),Y=v$({inputs:[G,q],backend:o,attrs:{axis:0}}),X=o.data.get(K.dataId).values,Q=o.data.get(Y.dataId).values;return o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(U),o.disposeIntermediateTensorInfo(j),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(q),o.disposeIntermediateTensorInfo(K),o.disposeIntermediateTensorInfo(Y),{real:X,imag:Q}}(o,i,n,t,r),s=[e.shape[0],e.shape[1]];if(t){let e=r.makeTensorInfo(s,"float32",a.real),t=r.makeTensorInfo(s,"float32",a.imag),o=r.makeTensorInfo([],"float32",i7(n,"float32")),i=vr({inputs:{x:o},backend:r}),l=vQ.kernelFunc({inputs:{a:e,b:o},backend:r}),u=vQ.kernelFunc({inputs:{a:t,b:i},backend:r}),c=r.data.get(l.dataId).values,d=r.data.get(u.dataId).values;return r.disposeIntermediateTensorInfo(e),r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(u),{real:c,imag:d}}return a}}(i,t,r),h=h3(u,c);for(let t=0;t<o;t++){let r=h4(h,t);d[e*o+t]=r.real,p[e*o+t]=r.imag}r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i)}let h=r.makeTensorInfo(u,"float32",d),f=r.makeTensorInfo(u,"float32",p),m=vd({inputs:{real:h,imag:f},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),m}function v0(e){let{backend:t,attrs:r}=e,{shape:n,value:a,dtype:o}=r,i=o||n7(a),s=n6(i,n0(n));return function(e,t,r){e.fill(t)}(s,a,0),t.makeTensorInfo(n,i,s)}let v1=ve(oo,y7(e=>Math.floor(e))),v2=vm(oi,va((e,t)=>Math.floor(e/t)),null,"int32"),v3=vm(oc,va((e,t)=>e>t?1:0),null,"bool"),v4=vm(od,va((e,t)=>e>=t?1:0),null,"bool"),v6=y9(om,e=>Number.isFinite(e)?1:0,"bool"),v5=y9(og,e=>Math.abs(e)===1/0?1:0,"bool"),v8=y9(oy,e=>Number.isNaN(e)?1:0,"bool"),v7=vm(ob,va((e,t)=>e<t?1:0),null,"bool"),v9=vm(ow,va((e,t)=>e<=t?1:0),null,"bool"),be=ve("Log",y7(e=>Math.log(e))),bt=y9(oS,e=>Math.log1p(e)),br=vm(ox,va((e,t)=>e&&t),null,"bool"),bn=y9(o_,e=>e?0:1,"bool"),ba=vm(oI,va((e,t)=>e||t),null,"bool");function bo(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{reductionIndices:o,keepDims:i}=n,s=a.shape,l=s.length,u=n4(o,s),c=u,d=cW(c,l),p=r.data.get(a.dataId).values;if(null!=d){let e=Array(l);for(let t=0;t<e.length;t++)e[t]=s[d[t]];p=vS(p,s,a.dtype,d,e),c=cj(c.length,l),s=e}gW(a,"max"),cz("max",c,l);let[h,f]=cL(s,c),m=function(e,t,r,n){let a=n6(n,n0(r));for(let r=0;r<a.length;++r){let n=r*t,o=e[n];for(let r=0;r<t;++r){let t=e[n+r];(Number.isNaN(t)||t>o)&&(o=t)}a[r]=o}return a}(p,n0(f),h,a.dtype),g=r.write(m,h,a.dtype),y=h;return i&&(y=cB(h,u)),{dataId:g,shape:y,dtype:a.dtype}}let bi=vm(oT,va((e,t)=>Math.max(e,t))),bs=vm(oF,va((e,t)=>Math.min(e,t))),bl=vm("Mod",va((e,t)=>{let r=e%t;return e<0&&t<0||e>=0&&t>=0?r:(r+t)%t}));function bu(e){let{inputs:t,backend:r,attrs:n}=e,{logits:a}=t,{dim:o}=n,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${s}`);let l=n4([s],a.shape),u=bo({inputs:{x:a},backend:r,attrs:{reductionIndices:l,keepDims:!1}}),c=cB(u.shape,l),d=vv({inputs:{x:u},backend:r,attrs:{shape:c}}),p=vZ({inputs:{a:a,b:d},backend:r}),h=vq({inputs:{x:p},backend:r}),f=vV({inputs:{x:h},backend:r,attrs:{axis:l,keepDims:!1}}),m=vv({inputs:{x:f},backend:r,attrs:{shape:c}}),g=vX({inputs:{a:h,b:m},backend:r});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),g}let bc=vm(oL,va((e,t)=>e!==t?1:0),null,"bool");function bd(e){let{inputs:t,backend:r}=e,{x:n}=t;if("string"===n.dtype)throw Error("zerosLike is not supported for string tensors");if("complex64"!==n.dtype)return v0({backend:r,attrs:{shape:n.shape,value:0,dtype:n.dtype}});{let e=vh({inputs:{input:n},backend:r}),t=bd({inputs:{x:e},backend:r}),a=vP({inputs:{input:n},backend:r}),o=bd({inputs:{x:a},backend:r}),i=vd({inputs:{real:t,imag:o},backend:r});return r.disposeIntermediateTensorInfo(e),r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),i}}function bp(e){let{inputs:t,backend:r,attrs:n}=e,{axis:a}=n;if(1===t.length)return vK({inputs:{input:t[0]},backend:r,attrs:{dim:a}});let o=t[0].shape,i=t[0].dtype;t.forEach(e=>{nZ(o,e.shape,"All tensors passed to stack must have matching shapes"),nQ(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],l=v$({inputs:t.map(e=>{let t=vK({inputs:{input:e},backend:r,attrs:{dim:a}});return s.push(t),t}),backend:r,attrs:{axis:a}});return s.forEach(e=>r.disposeIntermediateTensorInfo(e)),l}let bh={kernelName:oH,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{paddings:o,constantValue:i}=n;gW(a,"pad");let s=o.map((e,t)=>e[0]+a.shape[t]+e[1]),l=o.map(e=>e[0]),u=r.data.get(a.dataId).values,c=n0(a.shape),d=a.shape.length,p=ae(a.shape),h=n0(s),f=s.length,m=ae(s),g=n6(a.dtype,h);0!==i&&g.fill(i);for(let e=0;e<c;e++)g[ai(as(e,d,p).map((e,t)=>e+l[t]),f,m)]=u[e];return{dataId:r.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},bf=vm("Pow",va((e,t)=>Math.pow(e,t)));function bm(e,t){let r=e.slice(0,t);for(;r.length<t;)r.push(1);for(let n=t;n<e.length;n++)r[t-1]*=e[n];return r}var bg=gd;class by{constructor(e,t,r,n,a,o,i,s,l,u){var c;this.shape=e,this.shapeShape=t,this.values=r,this.valuesShape=n,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=i,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=function(e){let t={FIRST_DIM_SIZE:gd.FIRST_DIM_SIZE,VALUE_ROWIDS:gd.VALUE_ROWIDS,ROW_LENGTHS:gd.ROW_LENGTHS,ROW_SPLITS:gd.ROW_SPLITS,ROW_LIMITS:gd.ROW_LIMITS,ROW_STARTS:gd.ROW_STARTS},r=[];for(let n of e)if(n in t)r.push(t[n]);else break;return r}(u),this.raggedRank=0===(c=this.rowPartitionTypes).length?0:c[0]===gd.FIRST_DIM_SIZE?c.length-1:c.length}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===bg.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===bg.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){let t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case bg.VALUE_ROWIDS:return by.getMaxWidthValueRowID(t);case bg.ROW_SPLITS:return by.getMaxWidthRowSplit(t);default:throw Error(`Cannot handle partition type ${bg[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){let t=e.length;if(0===t||1===t)return 0;let r=0;for(let n=0;n<t-1;++n){let t=e[n+1]-e[n];t>r&&(r=t)}return r}static getMaxWidthValueRowID(e){let t=e.length;if(0===t)return 0;let r=0,n=e[0],a=0;for(let o=1;o<t;++o){let t=e[o];t!==n&&(n=t,a=Math.max(o-r,a),r=o)}return Math.max(t-r,a)}tensorShapeFromTensor(e,t,r=!0){if(0===t.length){if(-1===e[0])return[];throw Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return bb(e,r)}calculateOutputSize(e){let t=this.valuesShape;!function(e,t){if(null==e||null==t)return;let r=e.length,n=t.length;if(r>=n)throw Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${r} must be less than ragged tensor input flatValues.rank = ${n})`);for(let a=0;a<Math.min(r,n-1);++a){let r=e[a],n=t[a+1];if(r>=0&&n>=0&&1!==r&&r!==n)throw Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${a-e.length}] = ${r} but ragged tensor input.flatValues.shape[${a-e.length}] = ${n}`)}}(this.defaultValueShape,t);let r=this.tensorShapeFromTensor(this.shape,this.shapeShape),n=function(e,t,r){let n=[];if(null==r&&null==t)return n;if(null==t)for(;n.length<e+r.length;)n.push(-1);else n=t.slice();if(null==r)return n;if(e+r.length!==n.length)throw Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+r.length}, but shape.rank = ${n.length}`);for(let a=1;a<r.length;++a){let o=r[a],i=n[n.length-r.length+a],s=n[i];if(o>=0){if(s>=0){if(s!==o)throw Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${a+e}] = ${o} but shape[${a+e}] = ${s}`)}else n[i]=o}}return n}(this.raggedRank,r,t);n[0]<0&&(n[0]=e);for(let e=1;e<=this.raggedRank;++e)n[e]<0&&(n[e]=this.getMaxWidth(e));return n}calculateFirstParentOutputIndex(e,t,r){let n=Math.min(e,r),a=[],o=0;for(let e=0;e<n;++e,o+=t)a.push(o);for(let t=n;t<e;++t)a.push(-1);return nQ(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,r,n){let a=e.length,o=[];for(let i=0;i<a-1;++i){let a=e[i+1]-e[i],s=Math.min(n,a),l=t[i];-1===l&&(s=0);for(let e=0;e<s;++e)o.push(l),l+=r;for(let e=0;e<a-s;++e)o.push(-1)}if(a>0&&o.length!==e[a-1])throw Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,r,n){let a=e.length,o=[];if(0===a)return[];let i=0,s=e[0];if(s>=t.length)throw Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let l=t[s];o.push(l);for(let u=1;u<a;++u){let a=e[u];if(a===s)l>=0&&(++i<n?l+=r:l=-1);else{if(i=0,s=a,a>=t.length)throw Error(`Got nextValueRowId=${a} which is not less than ${t.length}`);l=t[a]}o.push(l)}if(o.length!==e.length)throw Error("Invalid row ids.");return o}calculateOutputIndex(e,t,r,n){let a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case bg.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,r,n);case bg.ROW_SPLITS:if(a.length-1>t.length)throw Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,r,n);default:throw Error(`Unsupported partition type: ${bg[o]}`)}}getFirstDimensionSize(){let e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw Error("No row_partition_types given.");let t=this.rowPartitionTypes[0];switch(t){case bg.FIRST_DIM_SIZE:return e[0];case bg.VALUE_ROWIDS:throw Error("Cannot handle VALUE_ROWIDS in first dimension.");case bg.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw Error(`Cannot handle type ${bg[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),r=Array(this.raggedRank+1);r[r.length-1]=1;for(let e=r.length-2;e>=0;--e)r[e]=r[e+1]*t[e+1];let n=bb(t,!1),a=n6(this.valuesDType,n0(n));if(r[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,r[0],t[0]);for(let e=1;e<=this.raggedRank;++e)o=this.calculateOutputIndex(e-1,o,r[e],t[e]);this.setOutput(this.raggedRank,o,a,n)}return[n,a]}setOutput(e,t,r,n){if(0===r.length)return;let a=this.values,o=n.slice(),i=n0(o=o.slice(e+1)),s=t.length,l=this.defaultValue;if(l.length!==i&&1!==l.length){let e=this.defaultValueShape;lx(()=>{l=ci(uJ(l,e),o).dataSync()})}let u=0,c=0,d=0;for(let e=0;e<=s;++e){let n=e<s?t[e]:-1;if(n===d){++d;continue}if(c<d){let e=a.subarray(u*i);bv(r.subarray(c*i),e,(d-c)*i)}if(e>=s&&(n=Math.floor(r.length/i)),n>d){if(1===this.defaultValue.length)r.subarray(d*i,n*i).fill(this.defaultValue[0]),d=n;else for(;n>d;)bv(r.slice(d*i),l,i),++d}n<0?(u=e+1,c=d):(u=e,d=(c=d)+1)}}}function bv(e,t,r){for(let n=0;n<r;n++)e[n]=t[n]}function bb(e,t){let r=[];for(let n of e){if(n<0){if(!t)throw Error(`Dimension ${n} must be >= 0`);if(n<-1)throw Error(`Dimension ${n} must be >= -1`);n=-1}r.push(n)}return r}let bw=y9(oJ,e=>1/e),bk=y9(o7,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}),bS=ve(o9,y7(e=>1/Math.sqrt(e)));function bx(e,t,r,n,a,o,i,s,l,u){let c=e.values,d=t.values;if(0===n)return lb(r,t.dtype);let p=l instanceof sc?l:lb([n/a,a],t.dtype);"string"==typeof l?p.values.fill(l):"number"==typeof l?p.values.fill(l):"boolean"==typeof l&&p.values.fill(+l);for(let e=0;e<o;e++){let o=[],l=0;for(let t=0;t<i;t++){let r=c[e*i+t];o.push(r),l+=r*s[t]}if(l<0||l>=n/a)throw Error(`Invalid indices: ${o} does not index into ${r}`);for(let r=0;r<a;r++)u?p.values[l*a+r]+=d[e*a+r]:p.values[l*a+r]=0===t.rank?d[0]:d[e*a+r]}return p}let b_=y9(io,e=>e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)),bI=y9(il,e=>e<0?-1:e>0?1:0),bE=y9("Sin",e=>Math.sin(e)),bT=y9(is,e=>Math.sinh(e)),bN=Math.log(11920928955078125e-23)+2,bA=y9(ic,e=>{let t=Math.exp(e);return e<bN?t:e>-bN?e:Math.log(1+t)});function bC(e,t,r,n,a,o=!1,i=0){let s=n.length,l=[t[0],e.length/t[0]],u=l[1],c=s>0?a[s-1]+1:0;if(c<0)throw Error(fo());let d=t.slice();d[0]=c;let p=n6(r,d.reduce((e,t)=>e*t,1));if(0===s)return c>0&&p.fill(i),[p,d];if(c<=0)throw Error(fo());let h=0,f=1,m=0,g=a[0];for(;;){let t=0;if(f<s){if(g===(t=a[f])){++f;continue}if(g>=t)throw Error(fi())}if(g<0||g>=c)throw Error(fs(g,c));g>m&&p.fill(i,m*u,g*u);for(let t=h;t<f;++t){let r=n[t];if(r<0||r>=l[0])throw Error(fl(t,n[t],l[0]));for(let t=0;t<u;t++)p[g*u+t]+=e[r*u+t]}if(o)for(let e=0;e<u;e++)p[g*u+e]/=f-h;if(h=f,++f,m=g+1,g=t,f>s)break}return m<c&&p.fill(i,m*u,c*u),[p,d]}y7(e=>Math.sqrt(e));let bM=y9(id,e=>Math.sqrt(e)),bR=vm(ik,va((e,t)=>{let r=e-t;return r*r})),bO=ve(ix,y7((e,t)=>{let{pattern:r,replaceGlobal:n,rewrite:a}=t;return e.replace(new RegExp(r,n?"g":""),a)})),bF=y9(i$,(e,t)=>isNaN(e)?NaN:e>0?1:t.alpha),bD=y9("Tan",e=>Math.tan(e)),bP=y9(iN,e=>Math.tanh(e)),b$=(e,t)=>{let r=t.value-e.value;return 0===r?e.index-t.index:r};function bL(e,t,r){switch(r){case"reflect":return function(e,t){let r=e;if(r<0){if(t<=1)r=0;else{let e=2*t;r<e&&(r=e*Math.trunc(-r/e)+r),r=r<-t?r+e:-r-1}}else if(r>t-1){if(t<=1)r=0;else{let e=2*t;(r-=e*Math.trunc(r/e))>=t&&(r=e-r-1)}}return nY(0,r,t-1)}(e,t);case"wrap":let n;return(n=e)<0?t<=1?n=0:n+=t*(Math.trunc(-n/(t-1))+1):n>t-1&&(t<=1?n=0:n-=t*Math.trunc(n/(t-1))),nY(0,n,t-1);case"nearest":return nY(0,e,t-1);default:return e}}function bB(e,t,r,n,a,o,i,s,l,u,c){return 0<=s&&s<t&&0<=l&&l<r?e[i*n+s*a+l*o+u]:c}for(let e of[{kernelName:iz,backendName:"cpu",kernelFunc:function(e){let t,r,n;let{inputs:a,backend:o,attrs:i}=e,{a:s,b:l,bias:u,preluActivationWeights:c}=a,{transposeA:d,transposeB:p,activation:h,leakyreluAlpha:f}=i,m=[];for(let e of(t=vb({inputs:{a:s,b:l},attrs:{transposeA:d,transposeB:p},backend:o}),u&&(r=vy({inputs:{a:t,b:u},backend:o}),m.push(t),t=r),h&&(n=vc(o,t,h,c,f),m.push(t),t=n),m))o.disposeIntermediateTensorInfo(e);return t}},{kernelName:"Abs",backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,r=e.backend;gW(t,"abs");let n=new Float32Array(n0(t.shape));return n=function(e){let t=new Float32Array(e.length);for(let r=0;r<e.length;++r)t[r]=Math.abs(e[r]);return t}(r.data.get(t.dataId).values),r.makeOutput(n,t.shape,t.dtype)}},{kernelName:ag,backendName:"cpu",kernelFunc:vw},{kernelName:ay,backendName:"cpu",kernelFunc:vk},{kernelName:"Add",backendName:"cpu",kernelFunc:vy},{kernelName:av,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e;gW(t,"addN");let n=t.map(e=>r.data.get(e.dataId).values),a=lb(t[0].shape,t[0].dtype),o=a.values;for(let e=0;e<t.length;e++){let t=n[e];for(let e=0;e<o.length;e++)o[e]+=t[e]}return r.makeTensorInfo(a.shape,a.dtype,a.values)}},{kernelName:"All",backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,keepDims:i}=n;gW(a,"all");let s=n4(o,a.shape),l=s,u=cW(l,a.shape.length),c=a;null!=u&&(c=vx({inputs:{x:a},backend:r,attrs:{perm:u}}),l=cj(l.length,a.shape.length)),cz("all",l,c.shape.length);let[d,p]=cL(c.shape,l),h=n0(p),f=an(n0(d),c.dtype),m=r.data.get(c.dataId).values;for(let e=0;e<f.length;++e){let t=e*h,r=m[t];for(let e=0;e<h;++e){let n=m[t+e];r=r&&n}f[e]=r}null!=u&&r.disposeIntermediateTensorInfo(c);let g=r.makeTensorInfo(d,c.dtype,f);if(i){let e=vv({inputs:{x:g},backend:r,attrs:{shape:cB(d,s)}});return r.disposeIntermediateTensorInfo(g),e}return g}},{kernelName:"Any",backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,keepDims:i}=n;gW(a,"any");let s=n4(o,a.shape),l=s,u=cW(l,a.shape.length),c=a;null!=u&&(c=vx({inputs:{x:a},backend:r,attrs:{perm:u}}),l=cj(l.length,a.shape.length)),cz("any",l,c.shape.length);let[d,p]=cL(c.shape,l),h=n0(p),f=an(n0(d),c.dtype),m=r.data.get(c.dataId).values;for(let e=0;e<f.length;++e){let t=e*h,r=m[t];for(let e=0;e<h;++e){let n=m[t+e];r=r||n}f[e]=r}null!=u&&r.disposeIntermediateTensorInfo(c);let g=r.makeTensorInfo(d,c.dtype,f);if(i){let e=vv({inputs:{x:g},backend:r,attrs:{shape:cB(d,s)}});return r.disposeIntermediateTensorInfo(g),e}return g}},{kernelName:ab,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o}=n;gW(a,"argMax");let i=n4(o,a.shape),s=cW(i,a.shape.length),l=a,u=[];null!=s&&(u.push(l=vx({inputs:{x:a},backend:r,attrs:{perm:s}})),i=cj(i.length,l.shape.length)),cz("argMax",i=[i[0]],l.shape.length);let[c,d]=cL(l.shape,i),p=an(n0(c),"int32"),h=n0(d),f=r.data.get(l.dataId).values;for(let e=0;e<p.length;++e){let t=e*h,r=f[t],n=0;for(let e=0;e<h;++e){let a=f[t+e];a>r&&(r=a,n=e)}p[e]=n}return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),r.makeTensorInfo(c,"int32",p)}},{kernelName:aw,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o}=n;gW(a,"argMin");let i=n4(o,a.shape),s=cW(i,a.shape.length),l=a,u=[];null!=s&&(u.push(l=vx({inputs:{x:a},backend:r,attrs:{perm:s}})),i=cj(i.length,l.shape.length)),cz("argMin",i=[i[0]],l.shape.length);let[c,d]=cL(l.shape,i),p=an(n0(c),"int32"),h=n0(d),f=r.data.get(l.dataId).values;for(let e=0;e<p.length;++e){let t=e*h,r=f[t],n=0;for(let e=0;e<h;++e){let a=f[t+e];a<r&&(r=a,n=e)}p[e]=n}return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),r.makeTensorInfo(c,"int32",p)}},{kernelName:ak,backendName:"cpu",kernelFunc:v_},{kernelName:aS,backendName:"cpu",kernelFunc:vI},{kernelName:ax,backendName:"cpu",kernelFunc:vE},{kernelName:aI,backendName:"cpu",kernelFunc:vT},{kernelName:a_,backendName:"cpu",kernelFunc:vN},{kernelName:aE,backendName:"cpu",kernelFunc:function(e){let t;let{inputs:r,backend:n,attrs:a}=e,{x:o}=r;gW(o,"avgPool");let{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=a;nQ(uY(s,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let c=uB(o.shape,i,s,1,l,u);if(1===c.filterWidth&&1===c.filterHeight&&n1(c.inShape,c.outShape))t=vr({inputs:{x:o},backend:n});else{let e=n.data.get(o.dataId).values,r=ae(o.shape),a=vA(e,o.shape,o.dtype,r,c,"avg");t=n.makeTensorInfo(c.outShape,o.dtype,a.values)}return t}},{kernelName:aN,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:l,dataFormat:u}=n;gW(a,"avgPool3d");let c=uz(a.shape,o,i,1,s,l,u),d=vM(r.data.get(a.dataId).values,a.shape,a.dtype,ae(a.shape),c,"avg");return r.makeTensorInfo(d.shape,"float32",d.values)}},{kernelName:aA,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,input:o}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=n;gW([a,o],"avgPool3DGrad");let c=uz(o.shape,i,s,1,l,u),d=c.strideDepth,p=c.strideHeight,h=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,w=c.effectiveFilterDepth,k=c.effectiveFilterHeight,S=c.effectiveFilterWidth,x=w-1-c.padInfo.front,_=S-1-c.padInfo.left,I=k-1-c.padInfo.top,E=lb(o.shape,"float32"),T=1/(f*m*g),N=r.bufferSync(a);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let r=0;r<c.inDepth;++r)for(let n=0;n<c.inHeight;++n)for(let a=0;a<c.inWidth;++a){let o=r-x,i=n-I,s=a-_,l=0;for(let r=0;r<w;r+=y){let n=(o+r)/d;if(!(n<0)&&!(n>=c.outDepth)&&Math.floor(n)===n)for(let r=0;r<k;r+=v){let a=(i+r)/p;if(!(a<0)&&!(a>=c.outHeight)&&Math.floor(a)===a)for(let r=0;r<S;r+=b){let o=(s+r)/h;o<0||o>=c.outWidth||Math.floor(o)!==o||(l+=N.get(e,n,a,o,t))}}}E.set(l*T,e,r,n,a,t)}return r.makeTensorInfo(E.shape,E.dtype,E.values)}},{kernelName:aT,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,input:o}=t;gW([a,o],"avgPoolGrad");let{filterSize:i,strides:s,pad:l}=n,u=uB(o.shape,i,s,1,l),c=u.strideHeight,d=u.strideWidth,p=u.filterHeight,h=u.filterWidth,f=u.dilationHeight,m=u.dilationWidth,g=u.effectiveFilterHeight,y=u.effectiveFilterWidth,v=y-1-u.padInfo.left,b=g-1-u.padInfo.top,w=lb(o.shape,"float32"),k=1/(p*h),S=r.data.get(a.dataId).values,x=lb(a.shape,"float32",S);for(let e=0;e<u.batchSize;++e)for(let t=0;t<u.inChannels;++t)for(let r=0;r<u.inHeight;++r)for(let n=0;n<u.inWidth;++n){let a=r-b,o=n-v,i=0;for(let r=0;r<g;r+=f){let n=(a+r)/c;if(!(n<0)&&!(n>=u.outHeight)&&Math.floor(n)===n)for(let r=0;r<y;r+=m){let a=(o+r)/d;a<0||a>=u.outWidth||Math.floor(a)!==a||(i+=x.get(e,n,a,t))}}w.set(i*k,e,r,n,t)}return r.makeTensorInfo(w.shape,w.dtype,w.values)}},{kernelName:aC,backendName:"cpu",kernelFunc:vb},{kernelName:os,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,scale:o,offset:i,mean:s,variance:l}=t;nQ(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),nQ(null==i||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),nQ(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),gW([a,s,l,o,i],"batchNorm");let{varianceEpsilon:u}=n;null==u&&(u=.001);let c=r.data.get(a.dataId).values,d=r.data.get(s.dataId).values,p=r.data.get(l.dataId).values,h=o?r.data.get(o.dataId).values:new Float32Array([1]),f=i?r.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=f.length,y=h.length,v=p.length,b=d.length,w=0,k=0,S=0,x=0;for(let e=0;e<c.length;++e)m[e]=f[w++]+(c[e]-d[k++])*h[S++]/Math.sqrt(p[x++]+u),w>=g&&(w=0),k>=b&&(k=0),S>=y&&(S=0),x>=v&&(x=0);return r.makeTensorInfo(a.shape,a.dtype,m)}},{kernelName:aM,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{blockShape:o,crops:i}=n;gW([a],"batchToSpaceND");let s=o.reduce((e,t)=>e*t),l=hZ(a.shape,o,s),u=hJ(l.length,o.length),c=h0(a.shape,o,s),d=h1(i,o.length),p=h2(c,i,o.length),h=vv({inputs:{x:a},backend:r,attrs:{shape:l}}),f=vx({inputs:{x:h},backend:r,attrs:{perm:u}}),m=vv({inputs:{x:f},backend:r,attrs:{shape:c}}),g=gj({inputs:{x:m},backend:r,attrs:{begin:d,size:p}});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),g}},{kernelName:aR,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,weights:o}=t,{size:i}=n,s=vR(r.data.get(a.dataId).values,r.data.get(o.dataId).values,o.dtype,o.shape,i);return r.makeTensorInfo([i],o.dtype,s)}},{kernelName:aO,backendName:"cpu",kernelFunc:vO},{kernelName:aF,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{s0:n,s1:a}=t,o=r.data.get(n.dataId).values,i=r.data.get(a.dataId).values,s=lX(Array.from(o),Array.from(i));return r.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},{kernelName:aD,backendName:"cpu",kernelFunc:vf},{kernelName:aP,backendName:"cpu",kernelFunc:vF},{kernelName:a$,backendName:"cpu",kernelFunc:vD},{kernelName:aL,backendName:"cpu",kernelFunc:vd},{kernelName:aB,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,r=e.backend,n=new Float32Array(n0(t.shape)),a=r.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=r.data.get(o.dataId).values,l=r.data.get(i.dataId).values;for(let e=0;e<s.length;e++){let t=s[e],r=l[e];n[e]=Math.hypot(t,r)}return r.makeOutput(n,t.shape,"float32")}},{kernelName:az,backendName:"cpu",kernelFunc:v$},{kernelName:aW,backendName:"cpu",kernelFunc:vL},{kernelName:aU,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,dy:o}=t,{strides:i,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=n;gW([a,o],"conv2dBackpropFilter");let d=uQ(l),p=uW(a.shape,c,i,1,s,u,!1,d),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=p,y="channelsLast"===p.dataFormat,v=new sc(p.filterShape,"float32"),b=p.padInfo.left,w=p.padInfo.top,k=r.data.get(a.dataId).values,S=r.data.get(o.dataId).values,x=new sc(a.shape,a.dtype,k),_=new sc(o.shape,o.dtype,S);for(let e=0;e<m;++e){let t=Math.max(0,Math.ceil((w-e)/h)),r=Math.min(p.outHeight,(p.inHeight+w-e)/h);for(let n=0;n<g;++n){let a=Math.max(0,Math.ceil((b-n)/f)),o=Math.min(p.outWidth,(p.inWidth+b-n)/f);for(let i=0;i<p.inChannels;++i)for(let s=0;s<p.outChannels;++s){let l=0;for(let u=0;u<p.batchSize;++u)for(let c=t;c<r;++c){let t=e+c*h-w;for(let e=a;e<o;++e){let r=n+e*f-b;y?l+=x.get(u,t,r,i)*_.get(u,c,e,s):l+=x.get(u,i,t,r)*_.get(u,s,c,e)}}v.set(l,e,n,i,s)}}}return r.makeTensorInfo(v.shape,v.dtype,v.values)}},{kernelName:aj,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,filter:o}=t,{inputShape:i,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=n;gW([a,o],"conv2dBackpropInput");let d=ae(o.shape),p=ae(a.shape),h=uQ(u),f=uW(i,o.shape,s,1,l,c,!1,h),m=new sc(f.inShape,"float32"),g=m.values,y=r.data.get(a.dataId).values,v=r.data.get(o.dataId).values,[b,w,k]=d,{batchSize:S,filterHeight:x,filterWidth:_,inChannels:I,inHeight:E,inWidth:T,outChannels:N,outHeight:A,outWidth:C,strideHeight:M,strideWidth:R}=f;h=f.dataFormat;let O=x-1-f.padInfo.top,F=_-1-f.padInfo.left,D="channelsLast"===h,P=m.strides[0],$=D?m.strides[1]:m.strides[2],L=D?m.strides[2]:1,B=D?1:m.strides[1],z=p[0],W=D?p[1]:p[2],U=D?p[2]:1,j=D?1:p[1];for(let e=0;e<S;++e)for(let t=0;t<I;++t)for(let r=0;r<E;++r){let n=r-O,a=Math.max(0,Math.ceil(n/M)),o=Math.min(A,(x+n)/M);for(let i=0;i<T;++i){let s=i-F,l=Math.max(0,Math.ceil(s/R)),u=Math.min(C,(_+s)/R),c=0;for(let r=a;r<o;++r){let a=r*M-n;for(let n=l;n<u;++n){let o=n*R-s,i=z*e+W*r+U*n,l=b*(x-1-a)+w*(_-1-o)+k*t;for(let e=0;e<N;++e)c+=y[i+j*e]*v[l+e]}}g[P*e+$*r+L*i+B*t]=c}}return r.makeTensorInfo(m.shape,m.dtype,m.values)}},{kernelName:aV,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:l}=n;gW([a,o],"conv3d");let u=uU(a.shape,o.shape,i,l,s),{filterDepth:c,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,b=g.top,w=new sc(u.outShape,a.dtype),k=r.data.get(a.dataId).values,S=r.data.get(o.dataId).values,x=w.values,_=ae(a.shape),I=ae(o.shape);for(let e=0;e<u.batchSize;++e){let t=e*_[0],r=e*w.strides[0];for(let e=0;e<u.outDepth;++e){let n=r+e*w.strides[1],a=e*u.strideDepth-y;for(let e=0;e<c;++e){let r=a+e*h;if(r<0||r>=u.inDepth)continue;let o=e*I[0],i=t+r*_[1];for(let e=0;e<u.outHeight;++e){let t=n+e*w.strides[2],r=e*u.strideHeight-b;for(let e=0;e<d;++e){let n=r+e*f;if(n<0||n>=u.inHeight)continue;let a=o+e*I[1],s=i+n*_[2];for(let e=0;e<u.outWidth;++e){let r=t+e*u.outChannels,n=e*u.strideWidth-v;for(let e=0;e<p;++e){let t=n+e*m;if(t<0||t>=u.inWidth)continue;let o=a+e*I[2],i=s+t*u.inChannels,l=o;for(let e=0;e<u.inChannels;++e){let t=k[i+e];for(let e=0;e<u.outChannels;++e)x[r+e]+=t*S[l+e];l+=u.outChannels}}}}}}}}return r.makeTensorInfo(w.shape,w.dtype,w.values)}},{kernelName:aH,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,dy:o}=t,{strides:i,pad:s,filterShape:l}=n;gW([a,o],"conv3dBackpropFilterV2");let u=ae(a.shape),c=ae(o.shape),d=uU(a.shape,l,i,1,s),p=d.strideDepth,h=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,y=d.filterWidth,v=new sc(d.filterShape,"float32"),b=v.values,[w,k,S,x]=v.strides,_=r.data.get(o.dataId).values,[I,E,T,N]=c,A=r.data.get(a.dataId).values,[C,M,R,O]=u,F=d.padInfo.front,D=d.padInfo.left,P=d.padInfo.top;for(let e=0;e<m;++e){let t=Math.max(0,Math.ceil((F-e)/p)),r=Math.min(d.outDepth,(d.inDepth+F-e)/p),n=e*w;for(let a=0;a<g;++a){let o=Math.max(0,Math.ceil((P-a)/h)),i=Math.min(d.outHeight,(d.inHeight+P-a)/h),s=a*k+n;for(let n=0;n<y;++n){let l=Math.max(0,Math.ceil((D-n)/f)),u=Math.min(d.outWidth,(d.inWidth+D-n)/f),c=n*S+s;for(let s=0;s<d.inChannels;++s){let m=s*x+c;for(let c=0;c<d.outChannels;++c){let g=0;for(let m=0;m<d.batchSize;++m){let d=m*C,y=m*I;for(let m=t;m<r;++m){let t=(e+m*p-F)*M+d,r=m*E+y;for(let e=o;e<i;++e){let o=(a+e*h-P)*R+t,i=e*T+r;for(let e=l;e<u;++e){let t=(n+e*f-D)*O+o,r=e*N+i;g+=A[t+s]*_[r+c]}}}}b[m+c]=g}}}}}return r.makeTensorInfo(v.shape,v.dtype,v.values)}},{kernelName:aG,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,filter:o}=t,{pad:i,strides:s,inputShape:l}=n;gW([a],"conv3dBackpropInputV2");let u=ae(a.shape),c=ae(o.shape),d=uU(l,o.shape,s,1,i),p=new sc(d.inShape,"float32"),h=p.values,[f,m,g,y]=p.strides,v=r.data.get(a.dataId).values,[b,w,k,S]=u,x=r.data.get(o.dataId).values,[_,I,E,T]=c,{batchSize:N,filterDepth:A,filterHeight:C,filterWidth:M,inChannels:R,inDepth:O,inHeight:F,inWidth:D,outChannels:P,outDepth:$,outHeight:L,outWidth:B,strideDepth:z,strideHeight:W,strideWidth:U}=d,j=A-1-d.padInfo.front,V=C-1-d.padInfo.top,H=M-1-d.padInfo.left;for(let e=0;e<N;++e)for(let t=0;t<R;++t)for(let r=0;r<O;++r){let n=r-j,a=Math.max(0,Math.ceil(n/z)),o=Math.min($,(A+n)/z);for(let i=0;i<F;++i){let s=i-V,l=Math.max(0,Math.ceil(s/W)),u=Math.min(L,(C+s)/W);for(let c=0;c<D;++c){let d=c-H,p=Math.max(0,Math.ceil(d/U)),N=Math.min(B,(M+d)/U),R=0;for(let r=a;r<o;++r){let a=r*z-n;for(let n=l;n<u;++n){let o=n*W-s;for(let i=p;i<N;++i){let s=i*U-d,l=b*e+w*r+k*n+S*i,u=_*(A-1-a)+I*(C-1-o)+E*(M-1-s)+T*t;for(let e=0;e<P;++e)R+=v[l+e]*x[u+e]}}}h[f*e+m*r+g*i+y*c+t]=R}}}return r.makeTensorInfo(p.shape,p.dtype,p.values)}},{kernelName:"Cos",backendName:"cpu",kernelFunc:vB},{kernelName:aq,backendName:"cpu",kernelFunc:vz},{kernelName:aX,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{image:a,boxes:o,boxInd:i}=t,{cropSize:s,method:l,extrapolationValue:u}=n,[c,d,p,h]=a.shape,f=o.shape[0],[m,g]=s,y=lb([f,m,g,h],"float32"),v=r.data.get(o.dataId).values,b=r.data.get(i.dataId).values,w=r.data.get(a.dataId).values,k=ae(a.shape),S=ae(y.shape);for(let e=0;e<f;e++){let t=4*e,r=v[t],n=v[t+1],a=v[t+2],o=v[t+3],i=b[e];if(i>=c)continue;let s=m>1?(a-r)*(d-1)/(m-1):0,f=g>1?(o-n)*(p-1)/(g-1):0;for(let t=0;t<m;t++){let c=m>1?r*(d-1)+t*s:.5*(r+a)*(d-1);if(c<0||c>d-1){for(let r=0;r<g;r++)for(let n=0;n<h;n++){let a=n+r*S[2]+t*S[1]+e*S[0];y.values[a]=u}continue}if("bilinear"===l){let r=Math.floor(c),a=Math.ceil(c),s=c-r;for(let l=0;l<g;l++){let c=g>1?n*(p-1)+l*f:.5*(n+o)*(p-1);if(c<0||c>p-1){for(let r=0;r<h;r++){let n=r+l*S[2]+t*S[1]+e*S[0];y.values[n]=u}continue}let d=Math.floor(c),m=Math.ceil(c),v=c-d;for(let n=0;n<h;n++){let o=n+d*k[2]+r*k[1]+i*k[0],u=w[o],c=w[o=n+m*k[2]+r*k[1]+i*k[0]],p=w[o=n+d*k[2]+a*k[1]+i*k[0]],h=w[o=n+m*k[2]+a*k[1]+i*k[0]],f=u+(c-u)*v,g=p+(h-p)*v;o=n+l*S[2]+t*S[1]+e*S[0],y.values[o]=f+(g-f)*s}}}else for(let r=0;r<g;++r){let a=g>1?n*(p-1)+r*f:.5*(n+o)*(p-1);if(a<0||a>p-1){for(let n=0;n<h;n++){let a=n+r*S[2]+t*S[1]+e*S[0];y.values[a]=u}continue}let s=Math.round(a),l=Math.round(c);for(let n=0;n<h;n++){let a=n+s*k[2]+l*k[1]+i*k[0],o=n+r*S[2]+t*S[1]+e*S[0];y.values[o]=w[a]}}}}return r.makeTensorInfo(y.shape,y.dtype,y.values)}},{kernelName:aK,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,exclusive:i,reverse:s}=n;gW(a,"cumprod");let l=cW([o],a.shape.length),u=a;null!=l&&(u=vx({inputs:{x:a},backend:r,attrs:{perm:l}}));let c=cj(1,a.shape.length)[0];if(c!==u.shape.length-1)throw Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let d=sg(u.dtype,"int32"),p=ar(n0(u.shape),d),h=r.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){let r=m(e,t);if(0===t)p[r]=i?1:h[r];else{let n=m(e,t-1);p[r]=i?h[n]*p[n]:h[r]*p[n]}}let g=r.makeTensorInfo(u.shape,d,p);if(null!=l){let e=vx({inputs:{x:g},backend:r,attrs:{perm:cU(l)}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(u),e}return g}},{kernelName:aY,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,exclusive:i,reverse:s}=n;gW(a,"cumsum");let l=cW([o],a.shape.length),u=a;null!=l&&(u=vx({inputs:{x:a},backend:r,attrs:{perm:l}}));let c=cj(1,a.shape.length)[0];if(c!==u.shape.length-1)throw Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let d=sg(u.dtype,"int32"),p=an(n0(u.shape),d),h=r.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){let r=m(e,t);if(0===t)p[r]=i?0:h[r];else{let n=m(e,t-1);p[r]=i?h[n]+p[n]:h[r]+p[n]}}let g=r.makeTensorInfo(u.shape,d,p);if(null!=l){let e=vx({inputs:{x:g},backend:r,attrs:{perm:cU(l)}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(u),e}return g}},{kernelName:aQ,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,weights:o}=t,{size:i,binaryOutput:s}=n;if(1===a.shape.length){let e=vR(r.data.get(a.dataId).values,r.data.get(o.dataId).values,o.dtype,o.shape,i);return r.makeTensorInfo([i],o.dtype,e)}if(2===a.shape.length){let e=function(e,t,r,n=!1){let a=e.shape[0],o=e.shape[1],i=lb([a,r],t.dtype);for(let s=0;s<a;s++)for(let a=0;a<o;a++){let o=e.get(s,a);if(o<0)throw Error("Input x must be non-negative!");o>=r||(n?i.set(1,s,o):t.size>0?i.set(i.get(s,o)+t.get(s,a),s,o):i.set(i.get(s,o)+1,s,o))}return i}(r.bufferSync(a),r.bufferSync(o),i,s);return r.makeTensorInfo(e.shape,o.dtype,e.values)}throw Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}},{kernelName:aZ,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{blockSize:o,dataFormat:i}=n;nQ("NHWC"===i,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);let s=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],d=l*o,p=u*o,h=c/(o*o),f=r.data.get(a.dataId).values,m=new Float32Array(s*d*p*h),g=0;for(let e=0;e<s;++e)for(let t=0;t<d;++t){let r=Math.floor(t/o),n=t%o;for(let t=0;t<p;++t){let a=Math.floor(t/o),i=t%o,s=(n*o+i)*h;for(let t=0;t<h;++t){let n=t+s+c*(a+u*(r+l*e));m[g++]=f[n]}}}return r.makeTensorInfo([s,d,p,h],a.dtype,m)}},{kernelName:aJ,backendName:"cpu",kernelFunc:vW},{kernelName:a0,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,dy:o}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=n;gW([a,o],"depthwiseConv2dNativeBackpropFilter");let d=uW(a.shape,c,i,s,l,u,!0),{strideHeight:p,strideWidth:h,filterHeight:f,filterWidth:m}=d,g=new sc(d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,b=d.outChannels/d.inChannels,w=r.data.get(a.dataId).values,k=new sc(a.shape,a.dtype,w),S=r.data.get(o.dataId).values,x=new sc(o.shape,o.dtype,S);for(let e=0;e<f;++e){let t=Math.max(0,Math.ceil((v-e)/p)),r=Math.min(d.outHeight,(d.inHeight+v-e)/p);for(let n=0;n<m;++n){let a=Math.max(0,Math.ceil((y-n)/h)),o=Math.min(d.outWidth,(d.inWidth+y-n)/h);for(let i=0;i<d.outChannels;++i){let s=Math.trunc(i/b),l=i%b,u=0;for(let l=0;l<d.batchSize;++l)for(let c=t;c<r;++c){let t=e+c*p-v;for(let e=a;e<o;++e){let r=n+e*h-y;u+=k.get(l,t,r,s)*x.get(l,c,e,i)}}g.set(u,e,n,s,l)}}}return r.makeTensorInfo(g.shape,g.dtype,g.values)}},{kernelName:a1,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,filter:o}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=n;gW([a,o],"depthwiseConv2DNativeBackpropInput");let d=ae(a.shape),p=ae(o.shape),h=uW(c,o.shape,i,s,l,u,!0),f=new sc(h.inShape,"float32"),m=f.values,[g,y,v]=f.strides,b=r.data.get(a.dataId).values,[w,k,S]=d,x=r.data.get(o.dataId).values,[_,I,E]=p,{batchSize:T,filterHeight:N,filterWidth:A,inChannels:C,inHeight:M,inWidth:R,outChannels:O,outHeight:F,outWidth:D,strideHeight:P,strideWidth:$}=h,L=N-1-h.padInfo.top,B=A-1-h.padInfo.left,z=O/C;for(let e=0;e<T;++e)for(let t=0;t<C;++t)for(let r=0;r<M;++r){let n=r-L,a=Math.max(0,Math.ceil(n/P)),o=Math.min(F,(N+n)/P);for(let i=0;i<R;++i){let s=i-B,l=Math.max(0,Math.ceil(s/$)),u=Math.min(D,(A+s)/$),c=0;for(let r=a;r<o;++r){let a=r*P-n;for(let n=l;n<u;++n){let o=n*$-s,i=w*e+k*r+S*n,l=_*(N-1-a)+I*(A-1-o)+E*t;for(let e=0;e<z;++e)c+=b[i+(t*z+e)]*x[l+e]}}m[g*e+y*r+v*i+t]=c}}return r.makeTensorInfo(f.shape,f.dtype,f.values)}},{kernelName:a2,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{x:n}=t,a=n0(n.shape),o=r.data.get(n.dataId).values,i=lb([a,a],n.dtype),s=i.values;for(let e=0;e<o.length;e++)s[e*a+e]=o[e];let l=[...n.shape,...n.shape];return r.makeTensorInfo(l,i.dtype,i.values)}},{kernelName:a3,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:r})=>{let{x:n,filter:a}=e,{strides:o,pad:i,dilations:s}=r,l=t.data.get(n.dataId).values,u=n.shape.length,c=t.data.get(a.dataId).values,d=a.shape.length,{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:x,dilationWidth:_,outShape:I}=uL(n.shape,a.shape,o,i,"NHWC",s),E=n0(I),T=I.length,N=n6(n.dtype,E);for(let e=0;e<p;++e)for(let t=0;t<g;++t){let r=t*b-v.top;for(let o=0;o<y;++o){let i=o*w-v.left;for(let s=0;s<m;++s){let p=Number.MIN_SAFE_INTEGER;for(let t=0;t<k;++t){let o=r+t*x;if(o>=0&&o<h)for(let r=0;r<S;++r){let h=i+r*_;if(h>=0&&h<f){let i=ai([e,o,h,s],u,ae(n.shape)),f=ai([t,r,s],d,ae(a.shape)),m=l[i]+c[f];m>p&&(p=m)}}}N[ai([e,t,o,s],T,ae(I))]=p}}}return{dataId:t.write(i9(N,n.dtype),I,n.dtype),shape:I,dtype:n.dtype}}},{kernelName:a6,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:r})=>{let{x:n,filter:a,dy:o}=e,{strides:i,pad:s,dilations:l}=r,u=at(n.shape,t.data.get(n.dataId).values),c=at(a.shape,t.data.get(a.dataId).values),{batchSize:d,inHeight:p,inWidth:h,inChannels:f,outHeight:m,outWidth:g,padInfo:y,strideHeight:v,strideWidth:b,filterHeight:w,filterWidth:k,dilationHeight:S,dilationWidth:x,outShape:_}=uL(n.shape,a.shape,i,s,"NHWC",l);nQ(o.rank===_.length,()=>`Error in ${a6}, dy must have the same rank as output ${_.length}, but got ${o.rank}`);let I=at(_,t.data.get(o.dataId).values),E=aa(a.shape,a.dtype);for(let e=0;e<d;++e)for(let t=0;t<m;++t){let r=t*v-y.top;for(let n=0;n<g;++n){let a=n*b-y.left;for(let o=0;o<f;++o){let i=Number.MIN_SAFE_INTEGER,s=0,l=0;for(let t=0;t<w;++t){let n=r+t*S;if(n>=0&&n<p)for(let r=0;r<k;++r){let d=a+r*x;if(d>=0&&d<h){let a=u[e][n][d][o]+c[t][r][o];a>i&&(i=a,s=t,l=r)}}}E[s][l][o]+=I[e][t][n][o]}}}return{dataId:t.write(i9(E,n.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:a4,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:r})=>{let{x:n,filter:a,dy:o}=e,{strides:i,pad:s,dilations:l}=r,u=at(n.shape,t.data.get(n.dataId).values),c=at(a.shape,t.data.get(a.dataId).values),{batchSize:d,inHeight:p,inWidth:h,inChannels:f,outHeight:m,outWidth:g,padInfo:y,strideHeight:v,strideWidth:b,filterHeight:w,filterWidth:k,dilationHeight:S,dilationWidth:x,outShape:_}=uL(n.shape,a.shape,i,s,"NHWC",l);nQ(o.rank===_.length,()=>`Error in ${a4}, dy must have the same rank as output ${_.length}, but got ${o.rank}`);let I=at(_,t.data.get(o.dataId).values),E=aa(n.shape,n.dtype);for(let e=0;e<d;++e)for(let t=0;t<m;++t){let r=t*v-y.top;for(let n=0;n<g;++n){let a=n*b-y.left;for(let o=0;o<f;++o){let i=Number.MIN_SAFE_INTEGER,s=r<0?0:r,l=a<0?0:a;for(let t=0;t<w;++t){let n=r+t*S;if(n>=0&&n<p)for(let r=0;r<k;++r){let d=a+r*x;if(d>=0&&d<h){let a=u[e][n][d][o]+c[t][r][o];a>i&&(i=a,s=n,l=d)}}}E[e][s][l][o]+=I[e][t][n][o]}}}return{dataId:t.write(i9(E,n.dtype),n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},{kernelName:a5,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{image:a}=t,{canvas:o,options:i}=n,{contextOptions:s,imageOptions:l}=i||{},u=(null==l?void 0:l.alpha)||1,c=(null==s?void 0:s.contextType)||"2d";if("2d"!==c)throw Error(`Context type ${s.contextType} is not supported by the CPU backend.`);let d=o.getContext(c,(null==s?void 0:s.contextAttributes)||{});if(null==d)throw Error(`Could not get the context with ${c} type.`);let[p,h]=a.shape.slice(0,2),f=2===a.shape.length?1:a.shape[2],m=r.data.get(a.dataId).values,g="float32"===a.dtype?255:1,y=new Uint8ClampedArray(h*p*4);for(let e=0;e<p*h;++e){let t=[0,0,0,255*u];for(let r=0;r<f;r++){let n=m[e*f+r];if("float32"===a.dtype){if(n<0||n>1)throw Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${n}.`)}else if("int32"===a.dtype&&(n<0||n>255))throw Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${n}.`);1===f?(t[0]=n*g,t[1]=n*g,t[2]=n*g):t[r]=n*g}let r=4*e;y[r+0]=Math.round(t[0]),y[r+1]=Math.round(t[1]),y[r+2]=Math.round(t[2]),y[r+3]=Math.round(t[3])}o.width=h,o.height=p;let v=new ImageData(y,h,p);return d.putImageData(v,0,0),a}},{kernelName:a7,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{equation:a}=n,{allDims:o,summedDims:i,idDims:s}=function(e,t){let r=((e=e.replace(/\s/g,"")).length-e.replace(h6,"").length)/2;if(r<1)throw Error("Equations without an arrow are not supported.");if(r>1)throw Error('Equation must contain exactly one arrow ("->").');let[n,a]=e.split("->");nQ(-1===n.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');let o=n.split(","),i=o.length;if(t!==i)throw Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw Error("Support for more than 2 input tensors is not implemented yet.");let s=[];for(let e=0;e<a.length;++e){let t=a[e];if(!o.some(e=>-1!==e.indexOf(t)))throw Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===s.indexOf(t)&&s.push(t)}for(let e=0;e<n.length;++e){let t=n[e];-1===s.indexOf(t)&&","!==t&&s.push(t)}let l=Array(o.length);for(let e=0;e<i;++e){if(new Set(o[e].split("")).size!==o[e].length)throw Error(`Found duplicate axes in input component ${o[e]}. Support for duplicate axes in input is not implemented yet.`);l[e]=[];for(let t=0;t<o[e].length;++t)l[e].push(s.indexOf(o[e][t]))}let u=s.length,c=a.length,d=[];for(let e=c;e<u;++e)d.push(e);return{allDims:s,summedDims:d,idDims:l}}(a,t.length);!function(e,t,r){let n=Array(e);for(let e=0;e<r.length;++e){let a=r[e].shape;for(let r=0;r<t[e].length;++r)void 0===n[t[e][r]]?n[t[e][r]]=a[r]:nQ(n[t[e][r]]===a[r],()=>`Expected dimension ${n[t[e][r]]} at axis ${r} of input shaped ${JSON.stringify(a)}, but got dimension ${a[r]}`)}}(o.length,s,t);let{path:l,steps:u}=function(e,t){let r=[],n=0;0===e.length&&e.push(-1),n=e.length+1;for(let e=0;e<n;++e)r.push([]);let a=[];for(let n=0;n<e.length;++n)for(let o of function(e,t){let r=[];for(let n=0;n<e.length;++n)(0===e[n].length||-1!==e[n].indexOf(t)||-1===t)&&r.push(n);return r}(t,e[n]))-1===a.indexOf(o)&&(r[n].push(o),a.push(o));return{path:e,steps:r}}(i,s),c=u.length,d=null,p=o.length,h=[];for(let e=0;e<c;++e){for(let n of u[e]){let e;let{permutationIndices:a,expandDims:o}=function(e,t){let r=Array(e);r.fill(-1);for(let e=0;e<t.length;++e)r[t[e]]=e;let n=[];for(let t=0;t<e;++t)-1===r[t]&&n.push(t);return{permutationIndices:r=r.filter(e=>-1!==e),expandDims:n}}(p,s[n]);a.every((e,t)=>e===t)?e=t[n]:(e=vx({inputs:{x:t[n]},backend:r,attrs:{perm:a}}),h.push(e));let i=e.shape.slice();for(let e=0;e<o.length;++e)i.splice(o[e],0,1);n1(e.shape,i)||(e=vv({inputs:{x:e},backend:r,attrs:{shape:i}}),h.push(e)),null===d?d=e:(d=vj({inputs:{a:e,b:d},backend:r}),h.push(d))}e<c-1&&(l[e]>=0&&(d=vV({inputs:{x:d},backend:r,attrs:{axis:l[e]-(o.length-p),keepDims:!1}}),h.push(d)),p--)}for(let e of h)e!==d&&r.disposeIntermediateTensorInfo(e);return d}},{kernelName:"Elu",backendName:"cpu",kernelFunc:vt},{kernelName:a9,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{dy:n,y:a}=t;gW([n,a],"eluGrad");let o=new Float32Array(n0(a.shape)),i=r.data.get(a.dataId).values,s=r.data.get(n.dataId).values;for(let e=0;e<i.length;++e){let t=i[e];t>=0?o[e]=s[e]:o[e]=s[e]*(t+1)}return r.makeTensorInfo(a.shape,"float32",o)}},{kernelName:oe,backendName:"cpu",kernelFunc:vH},{kernelName:"Erf",backendName:"cpu",kernelFunc:vG},{kernelName:"Exp",backendName:"cpu",kernelFunc:vq},{kernelName:ot,backendName:"cpu",kernelFunc:vK},{kernelName:or,backendName:"cpu",kernelFunc:vY},{kernelName:"FFT",backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{input:n}=t,a=n0(n.shape),o=n.shape[n.shape.length-1],i=vv({inputs:{x:n},backend:r,attrs:{shape:[a/o,o]}}),s=vJ(i,!1,r),l=vv({inputs:{x:s},backend:r,attrs:{shape:n.shape}});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),l}},{kernelName:on,backendName:"cpu",kernelFunc:v0},{kernelName:oa,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{image:n}=e,a=n6(n.dtype,n0(n.shape)),[o,i,s,l]=n.shape,u=r.data.get(n.dataId).values;for(let e=0;e<o;e++){let t=e*s*i*l;for(let e=0;e<i;e++){let r=s*l*e;for(let e=0;e<s;e++){let n=e*l;for(let o=0;o<l;o++){let i=Math.round(s-e-1),c=t+r+n+o,d=u[c];i>=0&&i<s&&(d=u[t+r+i*l+o]),a[c]=d}}}}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},{kernelName:oo,backendName:"cpu",kernelFunc:v1},{kernelName:oi,backendName:"cpu",kernelFunc:v2},{kernelName:iW,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o,bias:i,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=n,m=vL({inputs:{x:a,filter:o},backend:r,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(i){let e=m;if("NCHW"===c&&1===i.shape.length&&1!==i.shape[0]){let e=vv({inputs:{x:i},backend:r,attrs:{shape:[i.shape[0],1,1]}});m=vy({inputs:{a:m,b:e},backend:r}),r.disposeIntermediateTensorInfo(e)}else m=vy({inputs:{a:m,b:i},backend:r});r.disposeIntermediateTensorInfo(e)}if(h){let e=m;if("NCHW"===c&&"prelu"===h&&1===s.shape.length&&1!==s.shape[0]){let e=vv({inputs:{x:s},backend:r,attrs:{shape:[s.shape[0],1,1]}});m=vc(r,m,h,e,f),r.disposeIntermediateTensorInfo(e)}else m=vc(r,m,h,s,f);r.disposeIntermediateTensorInfo(e)}return m}},{kernelName:iU,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,filter:o,bias:i,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=n,m=vW({inputs:{x:a,filter:o},backend:r,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(i){let e=m;m=vy({inputs:{a:m,b:i},backend:r}),r.disposeIntermediateTensorInfo(e)}if(h){let e=m;m=vc(r,m,h,s,f),r.disposeIntermediateTensorInfo(e)}return m}},{kernelName:ou,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{params:n,indices:a}=t,o=n0(n.shape),i=a.shape,s=i[i.length-1],[l,u,c,d]=uy(n,a);if(0===u)return r.makeTensorInfo(l,n.dtype,[]);let p=function(e,t,r,n,a,o,i,s,l){let u=lb([n,o],r);for(let r=0;r<n;r++){let n=[],c=0;for(let t=0;t<a;t++){let o=e[r*a+t];c+=o*i[t],n.push(o)}if(c<0||c>=l/o)throw Error(`Invalid indices: ${n} does not index into ${s}`);for(let e=0;e<o;e++)u.values[r*o+e]=t.get(...t.indexToLoc(c*o+e))}return u}(r.data.get(a.dataId).values,r.bufferSync(n),n.dtype,u,s,c,d,n.shape,o);return r.makeTensorInfo(l,n.dtype,p.values)}},{kernelName:ol,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,indices:o}=t,{axis:i,batchDims:s}=n;gW([a,o],"gatherV2");let l=n4(i,a.shape)[0],u=r.data.get(o.dataId).values,c=a.shape[l];for(let e=0;e<u.length;++e){let t=u[e];nQ(t<=c-1&&t>=0,()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`)}let d=s;null==s&&(d=0);let p=n0(o.shape),h=fu(a,o,l,d),f=vv({inputs:{x:a},backend:r,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=vv({inputs:{x:o},backend:r,attrs:{shape:[h.batchSize,p/h.batchSize]}}),g=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],y=r.bufferSync(m),v=function(e,t,r){let n=lb(r,e.dtype);for(let r=0;r<n.size;++r){let a=n.indexToLoc(r).slice(),o=a[0],i=a[2],s=t.locToIndex([o,i]);a[2]=t.values[s];let l=e.locToIndex(a);0<=l&&l<e.values.length&&(n.values[r]=e.values[l])}return n}(r.bufferSync(f),y,g);return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),r.makeTensorInfo(h.outputShape,v.dtype,v.values)}},{kernelName:oc,backendName:"cpu",kernelFunc:v3},{kernelName:od,backendName:"cpu",kernelFunc:v4},{kernelName:op,backendName:"cpu",kernelFunc:vr},{kernelName:oh,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{input:n}=t,a=n0(n.shape),o=n.shape[n.shape.length-1],i=vv({inputs:{x:n},backend:r,attrs:{shape:[a/o,o]}}),s=vJ(i,!0,r),l=vv({inputs:{x:s},backend:r,attrs:{shape:n.shape}});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),l}},{kernelName:of,backendName:"cpu",kernelFunc:vP},{kernelName:om,backendName:"cpu",kernelFunc:v6},{kernelName:og,backendName:"cpu",kernelFunc:v5},{kernelName:oy,backendName:"cpu",kernelFunc:v8},{kernelName:ov,backendName:"cpu",kernelFunc:vn},{kernelName:ob,backendName:"cpu",kernelFunc:v7},{kernelName:ow,backendName:"cpu",kernelFunc:v9},{kernelName:ok,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:r}=e,{start:n,stop:a,num:o}=r,i=function(e,t,r){let n=(t-e)/(r-1),a=an(r,"float32");a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+n;return a}(n,a,o);return t.makeTensorInfo([i.length],"float32",i)}},{kernelName:"Log",backendName:"cpu",kernelFunc:be},{kernelName:oS,backendName:"cpu",kernelFunc:bt},{kernelName:ox,backendName:"cpu",kernelFunc:br},{kernelName:o_,backendName:"cpu",kernelFunc:bn},{kernelName:oI,backendName:"cpu",kernelFunc:ba},{kernelName:"LRN",backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{depthRadius:o,bias:i,alpha:s,beta:l}=n;gW(a,"LRN");let u=a.shape[3],c=u-1,d=r.data.get(a.dataId).values,p=n0(a.shape),h=new Float32Array(p);for(let e=0;e<p;e++){let t=function(e){let t=e%u,r=e-t+Math.max(0,t-o),n=e-t+Math.min(t+o,c),a=0;for(;r<=n;r++){let e=d[r];a+=e*e}return a}(e),r=d[e]*Math.pow(i+s*t,-l);h[e]=r}return r.makeTensorInfo(a.shape,a.dtype,h)}},{kernelName:oE,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,y:o,dy:i}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=n;gW(i,"LRNGrad");let d=n0(i.shape),p=i.shape[3],h=r.data.get(i.dataId).values,f=r.data.get(a.dataId).values,m=r.data.get(o.dataId).values,g=new Float32Array(d);for(let e=0;e<d;e++){let t=e%p,r=e-t+Math.max(0,t-s),n=e-t+Math.min(p,t+s+1),a=0;for(let e=r;e<n;e++)a+=Math.pow(f[e],2);a=u*a+l;for(let t=r;t<n;t++){let r=-2*u*c*f[t]*m[e]/a;e===t&&(r+=Math.pow(a,-c)),r*=h[e],g[t]+=r}}return r.makeTensorInfo(i.shape,a.dtype,g)}},{kernelName:"Max",backendName:"cpu",kernelFunc:bo},{kernelName:oT,backendName:"cpu",kernelFunc:bi},{kernelName:oN,backendName:"cpu",kernelFunc:function(e){let t;let{inputs:r,backend:n,attrs:a}=e,{x:o}=r;gW(o,"maxPool");let{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=a;nQ(uY(s,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let c=uB(o.shape,i,s,1,l,u);if(1===c.filterWidth&&1===c.filterHeight&&n1(c.inShape,c.outShape))t=vr({inputs:{x:o},backend:n});else{let e=n.data.get(o.dataId).values,r=ae(o.shape),a=vA(e,o.shape,o.dtype,r,c,"max");t=n.makeTensorInfo(c.outShape,o.dtype,a.values)}return t}},{kernelName:oC,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:l,dataFormat:u}=n;gW(a,"maxPool3d");let c=uz(a.shape,o,i,1,s,l,u),d=vM(r.data.get(a.dataId).values,a.shape,a.dtype,ae(a.shape),c,"max");return r.makeTensorInfo(d.shape,"float32",d.values)}},{kernelName:oM,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,input:o}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:u}=n;gW([a,o],"maxPool3DGrad");let c=uz(o.shape,i,s,1,l,u),d=function(e,t){let r=lb(t.outShape,"int32"),n=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){let v=y*n-p,b=v;for(;b<0;)b+=i;let w=Math.min(t.inDepth,u+v);for(let n=0;n<t.outHeight;++n){let u=n*a-h,p=u;for(;p<0;)p+=s;let k=Math.min(t.inHeight,c+u);for(let a=0;a<t.outWidth;++a){let h=a*o-f,S=h;for(;S<0;)S+=l;let x=Math.min(t.inWidth,d+h),_=Number.NEGATIVE_INFINITY,I=-1;for(let t=b;t<w;t+=i){let r=t-v;for(let n=p;n<k;n+=s){let a=n-u;for(let o=S;o<x;o+=l){let i=o-h,s=e.get(m,t,n,o,g);s>=_&&(_=s,I=r*c*d+a*c+i)}}}r.set(I,m,y,n,a,g)}}}return r}(r.bufferSync(o),c),p=c.strideDepth,h=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterDepth,b=c.effectiveFilterHeight,w=c.effectiveFilterWidth,k=v-1-c.padInfo.front,S=w-1-c.padInfo.left,x=b-1-c.padInfo.top,_=lb(o.shape,"float32"),I=r.bufferSync(a);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let r=0;r<c.inDepth;++r)for(let n=0;n<c.inHeight;++n)for(let a=0;a<c.inWidth;++a){let o=r-k,i=n-x,s=a-S,l=0;for(let r=0;r<v;r+=m){let n=(o+r)/p;if(!(n<0)&&!(n>=c.outDepth)&&Math.floor(n)===n)for(let a=0;a<b;a+=g){let o=(i+a)/h;if(!(o<0)&&!(o>=c.outHeight)&&Math.floor(o)===o)for(let i=0;i<w;i+=y){let u=(s+i)/f;if(u<0||u>=c.outWidth||Math.floor(u)!==u)continue;let p=v*b*w-1-d.get(e,n,o,u,t)===r*b*w+a*w+i?1:0;0!==p&&(l+=I.get(e,n,o,u,t)*p)}}}_.set(l,e,r,n,a,t)}return r.makeTensorInfo(_.shape,_.dtype,_.values)}},{kernelName:oA,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{dy:a,input:o,output:i}=t;gW([o,i],"maxPoolGrad");let{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=n,d=uB(o.shape,s,l,1,u,c),p=r.data.get(o.dataId).values,h=lb(d.outShape,o.dtype,vC(p,o.shape,o.dtype,d).values),f=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,y=d.dilationWidth,v=d.effectiveFilterHeight,b=d.effectiveFilterWidth,w=b-1-d.padInfo.left,k=v-1-d.padInfo.top,S=lb(o.shape,"float32"),x=r.data.get(a.dataId).values,_=lb(a.shape,"float32",x);for(let e=0;e<d.batchSize;++e)for(let t=0;t<d.inChannels;++t)for(let r=0;r<d.inHeight;++r)for(let n=0;n<d.inWidth;++n){let a=r-k,o=n-w,i=0;for(let r=0;r<v;r+=g){let n=(a+r)/f;if(!(n<0)&&!(n>=d.outHeight)&&Math.floor(n)===n)for(let a=0;a<b;a+=y){let s=(o+a)/m;if(s<0||s>=d.outWidth||Math.floor(s)!==s)continue;let l=v*b-1-h.get(e,n,s,t)===r*b+a?1:0;0!==l&&(i+=_.get(e,n,s,t)*l)}}S.set(i,e,r,n,t)}return r.makeTensorInfo(S.shape,S.dtype,S.values)}},{kernelName:oR,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{x:n}=e,{filterSize:a,strides:o,pad:i,includeBatchInIndex:s}=t;gW(n,"MaxPoolWithArgmax");let l=r.data.get(n.dataId).values,u=uB(n.shape,a,o,[1,1],i),[c,d]=function(e,t,r,n,a){let o=ae(t),i=vA(e,t,r,o,a,"max"),s=vC(e,t,r,a,!0,n);return[i.values,s.values]}(l,n.shape,n.dtype,s,u),p=r.write(c,u.outShape,n.dtype),h=r.write(d,u.outShape,n.dtype);return[{dataId:p,shape:u.outShape,dtype:n.dtype},{dataId:h,shape:u.outShape,dtype:"int32"}]}},{kernelName:oO,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,keepDims:i}=n,s=n4(o,a.shape),l=n0(cL(a.shape,s)[1]),u=[],c=r.makeTensorInfo([],"float32",new Float32Array([l]));u.push(c);let d=vf({inputs:{x:a},backend:r,attrs:{dtype:"float32"}});u.push(d);let p=vX({inputs:{a:d,b:c},backend:r});u.push(p);let h=vV({inputs:{x:p},backend:r,attrs:{axis:o,keepDims:i}});return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),h}},{kernelName:"Min",backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,keepDims:i}=n;gW(a,"min");let s=n4(o,a.shape),l=s,u=cW(l,a.shape.length),c=a;null!=u&&(c=vx({inputs:{x:a},backend:r,attrs:{perm:u}}),l=cj(l.length,a.shape.length)),cz("min",l,c.shape.length);let[d,p]=cL(c.shape,l),h=n0(p),f=an(n0(d),c.dtype),m=r.data.get(c.dataId).values;for(let e=0;e<f.length;++e){let t=e*h,r=m[t];for(let e=0;e<h;++e){let n=m[t+e];(Number.isNaN(n)||n<r)&&(r=n)}f[e]=r}null!=u&&r.disposeIntermediateTensorInfo(c);let g=r.makeTensorInfo(d,c.dtype,f);if(i){let e=vv({inputs:{x:g},backend:r,attrs:{shape:cB(d,s)}});return r.disposeIntermediateTensorInfo(g),e}return g}},{kernelName:oF,backendName:"cpu",kernelFunc:bs},{kernelName:oD,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{paddings:o,mode:i}=n;gW(a,"mirrorPad");let s=o.map((e,t)=>e[0]+a.shape[t]+e[1]),l=o.map(e=>e[0]),u=o.map((e,t)=>e[0]+a.shape[t]),c="reflect"===i?0:1,d=r.data.get(a.dataId).values,p=a.shape.length,h=ae(a.shape),f=n0(s),m=s.length,g=ae(s),y=n6(a.dtype,f);for(let e=0;e<f;e++){let t=as(e,m,g);for(let e=0;e<m;e++)t[e]<l[e]?t[e]=2*l[e]-t[e]-c:t[e]>=u[e]&&(t[e]=(u[e]-1)*2-t[e]+c);let r=ai(t=t.map((e,t)=>e-l[t]),p,h);y[e]=d[r]}return{dataId:r.write(y,s,a.dtype),shape:s,dtype:a.dtype}}},{kernelName:"Mod",backendName:"cpu",kernelFunc:bl},{kernelName:oP,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{logits:a}=t,{numSamples:o,seed:i,normalized:s}=n;gW(a,"multinomial");let l=s?a:bu({inputs:{logits:a},backend:r,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=r.data.get(l.dataId).values,p=[u,o],h=an(n0(p),"int32");for(let e=0;e<u;++e){let t=e*c,r=new Float32Array(c-1);r[0]=d[t];for(let e=1;e<r.length;++e)r[e]=r[e-1]+d[t+e];let n=dq.alea(i.toString()),a=e*o;for(let e=0;e<o;++e){let t=n();h[a+e]=r.length;for(let n=0;n<r.length;n++)if(t<r[n]){h[a+e]=n;break}}}return s||r.disposeIntermediateTensorInfo(l),r.makeTensorInfo(p,"int32",h)}},{kernelName:o$,backendName:"cpu",kernelFunc:vj},{kernelName:"Neg",backendName:"cpu",kernelFunc:function(e){var t,r;let{inputs:n,backend:a}=e,{x:o}=n;gW(o,"neg");let[i,s]=(t=a.data.get(o.dataId).values,vU([],o.shape,i7(-1,r=o.dtype),t,r));return a.makeTensorInfo(s,o.dtype,i)}},{kernelName:oB,backendName:"cpu",kernelFunc:function(e){var t;let{inputs:r,backend:n,attrs:a}=e,{boxes:o,scores:i}=r,{maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=a;gW(o,"NonMaxSuppression");let{selectedIndices:c}=(t=n.data.get(o.dataId).values,hc(t,n.data.get(i.dataId).values,s,l,u,0));return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},{kernelName:oz,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=n;gW(a,"NonMaxSuppressionPadded");let{selectedIndices:c,validOutputs:d}=hu(r.data.get(a.dataId).values,r.data.get(o.dataId).values,i,s,l,u);return[r.makeTensorInfo([c.length],"int32",new Int32Array(c)),r.makeTensorInfo([],"int32",new Int32Array([d]))]}},{kernelName:oW,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=n;gW(a,"NonMaxSuppressionWithScore");let{selectedIndices:c,selectedScores:d}=hc(r.data.get(a.dataId).values,r.data.get(o.dataId).values,i,s,l,u,!0);return[r.makeTensorInfo([c.length],"int32",new Int32Array(c)),r.makeTensorInfo([d.length],"float32",new Float32Array(d))]}},{kernelName:oL,backendName:"cpu",kernelFunc:bc},{kernelName:oj,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{indices:a}=t,{dtype:o,depth:i,onValue:s,offValue:l}=n;gW(a,"oneHot");let u=n0(a.shape),c=new Float32Array(u*i);c.fill(l);let d=r.data.get(a.dataId).values;for(let e=0;e<u;++e)d[e]>=0&&d[e]<i&&(c[e*i+d[e]]=s);return r.makeTensorInfo([...a.shape,i],o,c)}},{kernelName:oU,backendName:"cpu",kernelFunc:function e(t){let{inputs:r,backend:n}=t,{x:a}=r;if("string"===a.dtype)throw Error("onesLike is not supported for string tensors");if("complex64"!==a.dtype)return v0({backend:n,attrs:{shape:a.shape,value:1,dtype:a.dtype}});{let t=vh({inputs:{input:a},backend:n}),r=e({inputs:{x:t},backend:n}),o=vP({inputs:{input:a},backend:n}),i=bd({inputs:{x:o},backend:n}),s=vd({inputs:{real:r,imag:i},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),s}}},{kernelName:oV,backendName:"cpu",kernelFunc:bp},bh,{kernelName:"Pow",backendName:"cpu",kernelFunc:bf},{kernelName:oG,backendName:"cpu",kernelFunc:vi},{kernelName:oq,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{axis:o,keepDims:i}=n;gW(a,"prod");let s=a.shape.length,l=n4(o,a.shape),u=cW(l,s),c=l,d=a,p=[];null!=u&&(p.push(d=vx({inputs:{x:a},backend:r,attrs:{perm:u}})),c=cj(c.length,s));let h=r.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=function(e,t,r,n){let[a,o]=cL(e,n),i=sg(t,"int32"),s=an(n0(a),i),l=n0(o);for(let e=0;e<s.length;++e){let t=e*l,n=1;for(let e=0;e<l;++e)n*=r[t+e];s[e]=n}return{outVals:s,outShape:a,outDtype:i}}(d.shape,d.dtype,h,c),y=m;return i&&(y=cB(m,l)),p.forEach(e=>r.disposeIntermediateTensorInfo(e)),r.makeTensorInfo(y,g,f)}},{kernelName:oK,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{paramsNestedSplits:a,paramsDenseValues:o,indices:i}=t,{outputRaggedRank:s}=n,l=a.map(e=>r.data.get(e.dataId).values),u=a.map(e=>e.shape),c=r.data.get(o.dataId).values,d=r.data.get(i.dataId).values,[p,h,f]=function(e,t,r,n,a,o,i,s){if(0===e.length)throw Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw Error("Split tensors must not be scalars");if(!function(e,t,r){e.forEach((e,n)=>{if(e<0||e>=r){let a=as(n,t.length,ae(t)).join(",");throw Error(`indices[${a}] = ${e} is not in [0, ${r})`)}})}(o,i,t[0][0]-1),0===n.length)throw Error("params.rank must be nonzero");let{outSplits:l,valueSlices:u,numValues:c}=function(e,t,r,n){let a=[],o=0,i=Array(t.length-1+r.length).fill(null).map(()=>[0]);!function(e,t){for(let r=0;r<e.length;++r){let n=e[r],a=r===e.length-1?t:e[r+1].length;if(0===n.length)throw Error("Ragged splits may not be empty");if(n[0]<0)throw Error("Ragged splits must be non-negative");if(n[n.length-1]>a)throw Error("Ragged splits must not point past values");for(let e=1;e<n.length;++e)if(n[e-1]>n[e])throw Error("Ragged splits must be sorted in ascending order")}}(r,n);let s=1;for(let e=0;e<t.length-1;++e){s*=t[e];let r=t[e+1];for(let t=1;t<s+1;++t)i[e].push(t*r)}for(let n=0;n<e.length;++n){let s=e[n],l=e[n]+1;for(let e=0;e<r.length;++e){let n=r[e],a=e+t.length-1;if(a>=0){let e=i[a],t=e[e.length-1]-n[s];for(let e=s;e<l;++e)i[a].push(n[e+1]+t)}s=n[s],l=n[l]}l!==s&&(a.push([s,l]),o+=l-s)}return{outSplits:i,valueSlices:a,numValues:o}}(o,i,e,n[0]),d=function(e){let t=[];for(let r=0;r<e.length;++r){let n=n6("int32",e[r].length);t.push(n),e[r].forEach((e,t)=>n[t]=e)}return t}(l),p=function(e,t,r,n,a){let o=t.slice();o[0]=a;let i=n6(r,n0(o)),s=e.length,l=0===s?0:s/t[0];return!function(e,t,r,n,a,o){let i=bm(t,2)[1],s=bm(o,2)[1],l=0;for(let t of r)for(let r=t[0];r<t[1];++r){for(let t=0;t<n;++t)a[l*s+t]=e[r*i+t];++l}}(e,t,n,l,i,o),[i,o]}(r,n,a,u,c);return[d,p[0],p[1]]}(l,u,c,o.shape,o.dtype,d,i.shape,0),m=p.map(e=>r.makeTensorInfo([e.length],"int32",e)),g=r.makeTensorInfo(f,o.dtype,h);return m.concat([g])}},{kernelName:oY,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{starts:n,limits:a,deltas:o}=t,i=r.data.get(n.dataId).values,s=r.data.get(a.dataId).values,l=r.data.get(o.dataId).values,[u,c]=function(e,t,r,n,a,o,i){if(t.length>1)throw Error("starts must be a scalar or vector");if(a.length>1)throw Error("limits must be a scalar or vector");if(i.length>1)throw Error("deltas must be a scalar or vector");let s=0===t.length,l=0===a.length,u=0===i.length,c=[];s||c.push(t[0]),l||c.push(a[0]),u||c.push(i[0]);for(let e=1;e<c.length;++e)if(c[e]!==c[e-1])throw Error("starts, limits, and deltas must have the same shape");let d=0===c.length?1:c[0],p=n6("int32",d+1);p[0]=0;for(let t=0;t<d;++t){let r;let a=s?e[0]:e[t],i=l?n[0]:n[t],c=u?o[0]:o[t];if(0===c)throw Error("Requires delta != 0");if(c>0&&i<a||c<0&&i>a)r=0;else if((r=Math.ceil(Math.abs((i-a)/c)))>2147483647)throw Error("Requires ((limit - start) / delta) <= 2147483647");p[t+1]=p[t]+r}let h=n6(r,p[d]),f=0;for(let t=0;t<d;++t){let r=p[t+1]-p[t],n=s?e[0]:e[t],a=u?o[0]:o[t];for(let e=0;e<r;++e)h[f++]=n,n+=a}return[p,h]}(i,n.shape,n.dtype,s,a.shape,l,o.shape);return[r.makeTensorInfo([u.length],"int32",u),r.makeTensorInfo([c.length],n.dtype,c)]}},{kernelName:oX,backendName:"cpu",kernelFunc:function(e){var t,r;let{inputs:n,backend:a,attrs:o}=e,{shape:i,values:s,defaultValue:l,rowPartitionTensors:u}=n,{rowPartitionTypes:c}=o,d=a.data.get(i.dataId).values,p=a.data.get(s.dataId).values,h=a.data.get(l.dataId).values,f=u.map(e=>a.data.get(e.dataId).values),m=u.map(e=>e.shape),[g,y]=(t=i.shape,r=s.shape,new by(d,t,p,r,s.dtype,h,l.shape,f,m,c).compute());return a.makeTensorInfo(g,s.dtype,y)}},{kernelName:oQ,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:r}=e,{start:n,stop:a,dtype:o,step:i}=r,s=yw(n,a,i,o);return t.makeTensorInfo([s.length],o,s)}},{kernelName:oZ,backendName:"cpu",kernelFunc:vh},vQ,{kernelName:oJ,backendName:"cpu",kernelFunc:bw},{kernelName:o0,backendName:"cpu",kernelFunc:vs},{kernelName:o5,backendName:"cpu",kernelFunc:vl},{kernelName:o1,backendName:"cpu",kernelFunc:vv},{kernelName:o4,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{images:a}=t,{alignCorners:o,halfPixelCenters:i,size:s}=n;gW(a,"resizeBilinear");let l=ae(a.shape),[u,c]=s,[d,p,h,f]=a.shape,m=r.data.get(a.dataId).values,g=new Float32Array(n0([d,u,c,f])),y=[o&&u>1?p-1:p,o&&c>1?h-1:h],v=[o&&u>1?u-1:u,o&&c>1?c-1:c],b=0,w=y[0]/v[0],k=y[1]/v[1];for(let e=0;e<d;e++)for(let t=0;t<u;t++){let r;let n=Math.max(0,Math.floor(r=i?w*(t+.5)-.5:w*t)),a=r-n,o=Math.min(p-1,Math.ceil(r)),s=e*l[0]+n*l[1],u=e*l[0]+o*l[1];for(let e=0;e<c;e++){let t;let r=Math.max(0,Math.floor(t=i?k*(e+.5)-.5:k*e)),n=t-r,o=Math.min(h-1,Math.ceil(t)),c=s+r*l[2],d=u+r*l[2],p=s+o*l[2],y=u+o*l[2];for(let e=0;e<f;e++){let t=m[c+e],r=m[d+e],o=m[p+e],i=m[y+e],s=t+(o-t)*n,l=s+(r+(i-r)*n-s)*a;g[b++]=l}}}return r.makeTensorInfo([d,u,c,f],"float32",g)}},{kernelName:o6,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{images:a,dy:o}=t,{alignCorners:i}=n;gW([o,a],"resizeBilinearGrad");let s=ae(a.shape),[l,u,c,d]=a.shape,[,p,h]=o.shape,f=new Float32Array(l*u*c*d),m=[i&&p>1?u-1:u,i&&h>1?c-1:c],g=[i&&p>1?p-1:p,i&&h>1?h-1:h],y=m[0]/g[0],v=m[1]/g[1],b=r.data.get(o.dataId).values,w=0;for(let e=0;e<l;e++){let t=e*s[0];for(let e=0;e<p;e++){let r=e*y,n=Math.floor(r),a=Math.min(Math.ceil(r),u-1),o=t+n*s[1],i=t+a*s[1],l=r-n,p=1-l;for(let e=0;e<h;e++){let t=e*v,r=Math.floor(t),n=Math.min(Math.ceil(t),c-1),a=t-r,u=1-a,h=o+r*s[2],m=o+n*s[2],g=i+r*s[2],y=i+n*s[2],k=p*u,S=p*a,x=l*u,_=l*a;for(let e=0;e<d;e++){let t=b[w++];f[h+e]+=t*k,f[m+e]+=t*S,f[g+e]+=t*x,f[y+e]+=t*_}}}}return r.makeTensorInfo([l,c,u,d],"float32",f)}},{kernelName:o2,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{images:a}=t,{alignCorners:o,halfPixelCenters:i,size:s}=n;gW(a,"resizeNearestNeighbor");let l=ae(a.shape),[u,c]=s,[d,p,h,f]=a.shape,m=r.data.get(a.dataId).values,g=new Float32Array(d*u*c*f),y=[o&&u>1?p-1:p,o&&c>1?h-1:h],v=[o&&u>1?u-1:u,o&&c>1?c-1:c],b=y[0]/v[0],w=y[1]/v[1],k=0;for(let e=0;e<d;e++){let t=e*l[0];for(let e=0;e<u;e++){let r=i?b*(e+.5):b*e,n=Math.min(p-1,o?Math.round(r):Math.floor(r));i&&(n=Math.max(0,n));let a=t+n*l[1];for(let e=0;e<c;e++){let t=i?w*(e+.5):w*e,r=Math.min(h-1,o?Math.round(t):Math.floor(t));i&&(r=Math.max(0,r));let n=a+r*l[2];for(let e=0;e<f;e++){let t=m[n+e];g[k++]=t}}}}return r.makeTensorInfo([d,u,c,f],a.dtype,g)}},{kernelName:o3,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{images:a,dy:o}=t,{alignCorners:i}=n;gW([o,a],"resizeNearestNeighborGrad");let s=ae(a.shape),l=ae(o.shape),[u,c,d,p]=a.shape,[,h,f]=o.shape,m=new Float32Array(u*c*d*p),g=r.data.get(o.dataId).values,y=[i&&h>1?c-1:c,i&&f>1?d-1:d],v=[i&&h>1?h-1:h,i&&f>1?f-1:f],b=y[0]/v[0],w=y[1]/v[1],k=1/b,S=1/w,x=2*Math.ceil(k)+2,_=2*Math.ceil(S)+2;for(let e=0;e<u;e++){let t=e*s[0];for(let e=0;e<c;e++){let r=t+e*s[1],n=Math.floor(Math.floor(e*k)-x/2);for(let a=0;a<d;a++){let o=r+a*s[2],u=Math.floor(Math.floor(a*S)-_/2);for(let r=0;r<p;r++){let s=0;for(let o=0;o<x;o++){let p=o+n;if(p<0||p>=h)continue;let m=t+p*l[1],y=p*b;if(e===Math.min(c-1,i?Math.round(y):Math.floor(y)))for(let e=0;e<_;e++){let t=e+u;if(t<0||t>=f)continue;let n=m+t*l[2],o=t*w;a===Math.min(d-1,i?Math.round(o):Math.floor(o))&&(s+=g[n+r])}}m[o+r]=s}}}}return r.makeTensorInfo(a.shape,a.dtype,m)}},{kernelName:o8,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{dims:o}=n;gW(a,"reverse");let i=a.shape.length,s=n4(o,a.shape);if(0===i)return vr({inputs:{x:a},backend:r});let l=new sc(a.shape,a.dtype),u=r.bufferSync(a);for(let e=0;e<l.size;e++){let t=l.indexToLoc(e),r=t.slice();s.forEach(e=>r[e]=a.shape[e]-1-r[e]),l.set(u.get(...r),...t)}return r.makeTensorInfo(l.shape,l.dtype,l.values)}},{kernelName:iB,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:r})=>{let{image:n}=e,{radians:a,fillValue:o,center:i}=t,s=n6(n.dtype,n0(n.shape)),[l,u,c,d]=n.shape,[p,h]=hQ(i,u,c),f=Math.sin(a),m=Math.cos(a),g=r.data.get(n.dataId).values;for(let e=0;e<l;e++){let t=e*c*u*d;for(let e=0;e<u;e++){let r=c*d*e;for(let n=0;n<c;n++){let a=n*d;for(let i=0;i<d;i++){let y=[l,e,n,i],v=y[2],b=y[1],w=(v-p)*m-(b-h)*f,k=(v-p)*f+(b-h)*m;w=Math.round(w+p),k=Math.round(k+h);let S=o;"number"!=typeof o&&(S=3===i?255:o[i]),w>=0&&w<c&&k>=0&&k<u&&(S=g[t+c*d*k+w*d+i]),s[t+r+a+i]=S}}}}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},{kernelName:o7,backendName:"cpu",kernelFunc:bk},{kernelName:o9,backendName:"cpu",kernelFunc:bS},{kernelName:ie,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{indices:a,updates:o}=t,{shape:i}=n,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=ub(o,a,i),p=bx(r.bufferSync(a),r.bufferSync(o),i,d,u,l,s,c,0,!0);return r.makeTensorInfo(i,p.dtype,p.values)}},{kernelName:ir,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{sortedSequence:a,values:o}=t,{side:i}=n,s=function(e,t,r,n,a,o){let i=n6("int32",r*a);for(let s=0;s<r;++s){let r=e.slice(s*n,(s+1)*n),l=s*a;for(let e=0;e<a;++e)i[l+e]="left"===o?function(e,t){let r=0,n=e.length,a=0;for(;r<n;)e[a=Math.floor((r+n)/2)]<t?r=a+1:n=a;return n}(r,t[e+l]):function(e,t){let r=0,n=e.length,a=0;for(;r<n;)e[a=Math.floor((r+n)/2)]<=t?r=a+1:n=a;return n}(r,t[e+l])}return i}(r.data.get(a.dataId).values,r.data.get(o.dataId).values,a.shape[0],a.shape[1],o.shape[1],i);return r.makeTensorInfo(o.shape,"int32",s)}},{kernelName:ia,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{condition:n,t:a,e:o}=t;gW([n,a,o],"select");let i=n.shape.length,s=r.data.get(n.dataId).values,l=r.data.get(a.dataId).values,u=r.data.get(o.dataId).values,c=sg(a.dtype,o.dtype),d=an(n0(a.shape),c),p=0,h=0===i||i>1||1===a.shape.length?1:n0(a.shape.slice(1));for(let e=0;e<s.length;e++)for(let t=0;t<h;t++)1===s[e]?d[p++]=l[e]:d[p++]=u[e];return r.makeTensorInfo(a.shape,c,d)}},{kernelName:io,backendName:"cpu",kernelFunc:b_},{kernelName:iu,backendName:"cpu",kernelFunc:vu},{kernelName:il,backendName:"cpu",kernelFunc:bI},{kernelName:"Sin",backendName:"cpu",kernelFunc:bE},{kernelName:is,backendName:"cpu",kernelFunc:bT},{kernelName:ii,backendName:"cpu",kernelFunc:gj},{kernelName:im,backendName:"cpu",kernelFunc:bu},{kernelName:ic,backendName:"cpu",kernelFunc:bA},{kernelName:ip,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{blockShape:o,paddings:i}=n;gW([a],"spaceToBatchND");let s=n0(o),l=[[0,0]];l.push(...i);for(let e=1+o.length;e<a.shape.length;++e)l.push([0,0]);let u=bh.kernelFunc({inputs:{x:a},backend:r,attrs:{paddings:l,constantValue:0}}),c=hZ(u.shape,o,s,!1),d=hJ(c.length,o.length,!1),p=h0(u.shape,o,s,!1),h=vv({inputs:{x:u},backend:r,attrs:{shape:c}}),f=vx({inputs:{x:h},backend:r,attrs:{perm:d}}),m=vv({inputs:{x:f},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),m}},{kernelName:ig,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{indices:n,values:a,denseShape:o,defaultValue:i}=t;if(1!==o.shape.length)throw Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(2!==n.shape.length)throw Error(`Indices must be a matrix, saw:
        ${n.shape}`);if(1!==a.shape.length)throw Error(`Values must be a vector, saw:
        ${a.shape}`);if(0!==i.shape.length)throw Error(`Default value must be a scalar, saw:
        ${i.shape}`);let s=r.data.get(n.dataId).values,l=r.data.get(a.dataId).values,u=r.data.get(o.dataId).values,c=r.data.get(i.dataId).values[0],[d,p,h,f,m]=function(e,t,r,n,a,o,i){let s=t[0],l=o[0],u=Array(l),c=Array(s),d=t[1];if(0===l){if(0!==s)throw Error(h8(s));return[n6(r,0),[0,d],n6(a,0),u,c]}let p=!0,h=0,f=Array(l).fill(0);for(let t=0;t<s;++t){let r=e[t*d];if(r<0)throw Error(h7(t,r));if(r>=l)throw Error(h9(t,r,l));++f[r],p=p&&r>=h,h=r}let m=!0;for(let e=0;e<l;++e){let t=0===f[e];u[e]=t,m=m&&!t,f[e]=Math.max(f[e],1),e>0&&(f[e]+=f[e-1])}if(m&&p){for(let e=0;e<s;++e)c[e]=e;return[e,[s,d],n,u,c]}{let t=f[l-1],o=n6(r,t*d),p=n6(a,t),h=Array(l).fill(0);for(let t=0;t<s;++t){let r=e[t*d],a=h[r],i=(0===r?0:f[r-1])+a;h[r]++;for(let r=0;r<d;++r)o[i*d+r]=e[t*d+r];p[i]=n[t],c[t]=i}for(let e=0;e<l;++e)if(0===h[e]){let t=0===e?0:f[e-1];o[t*d+0]=e;for(let e=1;e<d;++e)o[t*d+e]=0;p[t]=i}return[o,[t,d],p,u,c]}}(s,n.shape,n.dtype,l,a.dtype,u,c);return[r.makeTensorInfo(p,n.dtype,d),r.makeTensorInfo([p[0]],a.dtype,h),r.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),r.makeTensorInfo([m.length],n.dtype,new Int32Array(m))]}},{kernelName:iy,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{inputIndices:n,inputShape:a,newShape:o}=t;if(2!==n.shape.length)throw Error(`Input indices should be a matrix but received shape
        ${n.shape}`);if(1!==a.shape.length)throw Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(1!==o.shape.length)throw Error(`Target shape should be a vector but received shape ${o.shape}`);let i=Array.from(r.data.get(a.dataId).values),s=r.data.get(n.dataId).values,l=Array.from(r.data.get(o.dataId).values),[u,c,d]=function(e,t,r,n,a){let o=n0(n),i=t[0],s=a.length,l=[],u=1,c=-1;for(let e=0;e<s;++e){let t=a[e];if(-1===t){if(-1!==c)throw Error(fe(c,e));c=e,l.push(1)}else{if(t<0)throw Error(ft(e,t));u*=t,l.push(t)}}if(-1!==c){if(u<=0)throw Error(fr());let e=Math.trunc(o/u);if(u*e!==o)throw Error(fn(n,l));l[c]=e}if(n0(l)!==o)throw Error(fa(n,l));let d=n.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*n[e+1]}let h=[];if(s>0){h[s-1]=1;for(let e=s-2;e>=0;--e)h[e]=h[e+1]*l[e+1]}let f=n6(r,i*s);for(let t=0;t<i;++t){let r=0;for(let n=0;n<d;++n)r+=e[t*d+n]*p[n];for(let e=0;e<s;++e)f[t*s+e]=Math.trunc(r/h[e]),r%=h[e]}return[f,[i,s],l]}(s,n.shape,n.dtype,i,l);return[r.makeTensorInfo(c,n.dtype,u),r.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}},{kernelName:iv,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{data:n,indices:a,segmentIds:o}=t;if(n.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw Error(`Indices should be a vector but received shape
          ${a.shape}`);if(1!==o.shape.length)throw Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(a.shape[0]!==o.shape[0])throw Error("segmentIds and indices should have same size.");let i=r.data.get(n.dataId).values,s=r.data.get(a.dataId).values,l=r.data.get(o.dataId).values,[u,c]=bC(i,n.shape,n.dtype,s,l,!0);return r.makeTensorInfo(c,n.dtype,u)}},{kernelName:ib,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{data:n,indices:a,segmentIds:o}=t;if(n.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw Error(`Indices should be a vector but received shape
         ${a.shape}`);if(1!==o.shape.length)throw Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(a.shape[0]!==o.shape[0])throw Error("segmentIds and indices should have same size.");let i=r.data.get(n.dataId).values,s=r.data.get(a.dataId).values,l=r.data.get(o.dataId).values,[u,c]=bC(i,n.shape,n.dtype,s,l);return r.makeTensorInfo(c,n.dtype,u)}},{kernelName:iw,backendName:"cpu",kernelFunc:function(e){let t;let{inputs:r,backend:n,attrs:a}=e,{sparseIndices:o,sparseValues:i,defaultValue:s}=r,{outputShape:l}=a,{sliceRank:u,numUpdates:c,sliceSize:d,strides:p,outputSize:h}=ub(i,o,l),f=n.bufferSync(o);switch(i.dtype){case"bool":t=bx(f,n.bufferSync(i),l,h,d,c,u,p,!!n.data.get(s.dataId).values[0],!1);break;case"float32":case"int32":t=bx(f,n.bufferSync(i),l,h,d,c,u,p,n.data.get(s.dataId).values[0],!1);break;case"string":t=bx(f,n.bufferSync(i),l,h,d,c,u,p,sr(n.data.get(s.dataId).values[0]),!1);break;default:throw Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(l,t.dtype,t.values)}},{kernelName:ih,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{numOrSizeSplits:o,axis:i}=n,s=n4(i,a.shape)[0],l=h5(a,o,s),u=Array(a.shape.length).fill(0),c=a.shape.slice();return l.map(e=>{let t=[...c];t[s]=e;let n=gj({inputs:{x:a},backend:r,attrs:{begin:u,size:t}});return u[s]+=e,n})}},{kernelName:id,backendName:"cpu",kernelFunc:bM},{kernelName:iS,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:r}=e;gW(r,"square");let n=t.data.get(r.dataId).values,a=new Float32Array(n.length);for(let e=0;e<n.length;++e){let t=n[e];a[e]=t*t}return{dataId:t.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:ik,backendName:"cpu",kernelFunc:bR},{kernelName:ix,backendName:"cpu",kernelFunc:bO},{kernelName:i$,backendName:"cpu",kernelFunc:bF},{kernelName:i_,backendName:"cpu",kernelFunc:function(e){let t;let{inputs:r,backend:n,attrs:a}=e,{x:o}=r,{begin:i,end:s,strides:l,beginMask:u,endMask:c,ellipsisMask:d,newAxisMask:p,shrinkAxisMask:h}=a;gW(o,"stridedSlice");let{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:w,strides:k}=u_(o.shape,i,s,l,u,c,d,p,h);if(g)t=vv({inputs:{x:o},backend:n,attrs:{shape:m}});else if(y||v){nQ(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let e=uw(b,w,k),r=gj({inputs:{x:o},backend:n,attrs:{begin:b,size:e}});t=vv({inputs:{x:r},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(r)}else{let e=function(e,t,r,n){let a=lb(e,t.dtype);for(let e=0;e<a.size;e++){let o=a.indexToLoc(e),i=Array(o.length);for(let e=0;e<i.length;e++)i[e]=o[e]*r[e]+n[e];a.set(t.get(...i),...o)}return a}(f,n.bufferSync(o),k,b);t=n.makeTensorInfo(m,e.dtype,e.values)}return t}},{kernelName:iI,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{separator:a,nGramWidths:o,leftPad:i,rightPad:s,padWidth:l,preserveShortSequences:u}=n,{data:c,dataSplits:d}=t,[p,h]=yL(r.data.get(c.dataId).values,r.data.get(d.dataId).values,a,o,i,s,l,u);return[r.makeTensorInfo([p.length],"string",p),r.makeTensorInfo(d.shape,"int32",h)]}},{kernelName:iE,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{skipEmpty:a}=n,{input:o,delimiter:i}=t;if("string"!==o.dtype)throw Error("Input must be of datatype string");if(1!==o.shape.length)throw Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==i.shape.length)throw Error(`Delimiter must be a scalar, got shape: ${i.shape}`);let[s,l,u]=yB(r.data.get(o.dataId).values,r.data.get(i.dataId).values[0],a),c=l.length;return[r.makeTensorInfo([c,2],"int32",s),r.makeTensorInfo([c],"string",l),r.makeTensorInfo([2],"int32",new Int32Array(u))]}},{kernelName:iT,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{numBuckets:a}=n,{input:o}=t;if("string"!==o.dtype)throw Error("Input must be of datatype string");if(a<=0)throw Error("Number of buckets must be at least 1");let i=yz(r.data.get(o.dataId).values,a);return r.makeTensorInfo(o.shape,"int32",i)}},{kernelName:"Sub",backendName:"cpu",kernelFunc:vZ},{kernelName:"Sum",backendName:"cpu",kernelFunc:vV},{kernelName:"Tan",backendName:"cpu",kernelFunc:bD},{kernelName:iN,backendName:"cpu",kernelFunc:bP},{kernelName:it,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r}=e,{tensor:n,indices:a,updates:o}=t,{sliceRank:i,numUpdates:s,sliceSize:l,strides:u,outputSize:c}=ub(o,a,n.shape),d=r.bufferSync(a),p=r.bufferSync(o),h=r.bufferSync(n),f=bx(d,p,n.shape,c,l,s,i,u,h,!1);return r.makeTensorInfo(n.shape,f.dtype,f.values)}},{kernelName:iA,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{reps:o}=n;gW(a,"tile");let i=function(e,t){let r=Array(e.rank);for(let n=0;n<r.length;n++)r[n]=e.shape[n]*t[n];let n=lb(r,e.dtype);for(let t=0;t<n.values.length;++t){let r=n.indexToLoc(t),a=Array(e.rank);for(let t=0;t<a.length;t++)a[t]=r[t]%e.shape[t];let o=e.locToIndex(a);n.values[t]=e.values[o]}return n}(r.bufferSync(a),o);return r.makeTensorInfo(i.shape,i.dtype,i.values)}},{kernelName:iC,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a}=t,{k:o,sorted:i}=n;gW(a,"topk");let[s,l]=function(e,t,r,n,a){let o=t[t.length-1],[i,s]=[e.length/o,o],l=n6(r,i*n),u=n6("int32",i*n);for(let t=0;t<i;t++){let r=t*s,o=e.subarray(r,r+s),i=Array(o.length);o.forEach((e,t)=>i[t]={value:e,index:t}),n<i.length&&(function e(t,r,n=0,a=t.length-1){for(;a>n;){if(a-n>600){let o=a-n+1,i=r-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*Math.sign(i-o/2),c=Math.max(n,Math.floor(r-i*l/o+u)),d=Math.min(a,Math.floor(r+(o-i)*l/o+u));e(t,r,c,d)}let o=t[r],i=n,s=a;for(nX(t,n,r),b$(t[a],o)>0&&nX(t,n,a);i<s;){for(nX(t,i,s),i++,s--;0>b$(t[i],o);)i+=1;for(;b$(t[s],o)>0;)s-=1}0===b$(t[n],o)?nX(t,n,s):nX(t,s+=1,a),s<=r&&(n=s+1),r<=s&&(a=s-1)}}(i,n),i=i.slice(0,n)),a&&i.sort(b$);let c=t*n,d=l.subarray(c,c+n),p=u.subarray(c,c+n);for(let e=0;e<n;e++)d[e]=i[e].value,p[e]=i[e].index}let c=t.slice();return c[c.length-1]=n,[lb(c,r,l),lb(c,"int32",u)]}(r.data.get(a.dataId).values,a.shape,a.dtype,o,i);return[r.makeTensorInfo(s.shape,s.dtype,s.values),r.makeTensorInfo(l.shape,l.dtype,l.values)]}},{kernelName:iM,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,{image:a,transforms:o}=t,{interpolation:i,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,p,h]=a.shape,[f,m]=null!=u?u:[d,p],g=[c,f,m,h],y=ae(a.shape),v=y[0],b=y[1],w=y[2],k=ae(g),S=k[0],x=k[1],_=k[2],I=n6(a.dtype,n0(g));I.fill(l);let E=n.data.get(a.dataId).values,T=n.data.get(o.dataId).values;for(let e=0;e<c;++e){let t=1===o.shape[0]?T:T.subarray(8*e,8*e+8);for(let r=0;r<f;++r)for(let n=0;n<m;++n)for(let a=0;a<h;++a){let o;let u=t[6]*n+t[7]*r+1;if(0===u)continue;let c=(t[0]*n+t[1]*r+t[2])/u,h=(t[3]*n+t[4]*r+t[5])/u,f=bL(c,p,s),m=bL(h,d,s);switch(i){case"nearest":o=bB(E,d,p,v,b,w,e,Math.round(m),Math.round(f),a,l);break;case"bilinear":o=function(e,t,r,n,a,o,i,s,l,u,c){let d=Math.floor(s),p=Math.floor(l),h=d+1,f=p+1,m=(f-l)*bB(e,t,r,n,a,o,i,d,p,u,c)+(l-p)*bB(e,t,r,n,a,o,i,d,f,u,c),g=(f-l)*bB(e,t,r,n,a,o,i,h,p,u,c)+(l-p)*bB(e,t,r,n,a,o,i,h,f,u,c);return(h-s)*m+(s-d)*g}(E,d,p,v,b,w,e,m,f,a,l);break;default:throw Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}I[e*S+r*x+n*_+a]=o}return n.makeTensorInfo(g,a.dtype,I)}return{dataId:n.write(I,g,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:iR,backendName:"cpu",kernelFunc:vx},{kernelName:iO,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:r,backend:n}=e,{axis:a}=r,{x:o}=t;gW(o,"unique");let{outputValues:i,outputShape:s,indices:l}=yU(n.data.get(o.dataId).values,a,o.shape,o.dtype);return[n.makeTensorInfo(s,o.dtype,i),n.makeTensorInfo([l.length],"int32",l)]}},{kernelName:iF,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{value:a}=t,{axis:o}=n;o<0&&(o+=a.shape.length);let i=a.shape.length,s=a.shape[o],l=Array(i-1),u=0;for(let e=0;e<i;e++)e!==o&&(l[u++]=a.shape[e]);let c=Array(i).fill(0),d=a.shape.slice();d[o]=1;let p=Array(s);for(let e=0;e<p.length;e++){c[o]=e;let t=gj({inputs:{x:a},backend:r,attrs:{begin:c,size:d}});p[e]=vv({inputs:{x:t},backend:r,attrs:{shape:l}}),r.disposeIntermediateTensorInfo(t)}return p}},{kernelName:iD,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:r,attrs:n}=e,{x:a,segmentIds:o}=t,{numSegments:i}=n;gW(a,"unsortedSegmentSum");let s=a.shape.length,l=o.shape.length,u=[],c=[],d=s-l,p=o;for(let e=0;e<d;++e){let t=vK({inputs:{input:p},backend:r,attrs:{dim:e+1}});p=t,c.push(t)}for(let e=0;e<i;++e){let t=i7(e,"int32"),n=r.makeTensorInfo([],"int32",t),o=vH({inputs:{a:n,b:p},backend:r}),i=vf({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),s=vj({inputs:{a:i,b:a},backend:r}),l=vV({inputs:{x:s},backend:r,attrs:{axis:0,keepDims:!1}});u.push(l),c.push(n),c.push(o),c.push(i),c.push(s),c.push(l)}let h=bp({inputs:u,backend:r,attrs:{axis:0}});return c.forEach(e=>r.disposeIntermediateTensorInfo(e)),h}},{kernelName:iP,backendName:"cpu",kernelFunc:bd}])iK(e);var bz=r(10742),bW=r(79955),bU=r(53110);let bj=e=>e&&e.nonRetryable,bV=new bU.k("retryUtil");async function bH(e,t,r,n){if("function"!=typeof e)throw Error("functionToRetry must be a function");return new Promise(async(a,o)=>{let i,s,l=0,u=!1,c=()=>{};for(n&&n.then(()=>{u=!0,clearTimeout(i),c()});!u;){l++,bV.debug(`${e.name} attempt #${l} with this vars: ${JSON.stringify(t)}`);try{a(await e(...t));return}catch(a){if(s=a,bV.debug(`error on ${e.name}`,a),bj(a)){bV.debug(`${e.name} non retryable error`,a),o(a);return}let n=r(l,t,a);if(bV.debug(`${e.name} retrying in ${n} ms`),!1===n||u){o(a);return}await new Promise(e=>{i=setTimeout(c=e,n)})}}o(s)})}let bG=(e,t,r=bz.t,n)=>bH(e,t,(0,bW.k)(r),n);class bq{triggerModelLoading(){this.modelLoadingPromise=this.loadModels()}}class bK extends bq{constructor(e,t){super(),this.faceModelUrl=t??"https://cdn.liveness.rekognition.amazonaws.com/face-detection/tensorflow-models/blazeface/1.0.2/model/model.json",this.binaryPath=e??"https://cdn.liveness.rekognition.amazonaws.com/face-detection/tensorflow/tfjs-backend-wasm/4.11.0/"}async loadModels(){!function(){try{return!!window.WebAssembly&&(!!window.WebAssembly.compile||!!window.WebAssembly.compileStreaming)}catch(e){return!1}}()?await this._loadCPUBackend():await this._loadWebAssemblyBackend();try{await sI.ready(),this._model=await function(e,t){return mP(this,void 0,void 0,function(){var r,n;return m$(this,function(a){if(e===gf.MediaPipeFaceDetector){if(n=void 0,null!=(r=t)){if("tfjs"===r.runtime)return[2,function(e){return mP(this,void 0,void 0,function(){var t,r,n;return m$(this,function(a){switch(a.label){case 0:return r="string"==typeof(t=function(e){if(null==e)return mD({},gy);var t=mD({},e);return null==t.modelType&&(t.modelType=gy.modelType),null==t.maxFaces&&(t.maxFaces=gy.maxFaces),null==t.detectorModelUrl&&("full"===t.modelType?t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),t}(e)).detectorModelUrl&&t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,mF(t.detectorModelUrl,{fromTFHub:r})];case 1:return n=a.sent(),[2,new gS(t.modelType,n,t.maxFaces)]}})})}(r)];if("mediapipe"===r.runtime)return[2,function(e){return mP(this,void 0,void 0,function(){var t;return m$(this,function(r){switch(r.label){case 0:return[4,(t=new mz(function(e){if(null==e)return mD({},mB);var t=mD({},e);return t.runtime="mediapipe",null==t.modelType&&(t.modelType=mB.modelType),null==t.maxFaces&&(t.maxFaces=mB.maxFaces),t}(e))).initialize()];case 1:return r.sent(),[2,t]}})})}(r)];n=r.runtime}throw Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(n))}throw Error("".concat(e," is not a supported model name."))})})}(gf.MediaPipeFaceDetector,{runtime:"tfjs",detectorModelUrl:this.faceModelUrl})}catch(e){throw Error("There was an error loading the blazeface model. If you are using a custom blazeface model url ensure that it is a fully qualified url that returns a json file.")}}async detectFaces(e){let t=await this._model.estimateFaces(e,{flipHorizontal:!0}),r=Date.now();return t.map(e=>{let{box:t,keypoints:n}=e,{xMin:a,yMin:o,width:i,height:s}=t,l=this._getCoordinate(n,"rightEye"),u=this._getCoordinate(n,"leftEye"),c=this._getCoordinate(n,"noseTip"),d=this._getCoordinate(n,"mouthCenter");return{top:o,left:a,width:i,height:s,timestampMs:r,probability:90,rightEye:l,leftEye:u,mouth:d,nose:c,rightEar:this._getCoordinate(n,"rightEarTragion"),leftEar:this._getCoordinate(n,"leftEarTragion")}})}_getCoordinate(e,t){let r=e.find(e=>e.name===t);return[r.x,r.y]}async _loadWebAssemblyBackend(){try{!function(e,t=!1){if(y4)throw Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)y2=e;else{y3=e;let t=y0.filter(e=>null==y3[e]);if(t.length>0)throw Error(`There were no entries found for the following binaries: ${t.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}y6=t}(this.binaryPath),await bG(async()=>{if(!await lE("wasm"))throw Error("Initialization of backend wasm failed")},[]),this.modelBackend="wasm"}catch(e){throw Error('There was an error loading the TFJS WASM backend. If you are using a custom WASM path ensure that it ends with "/" and that it is not the full URL as @tensorflow/tfjs-backend-wasm will append the wasm binary file name. Read more: https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/src/backend_wasm.ts#L475.')}}async _loadCPUBackend(){await lE("cpu"),this.modelBackend="cpu"}}let bY=e=>{let t=e.httpHandler;return{setHttpHandler(e){t=e},httpHandler:()=>t,updateHttpClientConfig(e,r){t.updateHttpClientConfig(e,r)},httpHandlerConfigs:()=>t.httpHandlerConfigs()}},bX=e=>({httpHandler:e.httpHandler()});(eF=tr||(tr={})).HEADER="header",eF.QUERY="query",(eD=tn||(tn={})).HEADER="header",eD.QUERY="query",(eP=ta||(ta={})).HTTP="http",eP.HTTPS="https",(e$=to||(to={})).MD5="md5",e$.CRC32="crc32",e$.CRC32C="crc32c",e$.SHA1="sha1",e$.SHA256="sha256",(eL=ti||(ti={}))[eL.HEADER=0]="HEADER",eL[eL.TRAILER=1]="TRAILER";let bQ="__smithy_context";(eB=ts||(ts={})).PROFILE="profile",eB.SSO_SESSION="sso-session",eB.SERVICES="services",(ez=tl||(tl={})).HTTP_0_9="http/0.9",ez.HTTP_1_0="http/1.0",ez.TDS_8_0="tds/8.0";class bZ{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){var t;let r=new bZ({...e,headers:{...e.headers}});return r.query&&(r.query=Object.keys(t=r.query).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})),r}static isInstance(e){return!!e&&"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers}clone(){return bZ.clone(this)}}class bJ{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){return!!e&&"number"==typeof e.statusCode&&"object"==typeof e.headers}}let b0=e=>(t,r)=>async n=>{let{request:a}=n;return bZ.isInstance(a)?e.eventStreamPayloadHandler.handle(t,n,r):t(n)},b1={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},b2=e=>async t=>{let{request:r}=t;return bZ.isInstance(r)?(r.headers={...r.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},e({...t,request:r})):e(t)},b3={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},b4=e=>({applyToStack:t=>{t.addRelativeTo(b0(e),b1),t.add(b2,b3)}});var b6=r(5853),b5=r(30206);!function(){function e(){this.crc32=new b8}e.prototype.update=function(e){(0,b5.rA)(e)||this.crc32.update((0,b5.i$)(e))},e.prototype.digest=function(){return(0,b6.mG)(this,void 0,void 0,function(){return(0,b6.Jh)(this,function(e){return[2,(0,b5.LT)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new b8}}();var b8=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var n=(0,b6.XA)(e),a=n.next();!a.done;a=n.next()){var o=a.value;this.checksum=this.checksum>>>8^b7[(this.checksum^o)&255]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}(),b7=(0,b5.r3)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);let b9={},we={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),b9[e]=t,we[t]=e}function wt(e){if(e.length%2!=0)throw Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in we)t[r/2]=we[n];else throw Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function wr(e){let t="";for(let r=0;r<e.byteLength;r++)t+=b9[e[r]];return t}class wn{constructor(e){if(this.bytes=e,8!==e.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x7fffffffffffffff||e<-0x8000000000000000)throw Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&wa(t),new wn(t)}valueOf(){let e=this.bytes.slice(0),t=128&e[0];return t&&wa(e),parseInt(wr(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function wa(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}class wo{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){let t=[];for(let r of Object.keys(e)){let n=this.fromUtf8(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),n=0;for(let e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(a.buffer);return o.set(e.value,3),o;case"string":let i=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+i.byteLength));s.setUint8(0,7),s.setUint16(1,i.byteLength,!1);let l=new Uint8Array(s.buffer);return l.set(i,3),l;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(wn.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!wm.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let c=new Uint8Array(17);return c[0]=9,c.set(wt(e.value.replace(/\-/g,"")),1),c}}parse(e){let t={},r=0;for(;r<e.byteLength;){let n=e.getUint8(r++),a=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:t[a]={type:wi,value:!0};break;case 1:t[a]={type:wi,value:!1};break;case 2:t[a]={type:ws,value:e.getInt8(r++)};break;case 3:t[a]={type:wl,value:e.getInt16(r,!1)},r+=2;break;case 4:t[a]={type:wu,value:e.getInt32(r,!1)},r+=4;break;case 5:t[a]={type:wc,value:new wn(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:let o=e.getUint16(r,!1);r+=2,t[a]={type:wd,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:let i=e.getUint16(r,!1);r+=2,t[a]={type:wp,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,i))},r+=i;break;case 8:t[a]={type:wh,value:new Date(new wn(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:let s=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[a]={type:wf,value:`${wr(s.subarray(0,4))}-${wr(s.subarray(4,6))}-${wr(s.subarray(6,8))}-${wr(s.subarray(8,10))}-${wr(s.subarray(10))}`};break;default:throw Error("Unrecognized header type tag")}}return t}}(eW=tu||(tu={}))[eW.boolTrue=0]="boolTrue",eW[eW.boolFalse=1]="boolFalse",eW[eW.byte=2]="byte",eW[eW.short=3]="short",eW[eW.integer=4]="integer",eW[eW.long=5]="long",eW[eW.byteArray=6]="byteArray",eW[eW.string=7]="string",eW[eW.timestamp=8]="timestamp",eW[eW.uuid=9]="uuid";let wi="boolean",ws="byte",wl="short",wu="integer",wc="long",wd="binary",wp="string",wh="timestamp",wf="uuid",wm=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class wg{constructor(e,t){this.headerMarshaller=new wo(e,t),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),t=this.isEndOfStream;return{getMessage:()=>e,isEndOfStream:()=>t}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let t=this.isEndOfStream;return{getMessages:()=>e,isEndOfStream:()=>t}}encode({headers:e,body:t}){let r=this.headerMarshaller.format(e),n=r.byteLength+t.byteLength+16,a=new Uint8Array(n),o=new DataView(a.buffer,a.byteOffset,a.byteLength),i=new b8;return o.setUint32(0,n,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,i.update(a.subarray(0,8)).digest(),!1),a.set(r,12),a.set(t,r.byteLength+12),o.setUint32(n-4,i.update(a.subarray(8,n-4)).digest(),!1),a}decode(e){let{headers:t,body:r}=function({byteLength:e,byteOffset:t,buffer:r}){if(e<16)throw Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),a=n.getUint32(0,!1);if(e!==a)throw Error("Reported message length does not match received message length");let o=n.getUint32(4,!1),i=n.getUint32(8,!1),s=n.getUint32(e-4,!1),l=new b8().update(new Uint8Array(r,t,8));if(i!==l.digest())throw Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${l.digest()})`);if(l.update(new Uint8Array(r,t+8,e-12)),s!==l.digest())throw Error(`The message checksum (${l.digest()}) did not match the expected value of ${s}`);return{headers:new DataView(r,t+8+4,o),body:new Uint8Array(r,t+8+4+o,a-o-16)}}(e);return{headers:this.headerMarshaller.parse(t),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class wy{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.inputStream){let t=this.options.decoder.decode(e);yield t}}}class wv{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.messageStream){let t=this.options.encoder.encode(e);yield t}this.options.includeEndFrame&&(yield new Uint8Array(0))}}class wb{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.messageStream){let t=await this.options.deserializer(e);void 0!==t&&(yield t)}}}class ww{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.inputStream){let t=this.options.serializer(e);yield t}}}let wk=(e,t,r,n)=>{let a=e;return new TransformStream({start(){},async transform(e,o){try{let i=new Date(Date.now()+await n()),s={":date":{type:"timestamp",value:i}},l=await t.sign({message:{body:e,headers:s},priorSignature:a},{signingDate:i});a=l.signature;let u=r.encode({headers:{...s,":chunk-signature":{type:"binary",value:wt(l.signature)}},body:e});o.enqueue(u)}catch(e){o.error(e)}}})};class wS{constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new wg(e.utf8Encoder,e.utf8Decoder),this.systemClockOffsetProvider=async()=>e.systemClockOffset??0}async handle(e,t,r={}){let n;let a=t.request,{body:o,headers:i,query:s}=a;if(!(o instanceof ReadableStream))throw Error("Eventstream payload must be a ReadableStream.");let l=new TransformStream;a.body=l.readable;try{n=await e(t)}catch(e){throw a.body.cancel(),e}let u=wk(((i.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||s&&s["X-Amz-Signature"]||"",await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return o.pipeThrough(u).pipeThrough(l),n}}let wx=e=>new wS(e),w_=()=>e=>async t=>{let r={...t.input},n=await e(t),a=n.output;return r.SessionId&&null==a.SessionId&&(a.SessionId=r.SessionId),n},wI={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},wE=(e,t)=>r=>n=>{let{request:a}=n;if(bZ.isInstance(a)&&e.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){a.protocol="wss:",a.method="GET",a.path=`${a.path}-websocket`;let{headers:e}=a;for(let r of(delete e["content-type"],delete e["x-amz-content-sha256"],Object.keys(e)))if(0===r.indexOf(t.headerPrefix)){let n=r.replace(t.headerPrefix,"");a.query[n]=e[r]}e["x-amz-user-agent"]&&(a.query["user-agent"]=e["x-amz-user-agent"]),a.headers={host:e.host??a.hostname}}return r(n)},wT={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},wN=(e,t)=>({applyToStack:r=>{r.addRelativeTo(wE(e,t),wT),r.add(w_(),wI)}}),wA=e=>"ws:"===e.protocol||"wss:"===e.protocol;class wC{constructor(e){this.signer=e.signer}presign(e,t={}){return this.signer.presign(e,t)}async sign(e,t){return bZ.isInstance(e)&&wA(e)?{...await this.signer.presign({...e,body:""},{...t,expiresIn:60,unsignableHeaders:new Set(Object.keys(e.headers).filter(e=>"host"!==e))}),body:e.body}:this.signer.sign(e,t)}}let wM=e=>({...e,signer:async t=>{let r=await e.signer(t);if(wR(r))return new wC({signer:r});throw Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}}),wR=e=>!!e,wO=e=>encodeURIComponent(e).replace(/[!'()*]/g,wF),wF=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function wD(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=wO(r),Array.isArray(n))for(let e=0,a=n.length;e<a;e++)t.push(`${r}=${wO(n[e])}`);else{let e=r;(n||"string"==typeof n)&&(e+=`=${wO(n)}`),t.push(e)}}return t.join("&")}function wP(e){let{port:t,query:r}=e,{protocol:n,path:a,hostname:o}=e;n&&":"!==n.slice(-1)&&(n+=":"),t&&(o+=`:${t}`),a&&"/"!==a.charAt(0)&&(a=`/${a}`);let i=r?wD(r):"";i&&"?"!==i[0]&&(i=`?${i}`);let s="";if(null!=e.username||null!=e.password){let t=e.username??"",r=e.password??"";s=`${t}:${r}@`}let l="";return e.fragment&&(l=`#${e.fragment}`),`${n}//${s}${o}${a}${i}${l}`}class w${constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new wg(e,t),this.utfEncoder=e}deserialize(e,t){var r;return new wb({messageStream:new wy({inputStream:function(e){let t=0,r=0,n=null,a=null,o=e=>{if("number"!=typeof e)throw Error("Attempted to allocate an event message where size was not a number: "+e);t=e,r=4,new DataView((n=new Uint8Array(e)).buffer).setUint32(0,e,!1)};return{[Symbol.asyncIterator]:async function*(){let i=e[Symbol.asyncIterator]();for(;;){let{value:e,done:s}=await i.next();if(s){if(t){if(t===r)yield n;else throw Error("Truncated event message received.")}return}let l=e.length,u=0;for(;u<l;){if(!n){let t=l-u;a||(a=new Uint8Array(4));let n=Math.min(4-r,t);if(a.set(e.slice(u,u+n),r),r+=n,u+=n,r<4)break;o(new DataView(a.buffer).getUint32(0,!1)),a=null}let i=Math.min(t-r,l-u);n.set(e.slice(u,u+i),r),r+=i,u+=i,t&&t===r&&(yield n,n=null,t=0,r=0)}}}}}(e),decoder:this.eventStreamCodec}),deserializer:(r=this.utfEncoder,async function(e){let{value:n}=e.headers[":message-type"];if("error"===n){let t=Error(e.headers[":error-message"].value||"UnknownError");throw t.name=e.headers[":error-code"].value,t}if("exception"===n){let n=e.headers[":exception-type"].value,a=await t({[n]:e});if(a.$unknown){let t=Error(r(e.body));throw t.name=n,t}throw a[n]}if("event"===n){let r={[e.headers[":event-type"].value]:e},n=await t(r);if(n.$unknown)return;return n}throw Error(`Unrecognizable event type: ${e.headers[":event-type"].value}`)})})}serialize(e,t){return new wv({messageStream:new ww({inputStream:e,serializer:t}),encoder:this.eventStreamCodec,includeEndFrame:!0})}}let wL=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)return;yield r}}finally{t.releaseLock()}}}),wB=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){let{done:r,value:n}=await t.next();if(r)return e.close();e.enqueue(n)}})};class wz{constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new w$({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){let r=wW(e)?wL(e):e;return this.universalMarshaller.deserialize(r,t)}serialize(e,t){let r=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?wB(r):r}}let wW=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream,wU=e=>new wz(e),wj={supported:void 0};class wV{static create(e){return"function"==typeof e?.handle?e:new wV(e)}constructor(e){"function"==typeof e?this.configProvider=e().then(e=>e||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),void 0===wj.supported&&(wj.supported=!!("undefined"!=typeof Request&&"keepalive"in new Request("https://[::1]")))}destroy(){}async handle(e,{abortSignal:t}={}){this.config||(this.config=await this.configProvider);let r=this.config.requestTimeout,n=!0===this.config.keepAlive,a=this.config.credentials;if(t?.aborted){let e=Error("Request aborted");return e.name="AbortError",Promise.reject(e)}let o=e.path,i=wD(e.query||{});i&&(o+=`?${i}`),e.fragment&&(o+=`#${e.fragment}`);let s="";if(null!=e.username||null!=e.password){let t=e.username??"",r=e.password??"";s=`${t}:${r}@`}let{port:l,method:u}=e,c=`${e.protocol}//${s}${e.hostname}${l?`:${l}`:""}${o}`,d="GET"===u||"HEAD"===u?void 0:e.body,p={body:d,headers:new Headers(e.headers),method:u,credentials:a};this.config?.cache&&(p.cache=this.config.cache),d&&(p.duplex="half"),"undefined"!=typeof AbortController&&(p.signal=t),wj.supported&&(p.keepalive=n),"function"==typeof this.config.requestInit&&Object.assign(p,this.config.requestInit(e));let h=()=>{},f=[fetch(new Request(c,p)).then(e=>{let t=e.headers,r={};for(let e of t.entries())r[e[0]]=e[1];return void 0!=e.body?{response:new bJ({headers:r,reason:e.statusText,statusCode:e.status,body:e.body})}:e.blob().then(t=>({response:new bJ({headers:r,reason:e.statusText,statusCode:e.status,body:t})}))}),function(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let t=Error(`Request did not complete within ${e} ms`);t.name="TimeoutError",r(t)},e)})}(r)];return t&&f.push(new Promise((e,r)=>{let n=()=>{let e=Error("Request aborted");e.name="AbortError",r(e)};"function"==typeof t.addEventListener?(t.addEventListener("abort",n,{once:!0}),h=()=>t.removeEventListener("abort",n)):t.onabort=n})),Promise.race(f).finally(h)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=t,r))}httpHandlerConfigs(){return this.config??{}}}let wH={},wG=Array(64);for(let e=0;e+65<=90;e++){let t=String.fromCharCode(e+65);wH[t]=e,wG[e]=t}for(let e=0;e+97<=122;e++){let t=String.fromCharCode(e+97),r=e+26;wH[t]=r,wG[r]=t}for(let e=0;e<10;e++){wH[e.toString(10)]=e+52;let t=e.toString(10),r=e+52;wH[t]=r,wG[r]=t}wH["+"]=62,wG[62]="+",wH["/"]=63,wG[63]="/";let wq=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;let r=new ArrayBuffer(t),n=new DataView(r);for(let t=0;t<e.length;t+=4){let r=0,a=0;for(let n=t,o=t+3;n<=o;n++)if("="!==e[n]){if(!(e[n]in wH))throw TypeError(`Invalid character ${e[n]} in base64 string.`);r|=wH[e[n]]<<(o-n)*6,a+=6}else r>>=6;let o=t/4*3;r>>=a%8;let i=Math.floor(a/8);for(let e=0;e<i;e++){let t=(i-e-1)*8;n.setUint8(o+e,(r&255<<t)>>t)}}return new Uint8Array(r)},wK=e=>new TextEncoder().encode(e);function wY(e){let t;let r="object"==typeof(t="string"==typeof e?wK(e):e)&&"number"==typeof t.length,n="object"==typeof t&&"number"==typeof t.byteOffset&&"number"==typeof t.byteLength;if(!r&&!n)throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let a="";for(let e=0;e<t.length;e+=3){let r=0,n=0;for(let a=e,o=Math.min(e+3,t.length);a<o;a++)r|=t[a]<<(o-a-1)*8,n+=8;let o=Math.ceil(n/6);r<<=6*o-n;for(let e=1;e<=o;e++){let t=(o-e)*6;a+=wG[(r&63<<t)>>t]}a+="==".slice(0,4-o)}return a}let wX=e=>"function"==typeof Blob&&e instanceof Blob?wQ(e):wZ(e);async function wQ(e){return new Uint8Array(wq(await new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(2!==n.readyState)return r(Error("Reader aborted too early"));let e=n.result??"",a=e.indexOf(","),o=a>-1?a+1:e.length;t(e.substring(o))},n.onabort=()=>r(Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})))}async function wZ(e){let t=[],r=e.getReader(),n=!1,a=0;for(;!n;){let{done:e,value:o}=await r.read();o&&(t.push(o),a+=o.length),n=e}let o=new Uint8Array(a),i=0;for(let e of t)o.set(e,i),i+=e.length;return o}class wJ{static create(e,t=new wV){return"function"==typeof e?.handle?e:new wJ(e,t)}constructor(e,t=new wV){this.metadata={handlerProtocol:"websocket/h1.1"},this.sockets={},this.httpHandler=t,"function"==typeof e?(this.config={},this.configPromise=e().then(e=>this.config=e??{})):(this.config=e??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(let[e,t]of Object.entries(this.sockets)){for(let e of t)e.close(1e3,"Socket closed through destroy() call");delete this.sockets[e]}}async handle(e){if(!wA(e))return this.httpHandler.handle(e);let t=wP(e),r=new WebSocket(t);this.sockets[t]||(this.sockets[t]=[]),this.sockets[t].push(r),r.binaryType="arraybuffer",this.config=await this.configPromise;let{connectionTimeout:n=2e3}=this.config;await this.waitForReady(r,n);let{body:a}=e,o=w0(a);return{response:new bJ({statusCode:200,body:w1(this.connect(r,o))})}}updateHttpClientConfig(e,t){this.configPromise=this.configPromise.then(r=>(r[e]=t,r))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(e){this.sockets[e]=(this.sockets[e]??[]).filter(e=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(e.readyState))}waitForReady(e,t){return new Promise((r,n)=>{let a=setTimeout(()=>{this.removeNotUsableSockets(e.url),n({$metadata:{httpStatusCode:500}})},t);e.onopen=()=>{clearTimeout(a),r()}})}connect(e,t){let r;let n=!1,a=()=>{},o=()=>{};e.onmessage=e=>{o({done:!1,value:new Uint8Array(e.data)})},e.onerror=t=>{n=!0,e.close(),a(t)},e.onclose=()=>{this.removeNotUsableSockets(e.url),n||(r?a(r):o({done:!0,value:void 0}))};let i={[Symbol.asyncIterator]:()=>({next:()=>new Promise((e,t)=>{o=e,a=t})})};return(async()=>{try{for await(let r of t)e.send(r)}catch(e){r=e}finally{e.close(1e3)}})(),i}}let w0=e=>e[Symbol.asyncIterator]?e:w2(e)?wL(e):{[Symbol.asyncIterator]:async function*(){yield e}},w1=e=>"function"==typeof ReadableStream?wB(e):e,w2=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream,w3=e=>e[bQ]||(e[bQ]={}),w4=e=>{if("function"==typeof e)return e;let t=Promise.resolve(e);return()=>t},w6=(e,t)=>r=>async n=>{let{response:a}=await r(n);try{let r=await t(a,e);return{response:a,output:r}}catch(e){throw Object.defineProperty(e,"$response",{value:a}),"$metadata"in e||(e.message+="\n  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.",void 0!==e.$responseBodyText&&e.$response&&(e.$response.body=e.$responseBodyText)),e}},w5=(e,t)=>(r,n)=>async a=>{let o=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!o)throw Error("No valid endpoint provider available.");let i=await t(a.input,{...e,endpoint:o});return r({...a,request:i})},w8={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},w7={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function w9(e,t,r){return{applyToStack:n=>{n.add(w6(e,r),w8),n.add(w5(e,t),w7)}}}w7.name;let ke=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};class kt extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return"base64"===t?kt.mutate(wq(e)):kt.mutate(wK(e));throw Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,kt.prototype),e}transformToString(e="utf-8"){return function(e,t="utf-8"){return"base64"===t?wY(e):ke(e)}(this,e)}}"function"==typeof ReadableStream&&ReadableStream;let kr=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return kt.mutate(e);if(!e)return kt.mutate(new Uint8Array);let r=t.streamCollector(e);return kt.mutate(await r)};function kn(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}let ka=(e,t,r,n,a,o)=>{if(null!=t&&void 0!==t[r]){let t=n();if(t.length<=0)throw Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(a,o?t.split("/").map(e=>kn(e)).join("/"):kn(t))}else throw Error("No value provided for input HTTP label: "+r+".");return e};class ko{constructor(e,t){this.input=e,this.context=t,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:e,protocol:t="https",port:r,path:n}=await this.context.endpoint();for(let e of(this.path=n,this.resolvePathStack))e(this.path);return new bZ({protocol:t,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(t=>{this.path=`${t?.endsWith("/")?t.slice(0,-1):t||""}`+e}),this}p(e,t,r,n){return this.resolvePathStack.push(a=>{this.path=ka(a,this.input,e,t,r,n)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}let ki=async e=>{let t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),kd(t)){if(!0===e.ForcePathStyle)throw Error("Path-style addressing cannot be used with ARN buckets")}else kc(t)&&(-1===t.indexOf(".")||String(e.Endpoint).startsWith("http:"))&&t.toLowerCase()===t&&!(t.length<3)||(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},ks=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,kl=/(\d+\.){3}\d+/,ku=/\.\./,kc=e=>ks.test(e)&&!kl.test(e)&&!ku.test(e),kd=e=>{let[t,r,n,,,a]=e.split(":"),o="arn"===t&&e.split(":").length>=6,i=!!(o&&r&&n&&a);if(o&&!i)throw Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},kp=(e,t,r)=>{let n=async()=>{let n=r[e]??r[t];return"function"==typeof n?n():n};return"credentialScope"===e||"CredentialScope"===t?async()=>{let e="function"==typeof r.credentials?await r.credentials():r.credentials;return e?.credentialScope??e?.CredentialScope}:"accountId"===e||"AccountId"===t?async()=>{let e="function"==typeof r.credentials?await r.credentials():r.credentials;return e?.accountId??e?.AccountId}:"endpoint"===e||"endpoint"===t?async()=>{let e=await n();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){let{protocol:t,hostname:r,port:n,path:a}=e;return`${t}//${r}${n?":"+n:""}${a}`}}return e}:n},kh=async e=>void 0,kf=e=>{let t;if("string"==typeof e)return kf(new URL(e));let{hostname:r,pathname:n,port:a,protocol:o,search:i}=e;return i&&(t=function(e){let t={};if(e=e.replace(/^\?/,""))for(let r of e.split("&")){let[e,n=null]=r.split("=");e=decodeURIComponent(e),n&&(n=decodeURIComponent(n)),e in t?Array.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n}return t}(i)),{hostname:r,port:a?parseInt(a):void 0,protocol:o,path:n,query:t}},km=e=>"object"==typeof e?"url"in e?kf(e.url):e:kf(e),kg=async(e,t,r,n)=>{if(!r.endpoint){let e;(e=r.serviceConfiguredEndpoint?await r.serviceConfiguredEndpoint():await kh(r.serviceId))&&(r.endpoint=()=>Promise.resolve(km(e)))}let a=await ky(e,t,r);if("function"!=typeof r.endpointProvider)throw Error("config.endpointProvider is not set.");return r.endpointProvider(a,n)},ky=async(e,t,r)=>{let n={},a=t?.getEndpointParameterInstructions?.()||{};for(let[t,o]of Object.entries(a))switch(o.type){case"staticContextParams":n[t]=o.value;break;case"contextParams":n[t]=e[o.name];break;case"clientContextParams":case"builtInParams":n[t]=await kp(o.name,t,r)();break;case"operationContextParams":n[t]=o.get(e);break;default:throw Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return 0===Object.keys(a).length&&Object.assign(n,r),"s3"===String(r.serviceId).toLowerCase()&&await ki(n),n},kv=({config:e,instructions:t})=>(r,n)=>async a=>{e.endpoint&&(n.__smithy_context?n.__smithy_context.features||(n.__smithy_context.features={}):n.__smithy_context={features:{}},n.__smithy_context.features.ENDPOINT_OVERRIDE="N");let o=await kg(a.input,{getEndpointParameterInstructions:()=>t},{...e},n);n.endpointV2=o,n.authSchemes=o.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let e=w3(n),t=e?.selectedHttpAuthScheme?.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...a})},kb={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:w7.name},kw=(e,t)=>({applyToStack:r=>{r.addRelativeTo(kv({config:e,instructions:t}),kb)}}),kk=e=>{let t;let r=e.tls??!0,{endpoint:n}=e,a={...e,endpoint:null!=n?async()=>km(await w4(n)()):void 0,tls:r,isCustomEndpoint:!!n,useDualstackEndpoint:w4(e.useDualstackEndpoint??!1),useFipsEndpoint:w4(e.useFipsEndpoint??!1)};return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!t&&(t=kh(e.serviceId)),t),a},kS=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let e of t)r.push(e);return r},kx=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,k_=()=>{let e=[],t=[],r=!1,n=new Set,a=e=>e.sort((e,t)=>kI[t.step]-kI[e.step]||kE[t.priority||"normal"]-kE[e.priority||"normal"]),o=r=>{let a=!1,o=e=>{let t=kS(e.name,e.aliases);if(t.includes(r)){for(let e of(a=!0,t))n.delete(e);return!1}return!0};return e=e.filter(o),t=t.filter(o),a},i=r=>{let a=!1,o=e=>{if(e.middleware===r){for(let t of(a=!0,kS(e.name,e.aliases)))n.delete(t);return!1}return!0};return e=e.filter(o),t=t.filter(o),a},s=r=>(e.forEach(e=>{r.add(e.middleware,{...e})}),t.forEach(e=>{r.addRelativeTo(e.middleware,{...e})}),r.identifyOnResolve?.(c.identifyOnResolve()),r),l=e=>{let t=[];return e.before.forEach(e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...l(e))}),t.push(e),e.after.reverse().forEach(e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...l(e))}),t},u=(r=!1)=>{let n=[],o=[],i={};return e.forEach(e=>{let t={...e,before:[],after:[]};for(let e of kS(t.name,t.aliases))i[e]=t;n.push(t)}),t.forEach(e=>{let t={...e,before:[],after:[]};for(let e of kS(t.name,t.aliases))i[e]=t;o.push(t)}),o.forEach(e=>{if(e.toMiddleware){let t=i[e.toMiddleware];if(void 0===t){if(r)return;throw Error(`${e.toMiddleware} is not found when adding ${kx(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),a(n).map(l).reduce((e,t)=>(e.push(...t),e),[])},c={add:(t,r={})=>{let{name:a,override:o,aliases:i}=r,s={step:"initialize",priority:"normal",middleware:t,...r},l=kS(a,i);if(l.length>0){if(l.some(e=>n.has(e))){if(!o)throw Error(`Duplicate middleware name '${kx(a,i)}'`);for(let t of l){let r=e.findIndex(e=>e.name===t||e.aliases?.some(e=>e===t));if(-1===r)continue;let n=e[r];if(n.step!==s.step||s.priority!==n.priority)throw Error(`"${kx(n.name,n.aliases)}" middleware with ${n.priority} priority in ${n.step} step cannot be overridden by "${kx(a,i)}" middleware with ${s.priority} priority in ${s.step} step.`);e.splice(r,1)}}for(let e of l)n.add(e)}e.push(s)},addRelativeTo:(e,r)=>{let{name:a,override:o,aliases:i}=r,s={middleware:e,...r},l=kS(a,i);if(l.length>0){if(l.some(e=>n.has(e))){if(!o)throw Error(`Duplicate middleware name '${kx(a,i)}'`);for(let e of l){let r=t.findIndex(t=>t.name===e||t.aliases?.some(t=>t===e));if(-1===r)continue;let n=t[r];if(n.toMiddleware!==s.toMiddleware||n.relation!==s.relation)throw Error(`"${kx(n.name,n.aliases)}" middleware ${n.relation} "${n.toMiddleware}" middleware cannot be overridden by "${kx(a,i)}" middleware ${s.relation} "${s.toMiddleware}" middleware.`);t.splice(r,1)}}for(let e of l)n.add(e)}t.push(s)},clone:()=>s(k_()),use:e=>{e.applyToStack(c)},remove:e=>"string"==typeof e?o(e):i(e),removeByTag:r=>{let a=!1,o=e=>{let{tags:t,name:o,aliases:i}=e;if(t&&t.includes(r)){for(let e of kS(o,i))n.delete(e);return a=!0,!1}return!0};return e=e.filter(o),t=t.filter(o),a},concat:e=>{let t=s(k_());return t.use(e),t.identifyOnResolve(r||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:s,identify:()=>u(!0).map(e=>{let t=e.step??e.relation+" "+e.toMiddleware;return kx(e.name,e.aliases)+" - "+t}),identifyOnResolve:e=>("boolean"==typeof e&&(r=e),r),resolve:(e,t)=>{for(let r of u().map(e=>e.middleware).reverse())e=r(e,t);return r&&console.log(c.identify()),e}};return c},kI={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},kE={high:3,normal:2,low:1};class kT{constructor(e){this.config=e,this.middlewareStack=k_()}send(e,t,r){let n;let a="function"!=typeof t?t:void 0,o="function"==typeof t?t:r;if(void 0===a&&!0===this.config.cacheMiddleware){this.handlers||(this.handlers=new WeakMap);let t=this.handlers;t.has(e.constructor)?n=t.get(e.constructor):(n=e.resolveMiddleware(this.middlewareStack,this.config,a),t.set(e.constructor,n))}else delete this.handlers,n=e.resolveMiddleware(this.middlewareStack,this.config,a);if(!o)return n(e).then(e=>e.output);n(e).then(e=>o(null,e.output),e=>o(e)).catch(()=>{})}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}class kN{constructor(){this.middlewareStack=k_()}static classBuilder(){return new kA}resolveMiddlewareWithContext(e,t,r,{middlewareFn:n,clientName:a,commandName:o,inputFilterSensitiveLog:i,outputFilterSensitiveLog:s,smithyContext:l,additionalContext:u,CommandCtor:c}){for(let a of n.bind(this)(c,e,t,r))this.middlewareStack.use(a);let d=e.concat(this.middlewareStack),{logger:p}=t,h={logger:p,clientName:a,commandName:o,inputFilterSensitiveLog:i,outputFilterSensitiveLog:s,[bQ]:{commandInstance:this,...l},...u},{requestHandler:f}=t;return d.resolve(e=>f.handle(e.request,r||{}),h)}}class kA{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){let e;let t=this;return e=class extends kN{static getEndpointParameterInstructions(){return t._ep}constructor(...[e]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=e??{},t._init(this)}resolveMiddleware(r,n,a){return this.resolveMiddlewareWithContext(r,n,a,{CommandCtor:e,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}let kC=e=>{if(null!=e){if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&kj.warn(kU(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw TypeError(`Expected number, got ${typeof e}: ${e}`)}},kM=Math.ceil(17014118346046923e22*(2-11920928955078125e-23)),kR=e=>{let t=kC(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>kM)throw TypeError(`Expected 32-bit float, got ${e}`);return t},kO=e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw TypeError(`Expected integer, got ${typeof e}: ${e}`)}},kF=e=>kD(e,32),kD=(e,t)=>{let r=kO(e);if(void 0!==r&&kP(r,t)!==r)throw TypeError(`Expected ${t}-bit integer, got ${e}`);return r},kP=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},k$=e=>{if(null==e)return;if("object"==typeof e&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw TypeError(`Expected object, got ${t}: ${e}`)},kL=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return kj.warn(kU(`Expected string, got ${typeof e}: ${e}`)),String(e);throw TypeError(`Expected string, got ${typeof e}: ${e}`)}},kB=e=>{if(null==e)return;let t=k$(e),r=Object.entries(t).filter(([,e])=>null!=e).map(([e])=>e);if(0===r.length)throw TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},kz=e=>"string"==typeof e?kW(e):kR(e),kW=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw Error(`Unable to parse float value: ${e}`)}},kU=e=>String(TypeError(e).stack||e).split("\n").slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join("\n"),kj={warn:console.warn};class kV extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,kV.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){return!!e&&!!e.$fault&&!!e.$metadata&&("client"===e.$fault||"server"===e.$fault)}}let kH=(e,t={})=>{Object.entries(t).filter(([,e])=>void 0!==e).forEach(([t,r])=>{(void 0==e[t]||""===e[t])&&(e[t]=r)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},kG=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let a=kq(e),o=a.httpStatusCode?a.httpStatusCode+"":void 0;throw kH(new r({name:t?.code||t?.Code||n||o||"UnknownError",$fault:"client",$metadata:a}),t)},kq=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),kK=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},kY=e=>{let t=[];for(let r in to){let n=to[r];void 0!==e[n]&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(e){this._checksumAlgorithms.push(e)},checksumAlgorithms(){return this._checksumAlgorithms}}},kX=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t},kQ=e=>{let t=e.retryStrategy;return{setRetryStrategy(e){t=e},retryStrategy:()=>t}},kZ=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},kJ=e=>({...kY(e),...kQ(e)}),k0=e=>({...kX(e),...kZ(e)}),k1=function(e){return Object.assign(new String(e),{deserializeJSON:()=>JSON.parse(String(e)),toString:()=>String(e),toJSON:()=>String(e)})};k1.from=e=>e&&"object"==typeof e&&(e instanceof k1||"deserializeJSON"in e)?e:"string"==typeof e||Object.getPrototypeOf(e)===String.prototype?k1(String(e)):k1(JSON.stringify(e)),k1.fromObject=k1.from;class k2{trace(){}debug(){}info(){}warn(){}error(){}}function k3(e,t,r){let n,a;if(void 0===t&&void 0===r)n={},a=e;else{if(n=e,"function"==typeof t)return k6(n,t,a=r);a=t}for(let e of Object.keys(a)){if(!Array.isArray(a[e])){n[e]=a[e];continue}k5(n,null,a,e)}return n}let k4=(e,t)=>{let r={};for(let n in t)k5(r,e,t,n);return r},k6=(e,t,r)=>k3(e,Object.entries(r).reduce((e,[r,n])=>(Array.isArray(n)?e[r]=n:"function"==typeof n?e[r]=[t,n()]:e[r]=[t,n],e),{})),k5=(e,t,r,n)=>{if(null!==t){let a=r[n];"function"==typeof a&&(a=[,a]);let[o=k8,i=k7,s=n]=a;("function"==typeof o&&o(t[s])||"function"!=typeof o&&o)&&(e[n]=i(t[s]));return}let[a,o]=r[n];if("function"==typeof o){let t;let r=void 0===a&&null!=(t=o()),i="function"==typeof a&&!!a(void 0)||"function"!=typeof a&&!!a;r?e[n]=t:i&&(e[n]=o())}else{let t=void 0===a&&null!=o,r="function"==typeof a&&!!a(o)||"function"!=typeof a&&!!a;(t||r)&&(e[n]=o)}},k8=e=>null!=e,k7=e=>e,k9=e=>{if(e!=e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},Se=e=>{if(null==e)return{};if(Array.isArray(e))return e.filter(e=>null!=e).map(Se);if("object"==typeof e){let t={};for(let r of Object.keys(e))null!=e[r]&&(t[r]=Se(e[r]));return t}return e},St=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"rekognition"}),Sr={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class Sn extends kV{constructor(e){super(e),Object.setPrototypeOf(this,Sn.prototype)}}class Sa extends Sn{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Sa.prototype),this.Message=e.Message,this.Code=e.Code}}(tc||(tc={})).visit=(e,t)=>void 0!==e.FaceMovementAndLightChallenge?t.FaceMovementAndLightChallenge(e.FaceMovementAndLightChallenge):t._(e.$unknown[0],e.$unknown[1]);class So extends Sn{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,So.prototype),this.Message=e.Message,this.Code=e.Code}}(td||(td={})).visit=(e,t)=>void 0!==e.VideoEvent?t.VideoEvent(e.VideoEvent):void 0!==e.ClientSessionInformationEvent?t.ClientSessionInformationEvent(e.ClientSessionInformationEvent):t._(e.$unknown[0],e.$unknown[1]),(tp||(tp={})).visit=(e,t)=>void 0!==e.FaceMovementAndLightChallenge?t.FaceMovementAndLightChallenge(e.FaceMovementAndLightChallenge):t._(e.$unknown[0],e.$unknown[1]);class Si extends Sn{constructor(e){super({name:"ServiceQuotaExceededException",$fault:"client",...e}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,Si.prototype),this.Message=e.Message,this.Code=e.Code}}class Ss extends Sn{constructor(e){super({name:"ServiceUnavailableException",$fault:"server",...e}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,Ss.prototype),this.Message=e.Message,this.Code=e.Code}}class Sl extends Sn{constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),this.name="ThrottlingException",this.$fault="client",Object.setPrototypeOf(this,Sl.prototype),this.Message=e.Message,this.Code=e.Code}}class Su extends Sn{constructor(e){super({name:"ValidationException",$fault:"client",...e}),this.name="ValidationException",this.$fault="client",Object.setPrototypeOf(this,Su.prototype),this.Message=e.Message,this.Code=e.Code}}(th||(th={})).visit=(e,t)=>void 0!==e.ServerSessionInformationEvent?t.ServerSessionInformationEvent(e.ServerSessionInformationEvent):void 0!==e.DisconnectionEvent?t.DisconnectionEvent(e.DisconnectionEvent):void 0!==e.ValidationException?t.ValidationException(e.ValidationException):void 0!==e.InternalServerException?t.InternalServerException(e.InternalServerException):void 0!==e.ThrottlingException?t.ThrottlingException(e.ThrottlingException):void 0!==e.ServiceQuotaExceededException?t.ServiceQuotaExceededException(e.ServiceQuotaExceededException):void 0!==e.ServiceUnavailableException?t.ServiceUnavailableException(e.ServiceUnavailableException):t._(e.$unknown[0],e.$unknown[1]);class Sc extends Sn{constructor(e){super({name:"SessionNotFoundException",$fault:"client",...e}),this.name="SessionNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Sc.prototype),this.Message=e.Message,this.Code=e.Code}}let Sd=e=>({...e,...e.LivenessRequestStream&&{LivenessRequestStream:"STREAMING_CONTENT"}}),Sp=e=>({...e,...e.LivenessResponseStream&&{LivenessResponseStream:"STREAMING_CONTENT"}}),Sh=(e,t)=>kr(e,t).then(e=>t.utf8Encoder(e)),Sf=(e,t)=>Sh(e,t).then(e=>{if(e.length)try{return JSON.parse(e)}catch(t){throw t?.name==="SyntaxError"&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}return{}}),Sm=async(e,t)=>{let r=await Sf(e,t);return r.message=r.message??r.Message,r},Sg=(e,t)=>{let r,n;let a=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(r=e.headers,n="x-amzn-errortype",Object.keys(r).find(e=>e.toLowerCase()===n.toLowerCase()));return void 0!==o?a(e.headers[o]):void 0!==t.code?a(t.code):void 0!==t.__type?a(t.__type):void 0},Sy=e=>{if(null!=e)return"object"==typeof e&&"__type"in e&&delete e.__type,kB(e)},Sv=async(e,t)=>{let r;let n=new ko(e,t),a=k3({},S2,{"content-type":"application/json",[S7]:e[S4],[xe]:e[S5],[S9]:e[S6],[S8]:e[S3]});return n.bp("/start-face-liveness-session"),void 0!==e.LivenessRequestStream&&(r=SA(e.LivenessRequestStream,t)),n.m("POST").h(a).b(r),n.build()},Sb=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Sw(e,t);let r=k3({$metadata:S1(e),[S4]:[,e.headers[S7]]}),n=e.body;return r.LivenessResponseStream=SR(n,t),r},Sw=async(e,t)=>{let r={...e,body:await Sm(e.body,t)},n=Sg(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rekognitionstreaming#AccessDeniedException":throw await SS(r,t);case"InternalServerException":case"com.amazonaws.rekognitionstreaming#InternalServerException":throw await Sx(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.rekognitionstreaming#ServiceQuotaExceededException":throw await S_(r,t);case"ServiceUnavailableException":case"com.amazonaws.rekognitionstreaming#ServiceUnavailableException":throw await SI(r,t);case"SessionNotFoundException":case"com.amazonaws.rekognitionstreaming#SessionNotFoundException":throw await SE(r,t);case"ThrottlingException":case"com.amazonaws.rekognitionstreaming#ThrottlingException":throw await ST(r,t);case"ValidationException":case"com.amazonaws.rekognitionstreaming#ValidationException":throw await SN(r,t);default:return Sk({output:e,parsedBody:r.body,errorCode:n})}},Sk=({output:e,parsedBody:t,errorCode:r})=>{kG({output:e,parsedBody:t,exceptionCtor:Sn,errorCode:r})},SS=async(e,t)=>{let r=k3({});return Object.assign(r,k4(e.body,{Code:kL,Message:kL})),kH(new Sa({$metadata:S1(e),...r}),e.body)},Sx=async(e,t)=>{let r=k3({});return Object.assign(r,k4(e.body,{Code:kL,Message:kL})),kH(new So({$metadata:S1(e),...r}),e.body)},S_=async(e,t)=>{let r=k3({});return Object.assign(r,k4(e.body,{Code:kL,Message:kL})),kH(new Si({$metadata:S1(e),...r}),e.body)},SI=async(e,t)=>{let r=k3({});return Object.assign(r,k4(e.body,{Code:kL,Message:kL})),kH(new Ss({$metadata:S1(e),...r}),e.body)},SE=async(e,t)=>{let r=k3({});return Object.assign(r,k4(e.body,{Code:kL,Message:kL})),kH(new Sc({$metadata:S1(e),...r}),e.body)},ST=async(e,t)=>{let r=k3({});return Object.assign(r,k4(e.body,{Code:kL,Message:kL})),kH(new Sl({$metadata:S1(e),...r}),e.body)},SN=async(e,t)=>{let r=k3({});return Object.assign(r,k4(e.body,{Code:kL,Message:kL})),kH(new Su({$metadata:S1(e),...r}),e.body)},SA=(e,t)=>t.eventStreamMarshaller.serialize(e,e=>td.visit(e,{VideoEvent:e=>SM(e,t),ClientSessionInformationEvent:e=>SC(e,t),_:e=>e})),SC=(e,t)=>{let r=new Uint8Array;return r=SU(e,t),{headers:{":event-type":{type:"string",value:"ClientSessionInformationEvent"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}},body:r=t.utf8Decoder(JSON.stringify(r))}},SM=(e,t)=>{let r=new Uint8Array;return r=SG(e,t),{headers:{":event-type":{type:"string",value:"VideoEvent"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}},body:r=t.utf8Decoder(JSON.stringify(r))}},SR=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>null!=r.ServerSessionInformationEvent?{ServerSessionInformationEvent:await SD(r.ServerSessionInformationEvent,t)}:null!=r.DisconnectionEvent?{DisconnectionEvent:await SO(r.DisconnectionEvent,t)}:null!=r.ValidationException?{ValidationException:await SB(r.ValidationException,t)}:null!=r.InternalServerException?{InternalServerException:await SF(r.InternalServerException,t)}:null!=r.ThrottlingException?{ThrottlingException:await SL(r.ThrottlingException,t)}:null!=r.ServiceQuotaExceededException?{ServiceQuotaExceededException:await SP(r.ServiceQuotaExceededException,t)}:null!=r.ServiceUnavailableException?{ServiceUnavailableException:await S$(r.ServiceUnavailableException,t)}:{$unknown:e}),SO=async(e,t)=>{let r={};return Object.assign(r,Se(await Sf(e.body,t))),r},SF=async(e,t)=>Sx({...e,body:await Sf(e.body,t)},t),SD=async(e,t)=>{let r={};return Object.assign(r,SJ(await Sf(e.body,t),t)),r},SP=async(e,t)=>S_({...e,body:await Sf(e.body,t)},t),S$=async(e,t)=>SI({...e,body:await Sf(e.body,t)},t),SL=async(e,t)=>ST({...e,body:await Sf(e.body,t)},t),SB=async(e,t)=>SN({...e,body:await Sf(e.body,t)},t),Sz=(e,t)=>k4(e,{Height:k9,Left:k9,Top:k9,Width:k9}),SW=(e,t)=>tc.visit(e,{FaceMovementAndLightChallenge:e=>({FaceMovementAndLightChallenge:Sj(e,t)}),_:(e,t)=>({name:t})}),SU=(e,t)=>k4(e,{Challenge:e=>SW(e,t)}),Sj=(e,t)=>k4(e,{ChallengeId:[],ColorDisplayed:Se,InitialFace:e=>SV(e,t),TargetFace:e=>SH(e,t),VideoEndTimestamp:[],VideoStartTimestamp:[]}),SV=(e,t)=>k4(e,{BoundingBox:e=>Sz(e,t),InitialFaceDetectedTimestamp:[]}),SH=(e,t)=>k4(e,{BoundingBox:e=>Sz(e,t),FaceDetectedInTargetPositionEndTimestamp:[],FaceDetectedInTargetPositionStartTimestamp:[]}),SG=(e,t)=>k4(e,{TimestampMillis:[],VideoChunk:t.base64Encoder}),Sq=(e,t)=>k4(e,{BlazeFaceDetectionThreshold:kz,FaceDistanceThreshold:kz,FaceDistanceThresholdMax:kz,FaceDistanceThresholdMin:kz,FaceIouHeightThreshold:kz,FaceIouWidthThreshold:kz,OvalFitTimeout:kF,OvalHeightWidthRatio:kz,OvalIouHeightThreshold:kz,OvalIouThreshold:kz,OvalIouWidthThreshold:kz}),SK=(e,t)=>k4(e,{DownscrollDuration:kz,FlatDisplayDuration:kz,FreshnessColor:Se}),SY=(e,t)=>(e||[]).filter(e=>null!=e).map(e=>SK(e,t)),SX=(e,t)=>k4(e,{ChallengeConfig:e=>Sq(e,t),ColorSequences:e=>SY(e,t),LightChallengeType:kL,OvalParameters:e=>SQ(e,t)}),SQ=(e,t)=>k4(e,{CenterX:kz,CenterY:kz,Height:kz,Width:kz}),SZ=(e,t)=>null!=e.FaceMovementAndLightChallenge?{FaceMovementAndLightChallenge:SX(e.FaceMovementAndLightChallenge,t)}:{$unknown:Object.entries(e)[0]},SJ=(e,t)=>k4(e,{SessionInformation:e=>S0(e,t)}),S0=(e,t)=>k4(e,{Challenge:e=>SZ(Sy(e),t)}),S1=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),S2=e=>null!=e&&""!==e&&(!Object.getOwnPropertyNames(e).includes("length")||0!=e.length)&&(!Object.getOwnPropertyNames(e).includes("size")||0!=e.size),S3="ChallengeVersions",S4="SessionId",S6="VideoHeight",S5="VideoWidth",S8="x-amz-rekognition-streaming-liveness-challenge-versions",S7="x-amz-rekognition-streaming-liveness-session-id",S9="x-amz-rekognition-streaming-liveness-video-height",xe="x-amz-rekognition-streaming-liveness-video-width";class xt extends kN.classBuilder().ep({...Sr}).m(function(e,t,r,n){return[w9(r,this.serialize,this.deserialize),kw(r,e.getEndpointParameterInstructions()),b4(r),wN(r,{headerPrefix:"x-amz-rekognition-streaming-liveness-"})]}).s("RekognitionStreamingService","StartFaceLivenessSession",{eventStream:{input:!0,output:!0}}).n("RekognitionStreamingClient","StartFaceLivenessSessionCommand").f(Sd,Sp).ser(Sv).de(Sb).build(){}function xr(){return window.matchMedia("(orientation: landscape)")}class xn{constructor(e){if("undefined"==typeof MediaRecorder)throw Error("MediaRecorder is not supported by this browser");this._stream=e,this._chunks=[],this._recorder=new MediaRecorder(e,{bitsPerSecond:2e6,mimeType:!function(){let e=/Chrome\/125\.[0-9]+\.[0-9]+\.([0-9]+)/i.exec(navigator.userAgent);if(!e)return!1;let t=e[1];return/Android/i.test(navigator.userAgent)&&/Chrome\/125/i.test(navigator.userAgent)&&146>parseInt(t)}()?void 0:"video/x-matroska;codecs=vp8"}),this._setupCallbacks()}getState(){return this._recorder.state}start(e){this.clearRecordedData(),this.recordingStartApiTimestamp=Date.now(),this._recorder.start(e)}async stop(){return"recording"===this.getState()&&this._recorder.stop(),this._recorderStopped}pause(){this._recorder.pause()}clearRecordedData(){this._chunks=[]}dispatch(e){this._recorder.dispatchEvent(e)}getVideoChunkSize(){return this._chunks.length}_setupCallbacks(){this.videoStream=new ReadableStream({start:e=>{this._recorder&&(this._recorder.ondataavailable=t=>{t.data&&t.data.size>0&&(0===this._chunks.length&&(this.firstChunkTimestamp=Date.now()),this._chunks.push(t.data),e.enqueue(t.data))},this._recorder.addEventListener("clientSesssionInfo",t=>{e.enqueue(t.data.clientInfo)}),this._recorder.addEventListener("stopVideo",()=>{e.enqueue("stopVideo")}),this._recorder.addEventListener("endStream",()=>{e.close()}),this._recorder.addEventListener("endStreamWithCode",t=>{e.enqueue({type:"endStreamWithCode",code:t.data.code})}))}}),this.recorderStarted=new Promise(e=>{this._recorder.onstart=()=>{this.recorderStartTimestamp=Date.now(),e()}}),this._recorderStopped=new Promise(e=>{this._recorder.onstop=()=>{this.recorderEndTimestamp=Date.now(),e()}}),this._recorder.onerror=()=>{"stopped"!==this.getState()&&this.stop()}}}let xa=e=>t=>async r=>{if(!bZ.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:a=""}=e.requestHandler.metadata||{};if(a.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let e=n.hostname;null!=n.port&&(e+=`:${n.port}`),n.headers.host=e}return t(r)},xo={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},xi=e=>({applyToStack:t=>{t.add(xa(e),xo)}}),xs=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:a,commandName:o,logger:i,dynamoDbDocumentClientOptions:s={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:u}=s,c=l??t.inputFilterSensitiveLog,d=u??t.outputFilterSensitiveLog,{$metadata:p,...h}=n.output;return i?.info?.({clientName:a,commandName:o,input:c(r.input),output:d(h),metadata:p}),n}catch(l){let{clientName:e,commandName:n,logger:a,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:i}=o,s=i??t.inputFilterSensitiveLog;throw a?.error?.({clientName:e,commandName:n,input:s(r.input),error:l,metadata:l.$metadata}),l}},xl={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},xu=e=>({applyToStack:e=>{e.add(xs(),xl)}});var xc=r(40257);let xd="X-Amzn-Trace-Id",xp=e=>t=>async r=>{let n;let{request:a}=r;if(!bZ.isInstance(a)||"node"!==e.runtime||a.headers.hasOwnProperty(xd))return t(r);let o=xc.env.AWS_LAMBDA_FUNCTION_NAME,i=xc.env._X_AMZN_TRACE_ID;return"string"==typeof o&&o.length>0&&"string"==typeof(n=i)&&n.length>0&&(a.headers[xd]=i),t({...r,request:a})},xh={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},xf=e=>({applyToStack:t=>{t.add(xp(e),xh)}}),xm=(e,t,r)=>{let n,a,o;let i=!1,s=async()=>{a||(a=e());try{n=await a,o=!0,i=!1}finally{a=void 0}return n};return void 0===t?async e=>((!o||e?.forceRefresh)&&(n=await s()),n):async e=>((!o||e?.forceRefresh)&&(n=await s()),i||(r&&!r(n)?i=!0:t(n)&&await s()),n)},xg=e=>encodeURIComponent(e).replace(/[!'()*]/g,xy),xy=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,xv=e=>"string"==typeof e?wK(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),xb="X-Amz-Date",xw="X-Amz-Signature",xk="X-Amz-Security-Token",xS="authorization",xx=xb.toLowerCase(),x_=[xS,xx,"date"],xI=xw.toLowerCase(),xE="x-amz-content-sha256",xT=xk.toLowerCase(),xN={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},xA=/^proxy-/,xC=/^sec-/,xM="AWS4-HMAC-SHA256",xR="aws4_request",xO={},xF=[],xD=(e,t,r)=>`${e}/${t}/${r}/${xR}`,xP=async(e,t,r,n,a)=>{let o=await x$(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${a}:${wr(o)}:${t.sessionToken}`;if(i in xO)return xO[i];for(xF.push(i);xF.length>50;)delete xO[xF.shift()];let s=`AWS4${t.secretAccessKey}`;for(let t of[r,n,a,xR])s=await x$(e,s,t);return xO[i]=s},x$=(e,t,r)=>{let n=new e(t);return n.update(xv(r)),n.digest()},xL=({headers:e},t,r)=>{let n={};for(let a of Object.keys(e).sort()){if(void 0==e[a])continue;let o=a.toLowerCase();(!(o in xN||t?.has(o)||xA.test(o)||xC.test(o))||r&&(!r||r.has(o)))&&(n[o]=e[a].trim().replace(/\s+/g," "))}return n},xB=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===xI)continue;let a=xg(n);t.push(a);let o=e[n];"string"==typeof o?r[a]=`${a}=${xg(o)}`:Array.isArray(o)&&(r[a]=o.slice(0).reduce((e,t)=>e.concat([`${a}=${xg(t)}`]),[]).sort().join("&"))}return t.sort().map(e=>r[e]).filter(e=>e).join("&")},xz=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),xW=async({headers:e,body:t},r)=>{for(let t of Object.keys(e))if(t.toLowerCase()===xE)return e[t];if(void 0==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||xz(t)){let e=new r;return e.update(xv(t)),wr(await e.digest())}return"UNSIGNED-PAYLOAD"};class xU{format(e){let t=[];for(let r of Object.keys(e)){let n=wK(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),n=0;for(let e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(a.buffer);return o.set(e.value,3),o;case"string":let i=wK(e.value),s=new DataView(new ArrayBuffer(3+i.byteLength));s.setUint8(0,7),s.setUint16(1,i.byteLength,!1);let l=new Uint8Array(s.buffer);return l.set(i,3),l;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(xV.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!xj.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let c=new Uint8Array(17);return c[0]=9,c.set(wt(e.value.replace(/\-/g,"")),1),c}}}(eU=tf||(tf={}))[eU.boolTrue=0]="boolTrue",eU[eU.boolFalse=1]="boolFalse",eU[eU.byte=2]="byte",eU[eU.short=3]="short",eU[eU.integer=4]="integer",eU[eU.long=5]="long",eU[eU.byteArray=6]="byteArray",eU[eU.string=7]="string",eU[eU.timestamp=8]="timestamp",eU[eU.uuid=9]="uuid";let xj=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class xV{constructor(e){if(this.bytes=e,8!==e.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x7fffffffffffffff||e<-0x8000000000000000)throw Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&xH(t),new xV(t)}valueOf(){let e=this.bytes.slice(0),t=128&e[0];return t&&xH(e),parseInt(wr(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function xH(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}let xG=(e,t)=>{for(let r of(e=e.toLowerCase(),Object.keys(t)))if(e===r.toLowerCase())return!0;return!1},xq=(e,t={})=>{let{headers:r,query:n={}}=bZ.clone(e);for(let e of Object.keys(r)){let a=e.toLowerCase();("x-amz-"===a.slice(0,6)&&!t.unhoistableHeaders?.has(a)||t.hoistableHeaders?.has(a))&&(n[e]=r[e],delete r[e])}return{...e,headers:r,query:n}},xK=e=>{for(let t of Object.keys((e=bZ.clone(e)).headers))x_.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},xY=e=>xX(e).toISOString().replace(/\.\d{3}Z$/,"Z"),xX=e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?new Date(Number(e)?1e3*Number(e):e):e;class xQ{constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:a,uriEscapePath:o=!0}){this.headerFormatter=new xU,this.service=n,this.sha256=a,this.uriEscapePath=o,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=w4(r),this.credentialProvider=w4(t)}async presign(e,t={}){let{signingDate:r=new Date,expiresIn:n=3600,unsignableHeaders:a,unhoistableHeaders:o,signableHeaders:i,hoistableHeaders:s,signingRegion:l,signingService:u}=t,c=await this.credentialProvider();this.validateResolvedCredentials(c);let d=l??await this.regionProvider(),{longDate:p,shortDate:h}=xZ(r);if(n>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let f=xD(h,d,u??this.service),m=xq(xK(e),{unhoistableHeaders:o,hoistableHeaders:s});c.sessionToken&&(m.query[xk]=c.sessionToken),m.query["X-Amz-Algorithm"]=xM,m.query["X-Amz-Credential"]=`${c.accessKeyId}/${f}`,m.query[xb]=p,m.query["X-Amz-Expires"]=n.toString(10);let g=xL(m,a,i);return m.query["X-Amz-SignedHeaders"]=xJ(g),m.query[xw]=await this.getSignature(p,f,this.getSigningKey(c,d,h,u),this.createCanonicalRequest(m,g,await xW(e,this.sha256))),m}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:n,signingRegion:a,signingService:o}){let i=a??await this.regionProvider(),{shortDate:s,longDate:l}=xZ(r),u=xD(s,i,o??this.service),c=await xW({headers:{},body:t},this.sha256),d=new this.sha256;d.update(e);let p=["AWS4-HMAC-SHA256-PAYLOAD",l,u,n,wr(await d.digest()),c].join("\n");return this.signString(p,{signingDate:r,signingRegion:i,signingService:o})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:n,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:n}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let o=r??await this.regionProvider(),{shortDate:i}=xZ(t),s=new this.sha256(await this.getSigningKey(a,o,i,n));return s.update(xv(e)),wr(await s.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:n,signingRegion:a,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let s=a??await this.regionProvider(),l=xK(e),{longDate:u,shortDate:c}=xZ(t),d=xD(c,s,o??this.service);l.headers[xx]=u,i.sessionToken&&(l.headers[xT]=i.sessionToken);let p=await xW(l,this.sha256);!xG(xE,l.headers)&&this.applyChecksum&&(l.headers[xE]=p);let h=xL(l,n,r),f=await this.getSignature(u,d,this.getSigningKey(i,s,c,o),this.createCanonicalRequest(l,h,p));return l.headers[xS]=`${xM} Credential=${i.accessKeyId}/${d}, SignedHeaders=${xJ(h)}, Signature=${f}`,l}createCanonicalRequest(e,t,r){let n=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${xB(e)}
${n.map(e=>`${e}:${t[e]}`).join("\n")}

${n.join(";")}
${r}`}async createStringToSign(e,t,r){let n=new this.sha256;n.update(xv(r));let a=await n.digest();return`${xM}
${e}
${t}
${wr(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let r of e.split("/"))r?.length!==0&&"."!==r&&(".."===r?t.pop():t.push(r));return xg(`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`).replace(/%2F/g,"/")}return e}async getSignature(e,t,r,n){let a=await this.createStringToSign(e,t,n),o=new this.sha256(await r);return o.update(xv(a)),wr(await o.digest())}getSigningKey(e,t,r,n){return xP(this.sha256,e,r,t,n||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw Error("Resolved credential object is not valid")}}let xZ=e=>{let t=xY(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},xJ=e=>Object.keys(e).sort().join(";"),x0=e=>{let t;let r=e.credentials?x1(e.credentials):e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e})),{signingEscapePath:n=!0,systemClockOffset:a=e.systemClockOffset||0,sha256:o}=e;return t=e.signer?w4(e.signer):e.regionInfoProvider?()=>w4(e.region)().then(async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t]).then(([t,a])=>{let{signingRegion:i,signingService:s}=t;e.signingRegion=e.signingRegion||i||a,e.signingName=e.signingName||s||e.serviceId;let l={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:n};return new(e.signerConstructor||xQ)(l)}):async t=>{let a;t=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await w4(e.region)(),properties:{}},t);let i=t?.name==="sigv4a",s=t.signingRegion,l=t.signingName;i?a=e.signingRegion||s:(e.signingRegion=e.signingRegion||s,a=e.signingRegion),e.signingName=e.signingName||l||e.serviceId;let u={...e,credentials:r,region:a,service:e.signingName,sha256:o,uriEscapePath:n};return new(e.signerConstructor||xQ)(u)},{...e,systemClockOffset:a,signingEscapePath:n,credentials:r,signer:t}},x1=e=>"function"==typeof e?xm(e,e=>void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5,e=>void 0!==e.expiration):w4(e),x2=e=>new Date(Date.now()+e),x3=(e,t)=>Math.abs(x2(t).getTime()-e)>=3e5,x4=(e,t)=>{let r=Date.parse(e);return x3(r,t)?r-Date.now():t},x6=e=>(t,r)=>async function(n){let a,o,i;if(!bZ.isInstance(n.request))return t(n);let s=r.endpointV2?.properties?.authSchemes?.[0],l=r.endpointV2?.properties?.authSchemes?.[1];if(s?.name==="sigv4a"&&l){let t=o=await e.signer(a=s);(()=>{if("function"==typeof t?.getSigv4aSigner){if(t?.signerOptions?.runtime!=="node")return!1;try{return t.getSigv4aSigner(),!0}catch(e){}}return!1})()||(o=await e.signer(a=l))}else o=await e.signer(a=s);let u=a?.name==="sigv4a"?a?.signingRegionSet?.join(","):void 0,c={signingDate:x2(e.systemClockOffset),signingRegion:u||r.signing_region,signingService:r.signing_service};if(r.s3ExpressIdentity){let e=o;if((i=await e.signWithCredentials(n.request,r.s3ExpressIdentity,c)).headers["X-Amz-Security-Token"]||i.headers["x-amz-security-token"])throw Error("X-Amz-Security-Token must not be set for s3-express requests.")}else i=await o.sign(n.request,c);let d=await t({...n,request:i}).catch(t=>{let r=t.ServerTime??x5(t.$response);throw r&&(e.systemClockOffset=x4(r,e.systemClockOffset)),t}),p=x5(d.response);return p&&(e.systemClockOffset=x4(p,e.systemClockOffset)),d},x5=e=>bJ.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,x8={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},x7=e=>({applyToStack:t=>{t.addRelativeTo(x6(e),x8)}}),x9=RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),_e=e=>x9.test(e)||e.startsWith("[")&&e.endsWith("]"),_t=RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),_r=(e,t=!1)=>{if(!t)return _t.test(e);for(let t of e.split("."))if(!_r(t))return!1;return!0},_n={},_a="endpoints";function _o(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${_o(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(_o).join(", ")})`:JSON.stringify(e,null,2)}class _i extends Error{constructor(e){super(e),this.name="EndpointError"}}let _s=e=>{let t=e.split("."),r=[];for(let n of t){let t=n.indexOf("[");if(-1!==t){if(n.indexOf("]")!==n.length-1)throw new _i(`Path: '${e}' does not end with ']'`);let a=n.slice(t+1,-1);if(Number.isNaN(parseInt(a)))throw new _i(`Invalid array index: '${a}' in path: '${e}'`);0!==t&&r.push(n.slice(0,t)),r.push(a)}else r.push(n)}return r},_l=(e,t)=>_s(t).reduce((r,n)=>{if("object"!=typeof r)throw new _i(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),_u={[ta.HTTP]:80,[ta.HTTPS]:443},_c={booleanEquals:(e,t)=>e===t,getAttr:_l,isSet:e=>null!=e,isValidHostLabel:_r,not:e=>!e,parseURL:e=>{let t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){let{hostname:t,port:r,protocol:n="",path:a="",query:o={}}=e,i=new URL(`${n}//${t}${r?`:${r}`:""}${a}`);return i.search=Object.entries(o).map(([e,t])=>`${e}=${t}`).join("&"),i}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:a,pathname:o,protocol:i,search:s}=t;if(s)return null;let l=i.slice(0,-1);if(!Object.values(ta).includes(l))return null;let u=_e(a),c=r.includes(`${n}:${_u[l]}`)||"string"==typeof e&&e.includes(`${n}:${_u[l]}`),d=`${n}${c?`:${_u[l]}`:""}`;return{scheme:l,authority:d,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},stringEquals:(e,t)=>e===t,substring:(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},_d=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},a=0;for(;a<e.length;){let t=e.indexOf("{",a);if(-1===t){r.push(e.slice(a));break}r.push(e.slice(a,t));let o=e.indexOf("}",t);if(-1===o){r.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[o+1]&&(r.push(e.slice(t+1,o)),a=o+2);let i=e.substring(t+1,o);if(i.includes("#")){let[e,t]=i.split("#");r.push(_l(n[e],t))}else r.push(n[i]);a=o+1}return r.join("")},_p=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],_h=(e,t,r)=>{if("string"==typeof e)return _d(e,r);if(e.fn)return _f(e,r);if(e.ref)return _p(e,r);throw new _i(`'${t}': ${String(e)} is not a string, function or reference.`)},_f=({fn:e,argv:t},r)=>{let n=t.map(e=>["boolean","number"].includes(typeof e)?e:_h(e,"arg",r)),a=e.split(".");return a[0]in _n&&null!=a[1]?_n[a[0]][a[1]](...n):_c[e](...n)},_m=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new _i(`'${e}' is already defined in Reference Record.`);let n=_f(t,r);return r.logger?.debug?.(`${_a} evaluateCondition: ${_o(t)} = ${_o(n)}`),{result:""===n||!!n,...null!=e&&{toAssign:{name:e,value:n}}}},_g=(e=[],t)=>{let r={};for(let n of e){let{result:e,toAssign:a}=_m(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!e)return{result:e};a&&(r[a.name]=a.value,t.logger?.debug?.(`${_a} assign: ${a.name} := ${_o(a.value)}`))}return{result:!0,referenceRecord:r}},_y=(e,t)=>Object.entries(e).reduce((e,[r,n])=>({...e,[r]:n.map(e=>{let n=_h(e,"Header value entry",t);if("string"!=typeof n)throw new _i(`Header '${r}' value '${n}' is not a string`);return n})}),{}),_v=(e,t)=>{if(Array.isArray(e))return e.map(e=>_v(e,t));switch(typeof e){case"string":return _d(e,t);case"object":if(null===e)throw new _i(`Unexpected endpoint property: ${e}`);return _b(e,t);case"boolean":return e;default:throw new _i(`Unexpected endpoint property type: ${typeof e}`)}},_b=(e,t)=>Object.entries(e).reduce((e,[r,n])=>({...e,[r]:_v(n,t)}),{}),_w=(e,t)=>{let r=_h(e,"Endpoint URL",t);if("string"==typeof r)try{return new URL(r)}catch(e){throw console.error(`Failed to construct URL with ${r}`,e),e}throw new _i(`Endpoint URL must be a string, got ${typeof r}`)},_k=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:a,referenceRecord:o}=_g(r,t);if(!a)return;let i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:s,properties:l,headers:u}=n;return t.logger?.debug?.(`${_a} Resolving endpoint from template: ${_o(n)}`),{...void 0!=u&&{headers:_y(u,i)},...void 0!=l&&{properties:_b(l,i)},url:_w(s,i)}},_S=(e,t)=>{let{conditions:r,error:n}=e,{result:a,referenceRecord:o}=_g(r,t);if(a)throw new _i(_h(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},_x=(e,t)=>{let{conditions:r,rules:n}=e,{result:a,referenceRecord:o}=_g(r,t);if(a)return __(n,{...t,referenceRecord:{...t.referenceRecord,...o}})},__=(e,t)=>{for(let r of e)if("endpoint"===r.type){let e=_k(r,t);if(e)return e}else if("error"===r.type)_S(r,t);else if("tree"===r.type){let e=_x(r,t);if(e)return e}else throw new _i(`Unknown endpoint rule: ${r}`);throw new _i("Rules evaluation failed")},_I=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:a,rules:o}=e;t.logger?.debug?.(`${_a} Initial EndpointParams: ${_o(r)}`);let i=Object.entries(a).filter(([,e])=>null!=e.default).map(([e,t])=>[e,t.default]);if(i.length>0)for(let[e,t]of i)r[e]=r[e]??t;for(let e of Object.entries(a).filter(([,e])=>e.required).map(([e])=>e))if(null==r[e])throw new _i(`Missing required parameter: '${e}'`);let s=__(o,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${_a} Resolved endpoint: ${_o(s)}`),s},_E=(e,t=!1)=>{if(t){for(let t of e.split("."))if(!_E(t))return!1;return!0}return!(!_r(e)||e.length<3||e.length>63||e!==e.toLowerCase()||_e(e))};var _T=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}');let _N=()=>"",_A={isVirtualHostableS3Bucket:_E,parseArn:e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,a,o,i,...s]=t;return"arn"!==r||""===n||""===a||""===s[0]?null:{partition:n,service:a,region:o,accountId:i,resourceId:s[0].includes("/")?s[0].split("/"):s}},partition:e=>{let{partitions:t}=_T;for(let r of t){let{regions:t,outputs:n}=r;for(let[r,a]of Object.entries(t))if(r===e)return{...n,...a}}for(let r of t){let{regionRegex:t,outputs:n}=r;if(new RegExp(t).test(e))return{...n}}let r=t.find(e=>"aws"===e.id);if(!r)throw Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}}};_n.aws=_A;let _C="user-agent",_M="x-amz-user-agent",_R=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,_O=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,_F=e=>(t,r)=>async n=>{let{request:a}=n;if(!bZ.isInstance(a))return t(n);let{headers:o}=a,i=r?.userAgent?.map(_D)||[],s=(await e.defaultUserAgentProvider()).map(_D),l=e?.customUserAgent?.map(_D)||[],u=_N(),c=(u?[u]:[]).concat([...s,...i,...l]).join(" "),d=[...s.filter(e=>e.startsWith("aws-sdk-")),...l].join(" ");return"browser"!==e.runtime?(d&&(o[_M]=o[_M]?`${o[_C]} ${d}`:d),o[_C]=c):o[_M]=c,t({...n,request:a})},_D=e=>{let t=e[0].split("/").map(e=>e.replace(_R,"-")).join("/"),r=e[1]?.replace(_O,"-"),n=t.indexOf("/"),a=t.substring(0,n),o=t.substring(n+1);return"api"===a&&(o=o.toLowerCase()),[a,o,r].filter(e=>e&&e.length>0).reduce((e,t,r)=>{switch(r){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}},"")},_P={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},_$=e=>({applyToStack:t=>{t.add(_F(e),_P)}});(ej=tm||(tm={})).ENV="env",ej.CONFIG="shared config entry";let _L=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),_B=e=>_L(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,_z=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw Error("Region is missing");return{...e,region:async()=>"string"==typeof t?_B(t):_B(await t()),useFipsEndpoint:async()=>!!_L("string"==typeof t?t:await t())||("function"!=typeof r?Promise.resolve(!!r):r())}},_W=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),_U="content-length",_j={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},_V=e=>({applyToStack:t=>{var r;t.add((r=e.bodyLengthChecker,e=>async t=>{let n=t.request;if(bZ.isInstance(n)){let{body:e,headers:t}=n;if(e&&-1===Object.keys(t).map(e=>e.toLowerCase()).indexOf(_U))try{let t=r(e);n.headers={...n.headers,[_U]:String(t)}}catch(e){}}return e({...t,request:n})}),_j)}});(eV=tg||(tg={})).STANDARD="standard",eV.ADAPTIVE="adaptive";let _H=tg.STANDARD,_G=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],_q=["TimeoutError","RequestTimeout","RequestTimeoutException"],_K=[500,502,503,504],_Y=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],_X=e=>e.$metadata?.clockSkewCorrected,_Q=e=>e.$metadata?.httpStatusCode===429||_G.includes(e.name)||e.$retryable?.throttling==!0,_Z=(e,t=0)=>_X(e)||_q.includes(e.name)||_Y.includes(e?.code||"")||_K.includes(e.$metadata?.httpStatusCode||0)||void 0!==e.cause&&t<=10&&_Z(e.cause,t+1),_J=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;if(500<=t&&t<=599&&!_Z(e))return!0}return!1};class _0{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(e=>_0.setTimeoutFn(e,t))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),_Q(e)){let e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=Math.floor(2*this.getCurrentTimeInSeconds())/2;if(this.requestCount++,e>this.lastTxRateBucket){let t=this.requestCount/(e-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(t*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=e}}getPrecise(e){return parseFloat(e.toFixed(8))}}_0.setTimeoutFn=setTimeout;let _1=()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(2e4,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}},_2=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});class _3{constructor(e){this.maxAttempts=e,this.mode=tg.STANDARD,this.capacity=500,this.retryBackoffStrategy=_1(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return _2({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){let r=await this.getMaxAttempts();if(this.shouldRetry(e,t,r)){let r=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===r?500:100);let n=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),a=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,n):n,o=this.getCapacityCost(r);return this.capacity-=o,_2({retryDelay:a,retryCount:e.getRetryCount()+1,retryCost:o})}throw Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn("Max attempts provider could not resolve. Using default of 3"),3}}shouldRetry(e,t,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?10:5}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class _4{constructor(e,t){this.maxAttemptsProvider=e,this.mode=tg.ADAPTIVE;let{rateLimiter:r}=t??{};this.rateLimiter=r??new _0,this.standardRetryStrategy=new _3(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}var _6=r(49360);let _5=e=>e instanceof Error?e:e instanceof Object?Object.assign(Error(),e):"string"==typeof e?Error(e):Error(`AWS SDK error wrapper for ${e}`),_8=e=>{let{retryStrategy:t}=e,r=w4(e.maxAttempts??3);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await w4(e.retryMode)()===tg.ADAPTIVE?new _4(r):new _3(r))}},_7=e=>e?.body instanceof ReadableStream,_9=e=>(t,r)=>async n=>{let a=await e.retryStrategy(),o=await e.maxAttempts();if(!Ie(a))return a?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",a.mode]]),a.retry(t,n);{let e=await a.acquireInitialRetryToken(r.partition_id),i=Error(),s=0,l=0,{request:u}=n,c=bZ.isInstance(u);for(c&&(u.headers["amz-sdk-invocation-id"]=(0,_6.Z)());;)try{c&&(u.headers["amz-sdk-request"]=`attempt=${s+1}; max=${o}`);let{response:r,output:i}=await t(n);return a.recordSuccess(e),i.$metadata.attempts=s+1,i.$metadata.totalRetryDelay=l,{response:r,output:i}}catch(o){let t=It(o);if(i=_5(o),c&&_7(u))throw(r.logger instanceof k2?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),i;try{e=await a.refreshRetryTokenForRetry(e,t)}catch(e){throw i.$metadata||(i.$metadata={}),i.$metadata.attempts=s+1,i.$metadata.totalRetryDelay=l,i}s=e.getRetryCount();let n=e.getRetryDelay();l+=n,await new Promise(e=>setTimeout(e,n))}}},Ie=e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess,It=e=>{let t={error:e,errorType:Ir(e)},r=Io(e.$response);return r&&(t.retryAfterHint=r),t},Ir=e=>_Q(e)?"THROTTLING":_Z(e)?"TRANSIENT":_J(e)?"SERVER_ERROR":"CLIENT_ERROR",In={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ia=e=>({applyToStack:t=>{t.add(_9(e),In)}}),Io=e=>{if(!bJ.isInstance(e))return;let t=Object.keys(e.headers).find(e=>"retry-after"===e.toLowerCase());if(!t)return;let r=e.headers[t],n=Number(r);return new Date(Number.isNaN(n)?r:1e3*n)};var Ii={i8:"3.621.0"},Is={name:"SHA-256"},Il={name:"HMAC",hash:Is},Iu=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);let Ic={};function Id(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:Ic}var Ip=function(){function e(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return e.prototype.update=function(e){if(!(0,b5.rA)(e)){var t=(0,b5.i$)(e),r=new Uint8Array(this.toHash.byteLength+t.byteLength);r.set(this.toHash,0),r.set(t,this.toHash.byteLength),this.toHash=r}},e.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return Id().crypto.subtle.sign(Il,t,e.toHash).then(function(e){return new Uint8Array(e)})}):(0,b5.rA)(this.toHash)?Promise.resolve(Iu):Promise.resolve().then(function(){return Id().crypto.subtle.digest(Is,e.toHash)}).then(function(e){return Promise.resolve(new Uint8Array(e))})},e.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise(function(t,r){Id().crypto.subtle.importKey("raw",(0,b5.i$)(e.secret),Il,!1,["sign"]).then(t,r)}),this.key.catch(function(){}))},e}(),Ih=r(80800),If=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"],Im=function(){function e(e){var t,r,n;"object"==typeof(r=t=Id())&&"object"==typeof r.crypto&&"function"==typeof r.crypto.getRandomValues&&"object"==typeof t.crypto.subtle&&(n=t.crypto.subtle)&&If.every(function(e){return"function"==typeof n[e]})?this.hash=new Ip(e):this.hash=new Ih.f(e)}return e.prototype.update=function(e,t){this.hash.update((0,b5.i$)(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}(),Ig=r(73493),Iy=r.n(Ig);let Iv=({serviceId:e,clientVersion:t})=>async()=>{let r="undefined"!=typeof window&&window?.navigator?.userAgent?Iy().parse(window.navigator.userAgent):void 0,n=[["aws-sdk-js",t],["ua","2.0"],[`os/${r?.os?.name||"other"}`,r?.os?.version],["lang/js"],["md/browser",`${r?.browser?.name??"unknown"}_${r?.browser?.version??"unknown"}`]];return e&&n.push([`api/${e}`,t]),n},Ib=e=>()=>Promise.reject(e),Iw="function"==typeof TextEncoder?new TextEncoder:null,Ik=e=>{if("string"==typeof e){if(Iw)return Iw.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){let n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw Error(`Body Length computation failed for ${e}`)},IS="required",Ix="argv",I_="isSet",II="tree",IE="error",IT="endpoint",IN="PartitionResult",IA={[IS]:!1,type:"String"},IC={[IS]:!0,default:!1,type:"Boolean"},IM={ref:"Endpoint"},IR={fn:"booleanEquals",[Ix]:[{ref:"UseFIPS"},!0]},IO={fn:"booleanEquals",[Ix]:[{ref:"UseDualStack"},!0]},IF={},ID={fn:"booleanEquals",[Ix]:[!0,{fn:"getAttr",[Ix]:[{ref:IN},"supportsFIPS"]}]},IP={fn:"booleanEquals",[Ix]:[!0,{fn:"getAttr",[Ix]:[{ref:IN},"supportsDualStack"]}]},I$=[IR],IL=[IO],IB=[{ref:"Region"}],Iz={version:"1.0",parameters:{Region:IA,UseDualStack:IC,UseFIPS:IC,Endpoint:IA},rules:[{conditions:[{fn:I_,[Ix]:[IM]}],type:II,rules:[{conditions:I$,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:IE},{type:II,rules:[{conditions:IL,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:IE},{endpoint:{url:IM,properties:IF,headers:IF},type:IT}]}]},{type:II,rules:[{conditions:[{fn:I_,[Ix]:IB}],type:II,rules:[{conditions:[{fn:"aws.partition",[Ix]:IB,assign:IN}],type:II,rules:[{conditions:[IR,IO],type:II,rules:[{conditions:[ID,IP],type:II,rules:[{type:II,rules:[{endpoint:{url:"https://streaming-rekognition-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:IF,headers:IF},type:IT}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:IE}]},{conditions:I$,type:II,rules:[{conditions:[ID],type:II,rules:[{type:II,rules:[{endpoint:{url:"https://streaming-rekognition-fips.{Region}.{PartitionResult#dnsSuffix}",properties:IF,headers:IF},type:IT}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:IE}]},{conditions:IL,type:II,rules:[{conditions:[IP],type:II,rules:[{type:II,rules:[{endpoint:{url:"https://streaming-rekognition.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:IF,headers:IF},type:IT}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:IE}]},{type:II,rules:[{endpoint:{url:"https://streaming-rekognition.{Region}.{PartitionResult#dnsSuffix}",properties:IF,headers:IF},type:IT}]}]}]},{error:"Invalid Configuration: Missing Region",type:IE}]}]},IW=(e,t={})=>_I(Iz,{endpointParams:e,logger:t.logger});_n.aws=_A;let IU=e=>({apiVersion:"2022-05-30",base64Decoder:e?.base64Decoder??wq,base64Encoder:e?.base64Encoder??wY,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??IW,extensions:e?.extensions??[],logger:e?.logger??new k2,serviceId:e?.serviceId??"RekognitionStreaming",urlParser:e?.urlParser??kf,utf8Decoder:e?.utf8Decoder??wK,utf8Encoder:e?.utf8Encoder??ke}),Ij=["in-region","cross-region","mobile","standard","legacy"],IV=({defaultsMode:e}={})=>xm(async()=>{let t="function"==typeof e?await e():e;switch(t?.toLowerCase()){case"auto":return Promise.resolve(IH()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw Error(`Invalid parameter for "defaultsMode", expect ${Ij.join(", ")}, got ${t}`)}}),IH=()=>{let e="undefined"!=typeof window&&window?.navigator?.userAgent?Iy().parse(window.navigator.userAgent):void 0,t=e?.platform?.type;return"tablet"===t||"mobile"===t},IG=e=>{let t=IV(e),r=()=>t().then(kK),n=IU(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Ik,credentialDefaultProvider:e?.credentialDefaultProvider??(e=>()=>Promise.reject(Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??Iv({serviceId:n.serviceId,clientVersion:Ii.i8}),eventStreamPayloadHandlerProvider:e?.eventStreamPayloadHandlerProvider??wx,eventStreamSerdeProvider:e?.eventStreamSerdeProvider??wU,maxAttempts:e?.maxAttempts??3,region:e?.region??Ib("Region is missing"),requestHandler:wJ.create(e?.requestHandler??r,wV.create(r)),retryMode:e?.retryMode??(async()=>(await r()).retryMode||_H),sha256:e?.sha256??Im,streamCollector:e?.streamCollector??wX,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(!1)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(!1))}},Iq=e=>{let t=async()=>{if(void 0===e.region)throw Error("Region is missing from runtimeConfig");let t=e.region;return"string"==typeof t?t:t()};return{setRegion(e){t=e},region:()=>t}},IK=e=>({region:e.region()}),IY=e=>e,IX=(e,t)=>{let r={...IY(Iq(e)),...IY(kJ(e)),...IY(bY(e))};return t.forEach(e=>e.configure(r)),{...e,...IK(r),...k0(r),...bX(r)}};class IQ extends kT{constructor(...[e]){var t;let r=IX(_W(_8({...t=wM(function(e){let t=e.signer,r=e.signer,n=e.eventStreamPayloadHandlerProvider({...e,messageSigner:r});return{...e,eventSigner:t,eventStreamPayloadHandler:n}}(x0(kk(_z(St(IG(e||{}))))))),customUserAgent:"string"==typeof t.customUserAgent?[[t.customUserAgent]]:t.customUserAgent})),e?.extensions||[]);super(r),this.config=r,this.middlewareStack.use(xi(this.config)),this.middlewareStack.use(xu(this.config)),this.middlewareStack.use(xf(this.config)),this.middlewareStack.use(x7(this.config)),this.middlewareStack.use(_$(this.config)),this.middlewareStack.use(Ia(this.config)),this.middlewareStack.use(_V(this.config))}destroy(){super.destroy()}}var IZ=r(52954);r(63020);let IJ={},I0={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),IJ[e]=t,I0[t]=e}function I1(e){let t="";for(let r=0;r<e.byteLength;r++)t+=IJ[e[r]];return t}class I2{constructor(e){if(this.bytes=e,8!==e.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x7fffffffffffffff||e<-0x8000000000000000)throw Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&I3(t),new I2(t)}valueOf(){let e=this.bytes.slice(0),t=128&e[0];return t&&I3(e),parseInt(I1(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function I3(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}class I4{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){let t=[];for(let r of Object.keys(e)){let n=this.fromUtf8(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),n=0;for(let e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(a.buffer);return o.set(e.value,3),o;case"string":let i=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+i.byteLength));s.setUint8(0,7),s.setUint16(1,i.byteLength,!1);let l=new Uint8Array(s.buffer);return l.set(i,3),l;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(I2.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!Ea.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let c=new Uint8Array(17);return c[0]=9,c.set(function(e){if(e.length%2!=0)throw Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in I0)t[r/2]=I0[n];else throw Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}(e.value.replace(/\-/g,"")),1),c}}parse(e){let t={},r=0;for(;r<e.byteLength;){let n=e.getUint8(r++),a=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:t[a]={type:I6,value:!0};break;case 1:t[a]={type:I6,value:!1};break;case 2:t[a]={type:I5,value:e.getInt8(r++)};break;case 3:t[a]={type:I8,value:e.getInt16(r,!1)},r+=2;break;case 4:t[a]={type:I7,value:e.getInt32(r,!1)},r+=4;break;case 5:t[a]={type:I9,value:new I2(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:let o=e.getUint16(r,!1);r+=2,t[a]={type:Ee,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:let i=e.getUint16(r,!1);r+=2,t[a]={type:Et,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,i))},r+=i;break;case 8:t[a]={type:Er,value:new Date(new I2(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:let s=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[a]={type:En,value:`${I1(s.subarray(0,4))}-${I1(s.subarray(4,6))}-${I1(s.subarray(6,8))}-${I1(s.subarray(8,10))}-${I1(s.subarray(10))}`};break;default:throw Error("Unrecognized header type tag")}}return t}}(eH=ty||(ty={}))[eH.boolTrue=0]="boolTrue",eH[eH.boolFalse=1]="boolFalse",eH[eH.byte=2]="byte",eH[eH.short=3]="short",eH[eH.integer=4]="integer",eH[eH.long=5]="long",eH[eH.byteArray=6]="byteArray",eH[eH.string=7]="string",eH[eH.timestamp=8]="timestamp",eH[eH.uuid=9]="uuid";let I6="boolean",I5="byte",I8="short",I7="integer",I9="long",Ee="binary",Et="string",Er="timestamp",En="uuid",Ea=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Eo=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)return;yield r}}finally{t.releaseLock()}}}),Ei=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){let{done:r,value:n}=await t.next();if(r)return e.close();e.enqueue(n)}})};(eG=tv||(tv={})).HEADER="header",eG.QUERY="query",(eq=tb||(tb={})).HEADER="header",eq.QUERY="query",(eK=tw||(tw={})).HTTP="http",eK.HTTPS="https",(eY=tk||(tk={})).MD5="md5",eY.CRC32="crc32",eY.CRC32C="crc32c",eY.SHA1="sha1",eY.SHA256="sha256",(eX=tS||(tS={}))[eX.HEADER=0]="HEADER",eX[eX.TRAILER=1]="TRAILER",(eQ=tx||(tx={})).PROFILE="profile",eQ.SSO_SESSION="sso-session",eQ.SERVICES="services",(eZ=t_||(t_={})).HTTP_0_9="http/0.9",eZ.HTTP_1_0="http/1.0",eZ.TDS_8_0="tds/8.0";class Es{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){return!!e&&"number"==typeof e.statusCode&&"object"==typeof e.headers}}let El=e=>encodeURIComponent(e).replace(/[!'()*]/g,Eu),Eu=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,Ec={supported:!!("undefined"!=typeof Request&&"keepalive"in new Request("https://[::1]"))};class Ed{static create(e){return"function"==typeof e?.handle?e:new Ed(e)}constructor(e){"function"==typeof e?this.configProvider=e().then(e=>e||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(e,{abortSignal:t}={}){this.config||(this.config=await this.configProvider);let r=this.config.requestTimeout,n=!0===this.config.keepAlive;if(t?.aborted){let e=Error("Request aborted");return e.name="AbortError",Promise.reject(e)}let a=e.path,o=function(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=El(r),Array.isArray(n))for(let e=0,a=n.length;e<a;e++)t.push(`${r}=${El(n[e])}`);else{let e=r;(n||"string"==typeof n)&&(e+=`=${El(n)}`),t.push(e)}}return t.join("&")}(e.query||{});o&&(a+=`?${o}`),e.fragment&&(a+=`#${e.fragment}`);let i="";if(null!=e.username||null!=e.password){let t=e.username??"",r=e.password??"";i=`${t}:${r}@`}let{port:s,method:l}=e,u=`${e.protocol}//${i}${e.hostname}${s?`:${s}`:""}${a}`,c={body:"GET"===l||"HEAD"===l?void 0:e.body,headers:new Headers(e.headers),method:l};"undefined"!=typeof AbortController&&(c.signal=t),Ec.supported&&(c.keepalive=n);let d=[fetch(new Request(u,c)).then(e=>{let t=e.headers,r={};for(let e of t.entries())r[e[0]]=e[1];return void 0!=e.body?{response:new Es({headers:r,reason:e.statusText,statusCode:e.status,body:e.body})}:e.blob().then(t=>({response:new Es({headers:r,reason:e.statusText,statusCode:e.status,body:t})}))}),function(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let t=Error(`Request did not complete within ${e} ms`);t.name="TimeoutError",r(t)},e)})}(r)];return t&&d.push(new Promise((e,r)=>{t.onabort=()=>{let e=Error("Request aborted");e.name="AbortError",r(e)}})),Promise.race(d)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=t,r))}httpHandlerConfigs(){return this.config??{}}}let Ep={},Eh=Array(64);for(let e=0;e+65<=90;e++){let t=String.fromCharCode(e+65);Ep[t]=e,Eh[e]=t}for(let e=0;e+97<=122;e++){let t=String.fromCharCode(e+97),r=e+26;Ep[t]=r,Eh[r]=t}for(let e=0;e<10;e++){Ep[e.toString(10)]=e+52;let t=e.toString(10),r=e+52;Ep[t]=r,Eh[r]=t}Ep["+"]=62,Eh[62]="+",Ep["/"]=63,Eh[63]="/";let Ef="Websocket connection timeout",Em=e=>"ws:"===e.protocol||"wss:"===e.protocol,Eg=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream,Ey=e=>e[Symbol.asyncIterator]?e:Eg(e)?Eo(e):{[Symbol.asyncIterator]:async function*(){yield e}},Ev=e=>"function"==typeof ReadableStream?Ei(e):e;class Eb{constructor(e,t=new Ed){this.metadata={handlerProtocol:"websocket/h1.1"},this.sockets={},this.utf8decoder=new TextDecoder,this.httpHandler=t,"function"==typeof e?(this.config={},this.configPromise=e().then(e=>this.config=e??{})):(this.config=e??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(let[e,t]of Object.entries(this.sockets)){for(let e of t)e.close(1e3,"Socket closed through destroy() call");delete this.sockets[e]}}async handle(e){if(!Em(e))return this.httpHandler.handle(e);let t=wP(e),r=new WebSocket(t);this.sockets[t]||(this.sockets[t]=[]),this.sockets[t].push(r),r.binaryType="arraybuffer";let{connectionTimeout:n=2e3}=await this.configPromise;await this.waitForReady(r,n);let{body:a}=e,o=Ey(a);return{response:new Es({statusCode:200,body:Ev(this.connect(r,o))})}}updateHttpClientConfig(e,t){this.configPromise=this.configPromise.then(r=>({...r,[e]:t}))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(e){this.sockets[e]=(this.sockets[e]??[]).filter(e=>!(e.readyState===WebSocket.CLOSING||e.readyState===WebSocket.CLOSED))}waitForReady(e,t){return new Promise((r,n)=>{let a=setTimeout(()=>{this.removeNotUsableSockets(e.url),n(Error(Ef))},t);e.onopen=()=>{clearTimeout(a),r()}})}connect(e,t){let r;let n=!1,a=()=>{},o=()=>{};e.onmessage=e=>{o({done:!1,value:new Uint8Array(e.data)})},e.onerror=t=>{n=!0,e.close(),a(t)},e.onclose=()=>{this.removeNotUsableSockets(e.url),n||(r?a(r):o({done:!0,value:void 0}))};let i={[Symbol.asyncIterator]:()=>({next:()=>new Promise((e,t)=>{o=e,a=t})})};return(async()=>{try{for await(let r of t){let t=this.utf8decoder.decode(r);if(t.includes("closeCode")){let r=t.match(/"closeCode":([0-9]*)/);if(r){let t=r[1];e.close(parseInt(t))}continue}e.send(r)}}catch(e){e instanceof Error&&(r=e)}finally{e.close(nM.SUCCESS_CODE)}})(),i}}let Ew=e=>"function"==typeof e,Ek=e=>!!(e?.accessKeyId&&e?.secretAccessKey);async function ES(e){let t=Ew(e);if(t)return e;if(e&&!t)throw Error("Invalid credentialsProvider");try{let e=(await t5()).credentials;if(Ek(e))return e;throw Error("Missing credentials")}catch(t){let{message:e}=t;throw Error(`Invalid credentials: ${e}`)}}(eJ=tI||(tI={})).HEADER="header",eJ.QUERY="query",(e0=tE||(tE={})).HEADER="header",e0.QUERY="query",(e1=tT||(tT={})).HTTP="http",e1.HTTPS="https",(e2=tN||(tN={})).MD5="md5",e2.CRC32="crc32",e2.CRC32C="crc32c",e2.SHA1="sha1",e2.SHA256="sha256",(e3=tA||(tA={}))[e3.HEADER=0]="HEADER",e3[e3.TRAILER=1]="TRAILER",(e4=tC||(tC={})).PROFILE="profile",e4.SSO_SESSION="sso-session",e4.SERVICES="services",(e6=tM||(tM={})).HTTP_0_9="http/0.9",e6.HTTP_1_0="http/1.0",e6.TDS_8_0="tds/8.0";let Ex=e=>{if("function"==typeof e)return e;let t=Promise.resolve(e);return()=>t},E_=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)},EI=e=>new TextEncoder().encode(e),EE=e=>"string"==typeof e?EI(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),ET="X-Amz-Date",EN="X-Amz-Signature",EA="X-Amz-Security-Token",EC="authorization",EM=ET.toLowerCase(),ER=[EC,EM,"date"],EO=EN.toLowerCase(),EF="x-amz-content-sha256",ED=EA.toLowerCase(),EP={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},E$=/^proxy-/,EL=/^sec-/,EB="AWS4-HMAC-SHA256",Ez="aws4_request",EW={},EU=[],Ej=(e,t,r)=>`${e}/${t}/${r}/${Ez}`,EV=async(e,t,r,n,a)=>{let o=await EH(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${a}:${I1(o)}:${t.sessionToken}`;if(i in EW)return EW[i];for(EU.push(i);EU.length>50;)delete EW[EU.shift()];let s=`AWS4${t.secretAccessKey}`;for(let t of[r,n,a,Ez])s=await EH(e,s,t);return EW[i]=s},EH=(e,t,r)=>{let n=new e(t);return n.update(EE(r)),n.digest()},EG=({headers:e},t,r)=>{let n={};for(let a of Object.keys(e).sort()){if(void 0==e[a])continue;let o=a.toLowerCase();(!(o in EP||t?.has(o)||E$.test(o)||EL.test(o))||r&&(!r||r.has(o)))&&(n[o]=e[a].trim().replace(/\s+/g," "))}return n},Eq=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===EO)continue;t.push(n);let a=e[n];"string"==typeof a?r[n]=`${El(n)}=${El(a)}`:Array.isArray(a)&&(r[n]=a.slice(0).reduce((e,t)=>e.concat([`${El(n)}=${El(t)}`]),[]).sort().join("&"))}return t.map(e=>r[e]).filter(e=>e).join("&")},EK=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),EY=async({headers:e,body:t},r)=>{for(let t of Object.keys(e))if(t.toLowerCase()===EF)return e[t];if(void 0==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||EK(t)){let e=new r;return e.update(EE(t)),I1(await e.digest())}return"UNSIGNED-PAYLOAD"},EX=(e,t)=>{for(let r of(e=e.toLowerCase(),Object.keys(t)))if(e===r.toLowerCase())return!0;return!1},EQ=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?EZ(t):void 0}),EZ=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{}),EJ=(e,t={})=>{let{headers:r,query:n={}}="function"==typeof e.clone?e.clone():EQ(e);for(let e of Object.keys(r)){let a=e.toLowerCase();"x-amz-"!==a.slice(0,6)||t.unhoistableHeaders?.has(a)||(n[e]=r[e],delete r[e])}return{...e,headers:r,query:n}},E0=e=>{for(let t of Object.keys((e="function"==typeof e.clone?e.clone():EQ(e)).headers))ER.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},E1=e=>E2(e).toISOString().replace(/\.\d{3}Z$/,"Z"),E2=e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?new Date(Number(e)?1e3*Number(e):e):e;class E3{constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:a,uriEscapePath:o=!0}){this.headerMarshaller=new I4(E_,EI),this.service=n,this.sha256=a,this.uriEscapePath=o,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=Ex(r),this.credentialProvider=Ex(t)}async presign(e,t={}){let{signingDate:r=new Date,expiresIn:n=3600,unsignableHeaders:a,unhoistableHeaders:o,signableHeaders:i,signingRegion:s,signingService:l}=t,u=await this.credentialProvider();this.validateResolvedCredentials(u);let c=s??await this.regionProvider(),{longDate:d,shortDate:p}=E4(r);if(n>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let h=Ej(p,c,l??this.service),f=EJ(E0(e),{unhoistableHeaders:o});u.sessionToken&&(f.query[EA]=u.sessionToken),f.query["X-Amz-Algorithm"]=EB,f.query["X-Amz-Credential"]=`${u.accessKeyId}/${h}`,f.query[ET]=d,f.query["X-Amz-Expires"]=n.toString(10);let m=EG(f,a,i);return f.query["X-Amz-SignedHeaders"]=E6(m),f.query[EN]=await this.getSignature(d,h,this.getSigningKey(u,c,p,l),this.createCanonicalRequest(f,m,await EY(e,this.sha256))),f}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:n,signingRegion:a,signingService:o}){let i=a??await this.regionProvider(),{shortDate:s,longDate:l}=E4(r),u=Ej(s,i,o??this.service),c=await EY({headers:{},body:t},this.sha256),d=new this.sha256;d.update(e);let p=["AWS4-HMAC-SHA256-PAYLOAD",l,u,n,I1(await d.digest()),c].join("\n");return this.signString(p,{signingDate:r,signingRegion:i,signingService:o})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:n}){return this.signEvent({headers:this.headerMarshaller.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:n,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:n}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let o=r??await this.regionProvider(),{shortDate:i}=E4(t),s=new this.sha256(await this.getSigningKey(a,o,i,n));return s.update(EE(e)),I1(await s.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:n,signingRegion:a,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let s=a??await this.regionProvider(),l=E0(e),{longDate:u,shortDate:c}=E4(t),d=Ej(c,s,o??this.service);l.headers[EM]=u,i.sessionToken&&(l.headers[ED]=i.sessionToken);let p=await EY(l,this.sha256);!EX(EF,l.headers)&&this.applyChecksum&&(l.headers[EF]=p);let h=EG(l,n,r),f=await this.getSignature(u,d,this.getSigningKey(i,s,c,o),this.createCanonicalRequest(l,h,p));return l.headers[EC]=`${EB} Credential=${i.accessKeyId}/${d}, SignedHeaders=${E6(h)}, Signature=${f}`,l}createCanonicalRequest(e,t,r){let n=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Eq(e)}
${n.map(e=>`${e}:${t[e]}`).join("\n")}

${n.join(";")}
${r}`}async createStringToSign(e,t,r){let n=new this.sha256;n.update(EE(r));let a=await n.digest();return`${EB}
${e}
${t}
${I1(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let r of e.split("/"))r?.length!==0&&"."!==r&&(".."===r?t.pop():t.push(r));return encodeURIComponent(`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`).replace(/%2F/g,"/")}return e}async getSignature(e,t,r,n){let a=await this.createStringToSign(e,t,n),o=new this.sha256(await r);return o.update(EE(a)),I1(await o.digest())}getSigningKey(e,t,r,n){return EV(this.sha256,e,r,t,n||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw Error("Resolved credential object is not valid")}}let E4=e=>{let t=E1(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},E6=e=>Object.keys(e).sort().join(";");class E5 extends E3{presign(e,t){return super.presign(e,{...t,expiresIn:299,unsignableHeaders:new Set(Object.keys(e.headers).filter(e=>"host"!==e))})}}let E8=`${(0,IZ.Zm)()} ui-react-liveness/3.3.5`;async function E7({credentialsProvider:e,endpointOverride:t,region:r,systemClockOffset:n}){let a={credentials:await ES(e),customUserAgent:E8,region:r,requestHandler:new Eb({connectionTimeout:1e4}),signerConstructor:E5,systemClockOffset:n};return t&&(a.endpointProvider=()=>({url:new URL(t)})),new IQ(a)}class E9{constructor({sessionId:e,region:t,stream:r,videoEl:n,credentialProvider:a,endpointOverride:o,systemClockOffset:i}){this.sessionId=e,this.region=t,this.stream=r,this.videoEl=n,this.videoRecorder=new xn(r),this.credentialProvider=a,this.endpointOverride=o,this.systemClockOffset=i,this.initPromise=this.init()}async getResponseStream(){return await this.initPromise,this.responseStream}startRecordingLivenessVideo(){this.videoRecorder.start(1e3)}sendClientInfo(e){this.videoRecorder.dispatch(new MessageEvent("clientSesssionInfo",{data:{clientInfo:e}}))}async stopVideo(){await this.videoRecorder.stop()}dispatchStopVideoEvent(){this.videoRecorder.dispatch(new Event("stopVideo"))}async endStreamWithCode(e){"recording"===this.videoRecorder.getState()&&await this.stopVideo(),this.videoRecorder.dispatch(new MessageEvent("endStreamWithCode",{data:{code:e}}))}async init(){this._client=await E7({credentialsProvider:this.credentialProvider,endpointOverride:this.endpointOverride,region:this.region,systemClockOffset:this.systemClockOffset}),this.responseStream=await this.startLivenessVideoConnection()}getAsyncGeneratorFromReadableStream(e){let t=this;return this._reader=e.getReader(),async function*(){for(;;){let{done:e,value:r}=await t._reader.read();if(e)return;if("stopVideo"===r)yield{VideoEvent:{VideoChunk:new Uint8Array([]),TimestampMillis:Date.now()}};else if(void 0!==r.arrayBuffer){let e=new Uint8Array(await r.arrayBuffer());e.length>0&&(yield{VideoEvent:{VideoChunk:e,TimestampMillis:Date.now()}})}else void 0!==r.Challenge?yield{ClientSessionInformationEvent:{Challenge:r.Challenge}}:void 0!==r.code&&(yield{VideoEvent:{VideoChunk:new Uint8Array([]),TimestampMillis:{closeCode:r.code}}})}}}async startLivenessVideoConnection(){let e=this.getAsyncGeneratorFromReadableStream(this.videoRecorder.videoStream)(),t=this.stream.getTracks()[0].getSettings();return(await this._client.send(new xt({ChallengeVersions:"FaceMovementAndLightChallenge_1.0.0",SessionId:this.sessionId,LivenessRequestStream:e,VideoWidth:(t.width??this.videoEl.width).toString(),VideoHeight:(t.height??this.videoEl.height).toString()}))).LivenessResponseStream}}(e5=tR||(tR={})).SCROLLING="SCROLLING",e5.FLAT="FLAT";class Te{constructor(e,t){this.context=e,this.freshnessColorsSequence=t,this.isFirstTick=!0}async displayColorTick(){return new Promise((e,t)=>{setTimeout(()=>{this.displayNextColorTick(e,t)},10)})}init(){this.stageIndex=0,this.currColorIndex=0,this.currColorSequence=this.freshnessColorsSequence[0],this.prevColorSequence=this.freshnessColorsSequence[0],this.stage=tR.FLAT,this.timeLastFlatOrScrollChange=Date.now(),this.timeLastFaceMatchChecked=Date.now()}displayNextColorTick(e,t){let{freshnessColorEl:r}=this.context.freshnessColorAssociatedParams,{ovalDetails:n,scaleFactor:a}=this.context.ovalAssociatedParams,{videoEl:o}=this.context.videoAssociatedParams,i=Date.now();this.isFirstTick&&(this.init(),this.isFirstTick=!1,this.sendColorStartTime({tickStartTime:i,currColor:this.currColorSequence.color,prevColor:this.currColorSequence.color,currColorIndex:this.stageIndex}));let s=i-this.timeLastFlatOrScrollChange;if(r.style.display="block",(this.stage===tR.FLAT&&s>=this.currColorSequence.flatDisplayDuration||this.stage===tR.SCROLLING&&s>=this.currColorSequence.downscrollDuration)&&(this.incrementStageIndex(i),s=0),this.currColorIndex<this.freshnessColorsSequence.length){let t=s/(this.stage===tR.SCROLLING?this.currColorSequence.downscrollDuration:this.currColorSequence.flatDisplayDuration);!function({overlayCanvas:e,prevColor:t,nextColor:r,videoEl:n,ovalDetails:a,heightFraction:o,scaleFactor:i}){let{x:s,y:l}=n.getBoundingClientRect(),{flippedCenterX:u,centerY:c,width:d,height:p}=a,h=e.width,f=e.height,m=e.getContext("2d");if(m)m.canvas.width=window.innerWidth,m.canvas.height=window.innerHeight,m.clearRect(0,0,h,f),nz({ctx:m,prevColor:t,nextColor:r,fraction:o}),m.save(),m.beginPath(),m.rect(0,0,h,f),m.clip(),m.clearRect(0,0,h,f),m.globalAlpha=.9,nz({ctx:m,prevColor:t,nextColor:r,fraction:o}),m.beginPath(),m.ellipse(u*i+s,c*i+l,d*i/2,p*i/2,0,0,2*Math.PI),m.strokeStyle="white",m.lineWidth=8,m.stroke(),m.clip(),m.clearRect(0,0,h,f),m.globalAlpha=.75,nz({ctx:m,prevColor:t,nextColor:r,fraction:o}),m.restore();else throw Error("Cannot find Overlay Canvas.")}({overlayCanvas:r,prevColor:this.prevColorSequence.color,nextColor:this.currColorSequence.color,videoEl:o,ovalDetails:n,heightFraction:t,scaleFactor:a}),e(!1)}else r.style.display="none",e(!0)}incrementStageIndex(e){this.stageIndex+=1,this.prevColorSequence=this.freshnessColorsSequence[this.currColorIndex],this.stage===tR.FLAT?(this.currColorIndex+=1,this.stage=tR.SCROLLING):this.stage===tR.SCROLLING&&(this.freshnessColorsSequence[this.currColorIndex].flatDisplayDuration>0?this.stage=tR.FLAT:(this.stage=tR.SCROLLING,this.currColorIndex+=1)),this.currColorSequence=this.freshnessColorsSequence[this.currColorIndex],this.timeLastFlatOrScrollChange=Date.now(),this.currColorSequence&&this.sendColorStartTime({tickStartTime:e,currColor:this.currColorSequence.color,prevColor:this.prevColorSequence.color,currColorIndex:this.stageIndex})}sendColorStartTime({tickStartTime:e,currColor:t,prevColor:r,currColorIndex:n}){let{livenessStreamProvider:a,challengeId:o}=this.context;a.sendClientInfo({Challenge:{FaceMovementAndLightChallenge:{ChallengeId:o,ColorDisplayed:{CurrentColor:{RGB:nU(t)},PreviousColor:{RGB:nU(r)},SequenceNumber:n,CurrentColorStartTimestamp:e}}}})}}let Tt=e=>!!e?.ServerSessionInformationEvent,Tr=e=>{let{message:t}=e;return t.includes(Ef)},Tn=e=>!!e?.DisconnectionEvent,Ta=e=>!!e?.ValidationException,To=e=>!!e?.InternalServerException,Ti=e=>!!e?.ThrottlingException,Ts=e=>!!e?.ServiceQuotaExceededException,Tl=e=>{let{message:t,name:r}=e;return"InvalidSignatureException"===r&&t.includes("valid region")},Tu={width:{min:320,ideal:640},height:{min:240,ideal:480},frameRate:{min:15,ideal:30,max:60},facingMode:"user"},Tc="AmplifyLivenessCameraId",Td=async e=>{try{for await(let t of(await eA))Tt(t)?e({type:"SET_SESSION_INFO",data:{sessionInfo:t.ServerSessionInformationEvent.SessionInformation}}):Tn(t)?e({type:"DISCONNECT_EVENT"}):Ta(t)?e({type:"SERVER_ERROR",data:{error:{...t.ValidationException}}}):To(t)?e({type:"SERVER_ERROR",data:{error:{...t.InternalServerException}}}):Ti(t)?e({type:"SERVER_ERROR",data:{error:{...t.ThrottlingException}}}):Ts(t)&&e({type:"SERVER_ERROR",data:{error:{...t.ServiceQuotaExceededException}}})}catch(t){Tl(t)?e({type:"SERVER_ERROR",data:{error:Error("Invalid region in FaceLivenessDetector or credentials are scoped to the wrong region.")}}):t instanceof Error&&e({type:Tr(t)?"CONNECTION_TIMEOUT":"SERVER_ERROR",data:{error:t}})}};function Tp(e){localStorage.setItem(Tc,e)}let Th=new nN({id:"livenessMachine",initial:"cameraCheck",predictableActionArguments:!0,context:{challengeId:n_(),maxFailedAttempts:0,failedAttempts:0,componentProps:void 0,serverSessionInformation:void 0,videoAssociatedParams:{videoConstraints:Tu,selectableDevices:[]},ovalAssociatedParams:void 0,faceMatchAssociatedParams:{illuminationState:void 0,faceMatchState:void 0,faceMatchPercentage:25,currentDetectedFace:void 0,startFace:void 0,endFace:void 0},freshnessColorAssociatedParams:{freshnessColorEl:void 0,freshnessColors:[],freshnessColorsComplete:!1,freshnessColorDisplay:void 0},errorState:void 0,livenessStreamProvider:void 0,responseStreamActorRef:void 0,shouldDisconnect:!1,faceMatchStateBeforeStart:void 0,isFaceFarEnoughBeforeRecording:void 0,isRecordingStopped:!1},on:{CANCEL:"userCancel",TIMEOUT:{target:"retryableTimeout",actions:"updateErrorStateForTimeout"},SET_SESSION_INFO:{internal:!0,actions:"updateSessionInfo"},DISCONNECT_EVENT:{internal:!0,actions:"updateShouldDisconnect"},SET_DOM_AND_CAMERA_DETAILS:{actions:"setDOMAndCameraDetails"},UPDATE_DEVICE_AND_STREAM:{actions:"updateDeviceAndStream"},SERVER_ERROR:{target:"error",actions:"updateErrorStateForServer"},CONNECTION_TIMEOUT:{target:"error",actions:"updateErrorStateForConnectionTimeout"},RUNTIME_ERROR:{target:"error",actions:"updateErrorStateForRuntime"},MOBILE_LANDSCAPE_WARNING:{target:"mobileLandscapeWarning",actions:"updateErrorStateForServer"}},states:{cameraCheck:{entry:"resetErrorState",invoke:{src:"checkVirtualCameraAndGetStream",onDone:{target:"waitForDOMAndCameraDetails",actions:"updateVideoMediaStream"},onError:{target:"permissionDenied"}}},waitForDOMAndCameraDetails:{after:{0:{target:"start",cond:"hasDOMAndCameraDetails"},10:{target:"waitForDOMAndCameraDetails"}}},start:{entry:["drawStaticOval","initializeFaceDetector"],always:[{target:"detectFaceBeforeStart",cond:"shouldSkipStartScreen"}],on:{BEGIN:"detectFaceBeforeStart"}},detectFaceBeforeStart:{invoke:{src:"detectFace",onDone:{target:"checkFaceDetectedBeforeStart",actions:"updateFaceMatchBeforeStartDetails"}}},checkFaceDetectedBeforeStart:{after:{0:{target:"detectFaceDistanceBeforeRecording",cond:"hasSingleFaceBeforeStart"},100:{target:"detectFaceBeforeStart"}}},detectFaceDistanceBeforeRecording:{invoke:{src:"detectFaceDistance",onDone:{target:"checkFaceDistanceBeforeRecording",actions:"updateFaceDistanceBeforeRecording"}}},checkFaceDistanceBeforeRecording:{after:{0:{target:"initializeLivenessStream",cond:"hasEnoughFaceDistanceBeforeRecording"},100:{target:"detectFaceDistanceBeforeRecording"}}},initializeLivenessStream:{invoke:{src:"openLivenessStreamConnection",onDone:{target:"notRecording",actions:["updateLivenessStreamProvider","spawnResponseStreamActor"]}}},notRecording:{initial:"waitForSessionInfo",states:{waitForSessionInfo:{after:{0:{target:"#livenessMachine.recording",cond:"hasServerSessionInfo"},100:{target:"waitForSessionInfo"}}}}},recording:{entry:["clearErrorState","startRecording","sendTimeoutAfterOvalDrawingDelay"],initial:"ovalDrawing",states:{ovalDrawing:{invoke:{src:"detectInitialFaceAndDrawOval",onDone:{target:"checkFaceDetected",actions:["updateOvalAndFaceDetailsPostDraw","sendTimeoutAfterOvalMatchDelay"]},onError:{target:"#livenessMachine.error",actions:"updateErrorStateForRuntime"}}},checkFaceDetected:{after:{0:{target:"cancelOvalDrawingTimeout",cond:"hasSingleFace"},100:{target:"ovalDrawing"}}},cancelOvalDrawingTimeout:{entry:["cancelOvalDrawingTimeout","sendTimeoutAfterRecordingDelay"],after:{0:{target:"checkRecordingStarted"}}},checkRecordingStarted:{after:{0:{target:"ovalMatching",cond:"hasRecordingStarted",actions:"updateRecordingStartTimestampMs"},100:{target:"checkRecordingStarted"}}},ovalMatching:{entry:"cancelRecordingTimeout",invoke:{src:"detectFaceAndMatchOval",onDone:{target:"checkMatch",actions:"updateFaceDetailsPostMatch"}}},checkMatch:{after:{0:{target:"delayBeforeFlash",cond:"hasFaceMatchedInOval",actions:["setFaceMatchTimeAndStartFace","updateEndFaceMatch","setupFlashFreshnessColors","cancelOvalMatchTimeout","cancelOvalDrawingTimeout"]},1:{target:"ovalMatching"}}},delayBeforeFlash:{after:{1e3:"flashFreshnessColors"}},flashFreshnessColors:{invoke:{src:"flashColors",onDone:[{target:"success",cond:"hasFreshnessColorShown"},{target:"flashFreshnessColors",actions:"updateFreshnessDetails"}]}},success:{entry:"stopRecording",type:"final"}},onDone:"uploading"},uploading:{initial:"pending",states:{pending:{entry:["pauseVideoStream"],invoke:{src:"stopVideo",onDone:"waitForDisconnectEvent",onError:{target:"#livenessMachine.error",actions:"updateErrorStateForRuntime"}}},waitForDisconnectEvent:{after:{0:{target:"getLivenessResult",cond:"getShouldDisconnect"},100:{target:"waitForDisconnectEvent"}}},getLivenessResult:{entry:["freezeStream"],invoke:{src:"getLiveness",onError:{target:"#livenessMachine.error",actions:"updateErrorStateForServer"}}}}},retryableTimeout:{entry:"updateFailedAttempts",always:[{target:"timeout",cond:"shouldTimeoutOnFailedAttempts"},{target:"notRecording"}]},permissionDenied:{entry:"callUserPermissionDeniedCallback",on:{RETRY_CAMERA_CHECK:"cameraCheck"}},mobileLandscapeWarning:{entry:"callMobileLandscapeWarningCallback",always:{target:"error"}},timeout:{entry:["cleanUpResources","callUserTimeoutCallback","freezeStream"]},error:{entry:["cleanUpResources","callErrorCallback","cancelOvalDrawingTimeout","cancelOvalMatchTimeout","cancelRecordingTimeout","freezeStream"]},userCancel:{entry:["cleanUpResources","callUserCancelCallback","resetContext"],always:{target:"cameraCheck"}}}},{actions:{spawnResponseStreamActor:nA({responseStreamActorRef:()=>{var e,t,r;return t=r$(e=void 0)?t7(t7({},ny),{name:e}):t7(t7(t7({},ny),{name:rW()}),e),(r=nu[nu.length-1])?r.spawn(Td,t.name,t):np(Td,t.name)}}),updateFailedAttempts:nA({failedAttempts:e=>e.failedAttempts+1}),updateVideoMediaStream:nA({videoAssociatedParams:(e,t)=>({...e.videoAssociatedParams,videoMediaStream:t.data?.stream,selectedDeviceId:t.data?.selectedDeviceId,selectableDevices:t.data?.selectableDevices})}),initializeFaceDetector:nA({ovalAssociatedParams:e=>{let{componentProps:t}=e,{faceModelUrl:r,binaryPath:n}=t.config,a=new bK(n,r);return a.triggerModelLoading(),{...e.ovalAssociatedParams,faceDetector:a}}}),updateLivenessStreamProvider:nA({livenessStreamProvider:(e,t)=>t.data?.livenessStreamProvider}),setDOMAndCameraDetails:nA({videoAssociatedParams:(e,t)=>({...e.videoAssociatedParams,videoEl:t.data?.videoEl,canvasEl:t.data?.canvasEl,isMobile:t.data?.isMobile}),freshnessColorAssociatedParams:(e,t)=>({...e.freshnessColorAssociatedParams,freshnessColorEl:t.data?.freshnessColorEl})}),updateDeviceAndStream:nA({videoAssociatedParams:(e,t)=>(Tp(t.data?.newDeviceId),{...e.videoAssociatedParams,selectedDeviceId:t.data?.newDeviceId,videoMediaStream:t.data?.newStream})}),drawStaticOval:e=>{let{canvasEl:t,videoEl:r,videoMediaStream:n}=e.videoAssociatedParams;nP(t,r,n)},updateRecordingStartTimestampMs:nA({videoAssociatedParams:e=>{let{challengeId:t,videoAssociatedParams:r,ovalAssociatedParams:n,livenessStreamProvider:a}=e,{recordingStartApiTimestamp:o,recorderStartTimestamp:i}=a.videoRecorder,{videoMediaStream:s}=r,{initialFace:l}=n,u=Math.round(.73*(i-o)+o),{width:c,height:d}=s.getTracks()[0].getSettings(),p=c-l.left-l.width;return e.livenessStreamProvider.sendClientInfo({Challenge:{FaceMovementAndLightChallenge:{ChallengeId:t,VideoStartTimestamp:u,InitialFace:{InitialFaceDetectedTimestamp:l.timestampMs,BoundingBox:nH({deviceHeight:d,deviceWidth:c,height:l.height,width:l.width,top:l.top,left:p})}}}}),{...e.videoAssociatedParams,recordingStartTimestampMs:u}}}),startRecording:nA({videoAssociatedParams:e=>{if(!e.serverSessionInformation)throw Error("Session information was not received from response stream");return e.livenessStreamProvider.videoRecorder&&"recording"!==e.livenessStreamProvider.videoRecorder.getState()&&e.livenessStreamProvider.startRecordingLivenessVideo(),{...e.videoAssociatedParams}}}),stopRecording:()=>{},updateFaceMatchBeforeStartDetails:nA({faceMatchStateBeforeStart:(e,t)=>t.data.faceMatchState}),updateFaceDistanceBeforeRecording:nA({isFaceFarEnoughBeforeRecording:(e,t)=>!!t.data.isFaceFarEnoughBeforeRecording}),updateFaceDistanceWhileLoading:nA({isFaceFarEnoughBeforeRecording:(e,t)=>!!t.data.isFaceFarEnoughBeforeRecording,errorState:(e,t)=>t.data?.error}),updateOvalAndFaceDetailsPostDraw:nA({ovalAssociatedParams:(e,t)=>({...e.ovalAssociatedParams,initialFace:t.data.initialFace,ovalDetails:t.data.ovalDetails,scaleFactor:t.data.scaleFactor}),faceMatchAssociatedParams:(e,t)=>({...e.faceMatchAssociatedParams,faceMatchState:t.data.faceMatchState,illuminationState:t.data.illuminationState})}),updateFaceDetailsPostMatch:nA({faceMatchAssociatedParams:(e,t)=>({...e.faceMatchAssociatedParams,faceMatchState:t.data.faceMatchState,faceMatchPercentage:t.data.faceMatchPercentage,illuminationState:t.data.illuminationState,currentDetectedFace:t.data.detectedFace})}),updateEndFaceMatch:nA({faceMatchAssociatedParams:e=>({...e.faceMatchAssociatedParams,endFace:e.faceMatchAssociatedParams.currentDetectedFace})}),setFaceMatchTimeAndStartFace:nA({faceMatchAssociatedParams:e=>({...e.faceMatchAssociatedParams,startFace:void 0===e.faceMatchAssociatedParams.startFace?e.faceMatchAssociatedParams.currentDetectedFace:e.faceMatchAssociatedParams.startFace})}),resetErrorState:nA({errorState:e=>void 0}),updateErrorStateForConnectionTimeout:nA({errorState:e=>nC.CONNECTION_TIMEOUT}),updateErrorStateForTimeout:nA({errorState:(e,t)=>t.data?.errorState||nC.TIMEOUT,errorMessage:(e,t)=>t.data?.message}),updateErrorStateForRuntime:nA({errorState:(e,t)=>t.data?.errorState||nC.RUNTIME_ERROR}),updateErrorStateForServer:nA({errorState:e=>nC.SERVER_ERROR}),clearErrorState:nA({errorState:e=>void 0}),updateSessionInfo:nA({serverSessionInformation:(e,t)=>t.data.sessionInfo}),updateShouldDisconnect:nA({shouldDisconnect:()=>!0}),updateFreshnessDetails:nA({freshnessColorAssociatedParams:(e,t)=>({...e.freshnessColorAssociatedParams,freshnessColorsComplete:t.data.freshnessColorsComplete})}),setupFlashFreshnessColors:nA({freshnessColorAssociatedParams:e=>{let{serverSessionInformation:t}=e,r=new Te(e,(t.Challenge.FaceMovementAndLightChallenge.ColorSequences??[]).map(({FreshnessColor:e,DownscrollDuration:t,FlatDisplayDuration:r})=>{let n=e.RGB,a=`rgb(${n[0]},${n[1]},${n[2]})`;return void 0!==a&&void 0!==t&&void 0!==r?{color:a,downscrollDuration:t,flatDisplayDuration:r}:void 0}).filter(nW));return{...e.freshnessColorAssociatedParams,freshnessColorDisplay:r}}}),sendTimeoutAfterOvalDrawingDelay:r9({type:"RUNTIME_ERROR",data:{message:"Client failed to draw oval."}},{delay:5e3,id:"ovalDrawingTimeout"}),cancelOvalDrawingTimeout:ne("ovalDrawingTimeout"),sendTimeoutAfterRecordingDelay:r9({type:"RUNTIME_ERROR",data:{message:"Client failed to start recording."}},{delay:5e3,id:"recordingTimeout"}),cancelRecordingTimeout:ne("recordingTimeout"),sendTimeoutAfterOvalMatchDelay:r9({type:"TIMEOUT",data:{message:"Client timed out waiting for face to match oval."}},{delay:e=>e.serverSessionInformation?.Challenge?.FaceMovementAndLightChallenge?.ChallengeConfig?.OvalFitTimeout??7e3,id:"ovalMatchTimeout"}),cancelOvalMatchTimeout:ne("ovalMatchTimeout"),callUserPermissionDeniedCallback:nA({errorState:(e,t)=>{let r;let n={state:r=t.data.message.includes("15 fps")?nC.CAMERA_FRAMERATE_ERROR:nC.CAMERA_ACCESS_ERROR,error:Error(t.data.message||t.data.Message)};return e.componentProps.onError?.(n),r}}),callMobileLandscapeWarningCallback:nA({errorState:()=>nC.MOBILE_LANDSCAPE_ERROR}),callUserCancelCallback:e=>{e.componentProps.onUserCancel?.()},callUserTimeoutCallback:e=>{let t=Error(e.errorMessage??"Client Timeout");t.name=e.errorState;let r={state:e.errorState,error:t};e.componentProps.onError?.(r)},callErrorCallback:(e,t)=>{let r={state:e.errorState,error:t.data?.error||t.data};e.componentProps.onError?.(r)},cleanUpResources:e=>{let{freshnessColorEl:t}=e.freshnessColorAssociatedParams;t&&(t.style.display="none");let r=nM.DEFAULT_ERROR_CODE;e.errorState===nC.TIMEOUT?r=nM.FACE_FIT_TIMEOUT:e.errorState===nC.RUNTIME_ERROR?r=nM.RUNTIME_ERROR:e.errorState===nC.FACE_DISTANCE_ERROR||e.errorState===nC.MULTIPLE_FACES_ERROR?r=nM.USER_ERROR_DURING_CONNECTION:void 0===e.errorState&&(r=nM.USER_CANCEL),e.livenessStreamProvider?.endStreamWithCode(r)},freezeStream:e=>{let{videoMediaStream:t,videoEl:r}=e.videoAssociatedParams;e.isRecordingStopped=!0,r?.pause(),t?.getTracks().forEach(function(e){e.stop()})},pauseVideoStream:e=>{let{videoEl:t}=e.videoAssociatedParams;e.isRecordingStopped=!0,t.pause()},resetContext:nA({challengeId:n_(),maxFailedAttempts:0,failedAttempts:0,componentProps:e=>e.componentProps,serverSessionInformation:e=>void 0,videoAssociatedParams:e=>({videoConstraints:Tu}),ovalAssociatedParams:e=>void 0,errorState:e=>void 0,livenessStreamProvider:e=>void 0,responseStreamActorRef:e=>void 0,shouldDisconnect:!1,faceMatchStateBeforeStart:e=>void 0,isFaceFarEnoughBeforeRecording:e=>void 0,isRecordingStopped:!1})},guards:{shouldTimeoutOnFailedAttempts:e=>e.failedAttempts>=e.maxFailedAttempts,hasFaceMatchedInOval:e=>e.faceMatchAssociatedParams.faceMatchState===ga.MATCHED,hasSingleFace:e=>e.faceMatchAssociatedParams.faceMatchState===ga.FACE_IDENTIFIED,hasSingleFaceBeforeStart:e=>e.faceMatchStateBeforeStart===ga.FACE_IDENTIFIED,hasEnoughFaceDistanceBeforeRecording:e=>e.isFaceFarEnoughBeforeRecording,hasNotEnoughFaceDistanceBeforeRecording:e=>!e.isFaceFarEnoughBeforeRecording,hasFreshnessColorShown:e=>e.freshnessColorAssociatedParams.freshnessColorsComplete,hasServerSessionInfo:e=>void 0!==e.serverSessionInformation,hasDOMAndCameraDetails:e=>void 0!==e.videoAssociatedParams.videoEl&&void 0!==e.videoAssociatedParams.canvasEl&&void 0!==e.freshnessColorAssociatedParams.freshnessColorEl,getShouldDisconnect:e=>!!e.shouldDisconnect,hasRecordingStarted:e=>void 0!==e.livenessStreamProvider.videoRecorder.firstChunkTimestamp,shouldSkipStartScreen:e=>!!e.componentProps?.disableStartScreen},services:{async checkVirtualCameraAndGetStream(e){let{videoConstraints:t}=e.videoAssociatedParams,r=localStorage.getItem(Tc),n=await navigator.mediaDevices.getUserMedia({video:{...t,...r?{deviceId:r}:{}},audio:!1}),a=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind).filter(e=>!e.label.toLowerCase().includes("virtual"));if(!a.length)throw Error("No real video devices found");let o=n.getTracks().filter(e=>e.getSettings().frameRate>=15);if(o.length<1)throw Error("No camera found with more than 15 fps");let i=o[0].getSettings().deviceId,s=a.some(e=>e.deviceId===i),l=s?i:a[0].deviceId,u=n;return s||(u=await navigator.mediaDevices.getUserMedia({video:{...t,deviceId:{exact:l}},audio:!1})),Tp(l),{stream:u,selectedDeviceId:i,selectableDevices:a}},async openLivenessStreamConnection(e){let{config:t}=e.componentProps,{credentialProvider:r,endpointOverride:n,systemClockOffset:a}=t,o=new E9({sessionId:e.componentProps.sessionId,region:e.componentProps.region,systemClockOffset:a,stream:e.videoAssociatedParams.videoMediaStream,videoEl:e.videoAssociatedParams.videoEl,credentialProvider:r,endpointOverride:n});return eA=o.getResponseStream(),{livenessStreamProvider:o}},async detectFace(e){let{videoEl:t}=e.videoAssociatedParams,{faceDetector:r}=e.ovalAssociatedParams;try{await r.modelLoadingPromise}catch(e){console.log({err:e})}return{faceMatchState:await nj(r,t)}},async detectFaceDistance(e){let{isFaceFarEnoughBeforeRecording:t}=e,{videoEl:r,videoMediaStream:n,isMobile:a}=e.videoAssociatedParams,{faceDetector:o}=e.ovalAssociatedParams,{width:i,height:s}=n.getTracks()[0].getSettings(),l=nF({width:i,height:s}),{isDistanceBelowThreshold:u}=await nV({faceDetector:o,videoEl:r,ovalDetails:l,reduceThreshold:t,isMobile:a});return{isFaceFarEnoughBeforeRecording:u}},async detectFaceDistanceWhileLoading(e){let{isFaceFarEnoughBeforeRecording:t}=e,{videoEl:r,videoMediaStream:n,isMobile:a}=e.videoAssociatedParams,{faceDetector:o}=e.ovalAssociatedParams,{width:i,height:s}=n.getTracks()[0].getSettings(),l=nF({width:i,height:s}),{isDistanceBelowThreshold:u,error:c}=await nV({faceDetector:o,isMobile:a,ovalDetails:l,videoEl:r,reduceThreshold:t});return{isFaceFarEnoughBeforeRecording:u,error:c}},async detectInitialFaceAndDrawOval(e){let t,r,n;let{serverSessionInformation:a,livenessStreamProvider:o}=e,{videoEl:i,canvasEl:s,isMobile:l}=e.videoAssociatedParams,{faceDetector:u}=e.ovalAssociatedParams;try{await u.modelLoadingPromise,await o.videoRecorder.recorderStarted}catch(e){console.log({err:e})}let c=await u.detectFaces(i);switch(c.length){case 0:r=ga.CANT_IDENTIFY,n=nB(i);break;case 1:r=ga.FACE_IDENTIFIED,t=c[0];break;default:r=ga.TOO_MANY}if(!t)return{faceMatchState:r,illuminationState:n};let{width:d,height:p}=i.getBoundingClientRect();l?(s.width=window.innerWidth,s.height=window.innerHeight):(s.width=d,s.height=p);let h=d/i.videoWidth,f=function({sessionInformation:e,videoWidth:t}){let r=e?.Challenge?.FaceMovementAndLightChallenge?.OvalParameters;if(!r||!r.CenterX||!r.CenterY||!r.Width||!r.Height)throw Error("Oval parameters not returned from session information.");return{flippedCenterX:t-r.CenterX,centerX:r.CenterX,centerY:r.CenterY,width:r.Width,height:r.Height}}({sessionInformation:a,videoWidth:i.width}),m=nL(t,f,i.videoHeight);return t.top=m.top,t.left=m.left,t.height=m.bottom-m.top,t.width=m.right-m.left,nD({canvas:s,oval:f,scaleFactor:h,videoEl:i}),{faceMatchState:r,ovalDetails:f,scaleFactor:h,initialFace:t}},async detectFaceAndMatchOval(e){let t,r,n;let{serverSessionInformation:a}=e,{videoEl:o}=e.videoAssociatedParams,{faceDetector:i,ovalDetails:s,initialFace:l}=e.ovalAssociatedParams,u=await i.detectFaces(o),c=0,d=nL(l,s,o.videoHeight),{ovalBoundingBox:p}=nR(s),h=nO(d,p);switch(u.length){case 0:t=ga.CANT_IDENTIFY,n=nB(o);break;case 1:{let{faceMatchState:e,faceMatchPercentage:n}=function({face:e,ovalDetails:t,initialFaceIntersection:r,sessionInformation:n,frameHeight:a}){let o=n?.Challenge?.FaceMovementAndLightChallenge?.ChallengeConfig;if(!o||!o.OvalIouThreshold||!o.OvalIouHeightThreshold||!o.OvalIouWidthThreshold||!o.FaceIouHeightThreshold||!o.FaceIouWidthThreshold)throw Error("Challenge information not returned from session information.");let{OvalIouThreshold:i,FaceIouHeightThreshold:s,FaceIouWidthThreshold:l}=o,u=nL(e,t,a),c=u.left,d=u.right,p=u.top,h=u.bottom,{ovalBoundingBox:f,minOvalX:m,minOvalY:g,maxOvalX:y,maxOvalY:v}=nR(t),b=nO(u,f),w=t.width*l,k=t.height*s,S=100*Math.max(Math.min(1,.75*(b-r)/(i-r)+.25),0);return{faceMatchState:b>i?ga.MATCHED:m>c&&y>d||c>m&&d>y?ga.OFF_CENTER:g-p>k||h-v>k||m-c>w&&d-y>w?ga.MATCHED:ga.TOO_FAR,faceMatchPercentage:S}}({face:r=u[0],ovalDetails:s,initialFaceIntersection:h,sessionInformation:a,frameHeight:o.videoHeight});t=e,c=n;break}default:t=ga.TOO_MANY}return{faceMatchState:t,faceMatchPercentage:c,illuminationState:n,detectedFace:r}},async flashColors(e){let{freshnessColorsComplete:t,freshnessColorDisplay:r}=e.freshnessColorAssociatedParams;if(!t)return{freshnessColorsComplete:await r.displayColorTick()}},async stopVideo(e){let{challengeId:t,livenessStreamProvider:r}=e,{videoMediaStream:n}=e.videoAssociatedParams,{initialFace:a,ovalDetails:o}=e.ovalAssociatedParams,{startFace:i,endFace:s}=e.faceMatchAssociatedParams,{width:l,height:u}=n.getTracks()[0].getSettings(),c=l-a.left-a.width;await r.stopVideo();let d={Challenge:{FaceMovementAndLightChallenge:{ChallengeId:t,InitialFace:{InitialFaceDetectedTimestamp:a.timestampMs,BoundingBox:nH({deviceHeight:u,deviceWidth:l,height:a.height,width:a.width,top:a.top,left:c})},TargetFace:{FaceDetectedInTargetPositionStartTimestamp:i.timestampMs,FaceDetectedInTargetPositionEndTimestamp:s.timestampMs,BoundingBox:nH({deviceHeight:u,deviceWidth:l,height:o.height,width:o.width,top:o.centerY-o.height/2,left:o.centerX-o.width/2})},VideoEndTimestamp:r.videoRecorder.recorderEndTimestamp}}};if(0===r.videoRecorder.getVideoChunkSize())throw Error("Video chunks not recorded successfully.");r.sendClientInfo(d),r.dispatchStopVideoEvent()},async getLiveness(e){let{onAnalysisComplete:t}=e.componentProps;await t()}}});var Tf=r(68844),Tm=r(4167),Tg=r(53039),Ty=r(39692);let Tv=(0,Ty.R)(({className:e,children:t,...r},n)=>t2.createElement(Tf.G,{className:(0,Tm.A)(Tg.M.Flex,e),ref:n,...r},t));Tv.displayName="Flex";let Tb=t2.createContext(null);function Tw({children:e,...t}){return t2.createElement(Tb.Provider,{value:t},e)}function Tk(){let e=t2.useContext(Tb);if(null===e)throw Error("useFaceLivenessDetector must be used within a FaceLivenessDetectorProvider");return e}var TS=r(93646);let Tx=(0,Ty.R)(({as:e="p",className:t,children:r,isTruncated:n,variation:a,...o},i)=>{let s=(0,Tm.A)(Tg.M.Text,(0,TS.wq)(Tg.M.Text,a),(0,TS.T2)(Tg.M.Text,"truncated",n),t);return t2.createElement(Tf.G,{as:e,className:s,ref:i,...o},r)});Tx.displayName="Text";let T_=t2.createContext({isFieldsetDisabled:!1}),TI=()=>t2.useContext(T_);var TE=r(58187);let TT=["link","primary",void 0],TN=(0,Ty.R)(({className:e,children:t,colorTheme:r,isFullWidth:n=!1,isDisabled:a,isLoading:o,loadingText:i="",size:s,type:l="button",variation:u,...c},d)=>{let p=TT.includes(u)&&r?`${u??"outlined"}--${r}`:void 0,{isFieldsetDisabled:h}=TI(),f=h||(a??o??c.disabled),m=(0,Tm.A)(Tg.M.Button,Tg.M.FieldGroupControl,(0,TS.wq)(Tg.M.Button,u),(0,TS.wq)(Tg.M.Button,p),(0,TS.wq)(Tg.M.Button,s),(0,TS.T2)(Tg.M.Button,"disabled",f),(0,TS.T2)(Tg.M.Button,"loading",o),(0,TS.T2)(Tg.M.Button,"fullwidth",n),e);return t2.createElement(Tf.G,{ref:d,as:"button",className:m,isDisabled:f,type:l,...c},o?t2.createElement(Tv,{as:"span",className:Tg.M.ButtonLoaderWrapper},t2.createElement(TE.aN,{size:s}),i||null):t)});TN.displayName="Button";let TA=(0,Ty.R)(({children:e,className:t,visuallyHidden:r,...n},a)=>t2.createElement(Tf.G,{as:"label",className:(0,Tm.A)(Tg.M.Label,t,{[Tg.M.VisuallyHidden]:r}),ref:a,...n},e));TA.displayName="Label";let TC=({descriptiveText:e,labelHidden:t,...r})=>e?t2.createElement(Tx,{"data-testid":"qa-field-description",className:(0,Tm.A)(Tg.M.FieldDescription,{[Tg.M.VisuallyHidden]:t}),...r},e):null;TC.displayName="FieldDescription";let TM=({errorMessage:e,hasError:t,...r})=>t&&e?t2.createElement(Tx,{className:Tg.M.FieldErrorMessage,...r},e):null;TM.displayName="FieldErrorMessage";let TR=t2.createContext({});function TO(e){let t=t2.useContext(TR);if(e&&t)return t[e]}let TF=e=>{let{className:t,...r}=e;return t2.createElement(Tf.G,{as:"span",width:"1em",height:"1em",className:(0,Tm.A)(Tg.M.Icon,t),...r},t2.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t2.createElement("path",{d:"M16.59 8.58984L12 13.1698L7.41 8.58984L6 9.99984L12 15.9998L18 9.99984L16.59 8.58984Z",fill:"currentColor"})))},TD=(0,Ty.R)(({autoComplete:e,className:t,size:r,variation:n,value:a,defaultValue:o,hasError:i,icon:s,iconColor:l,children:u,placeholder:c,isDisabled:d,isRequired:p,isMultiple:h=!1,selectSize:f=1,...m},g)=>{let y=void 0===a&&void 0===o&&c,v=h||f>1,b=(0,Tm.A)(Tg.M.Select,Tg.M.FieldGroupControl,(0,TS.wq)(Tg.M.Select,r),(0,TS.wq)(Tg.M.Select,n),(0,TS.T2)(Tg.M.Select,"error",i),(0,TS.T2)(Tg.M.Select,"expanded",v),t),w=TO("select"),{isFieldsetDisabled:k}=TI();return t2.createElement(Tf.G,{className:Tg.M.SelectWrapper},t2.createElement(Tf.G,{"aria-invalid":i,as:"select",autoComplete:e,value:a,defaultValue:y?"":o,isDisabled:k||d,multiple:h,size:f,required:p,className:b,ref:g,...m},c&&t2.createElement("option",{value:""},c),u),v?null:t2.createElement(Tv,{className:(0,Tm.A)(Tg.M.SelectIcon,(0,TS.wq)(Tg.M.SelectIcon,r)),color:l,"aria-hidden":"true"},s??w?.expand??t2.createElement(TF,null)))});TD.displayName="Select";var TP=r(22049);let T$=e=>e in TP.Q,TL=e=>{let t={styleProps:{},rest:{}};return Object.keys(e).forEach(r=>{T$(r)?t.styleProps={...t.styleProps,[r]:e[r]}:t.rest={...t.rest,[r]:e[r]}}),t},TB=globalThis?.document?t2.useLayoutEffect:()=>{},Tz=t3["useId".toString()]||(()=>void 0),TW=0,TU=e=>{let[t,r]=t2.useState(Tz());return TB(()=>{e||r(e=>e??String(TW++))},[e]),e??(t?`amplify-id-${t}`:"")},Tj=e=>{let t=e.filter(e=>void 0!==e).join(" ");return t.length>0?t:void 0};"undefined"!=typeof Symbol&&(0,TS.mf)(Symbol.for)&&Symbol.for("amplify_default");let TV=(e,t)=>e&&t?`${e}-${t}`:void 0,TH=({children:e,options:t})=>e?(t?.length&&console.warn("Amplify UI: <SelectField> component  defaults to rendering children over `options`. When using the `options` prop, omit children."),e):t?.map((e,t)=>t2.createElement("option",{label:e,value:e,key:`${e}-${t}`},e)),TG=(0,Ty.R)((e,t)=>{let{children:r,className:n,descriptiveText:a,errorMessage:o,hasError:i=!1,id:s,label:l,labelHidden:u=!1,options:c,size:d,testId:p,inputStyles:h,...f}=e,m=TU(s),g=TU(),y=a?TV(g,"description"):void 0,v=i?TV(g,"error"):void 0,b=Tj([v,y]),{styleProps:w,rest:k}=TL(f);return t2.createElement(Tv,{className:(0,Tm.A)(Tg.M.Field,(0,TS.wq)(Tg.M.Field,d),Tg.M.SelectField,n),testId:p,...w},t2.createElement(TA,{htmlFor:m,visuallyHidden:u},l),t2.createElement(TC,{id:y,labelHidden:u,descriptiveText:a}),t2.createElement(TD,{"aria-describedby":b,hasError:i,id:m,ref:t,size:d,...k,...h},TH({children:r,options:c})),t2.createElement(TM,{id:v,hasError:i,errorMessage:o}))});TG.displayName="SelectField";var Tq=r(68526),TK=r(35195);function TY(e){return 0!==e.status?e.getSnapshot():e.machine.initialState}function TX(e){return"state"in e&&"machine"in e}function TQ(e){return e}function TZ(e){return"state"in e}function TJ(e){return"getSnapshot"in e?TX(e)?TY(e):e.getSnapshot():TZ(e)?e.state:void 0}function T0(){var e,t,r,n,a,o,i,s;let{service:l}=Tk();return void 0===e&&(e=TJ),t=(0,t2.useRef)(l),r=(0,t2.useRef)([]),n=(0,t2.useCallback)(function(e){return l.subscribe(e).unsubscribe},[l]),a=(0,t2.useCallback)(function(){return e(l)},[l,e]),o=(0,t2.useCallback)(function(e,t){return TX(l)?function(e,t,r){if(e.status===gr.NotStarted)return!0;var n=void 0===r.changed&&(Object.keys(r.children).length>0||"boolean"==typeof t.changed);return!(r.changed||n)}(l,e,t):e===t},[l]),i=(0,TK.useSyncExternalStoreWithSelector)(n,a,a,TQ,o),s=nw(function(){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a=e[0],o=t.current;"deferred"in o&&o.deferred?r.current.push(a):o.send(a)}}),(0,t8.Z)(function(){for(t.current=l;r.current.length>0;){var e=r.current.shift();l.send(e)}},[l]),[i,s]}var T1=function(e,t){return e===t},T2=function(e,t){if(TX(e)){if(0===e.status&&t.current)return t.current;var r=TY(e);return t.current=0===e.status?r:null,r}return TZ(e)?e.state:void 0};function T3(e){var t,r,n,a,o;let{service:i}=Tk();return void 0===t&&(t=T1),n=(0,t2.useRef)(null),a=(0,t2.useCallback)(function(e){return i.subscribe(e).unsubscribe},[i]),o=(0,t2.useCallback)(function(){return T2(i,n)},[i,r]),(0,TK.useSyncExternalStoreWithSelector)(a,o,o,e,t)}(e8=tO||(tO={})).CameraModule="amplify-liveness-camera-module",e8.CancelContainer="amplify-liveness-cancel-container",e8.CancelButton="amplify-liveness-cancel-button",e8.CountdownContainer="amplify-liveness-countdown-container",e8.DescriptionBullet="amplify-liveness-description-bullet",e8.DescriptionBulletIndex="amplify-liveness-description-bullet__index",e8.DescriptionBulletIndexText="amplify-liveness-description-bullet__index__text",e8.DescriptionBulletMessage="amplify-liveness-description-bullet__message",e8.ErrorModal="amplify-liveness-error-modal",e8.ErrorModalHeading="amplify-liveness-error-modal__heading",e8.FadeOut="amplify-liveness-fade-out",e8.FreshnessCanvas="amplify-liveness-freshness-canvas",e8.InstructionList="amplify-liveness-instruction-list",e8.InstructionOverlay="amplify-liveness-instruction-overlay",e8.Hint="amplify-liveness-hint",e8.HintText="amplify-liveness-hint__text",e8.LandscapeErrorModal="amplify-liveness-landscape-error-modal",e8.LandscapeErrorModalButton="amplify-liveness-landscape-error-modal__button",e8.LandscapeErrorModalHeader="amplify-liveness-landscape-error-modal__header",e8.Loader="amplify-liveness-loader",e8.MatchIndicator="amplify-liveness-match-indicator",e8.OvalCanvas="amplify-liveness-oval-canvas",e8.OpaqueOverlay="amplify-liveness-overlay-opaque",e8.Overlay="amplify-liveness-overlay",e8.Popover="amplify-liveness-popover",e8.PopoverContainer="amplify-liveness-popover__container",e8.PopoverAnchor="amplify-liveness-popover__anchor",e8.PopoverAnchorSecondary="amplify-liveness-popover__anchor-secondary",e8.RecordingIconContainer="amplify-liveness-recording-icon-container",e8.RecordingIcon="amplify-liveness-recording-icon",e8.StartScreenCameraSelect="amplify-liveness-start-screen-camera-select",e8.StartScreenCameraSelectContainer="amplify-liveness-start-screen-camera-select__container",e8.StartScreenCameraWaiting="amplify-liveness-start-screen-camera-waiting",e8.StartScreenHeader="amplify-liveness-start-screen-header",e8.StartScreenHeaderBody="amplify-liveness-start-screen-header__body",e8.StartScreenHeaderHeading="amplify-liveness-start-screen-header__heading",e8.StartScreenWarning="amplify-liveness-start-screen-warning",e8.StartScreenInstructions="amplify-liveness-start-screen-instructions",e8.StartScreenInstructionsHeading="amplify-liveness-start-screen-instructions__heading",e8.Toast="amplify-liveness-toast",e8.ToastContainer="amplify-liveness-toast__container",e8.ToastMessage="amplify-liveness-toast__message",e8.Video="amplify-liveness-video",e8.VideoAnchor="amplify-liveness-video-anchor";let T4=(0,Ty.R)(({as:e="span",children:t,className:r,...n},a)=>t2.createElement(Tf.G,{as:e,className:(0,Tm.A)(Tg.M.VisuallyHidden,r),ref:a,...n},t));T4.displayName="VisuallyHidden";let T6=({variation:e="default",size:t="medium",children:r,isInitial:n=!1,...a})=>{let{tokens:o}=(0,Tq.Fg)();return t2.createElement(Tf.G,{className:`${tO.Toast} ${tO.Toast}--${e} ${tO.Toast}--${t}`,...n&&{backgroundColor:o.colors.background.primary},...a},t2.createElement(Tv,{className:tO.ToastContainer},t2.createElement(Tv,{className:tO.ToastMessage,...n?{color:o.colors.font.primary}:{}},r)))},T5=({displayText:e})=>t2.createElement(T6,{"aria-live":"polite"},t2.createElement(Tv,{className:tO.HintText},t2.createElement(TE.aN,null),t2.createElement(Tf.G,null,e))),T8=e=>e.context.errorState,T7=e=>e.context.faceMatchAssociatedParams.faceMatchState,T9=e=>e.context.faceMatchAssociatedParams.illuminationState,Ne=e=>e.context.isFaceFarEnoughBeforeRecording,Nt=e=>e.context.faceMatchStateBeforeStart,Nr=e=>e.context.faceMatchAssociatedParams?.faceMatchPercentage,Nn=({text:e,isInitial:t=!1})=>t2.createElement(T6,{size:"large",variation:"primary",isInitial:t},t2.createElement(Tf.G,{"aria-live":"assertive"},e)),Na=({hintDisplayText:e})=>{let[t]=T0(),r=T3(T8),n=T3(T7),a=T3(T9),o=T3(Nt),i=T3(Ne),s=T3(Nr),l=t.matches("checkFaceDetectedBeforeStart")||t.matches("detectFaceBeforeStart"),u=t.matches("checkFaceDistanceBeforeRecording")||t.matches("detectFaceDistanceBeforeRecording"),c=t.matches("start")||t.matches("userCancel"),d=t.matches("recording"),p=t.matches("notRecording"),h=t.matches("uploading"),f=t.matches("checkSucceeded"),m=t.matches("checkFailed"),g=t.matches({recording:"flashFreshnessColors"}),y={[ga.CANT_IDENTIFY]:e.hintCanNotIdentifyText,[ga.FACE_IDENTIFIED]:e.hintTooFarText,[ga.TOO_MANY]:e.hintTooManyFacesText,[ga.TOO_FAR]:e.hintTooFarText,[ga.MATCHED]:e.hintHoldFaceForFreshnessText,[ga.OFF_CENTER]:e.hintFaceOffCenterText},v={[gn.BRIGHT]:e.hintIlluminationTooBrightText,[gn.DARK]:e.hintIlluminationTooDarkText,[gn.NORMAL]:e.hintIlluminationNormalText};if(c)return t2.createElement(t2.Fragment,null,t2.createElement(T4,{role:"alert"},e.hintCenterFaceInstructionText),t2.createElement(Nn,{text:e.hintCenterFaceText,isInitial:!0}));if(r??(m||f))return null;if(!d){if(l)return o===ga.TOO_MANY?t2.createElement(Nn,{text:e.hintTooManyFacesText}):t2.createElement(Nn,{text:e.hintMoveFaceFrontOfCameraText});if(u&&!1===i)return t2.createElement(Nn,{text:e.hintTooCloseText});if(p)return t2.createElement(T5,{displayText:e.hintConnectingText});if(h)return t2.createElement(t2.Fragment,null,t2.createElement(T4,{"aria-live":"assertive"},e.hintCheckCompleteText),t2.createElement(T5,{displayText:e.hintVerifyingText}));if(a&&a!==gn.NORMAL)return t2.createElement(Nn,{text:v[a]})}if(g)return t2.createElement(Nn,{text:e.hintHoldFaceForFreshnessText});if(d&&!g){let t=y[ga.TOO_FAR];n===ga.MATCHED&&(t=y[n]);let r=t;return n===ga.OFF_CENTER?r=y[n]:n===ga.TOO_FAR&&s>50&&(r=e.hintMatchIndicatorText),t2.createElement(T6,{size:"large",variation:"primary"},t2.createElement(T4,{"aria-live":"assertive"},r),t2.createElement(Tf.G,{"aria-label":r},t))}return null},No=({children:e,horizontal:t="center",vertical:r="center",className:n,...a})=>t2.createElement(Tv,{className:`${tO.Overlay} ${n}`,alignItems:t,justifyContent:r,...a},e),Ni=e=>{let{className:t,...r}=e;return t2.createElement(Tf.G,{as:"span",width:"1em",height:"1em",className:(0,Tm.A)(Tg.M.Icon,t),...r},t2.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t2.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z",fill:"currentColor"})))},Ns=e=>{let{className:t,...r}=e;return t2.createElement(Tf.G,{as:"span",width:"1em",height:"1em",className:(0,Tm.A)(Tg.M.Icon,t),...r},t2.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t2.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})))},Nl=e=>{let{className:t,...r}=e;return t2.createElement(Tf.G,{as:"span",width:"1em",height:"1em",className:(0,Tm.A)(Tg.M.Icon,t),...r},t2.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t2.createElement("path",{d:"M11 7H13V9H11V7ZM11 11H13V17H11V11ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"currentColor"})))},Nu=e=>{let{className:t,...r}=e;return t2.createElement(Tf.G,{as:"span",width:"1em",height:"1em",className:(0,Tm.A)(Tg.M.Icon,t),...r},t2.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t2.createElement("path",{d:"M1 21H23L12 2L1 21ZM13 18H11V16H13V18ZM13 14H11V10H13V14Z",fill:"currentColor"})))},Nc=({variation:e,ariaHidden:t,ariaLabel:r,role:n})=>{let a;let o=TO("alert");switch(e){case"info":a=o?.info??t2.createElement(Nl,{"aria-hidden":t,"aria-label":r,role:n});break;case"error":a=o?.error??t2.createElement(Ns,{"aria-hidden":t,"aria-label":r,role:n});break;case"warning":a=o?.warning??t2.createElement(Nu,{"aria-hidden":t,"aria-label":r,role:n});break;case"success":a=o?.success??t2.createElement(Ni,{"aria-hidden":t,"aria-label":r,role:n})}return a?t2.createElement("span",{className:Tg.M.AlertIcon},a):null};Nc.displayName="AlertIcon";let Nd={errorLabelText:"Error",connectionTimeoutHeaderText:"Connection time out",connectionTimeoutMessageText:"Connection has timed out.",timeoutHeaderText:"Time out",timeoutMessageText:"Face didn't fit inside oval in time limit. Try again and completely fill the oval with face in it.",faceDistanceHeaderText:"Forward movement detected",faceDistanceMessageText:"Avoid moving closer when connecting.",multipleFacesHeaderText:"Multiple faces detected",multipleFacesMessageText:"Ensure only one face is present in front of the camera when connecting.",clientHeaderText:"Client error",clientMessageText:"Check failed due to client issue",serverHeaderText:"Server issue",serverMessageText:"Cannot complete check due to server issue",landscapeHeaderText:"Landscape orientation not supported",landscapeMessageText:"Rotate your device to portrait (vertical) orientation.",portraitMessageText:"Ensure your device remains in portrait (vertical) orientation for the checks duration.",tryAgainText:"Try again"},Np={cameraMinSpecificationsHeadingText:"Camera does not meet minimum specifications",cameraMinSpecificationsMessageText:"Camera must support at least 320*240 resolution and 15 frames per second.",cameraNotFoundHeadingText:"Camera is not accessible.",cameraNotFoundMessageText:"Check that a camera is connected and there is not another application using the camera. You may have to go into settings to grant camera permissions and close out all instances of your browser and retry.",a11yVideoLabelText:"Webcam for liveness check",cancelLivenessCheckText:"Cancel Liveness check",goodFitCaptionText:"Good fit",goodFitAltText:"Ilustration of a person's face, perfectly fitting inside of an oval.",hintCenterFaceText:"Center your face",hintCenterFaceInstructionText:"Instruction: Before starting the check, make sure your camera is at the center top of your screen and center your face to the camera. When the check starts an oval will show up in the center. You will be prompted to move forward into the oval and then prompted to hold still. After holding still for a few seconds, you should hear check complete.",hintFaceOffCenterText:"Face is not in the oval, center your face to the camera.",hintMoveFaceFrontOfCameraText:"Move face in front of camera",hintTooManyFacesText:"Ensure only one face is in front of camera",hintFaceDetectedText:"Face detected",hintCanNotIdentifyText:"Move face in front of camera",hintTooCloseText:"Move back",hintTooFarText:"Move closer",hintConnectingText:"Connecting...",hintVerifyingText:"Verifying...",hintCheckCompleteText:"Check complete",hintIlluminationTooBrightText:"Move to dimmer area",hintIlluminationTooDarkText:"Move to brighter area",hintIlluminationNormalText:"Lighting conditions normal",hintHoldFaceForFreshnessText:"Hold still",hintMatchIndicatorText:"50% completed. Keep moving closer.",photosensitivityWarningBodyText:"This check flashes different colors. Use caution if you are photosensitive.",photosensitivityWarningHeadingText:"Photosensitivity warning",photosensitivityWarningInfoText:"Some people may experience epileptic seizures when exposed to colored lights. Use caution if you, or anyone in your family, have an epileptic condition.",photosensitivityWarningLabelText:"More information about photosensitivity",photosensitivyWarningBodyText:"This check flashes different colors. Use caution if you are photosensitive.",photosensitivyWarningHeadingText:"Photosensitivity warning",photosensitivyWarningInfoText:"Some people may experience epileptic seizures when exposed to colored lights. Use caution if you, or anyone in your family, have an epileptic condition.",photosensitivyWarningLabelText:"More information about photosensitivity",retryCameraPermissionsText:"Retry",recordingIndicatorText:"Rec",startScreenBeginCheckText:"Start video check",tooFarCaptionText:"Too far",tooFarAltText:"Illustration of a person's face inside of an oval; there is a gap between the perimeter of the face and the boundaries of the oval.",waitingCameraPermissionText:"Waiting for you to allow camera permission.",...Nd},Nh=e=>{let t,r;let{error:n,displayText:a}=e,{connectionTimeoutHeaderText:o,connectionTimeoutMessageText:i,errorLabelText:s,timeoutHeaderText:l,timeoutMessageText:u,faceDistanceHeaderText:c,faceDistanceMessageText:d,multipleFacesHeaderText:p,multipleFacesMessageText:h,clientHeaderText:f,clientMessageText:m,serverHeaderText:g,serverMessageText:y}=a;switch(n){case nC.CONNECTION_TIMEOUT:t=o,r=i;break;case nC.TIMEOUT:t=l,r=u;break;case nC.FACE_DISTANCE_ERROR:t=c,r=d;break;case nC.MULTIPLE_FACES_ERROR:t=p,r=h;break;case nC.RUNTIME_ERROR:t=f,r=m;break;case nC.SERVER_ERROR:default:t=g,r=y}return t2.createElement(t2.Fragment,null,t2.createElement(Tv,{className:tO.ErrorModal},t2.createElement(Nc,{ariaLabel:s,role:"img",variation:"error"}),t2.createElement(Tx,{className:tO.ErrorModalHeading,id:"amplify-liveness-error-heading"},t)),t2.createElement(Tx,{id:"amplify-liveness-error-message"},r))},Nf=({errorState:e,overrideErrorDisplayText:t})=>{let r={...Nd,...t};return e===nC.CAMERA_ACCESS_ERROR||e===nC.CAMERA_FRAMERATE_ERROR||e===nC.MOBILE_LANDSCAPE_ERROR?null:Nh({error:e,displayText:r})},Nm=e=>{let{children:t,onRetry:r,displayText:n}=e,{tryAgainText:a}={...Nd,...n};return t2.createElement(No,{className:tO.OpaqueOverlay},t2.createElement(T6,{"aria-labelledby":"amplify-liveness-error-heading","aria-describedby":"amplify-liveness-error-message",role:"alertdialog"},t,t2.createElement(Tv,{justifyContent:"center"},t2.createElement(TN,{variation:"primary",type:"button",onClick:r},a))))},Ng=e=>{let{className:t,size:r,...n}=e;return t2.createElement(Tf.G,{as:"span",width:r??"1em",height:r??"1em",className:(0,Tm.A)(Tg.M.Icon,t),...n},t2.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r?{width:r,height:r}:void 0},t2.createElement("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})))},Ny=({ariaLabel:e})=>{let[t,r]=T0();return t.done?null:t2.createElement(TN,{autoFocus:!0,variation:"link",onClick:()=>{r({type:"CANCEL"})},size:"large",className:tO.CancelButton,"aria-label":e},t2.createElement(Ng,{"aria-hidden":"true","data-testid":"close-icon"}))},Nv={minX:0,minY:0,width:24,height:24},Nb=(0,Ty.R)(({className:e,as:t="svg",fill:r="currentColor",pathData:n,viewBox:a=Nv,children:o,paths:i,...s},l)=>{let u;let c=a.minX?a.minX:Nv.minX,d=a.minY?a.minY:Nv.minY,p=a.width?a.width:Nv.width,h=a.height?a.height:Nv.height;return o&&(u=o),i&&(u=i.map((e,t)=>t2.createElement("path",{...e,key:t}))),n&&(u=t2.createElement("path",{d:n,fill:r})),t2.createElement(Tf.G,{as:t,className:(0,Tm.A)(Tg.M.Icon,e),ref:l,viewBox:`${c} ${d} ${p} ${h}`,...s},u)});Nb.displayName="Icon";let Nw=({children:e})=>t2.createElement(Tv,{className:tO.RecordingIcon},t2.createElement(Tv,{"data-testid":"rec-icon",justifyContent:"center"},t2.createElement(Nb,{viewBox:{width:20,height:20},width:"20",height:"20"},t2.createElement("circle",{cx:"10",cy:"10",r:"8",fill:"red"}))),t2.createElement(Tx,{as:"span",fontWeight:"bold"},e));var Nk=r(65790);let NS=()=>{let{breakpoints:{values:e,defaultBreakpoint:t}}=(0,Tq.Fg)();return(0,Nk.G)({breakpoints:e,defaultBreakpoint:t})},Nx=({children:e,headingText:t,labelText:r})=>{let n=NS(),[a,o]=t2.useState(!1),i=t2.useRef(null);return t2.useEffect(()=>{function e(e){a&&i.current&&!i.current.contains(e.target)&&o(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i,a]),t2.createElement("div",{className:tO.Popover,ref:i},t2.createElement(TN,{"aria-controls":"photosensitivity-description","aria-expanded":a,role:"alertdialog","aria-label":r,"aria-describedby":"photosensitivity-description",colorTheme:"info",id:"popover-button",onClick:()=>o(!a),testId:"popover-icon"},t2.createElement(Nc,{ariaHidden:!0,variation:"info"})),a&&t2.createElement(t2.Fragment,null,t2.createElement(Tv,{className:tO.PopoverAnchor}),t2.createElement(Tv,{className:tO.PopoverAnchorSecondary}),t2.createElement(Tv,{"aria-hidden":!a,"aria-label":t,className:tO.PopoverContainer,"data-testid":"popover-text",id:"photosensitivity-description",left:"base"===n?-190:-108,role:"alertdialog"},e)))};Nx.displayName="LivenessIconWithPopover";let N_=({bodyText:e,headingText:t,infoText:r,labelText:n})=>t2.createElement(Tv,{className:`${Tg.M.Alert} ${tO.StartScreenWarning}`,style:{zIndex:"3"}},t2.createElement(Tf.G,{flex:"1"},t2.createElement(Tf.G,{className:Tg.M.AlertHeading},t),t2.createElement(Tf.G,{className:Tg.M.AlertBody},e)),t2.createElement(Nx,{labelText:n,headingText:t},r)),NI=({recordingIndicatorText:e})=>t2.createElement(Tf.G,{className:tO.RecordingIconContainer},t2.createElement(Nw,null,e)),NE=({cancelLivenessCheckText:e})=>t2.createElement(Tf.G,{className:tO.CancelContainer},t2.createElement(Ny,{ariaLabel:e})),NT=e=>e.context.videoAssociatedParams?.videoConstraints,NN=e=>e.context.videoAssociatedParams?.videoMediaStream,NA=e=>e.context.faceMatchAssociatedParams?.faceMatchPercentage,NC=e=>e.context.faceMatchAssociatedParams?.faceMatchState,NM=e=>e.context.videoAssociatedParams?.selectedDeviceId,NR=e=>e.context.videoAssociatedParams?.selectableDevices,NO=t2.createElement(TE.aN,{size:"large",className:tO.Loader,"data-testid":"centered-loader"}),NF=[ga.TOO_FAR,ga.CANT_IDENTIFY,ga.FACE_IDENTIFIED,ga.OFF_CENTER],ND=t2.memo(({percentage:e,initialPercentage:t=25,testId:r})=>{let[n,a]=t2.useState(t);t2.useEffect(()=>{e<0?a(0):e>100?a(100):a(e)},[e]);let o={"--percentage":`${n}%`};return t2.createElement("div",{className:tO.MatchIndicator,"data-testid":r},t2.createElement("div",{className:`${tO.MatchIndicator}__bar`,style:o,role:"progressbar","aria-label":"MatchIndicator","aria-valuenow":e,"aria-valuetext":`${e}% face fit`}))}),NP=e=>{let{isMobileScreen:t,isRecordingStopped:r,instructionDisplayText:n,streamDisplayText:a,hintDisplayText:o,errorDisplayText:i,cameraDisplayText:s,components:l,testId:u}=e,{cancelLivenessCheckText:c,recordingIndicatorText:d}=a,{ErrorView:p=Nm,PhotosensitiveWarning:h=N_}=l??{},[f,m]=T0(),g=T3(NN),y=T3(NT),v=T3(NM),b=T3(NR),w=T3(NA),k=T3(NC),S=T3(T8),x=(0,Tq.If)(),{videoRef:_,videoWidth:I,videoHeight:E}=function(e){let t=Tu.height.ideal,r=Tu.width.ideal,n=(0,t2.useRef)(null),[a,o]=(0,t2.useState)(t),[i,s]=(0,t2.useState)(r);return(0,t2.useEffect)(()=>{if(e){(0,TS.Kn)(n.current)&&(n.current.srcObject=e);let{height:t,width:r}=e.getTracks()[0].getSettings();o(t),s(r)}return()=>{e&&e.getTracks().forEach(t=>{e.removeTrack(t),t.stop()})}},[e]),{videoRef:n,videoHeight:a,videoWidth:i}}(g),T=(0,t2.useRef)(null),N=(0,t2.useRef)(null),[A,C]=(0,t2.useState)(!1),M=f.matches("cameraCheck"),R=f.matches("waitForDOMAndCameraDetails"),O=f.matches("start")||f.matches("userCancel"),F=f.matches("detectFaceBeforeStart"),D=f.matches("recording"),P=f.matches("checkSucceeded"),$=f.matches({recording:"flashFreshnessColors"}),[L,B]=(0,t2.useState)(I),[z,W]=(0,t2.useState)(E),[U,j]=(0,t2.useState)(()=>I&&E?I/E:0);t2.useEffect(()=>{T?.current&&_?.current&&g&&O&&nP(T.current,_.current,g)},[T,_,g,x,O]),t2.useEffect(()=>{let e=e=>{e.matches&&T?.current&&_?.current&&g&&O&&nP(T.current,_.current,g)},t=window.matchMedia("(prefers-color-scheme: dark)"),r=window.matchMedia("(prefers-color-scheme: light)");return t.addEventListener("change",e),r.addEventListener("change",e),()=>{t.removeEventListener("change",e),r.addEventListener("change",e)}},[T,_,g,O]),t2.useLayoutEffect(()=>{A&&m({type:"SET_DOM_AND_CAMERA_DETAILS",data:{videoEl:_.current,canvasEl:T.current,freshnessColorEl:N.current,isMobile:t}}),_.current&&(B(_.current.videoWidth),W(_.current.videoHeight),j(_.current.videoWidth/_.current.videoHeight))},[m,_,A,t]),t2.useEffect(()=>{F&&function({canvas:e}){let t=e.getContext("2d");if(t)t.restore(),t.clearRect(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);else throw Error("Cannot find Canvas.")}({canvas:T.current})},[F]);let V=t2.useMemo(()=>t2.createElement(Tf.G,{style:{visibility:O?"visible":"hidden"}},t2.createElement(h,{bodyText:n.photosensitivityWarningBodyText,headingText:n.photosensitivityWarningHeadingText,infoText:n.photosensitivityWarningInfoText,labelText:n.photosensitivityWarningLabelText})),[h,n,O]),H=t2.useCallback(()=>{m({type:"BEGIN"})},[m]),G=t2.useCallback(e=>{let t=e.target.value;(async()=>{let e=await navigator.mediaDevices.getUserMedia({video:{...y,deviceId:{exact:t}},audio:!1});m({type:"UPDATE_DEVICE_AND_STREAM",data:{newDeviceId:t,newStream:e}})})()},[y,m]);if(M)return t2.createElement(Tv,{justifyContent:"center",className:tO.StartScreenCameraWaiting},t2.createElement(TE.aN,{size:"large",className:tO.Loader,"data-testid":"centered-loader",position:"unset"}),t2.createElement(Tx,{fontSize:"large",fontWeight:"bold","data-testid":"waiting-camera-permission",className:`${tO.StartScreenCameraWaiting}__text`},s.waitingCameraPermissionText));let q=t&&!O&&!R;return t2.createElement(t2.Fragment,null,V,t2.createElement(Tv,{className:(0,Tm.A)(tO.CameraModule,q&&`${tO.CameraModule}--mobile`),"data-testid":u,gap:"zero"},!A&&NO,t2.createElement(No,{horizontal:"center",vertical:D&&!$?"start":"space-between",className:tO.InstructionOverlay},D&&t2.createElement(NI,{recordingIndicatorText:d}),!O&&!R&&!P&&t2.createElement(NE,{cancelLivenessCheckText:c}),t2.createElement(Tv,{className:(0,Tm.A)(tO.Hint,q&&`${tO.Hint}--mobile`)},t2.createElement(Na,{hintDisplayText:o})),S&&t2.createElement(p,{onRetry:()=>{m({type:"CANCEL"})},displayText:i},Nf({errorState:S,overrideErrorDisplayText:i})),D&&!$&&NF.includes(k)?t2.createElement(ND,{percentage:Math.ceil(w)}):null),t2.createElement(Tf.G,{as:"canvas",ref:N,className:tO.FreshnessCanvas,hidden:!0}),t2.createElement(Tf.G,{className:tO.VideoAnchor,style:{aspectRatio:`${U}`}},t2.createElement("video",{ref:_,muted:!0,autoPlay:!0,playsInline:!0,width:L,height:z,onCanPlay:()=>{C(!0)},"data-testid":"video",className:(0,Tm.A)(tO.Video,r&&tO.FadeOut),"aria-label":s.a11yVideoLabelText}),t2.createElement(Tv,{className:(0,Tm.A)(tO.OvalCanvas,q&&`${tO.OvalCanvas}--mobile`,r&&tO.FadeOut)},t2.createElement(Tf.G,{as:"canvas",ref:T})),O&&!t&&b&&b.length>1&&t2.createElement(Tv,{className:tO.StartScreenCameraSelect},t2.createElement(Tf.G,{className:tO.StartScreenCameraSelectContainer},t2.createElement(TA,{htmlFor:"amplify-liveness-camera-select",className:`${tO.StartScreenCameraSelect}__label`},"Camera:"),t2.createElement(TG,{id:"amplify-liveness-camera-select",label:"Camera",labelHidden:!0,value:v,onChange:G},b?.map(e=>t2.createElement("option",{value:e.deviceId,key:e.deviceId},e.label))))))),O&&t2.createElement(Tv,{justifyContent:"center"},t2.createElement(TN,{variation:"primary",type:"button",onClick:H},n.startScreenBeginCheckText)))},N$=e=>{let{onRetry:t,header:r,portraitMessage:n,landscapeMessage:a,tryAgainText:o}=e,[i,s]=t2.useState(!0);return t2.useLayoutEffect(()=>{let e=xr();return s(e.matches),e.addEventListener("change",e=>{s(e.matches)}),()=>{e.removeEventListener("change",e=>s(e.matches))}},[]),t2.createElement(Tv,{className:tO.LandscapeErrorModal,height:i?"auto":480},t2.createElement(Tx,{className:tO.LandscapeErrorModalHeader},r),t2.createElement(Tx,null,i?a:n),i?null:t2.createElement(Tv,{className:tO.LandscapeErrorModalButton},t2.createElement(TN,{variation:"primary",type:"button",onClick:t},o)))},NL="liveness-detector-check",NB=e=>e.context.isRecordingStopped,Nz=({instructionDisplayText:e,hintDisplayText:t,cameraDisplayText:r,streamDisplayText:n,errorDisplayText:a,components:o})=>{let[i,s]=T0(),l=T3(T8),u=T3(NB),c=i.matches("permissionDenied"),d=/Android|iPhone|iPad/i.test(navigator.userAgent)||/Macintosh/i.test(navigator.userAgent)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>1,p=()=>{s({type:"RETRY_CAMERA_CHECK"})},{cameraMinSpecificationsHeadingText:h,cameraMinSpecificationsMessageText:f,cameraNotFoundHeadingText:m,cameraNotFoundMessageText:g,retryCameraPermissionsText:y}=r,{cancelLivenessCheckText:v}=n;return t2.useLayoutEffect(()=>{if(d){let e=e=>{e&&s({type:"MOBILE_LANDSCAPE_WARNING"})},t=xr();return e(t.matches),t.addEventListener("change",t=>{e(t.matches)}),()=>{t.removeEventListener("change",t=>e(t.matches))}}},[d,s]),t2.createElement(Tv,{direction:"column",position:"relative",testId:NL,className:NL,gap:"xl"},(()=>{if(l===nC.MOBILE_LANDSCAPE_ERROR){let{landscapeHeaderText:e,portraitMessageText:t,landscapeMessageText:r,tryAgainText:n}={...Nd,...a};return t2.createElement(Tv,{backgroundColor:"background.primary",direction:"column",textAlign:"center",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%"},t2.createElement(N$,{header:e,portraitMessage:t,landscapeMessage:r,tryAgainText:n,onRetry:()=>{s({type:"CANCEL"})}}))}return c?t2.createElement(Tv,{backgroundColor:"background.primary",direction:"column",textAlign:"center",alignItems:"center",justifyContent:"center",width:"100%",height:480},t2.createElement(Tx,{fontSize:"large",fontWeight:"bold"},l===nC.CAMERA_FRAMERATE_ERROR?h:m),t2.createElement(Tx,{maxWidth:420},l===nC.CAMERA_FRAMERATE_ERROR?f:g),t2.createElement(TN,{variation:"primary",type:"button",onClick:p},y),t2.createElement(Tf.G,{position:"absolute",top:"medium",right:"medium"},t2.createElement(Ny,{ariaLabel:v}))):t2.createElement(NP,{isMobileScreen:d,isRecordingStopped:u,instructionDisplayText:e,streamDisplayText:n,hintDisplayText:t,errorDisplayText:a,cameraDisplayText:r,components:o})})())},NW="liveness-detector";function NU(e){let{components:t,config:r,displayText:n}=e,a=t2.useRef(null),{hintDisplayText:o,cameraDisplayText:i,instructionDisplayText:s,streamDisplayText:l,errorDisplayText:u}=function(e){let t=function(e){let t=(t,r)=>e[t]&&e[t]!==Np[t]?e[t]:e[r]&&e[r]!==Np[t]?e[r]:Np[t];return{photosensitivityWarningBodyText:t("photosensitivityWarningBodyText","photosensitivyWarningBodyText"),photosensitivityWarningHeadingText:t("photosensitivityWarningHeadingText","photosensitivyWarningHeadingText"),photosensitivityWarningInfoText:t("photosensitivityWarningInfoText","photosensitivyWarningInfoText"),photosensitivityWarningLabelText:t("photosensitivityWarningLabelText","photosensitivyWarningLabelText")}}(e??{}),{a11yVideoLabelText:r,cameraMinSpecificationsHeadingText:n,cameraMinSpecificationsMessageText:a,cameraNotFoundHeadingText:o,cameraNotFoundMessageText:i,cancelLivenessCheckText:s,connectionTimeoutHeaderText:l,connectionTimeoutMessageText:u,clientHeaderText:c,clientMessageText:d,errorLabelText:p,hintCanNotIdentifyText:h,hintCenterFaceText:f,hintCenterFaceInstructionText:m,hintFaceOffCenterText:g,hintConnectingText:y,hintFaceDetectedText:v,hintHoldFaceForFreshnessText:b,hintIlluminationNormalText:w,hintIlluminationTooBrightText:k,hintIlluminationTooDarkText:S,hintMoveFaceFrontOfCameraText:x,hintTooManyFacesText:_,hintTooCloseText:I,hintTooFarText:E,hintVerifyingText:T,hintCheckCompleteText:N,hintMatchIndicatorText:A,faceDistanceHeaderText:C,faceDistanceMessageText:M,goodFitCaptionText:R,goodFitAltText:O,landscapeHeaderText:F,landscapeMessageText:D,multipleFacesHeaderText:P,multipleFacesMessageText:$,photosensitivityWarningBodyText:L,photosensitivityWarningHeadingText:B,photosensitivityWarningInfoText:z,photosensitivityWarningLabelText:W,photosensitivyWarningBodyText:U,photosensitivyWarningHeadingText:j,photosensitivyWarningInfoText:V,photosensitivyWarningLabelText:H,portraitMessageText:G,retryCameraPermissionsText:q,recordingIndicatorText:K,serverHeaderText:Y,serverMessageText:X,startScreenBeginCheckText:Q,timeoutHeaderText:Z,timeoutMessageText:J,tooFarCaptionText:ee,tooFarAltText:et,tryAgainText:er,waitingCameraPermissionText:en}={...Np,...e,...t};return{hintDisplayText:{hintMoveFaceFrontOfCameraText:x,hintTooManyFacesText:_,hintFaceDetectedText:v,hintCanNotIdentifyText:h,hintTooCloseText:I,hintTooFarText:E,hintConnectingText:y,hintVerifyingText:T,hintCheckCompleteText:N,hintIlluminationTooBrightText:k,hintIlluminationTooDarkText:S,hintIlluminationNormalText:w,hintHoldFaceForFreshnessText:b,hintCenterFaceText:f,hintCenterFaceInstructionText:m,hintFaceOffCenterText:g,hintMatchIndicatorText:A},cameraDisplayText:{cameraMinSpecificationsHeadingText:n,cameraMinSpecificationsMessageText:a,cameraNotFoundHeadingText:o,cameraNotFoundMessageText:i,retryCameraPermissionsText:q,waitingCameraPermissionText:en,a11yVideoLabelText:r},instructionDisplayText:{photosensitivityWarningBodyText:L,photosensitivityWarningHeadingText:B,photosensitivityWarningInfoText:z,photosensitivityWarningLabelText:W,photosensitivyWarningBodyText:U,photosensitivyWarningHeadingText:j,photosensitivyWarningInfoText:V,photosensitivyWarningLabelText:H,goodFitCaptionText:R,goodFitAltText:O,tooFarCaptionText:ee,tooFarAltText:et,startScreenBeginCheckText:Q},streamDisplayText:{cancelLivenessCheckText:s,recordingIndicatorText:K},errorDisplayText:{connectionTimeoutHeaderText:l,connectionTimeoutMessageText:u,errorLabelText:p,timeoutHeaderText:Z,timeoutMessageText:J,faceDistanceHeaderText:C,faceDistanceMessageText:M,multipleFacesHeaderText:P,multipleFacesMessageText:$,clientHeaderText:c,clientMessageText:d,serverHeaderText:Y,serverMessageText:X,landscapeHeaderText:F,landscapeMessageText:D,portraitMessageText:G,tryAgainText:er}}}(n),c=function(e){for(var t,r,n,a,o,i,s,l,u,c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var p=nx(c,2),h=p[0],f=void 0===h?{}:h,m=p[1],g=(t=nw(function(){return"function"==typeof e?e():e}),r=f.context,n=f.guards,a=f.actions,o=f.activities,i=f.services,s=f.delays,f.state,l=nS(f,["context","guards","actions","activities","services","delays","state"]),u=nw(function(){return nb(t.withConfig({context:r,guards:n,actions:a,activities:o,services:i,delays:s},function(){return nk(nk({},t.context),r)}),l)}),(0,t8.Z)(function(){Object.assign(u.machine.options.actions,a),Object.assign(u.machine.options.guards,n),Object.assign(u.machine.options.activities,o),Object.assign(u.machine.options.services,i),Object.assign(u.machine.options.delays,s)},[a,n,o,i,s]),u);return(0,t2.useEffect)(function(){if(m){var e=g.subscribe(rq(m));return function(){e.unsubscribe()}}},[m]),(0,t2.useEffect)(function(){var e=f.state;return g.start(e?ni.create(e):void 0),function(){g.stop(),g.status=gr.NotStarted}},[]),g}(Th,{devTools:!1,context:{componentProps:{...e,config:r??{}}}});return t2.createElement(Tf.G,{className:NW,testId:NW},t2.createElement(Tw,{componentProps:e,service:c},t2.createElement(Tv,{direction:"column",ref:a},t2.createElement(Nz,{instructionDisplayText:s,hintDisplayText:o,cameraDisplayText:i,streamDisplayText:l,errorDisplayText:u,components:t}))))}let Nj=async()=>{let{credentials:e}=await t5();if(!e)throw Error("No credentials provided");return e};function NV(e){let{config:t,...r}=e;return t2.createElement(NU,{...r,config:{credentialProvider:Nj,...t}})}},14723:function(e,t,r){"use strict";r.d(t,{N:function(){return o}});var n=r(2265),a=r(82219);let o=n.createContext({theme:(0,a.j)(),colorMode:void 0})},34641:function(e,t,r){"use strict";r.d(t,{f:function(){return d}});var n=r(2265),a=r(57437),o=n.createContext(void 0),i=e=>{let{dir:t,children:r}=e;return(0,a.jsx)(o.Provider,{value:t,children:r})},s=r(82219),l=r(14723);let u=({cssText:e,...t})=>void 0===e||/<\/style/i.test(e)?null:n.createElement("style",{...t,dangerouslySetInnerHTML:{__html:e}});u.displayName="Style";let c=({theme:e,...t})=>{if(!e)return null;let{name:r,cssText:a}=e;return n.createElement(u,{...t,cssText:a,id:`amplify-theme-${r}`})};function d({children:e,colorMode:t,direction:r="ltr",nonce:a,theme:o}){let u=n.useMemo(()=>({theme:(0,s.j)(o),colorMode:t}),[o,t]);return n.createElement(l.N.Provider,{value:u},n.createElement(i,{dir:r},n.createElement("div",{"data-amplify-theme":u.theme.name,"data-amplify-color-mode":t,dir:r},e),o?n.createElement(c,{theme:u.theme,nonce:a}):null))}c.displayName="ThemeStyle"},68526:function(e,t,r){"use strict";r.d(t,{Fg:function(){return s},If:function(){return l}});var n=r(2265),a=r(82219),o=r(14723);let i=e=>void 0===e||void 0===e.theme?(0,a.j)():e.theme,s=()=>i(n.useContext(o.N)),l=()=>n.useContext(o.N).colorMode},58187:function(e,t,r){"use strict";r.d(t,{aN:function(){return c}});var n=r(2265),a=r(4167),o=r(53039),i=r(93646),s=r(68844),l=r(39692);let u=84*Math.PI,c=(0,l.R)(({className:e,filledColor:t,emptyColor:r,size:l,variation:c,isDeterminate:d=!1,isPercentageTextHidden:p=!1,percentage:h=0,...f},m)=>{h=Math.max(h=Math.min(h,100),0);let g=`${h}%`,y=(0,a.A)(o.M.Loader,(0,i.wq)(o.M.Loader,l),(0,i.wq)(o.M.Loader,c),(0,i.T2)(o.M.Loader,"determinate",d),e),v=n.createElement("g",null,n.createElement("line",{x1:"0",x2:"100%",y1:"50%",y2:"50%",style:{stroke:String(r)},"data-testid":"linear-empty"}),n.createElement("line",{x1:"0",x2:d?g:"100%",y1:"50%",y2:"50%",style:{stroke:d&&0===h?"none":t?String(t):void 0},"data-testid":"linear-filled"}),d?n.createElement("text",{"aria-live":"polite",className:(0,a.A)(o.M.LoaderLabel,p?o.M.VisuallyHidden:null),x:`${-1+h}%`,y:"200%"},g):null),b=n.createElement("g",null,n.createElement("circle",{cx:"50%",cy:"50%",r:"42%",strokeWidth:"8%",style:{stroke:String(r)},"data-testid":"circular-empty"}),n.createElement("circle",{cx:"50%",cy:"50%",r:"42%",strokeWidth:"8%",style:{stroke:String(t),strokeDasharray:d?`${u}% ${u}%`:void 0,strokeDashoffset:d?`${u-u*h/100}%`:void 0},"data-testid":"circular-filled"}),d?n.createElement("text",{"aria-live":"polite",className:(0,a.A)(o.M.LoaderLabel,p?o.M.VisuallyHidden:null),x:"130%",y:"80%"},g):null);return n.createElement(s.G,{as:"svg",className:y,ref:m,role:"img",...f},"linear"===c?v:b)});c.displayName="Loader"},68844:function(e,t,r){"use strict";r.d(t,{G:function(){return S}});var n=r(2265),a=r(79520),o=r(22049),i=r(50793),s=r(84121);let l=({breakpoint:e,breakpoints:t,values:r})=>{let n=r[e];if(void 0!==n)return n;let a=(0,s.Yd)(t).sort((e,r)=>t[r]-t[e]);for(let t of a.slice(a.indexOf(e))){let e=r[t];if(void 0!==e)return e}return null},u=e=>(0,s.Yd)(e).reduce((t,r)=>r in i.u.breakpoints.values?{...t,[r]:e[r]}:t,{}),c=({breakpoint:e,breakpoints:t,values:r})=>{let n={},a=(0,s.Yd)(t).sort((e,r)=>t[e]-t[r]);return Array.isArray(r)?r.forEach((e,t)=>{n[a[t]]=e}):"object"==typeof r&&(n=u(r)),l({breakpoint:e,breakpoints:t,values:n})};var d=r(65790),p=r(68526),h=r(93646);let f=({value:e,propKey:t,tokens:r})=>(0,a.Dr)(e)?e.toString():(0,h.HD)(e)?(0,h.HD)(t)?(0,s.GH)(t,e,r):e:null,m=e=>"auto"===e||"number"==typeof e&&!isNaN(e)||"string"==typeof e&&!isNaN(parseFloat(e)),g=e=>"auto"===e?"auto":`span ${e}`,y=e=>m(e)?g(e):Array.isArray(e)?e.map(e=>g(e)):"object"==typeof e&&null!=e?Object.entries(e).reduce((e,[t,r])=>({...e,[t]:g(r)}),{}):null,v=e=>{let{rowSpan:t,columnSpan:r,row:a,column:o,...i}=e,{rowFromSpanValue:l,columnFromSpanValue:u}=n.useMemo(()=>({rowFromSpanValue:y(t),columnFromSpanValue:y(r)}),[t,r]);return{row:(0,s.xH)(a)?l:a,column:(0,s.xH)(o)?u:o,...i}},b=e=>e in o.Q,w=({props:e={},style:t={},breakpoint:r,breakpoints:n,tokens:i})=>{let l={};return Object.keys(e).filter(t=>null!==e[t]).forEach(u=>{if(b(u)){let l=e[u];if(null==l||(0,s.ke)(l))return;let d=o.Q[u],p="";(0,a.Dr)(l)?p=l.toString():"string"==typeof l?p=(0,s.GH)(u,l,i):"number"==typeof l?p=l:"object"==typeof l&&(p=f({propKey:u,tokens:i,value:c({values:l,breakpoint:r,breakpoints:n})})),t={...t,[d]:p}}else void 0!==e[u]&&(l[u]=e[u])}),{propStyles:t,nonStyleProps:l}},k=(e,t)=>{let{breakpoints:{values:r,defaultBreakpoint:a},tokens:o}=(0,p.Fg)(),i=(0,d.G)({breakpoints:r,defaultBreakpoint:a}),s=v(e);return n.useMemo(()=>w({props:s,style:t,breakpoint:i,breakpoints:r,tokens:o}),[s,t,r,i,o])},S=(0,r(39692).R)(({as:e="div",children:t,testId:r,ariaLabel:a,isDisabled:o,style:i,inert:s,...l},u)=>{let{propStyles:c,nonStyleProps:d}=k(l,i);return n.createElement(e,{"aria-label":a,"data-testid":r,disabled:o,ref:u,inert:s?"":null,style:c,...d},t)});S.displayName="View"},65790:function(e,t,r){"use strict";r.d(t,{G:function(){return s}});var n=r(2265),a=r(84121);let o=({breakpoints:e})=>{let t=(0,a.Yd)(e).sort((t,r)=>e[r]-e[t]);return t.map((r,n)=>{let a="",o=e[r],i=t[n-1],s=i?e[i]-1:null;return o>=0&&(a=`(min-width: ${o}px)`),null!==s&&(a&&(a+=" and "),a+=`(max-width: ${s}px)`),{breakpoint:r,query:a,maxWidth:s,minWidth:o}})},i="undefined"==typeof window?n.useEffect:n.useLayoutEffect,s=({breakpoints:e,defaultBreakpoint:t})=>{let r="undefined"!=typeof window&&void 0!==window.matchMedia?window.matchMedia:null,a=n.useMemo(()=>o({breakpoints:e}),[e]),[s,l]=n.useState(t),u=n.useCallback((e,t)=>{e&&l(t)},[l]);return i(()=>{if(!r)return;let e=a.map(({query:e,breakpoint:t})=>{let n=r(e);u(n.matches,t);let a=e=>{e.matches&&l(t)};return n.addEventListener("change",a),()=>n.removeEventListener("change",a)});return()=>{e.forEach(e=>e())}},[e,l,r,a]),n.useDebugValue(s,e=>e),s}},84121:function(e,t,r){"use strict";r.d(t,{GH:function(){return u},ke:function(){return i},xH:function(){return s},Yd:function(){return l}});var n=r(79520);let a={backgroundColor:"colors",borderColor:"colors",borderWidth:"borderWidths",color:"colors",borderRadius:"radii",fontSize:"fontSizes",fontWeight:"fontWeights",fontFamily:"fonts",lineHeight:"lineHeights",opacity:"opacities",boxShadow:"shadows",transform:"transforms",left:"space",right:"space",top:"space",bottom:"space",height:"space",width:"space",letterSpacing:"space",margin:"space",marginBlock:"space",marginBlockEnd:"space",marginBlockStart:"space",marginInline:"space",marginInlineEnd:"space",marginInlineStart:"space",marginLeft:"space",marginRight:"space",marginTop:"space",marginBottom:"space",maxHeight:"space",maxWidth:"space",minHeight:"space",minWidth:"space",padding:"space",paddingBlock:"space",paddingBlockEnd:"space",paddingBlockStart:"space",paddingInline:"space",paddingInlineEnd:"space",paddingInlineStart:"space",paddingLeft:"space",paddingRight:"space",paddingTop:"space",paddingBottom:"space",gap:"space",columnGap:"space",rowGap:"space"},o=e=>e in a,i=e=>"string"==typeof e&&0===e.length,s=e=>null==e||i(e),l=e=>Object.keys(e),u=(e,t,r)=>{if("string"!=typeof t)return t;if(t.includes(" "))return t.split(" ").map(t=>u(e,t,r)).join(" ");if(o(e)){let o=t.split("."),i=r[a[e]];for(let e=0;e<o.length;e++){if(i){i=i[o[e]];continue}break}return(0,n.Dr)(i)?`var(--${(0,n.Sn)({path:[a[e],...o]})})`:t}return t}},22049:function(e,t,r){"use strict";r.d(t,{Q:function(){return n}});let n={alignContent:"alignContent",alignItems:"alignItems",alignSelf:"alignSelf",area:"gridArea",aspectRatio:"aspectRatio",autoColumns:"gridAutoColumns",autoFlow:"gridAutoFlow",autoRows:"gridAutoRows",backgroundColor:"backgroundColor",backgroundImage:"backgroundImage",basis:"flexBasis",border:"border",borderRadius:"borderRadius",borderColor:"borderColor",borderWidth:"borderWidth",borderStyle:"borderStyle",bottom:"bottom",boxShadow:"boxShadow",color:"color",column:"gridColumn",columnEnd:"gridColumnEnd",columnGap:"columnGap",columnSpan:"gridColumn",columnStart:"gridColumnStart",direction:"flexDirection",display:"display",flex:"flex",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",gap:"gap",grow:"flexGrow",height:"height",justifyContent:"justifyContent",left:"left",letterSpacing:"letterSpacing",lineHeight:"lineHeight",margin:"margin",marginBlock:"marginBlock",marginBlockEnd:"marginBlockEnd",marginBlockStart:"marginBlockStart",marginBottom:"marginBlockEnd",marginInline:"marginInline",marginInlineEnd:"marginInlineEnd",marginInlineStart:"marginInlineStart",marginLeft:"marginInlineStart",marginRight:"marginInlineEnd",marginTop:"marginBlockStart",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",objectFit:"objectFit",objectPosition:"objectPosition",opacity:"opacity",order:"order",overflow:"overflow",padding:"padding",paddingBlock:"paddingBlock",paddingBlockEnd:"paddingBlockEnd",paddingBlockStart:"paddingBlockStart",paddingBottom:"paddingBlockEnd",paddingInline:"paddingInline",paddingInlineEnd:"paddingInlineEnd",paddingInlineStart:"paddingInlineStart",paddingLeft:"paddingInlineStart",paddingRight:"paddingInlineEnd",paddingTop:"paddingBlockStart",position:"position",resize:"resize",right:"right",row:"gridRow",rowEnd:"gridRowEnd",rowGap:"rowGap",rowSpan:"gridRow",rowStart:"gridRowStart",shrink:"flexShrink",templateAreas:"gridTemplateAreas",templateColumns:"gridTemplateColumns",templateRows:"gridTemplateRows",textAlign:"textAlign",textDecoration:"textDecoration",textTransform:"textTransform",top:"top",transform:"transform",transformOrigin:"transformOrigin",width:"width",whiteSpace:"whiteSpace",wrap:"flexWrap"};Object.keys(n)},39692:function(e,t,r){"use strict";r.d(t,{R:function(){return a}});var n=r(2265);let a=e=>n.forwardRef(e)},82219:function(e,t,r){"use strict";r.d(t,{j:function(){return u}});var n=r(50793),a=r(79520),o=r(93646);function i(e,t){return t?`${e} { ${Object.entries(t).map(([e,t])=>`--${e}:${t}; `).join(" ")}}
`:""}function s(e,t){let r="",{_modifiers:n={},_element:l={},_vars:u,...c}=t;if(Object.keys(c).length){let[t,n]=(0,o.MO)(c,e=>e.startsWith(":")||e.startsWith("["));Object.entries(t).forEach(([t,n])=>{let{_modifiers:o={},_element:s={},_vars:l,...u}=n;r+=`${e}${t} { ${(0,a.ky)(u)} }
`+i(`${e}${t}`,l)}),r+=`${e} { ${(0,a.ky)(n)} }
`}return r+=i(e,u),Object.entries(n).forEach(([t,n])=>{n&&Object.keys(n).length&&(r+=s(`${e}--${t}`,n))}),Object.entries(l).forEach(([t,n])=>{n&&Object.keys(n).length&&(r+=s(`${e}__${t}`,n))}),r}function l({keys:e,value:t}){return e.reduce((e,r)=>({...e,[r]:{value:`{colors.${t}.${r}.value}`}}),{})}function u(e,t=n.u){let r=(0,a.ZB)([{},t,{...e,components:{}}]),{primaryColor:i,secondaryColor:u}=r;(0,o.HD)(i)&&(r.tokens.colors.primary=l({keys:Object.keys(r.tokens.colors[i]),value:i})),(0,o.HD)(u)&&(r.tokens.colors.secondary=l({keys:Object.keys(r.tokens.colors[u]),value:u}));let c=(0,a.s$)({tokens:r.tokens,setupToken:a.um}),{breakpoints:d,name:p}=r,h=`[data-amplify-theme="${p}"] {
`+(0,a.Wx)(c).map(e=>`${e.name}: ${e.value};`).join("\n")+`
}
`;e?.components&&(h+=function({theme:e,components:t}){let r="",{tokens:n,name:a,breakpoints:i}=e;return t.forEach(({name:e,theme:t,overrides:l})=>{let u=`amplify-${e}`,c=`[data-amplify-theme="${a}"] .${u}`,d=(0,o.mf)(t)?t(n):t;r+=s(c,d),l&&l.forEach(e=>{let t=(0,o.mf)(e.theme)?e.theme(n):e.theme;if("mediaQuery"in e&&(r+=`@media (${e.mediaQuery}) {
 ${s(c,t)} 
}`),"breakpoint"in e){let n=i.values[e.breakpoint];r+=`
@media (min-width: ${n}px) {
 ${s(c,t)} 
}`}"selector"in e&&(r+=s(`${e.selector} .${u}`,t)),"colorMode"in e&&(r+=`
@media (prefers-color-scheme: ${e.colorMode}) {
${s(`[data-amplify-theme="${a}"][data-amplify-color-mode="system"] .${u}`,t)}
}
`+s(`[data-amplify-theme="${a}"][data-amplify-color-mode="${e.colorMode}"] .${u}`,t))})}),r}({theme:{...r,tokens:c},components:e.components}));let f=[];return r.animations&&(h+=function({animations:e,tokens:t}){let r="";return Object.entries(e).forEach(([e,n])=>{r+=`
  @keyframes ${e} {`,Object.entries(n).forEach(([e,n])=>{r+=`
    ${e} {
`;let i=(0,o.mf)(n)?n(t):n;r+=(0,a.ky)(i)+`
    }`}),r+=`
  }`}),r}({animations:r.animations,tokens:c})),r.overrides&&(f=r.overrides.map(e=>{let t=(0,a.s$)({tokens:e.tokens,setupToken:a.um}),n=(0,a.Wx)(t).map(e=>`${e.name}: ${e.value};`).join("\n");if("selector"in e&&(h+=`
${e.selector} {
${n}
}
`),"mediaQuery"in e&&(h+=`
@media (${e.mediaQuery}) {
  [data-amplify-theme="${p}"] {
    ${n}
  }
}
`),"breakpoint"in e){let t=r.breakpoints.values[e.breakpoint];h+=`
@media (min-width: ${t}px) {
  [data-amplify-theme="${p}"] {
    ${n}
  }
}
`}return"colorMode"in e&&(h+=`
@media (prefers-color-scheme: ${e.colorMode}) {
          [data-amplify-theme="${p}"][data-amplify-color-mode="system"] {
            ${n}
            color-scheme: ${e.colorMode};
          }
        }

[data-amplify-theme="${p}"][data-amplify-color-mode="${e.colorMode}"] {
          ${n}
          color-scheme: ${e.colorMode};
        }
`),{...e,tokens:t}})),{tokens:c,breakpoints:d,name:p,cssText:h,containerProps:({colorMode:e}={})=>({"data-amplify-theme":p,"data-amplify-color-mode":e}),overrides:f}}},79520:function(e,t,r){"use strict";r.d(t,{Sn:function(){return s},ZB:function(){return function e(t,r,n){if(null==t)return{};var o,i,s,l,u,c,d=t[0]||{},p=1,h=t.length;for(n=n||[],"object"!=typeof d&&(d={});p<h;p++)if(null!=(u=t[p])){for(l in u)if((0,a.e$)(u,l)&&"__proto__"!==l){if(o=d[l],d===(s=u[l]))continue;if(s&&((0,a.Kn)(s)||(i=Array.isArray(s)))){i?(i=!1,c=o&&Array.isArray(o)?o:[]):c=o&&(0,a.Kn)(o)?o:{};var f=n.slice(0);f.push(l),d[l]=e([c,s],r,f)}else void 0!==s&&(null!=o&&"function"==typeof r&&r({target:d,copy:u,path:n,key:l}),d[l]=s)}}return d}},Wx:function(){return function e(t,r){for(var n in r=r||[],t)(0,a.e$)(t,n)&&((0,a.Kn)(t[n])&&"value"in t[n]?r.push(t[n]):(0,a.Kn)(t[n])&&e(t[n],r));return r}},Dr:function(){return c},ky:function(){return i},um:function(){return h},s$:function(){return function e({tokens:t,path:r=[],setupToken:n}){if((0,a.e$)(t,"value"))return n({token:t,path:r});let o={};for(let i in t)if((0,a.e$)(t,i)){let s=t[i],l=(0,a.Kn)(s)?s:{value:s};o[i]=e({tokens:l,path:r.concat(i),setupToken:n})}return o}}});var n=r(42798),a=r(93646);let o=/\{([^}]+)\}/g;function i(e){return Object.entries(e).map(([e,t])=>{let r=c(t)?t.toString():u({value:t});return`${n(e)}:${r}; `}).join(" ")}function s({path:e=[]}){return`${n(["amplify",...e].join(" "))}`}let l=["offsetX","offsetY","blurRadius","spreadRadius","color"];function u(e){let{value:t}=e;return(0,a.HD)(t)?p(t):d(t)?l.map(r=>p(d(e)?e[r]:t[r])).join(" "):t}function c(e){return(0,a.Kn)(e)&&(0,a.e$)(e,"value")}function d(e){return(0,a.Kn)(e)&&(0,a.e$)(e,"offsetX")}function p(e){if(!e)return"";if(function e(t){let r=new RegExp(o);if("string"==typeof t)return r.test(t);if("object"==typeof t){let r=!1;for(let n in t)if((0,a.e$)(t,n)&&e(t[n])){r=!0;break}return r}return!1}(e)){let t=e.replace(/\{|\}/g,"").replace(".value","").split(".");return`var(--${s({path:t})})`}return e}let h=({token:e,path:t})=>{let r=`--${s({path:t})}`,{value:n}=e;return{name:r,original:n,path:t,value:u(e),toString:()=>`var(${r})`}}},50793:function(e,t,r){"use strict";r.d(t,{u:function(){return i}});let n={default:{variable:{value:`'InterVariable', 'Inter var', 'Inter', -apple-system, BlinkMacSystemFont,
        'Helvetica Neue', 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans',
        sans-serif`},static:{value:`'Inter', -apple-system, BlinkMacSystemFont, 'Helvetica Neue',
        'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif`}}},a={xxxs:{value:"0.375rem"},xxs:{value:"0.5rem"},xs:{value:"0.75rem"},small:{value:"0.875rem"},medium:{value:"1rem"},large:{value:"1.25rem"},xl:{value:"1.5rem"},xxl:{value:"2rem"},xxxl:{value:"2.5rem"},xxxxl:{value:"3rem"}},o={zero:{value:"0"},xxxs:{value:"0.25rem"},xxs:{value:"0.375rem"},xs:{value:"0.5rem"},small:{value:"0.75rem"},medium:{value:"1rem"},large:{value:"1.5rem"},xl:{value:"2.0rem"},xxl:{value:"3.0rem"},xxxl:{value:"4.5rem"},relative:{xxxs:{value:"0.25em"},xxs:{value:"0.375em"},xs:{value:"0.5em"},small:{value:"0.75em"},medium:{value:"1em"},large:{value:"1.5em"},xl:{value:"2.0em"},xxl:{value:"3.0em"},xxxl:{value:"4.5em"},full:{value:"100%"}}};a.xxs,a.xs,a.small,a.medium,a.large,a.xl,a.xxl,a.xxxl,o.xxxs,o.xs,o.small,o.medium,o.large,o.xl,o.xxl,o.xxxl;let i={tokens:{components:{accordion:{backgroundColor:{value:"{colors.background.primary.value}"},item:{borderColor:{value:"{colors.border.secondary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.small.value}"},trigger:{alignItems:{value:"center"},backgroundColor:{value:"{colors.background.primary.value}"},color:{value:"inherit"},gap:{value:"{space.small.value}"},justifyContent:{value:"space-between"},paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"},_hover:{color:{value:"inherit"},backgroundColor:{value:"{colors.overlay.5.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0",offsetY:"0",blurRadius:"0",spreadRadius:"2px",color:"{colors.border.focus.value}"}}}},content:{color:{value:"inherit"},paddingInline:{value:"{space.small.value}"},paddingBlockEnd:{value:"{space.small.value}"},paddingBlockStart:{value:"{space.xxxs.value}"}},icon:{color:{value:"{colors.font.tertiary.value}"},transitionDuration:{value:"{time.medium.value}"},transitionTimingFunction:{value:"cubic-bezier(0.87, 0, 0.13, 1)"}}}},aiConversation:{message:{backgroundColor:{value:"{colors.background.secondary.value}"},borderRadius:{value:"{radii.large.value}"},gap:{value:"{space.small.value}"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.small.value}"},user:{backgroundColor:{value:"{colors.background.secondary.value}"}},assistant:{backgroundColor:{value:"{colors.primary.10.value}"}},sender:{gap:{value:"{space.small.value}"},username:{color:{value:"{colors.font.primary.value}"},fontSize:{value:"inherit"},fontWeight:{value:"{fontWeights.bold.value}"}},timestamp:{color:{value:"{colors.font.tertiary.value}"},fontSize:{value:"inherit"},fontWeight:{value:"inherit"}}},body:{gap:{value:"{space.xs.value}"}},actions:{gap:{value:"{space.xs.value}"}}},form:{gap:{value:"{space.small.value}"},padding:{value:"{space.small.value}"}},attachment:{borderColor:{value:"{colors.border.secondary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.small.value}"},fontSize:{value:"{fontSizes.small.value}"},paddingBlock:{value:"{space.xxxs.value}"},paddingInline:{value:"{space.xs.value}"},gap:{value:"{space.xs.value}"},list:{padding:{value:"{space.xs.value}"},paddingBlockStart:{value:"0"},gap:{value:"{space.xxs.value}"}},name:{color:{value:"{colors.font.primary.value}"},fontSize:{value:"{fontSizes.small.value}"},fontWeight:{value:"{fontWeights.normal.value}"}},size:{color:{value:"{colors.font.tertiary.value}"},fontSize:{value:"{fontSizes.small.value}"},fontWeight:{value:"{fontWeights.normal.value}"}},remove:{padding:{value:"{space.xxs.value}"}},image:{width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"}}}},alert:{alignItems:{value:"center"},justifyContent:{value:"space-between"},color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.tertiary.value}"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.medium.value}"},icon:{size:{value:"{fontSizes.xl.value}"}},heading:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"}}},authenticator:{maxWidth:{value:"60rem"},modal:{width:{value:"{space.relative.full}"},height:{value:"{space.relative.full}"},backgroundColor:{value:"{colors.overlay.50.value}"},top:{value:"{space.zero}"},left:{value:"{space.zero}"}},container:{widthMax:{value:"30rem"}},router:{borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},boxShadow:{value:"{shadows.medium.value}"}},footer:{paddingBottom:{value:"{space.medium.value}"}},form:{padding:{value:"{space.xl.value}"}},state:{inactive:{backgroundColor:{value:"{colors.background.secondary.value}"}}},orContainer:{color:{value:"{colors.neutral.80.value}"},orLine:{backgroundColor:{value:"{colors.background.primary.value}"}}}},autocomplete:{menu:{width:{value:"100%"},marginBlockStart:{value:"{space.xxxs}"},backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderWidth:{value:"{borderWidths.small}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.small}"},options:{display:{value:"flex"},flexDirection:{value:"column"},maxHeight:{value:"300px"}},option:{backgroundColor:{value:"{colors.background.primary}"},color:{value:"currentcolor"},cursor:{value:"pointer"},transitionDuration:{value:"{time.short}"},transitionProperty:{value:"background-color, color"},transitionTimingFunction:{value:"ease"},_active:{backgroundColor:{value:"{colors.primary.80}"},color:{value:"{colors.white}"}}},_empty:{display:{value:"flex"}},_loading:{alignItems:{value:"center"},display:{value:"flex"},gap:{value:"{space.xxxs}"}},spaceShared:{paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"}}}},avatar:{color:{value:"{colors.font.tertiary.value}"},lineHeight:{value:1},fontWeight:{value:"{fontWeights.semibold.value}"},fontSize:{value:"{fontSizes.small.value}"},textAlign:{value:"center"},width:{value:"{fontSizes.xxl.value}"},height:{value:"{fontSizes.xxl.value}"},backgroundColor:{value:"{colors.background.tertiary}"},borderRadius:{value:"100%"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.medium.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"},borderColor:{value:"{colors.border.info.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"},borderColor:{value:"{colors.border.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"},borderColor:{value:"{colors.border.success.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"},borderColor:{value:"{colors.border.error.value}"}},small:{fontSize:{value:"{fontSizes.xs.value}"},width:{value:"{fontSizes.xl.value}"},height:{value:"{fontSizes.xl.value}"}},large:{fontSize:{value:"{fontSizes.medium.value}"},width:{value:"{fontSizes.xxxl.value}"},height:{value:"{fontSizes.xxxl.value}"}}},badge:{color:{value:"{colors.font.primary.value}"},lineHeight:{value:1},fontWeight:{value:"{fontWeights.semibold.value}"},fontSize:{value:"{fontSizes.small.value}"},textAlign:{value:"center"},paddingVertical:{value:"{space.xs.value}"},paddingHorizontal:{value:"{space.small.value}"},backgroundColor:{value:"{colors.background.tertiary.value}"},borderRadius:{value:"{radii.xl.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"}},small:{fontSize:{value:"{fontSizes.xs.value}"},paddingVertical:{value:"{space.xxs.value}"},paddingHorizontal:{value:"{space.xs.value}"}},large:{fontSize:{value:"{fontSizes.medium.value}"},paddingVertical:{value:"{space.small.value}"},paddingHorizontal:{value:"{space.medium.value}"}}},breadcrumbs:{flexDirection:{value:"row"},flexWrap:{value:"wrap"},gap:{value:"0"},color:{value:"{colors.font.tertiary}"},item:{flexDirection:{value:"row"},color:{value:"inherit"},fontSize:{value:"inherit"},alignItems:{value:"center"},lineHeight:{value:"1"}},separator:{color:{value:"inherit"},fontSize:{value:"inherit"},paddingInline:{value:"{space.xxs}"}},link:{color:{value:"{components.link.color}"},fontSize:{value:"inherit"},fontWeight:{value:"normal"},textDecoration:{value:"none"},paddingInline:{value:"{space.xs}"},paddingBlock:{value:"{space.xxs}"},current:{color:{value:"inherit"},fontSize:{value:"inherit"},fontWeight:{value:"normal"},textDecoration:{value:"none"}}}},button:{fontWeight:{value:"{fontWeights.bold.value}"},transitionDuration:{value:"{components.fieldcontrol.transitionDuration.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},lineHeight:{value:"{components.fieldcontrol.lineHeight.value}"},paddingBlockStart:{value:"{components.fieldcontrol.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.paddingInlineEnd.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},borderWidth:{value:"{components.fieldcontrol.borderWidth.value}"},borderStyle:{value:"{components.fieldcontrol.borderStyle.value}"},borderRadius:{value:"{components.fieldcontrol.borderRadius.value}"},color:{value:"{colors.font.primary.value}"},_hover:{color:{value:"{colors.font.focus.value}"},backgroundColor:{value:"{colors.primary.10.value}"},borderColor:{value:"{colors.primary.60.value}"}},_focus:{color:{value:"{colors.font.focus.value}"},backgroundColor:{value:"{colors.primary.10.value}"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{color:{value:"{colors.font.active.value}"},backgroundColor:{value:"{colors.primary.20.value}"},borderColor:{value:"{colors.primary.100.value}"}},_loading:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"}},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"}},outlined:{info:{borderColor:{value:"{colors.blue.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.blue.100}"},_hover:{borderColor:{value:"{colors.blue.60.value}"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"}},_focus:{borderColor:{value:"{colors.blue.100.value}"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.blue.100.value}"},backgroundColor:{value:"{colors.blue.20.value}"},color:{value:"{colors.blue.100.value}"}}},warning:{borderColor:{value:"{colors.orange.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.orange.100}"},_hover:{borderColor:{value:"{colors.orange.60.value}"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"}},_focus:{borderColor:{value:"{colors.orange.100.value}"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"},boxShadow:{value:"{components.fieldcontrol.warning._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.orange.100.value}"},backgroundColor:{value:"{colors.orange.20.value}"},color:{value:"{colors.orange.100.value}"}}},success:{borderColor:{value:"{colors.green.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.green.100}"},_hover:{borderColor:{value:"{colors.green.60.value}"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"}},_focus:{borderColor:{value:"{colors.green.100.value}"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.green.100.value}"},backgroundColor:{value:"{colors.green.20.value}"},color:{value:"{colors.green.100.value}"}}},error:{borderColor:{value:"{colors.red.80.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.red.100}"},_hover:{borderColor:{value:"{colors.red.80.value}"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"}},_focus:{borderColor:{value:"{colors.red.100.value}"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.red.100.value}"},backgroundColor:{value:"{colors.red.20.value}"},color:{value:"{colors.red.100.value}"}}},overlay:{borderColor:{value:"{colors.overlay.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.primary.value}"},_hover:{borderColor:{value:"{colors.overlay.60.value}"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.neutral.90.value}"}},_focus:{borderColor:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.neutral.90.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.neutral.100.value}"}}}},primary:{borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},backgroundColor:{value:"{colors.primary.80.value}"},color:{value:"{colors.font.inverse.value}"},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.100.value}"},color:{value:"{colors.font.inverse.value}"}},info:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.100.value}"},color:{value:"{colors.font.inverse.value}"}}},warning:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.100.value}"},color:{value:"{colors.font.inverse.value}"}}},error:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.100.value}"},color:{value:"{colors.font.inverse.value}"}}},success:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.100.value}"},color:{value:"{colors.font.inverse.value}"}}},overlay:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.70}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"}}}},menu:{borderWidth:{value:"{space.zero.value}"},backgroundColor:{value:"transparent"},justifyContent:{value:"start"},_hover:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.80.value}"}},_focus:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.80.value}"}},_active:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.90.value}"}},_disabled:{color:{value:"{colors.font.disabled.value}"}}},link:{backgroundColor:{value:"transparent"},borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.interactive.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.10.value}"},color:{value:"{colors.font.hover.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.10.value}"},color:{value:"{colors.font.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.20.value}"},color:{value:"{colors.font.active.value}"}},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled.value}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled.value}"}},info:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.blue.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.20.value}"},color:{value:"{colors.blue.100.value}"}}},warning:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.orange.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"},boxShadow:{value:"{components.fieldcontrol.warning._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.20.value}"},color:{value:"{colors.orange.100.value}"}}},success:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.green.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.20.value}"},color:{value:"{colors.green.100.value}"}}},error:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.red.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.20.value}"},color:{value:"{colors.red.100.value}"}}},overlay:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.neutral.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.overlay.80.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.overlay.90.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.overlay.90.value}"}}}},warning:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.red.60}"},borderWidth:{value:"{borderWidths.small}"},color:{value:"{colors.red.60}"},_hover:{borderColor:{value:"{colors.red.80}"},backgroundColor:{value:"{colors.red.10}"},color:{value:"{colors.font.error}"}},_focus:{borderColor:{value:"{colors.red.80}"},backgroundColor:{value:"{colors.red.10}"},color:{value:"{colors.red.80}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow}"}},_active:{borderColor:{value:"{colors.red.100}"},backgroundColor:{value:"{colors.red.20}"},color:{value:"{colors.red.100}"}},_disabled:{borderColor:{value:"{colors.border.tertiary}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled}"}},_loading:{borderColor:{value:"{colors.border.tertiary}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled}"}}},destructive:{borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small}"},borderStyle:{value:"solid"},backgroundColor:{value:"{colors.red.60}"},color:{value:"{colors.font.inverse}"},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled}"},color:{value:"{colors.font.disabled}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled}"},color:{value:"{colors.font.disabled}"}},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.100}"},color:{value:"{colors.font.inverse}"}}},small:{fontSize:{value:"{components.fieldcontrol.small.fontSize.value}"},paddingBlockStart:{value:"{components.fieldcontrol.small.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.small.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.small.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.small.paddingInlineEnd.value}"}},large:{fontSize:{value:"{components.fieldcontrol.large.fontSize.value}"},paddingBlockStart:{value:"{components.fieldcontrol.large.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.large.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.large.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.large.paddingInlineEnd.value}"}},loaderWrapper:{alignItems:{value:"center"},gap:{value:"{space.xs.value}"}}},card:{backgroundColor:{value:"{colors.background.primary.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"0"},borderStyle:{value:"solid"},borderColor:{value:"transparent"},boxShadow:{value:"none"},padding:{value:"{space.medium.value}"},outlined:{backgroundColor:{value:"{components.card.backgroundColor.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},boxShadow:{value:"{components.card.boxShadow.value}"}},elevated:{backgroundColor:{value:"{components.card.backgroundColor.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"0"},borderStyle:{value:"solid"},borderColor:{value:"transparent"},boxShadow:{value:"{shadows.medium.value}"}}},checkbox:{cursor:{value:"pointer"},alignItems:{value:"center"},_disabled:{cursor:{value:"not-allowed"}},button:{position:{value:"relative"},alignItems:{value:"center"},justifyContent:{value:"center"},color:{value:"{colors.font.inverse.value}"},before:{width:{value:"100%"},height:{value:"100%"},borderWidth:{value:"{borderWidths.medium.value}"},borderRadius:{value:"20%"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"}},_focus:{outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},_focus:{borderColor:{value:"{colors.border.error.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}}},icon:{backgroundColor:{value:"{colors.primary.80.value}"},borderRadius:{value:"20%"},opacity:{value:"{opacities.0.value}"},transform:{value:"scale(0)"},transitionProperty:{value:"all"},transitionDuration:{value:"{time.short.value}"},transitionTimingFunction:{value:"ease-in-out"},_checked:{opacity:{value:"{opacities.100.value}"},transform:{value:"scale(1)"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}},_indeterminate:{opacity:{value:"{opacities.100.value}"},transform:{value:"scale(1)"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}}},label:{color:{value:"{components.text.color.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"}}}},checkboxfield:{alignItems:{value:"flex-start"},alignContent:{value:"center"},flexDirection:{value:"column"},justifyContent:{value:"center"}},collection:{pagination:{current:{color:{value:"{components.pagination.current.color}"},backgroundColor:{value:"{components.pagination.current.backgroundColor}"}},button:{color:{value:"{components.pagination.button.color}"},_hover:{backgroundColor:{value:"{components.pagination.button.hover.backgroundColor}"},color:{value:"{components.pagination.button.hover.color}"}},_disabled:{color:{value:"{components.pagination.button.disabled.color}"}}}},search:{input:{color:{value:"{components.searchfield.color}"}},button:{color:{value:"{components.searchfield.button.color}"},_active:{backgroundColor:{value:"{components.searchfield.button._active.backgroundColor}"},borderColor:{value:"{components.searchfield.button._active.borderColor}"},color:{value:"{components.searchfield.button._active.color}"}},_disabled:{backgroundColor:{value:"{components.searchfield.button._disabled.backgroundColor}"},borderColor:{value:"{components.searchfield.button._disabled.borderColor}"},color:{value:"{components.searchfield.button._disabled.color}"}},_focus:{backgroundColor:{value:"{components.searchfield.button._focus.backgroundColor}"},borderColor:{value:"{components.searchfield.button._focus.borderColor}"},color:{value:"{components.searchfield.button._focus.color}"}},_hover:{backgroundColor:{value:"{components.searchfield.button._hover.backgroundColor}"},borderColor:{value:"{components.searchfield.button._hover.borderColor}"},color:{value:"{components.searchfield.button._hover.color}"}}}}},copy:{fontSize:{value:"{fontSizes.xs}"},gap:{value:"{space.relative.medium}"},svg:{path:{fill:{value:"{colors.font.primary}"}}},toolTip:{bottom:{value:"{space.large}"},color:{value:"{colors.teal.100}"},fontSize:{value:"{fontSizes.xxs}"}}},countrycodeselect:{height:{value:"{space.relative.full.value}"}},divider:{borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.medium.value}"},label:{color:{value:"{colors.font.tertiary.value}"},paddingInline:{value:"{space.medium.value}"},fontSize:{value:"{fontSizes.small.value}"},backgroundColor:{value:"{colors.background.primary.value}"}},small:{borderWidth:{value:"{borderWidths.small.value}"}},large:{borderWidth:{value:"{borderWidths.large.value}"}},opacity:{value:"{opacities.60.value}"}},dropzone:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},color:{value:"{colors.font.primary}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.primary}"}},_disabled:{backgroundColor:{value:"{colors.background.disabled}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.disabled}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.disabled}"}},accepted:{backgroundColor:{value:"{colors.background.success}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.success}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.success}"}},rejected:{backgroundColor:{value:"{colors.background.error}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.error}"}}},field:{gap:{value:"{space.xs.value}"},fontSize:{value:"{fontSizes.medium.value}"},flexDirection:{value:"column"},small:{gap:{value:"{space.xxxs.value}"},fontSize:{value:"{fontSizes.small.value}"}},large:{gap:{value:"{space.small.value}"},fontSize:{value:"{fontSizes.large.value}"}},label:{color:{value:"{colors.font.secondary.value}"}}},fieldcontrol:{borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.small.value}"},color:{value:"{colors.font.primary.value}"},paddingBlockStart:{value:"{space.xs.value}"},paddingBlockEnd:{value:"{space.xs.value}"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"},fontSize:{value:"{components.field.fontSize.value}"},lineHeight:{value:"{lineHeights.medium.value}"},transitionDuration:{value:"{time.medium.value}"},outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},small:{fontSize:{value:"{components.field.small.fontSize.value}"},paddingBlockStart:{value:"{space.xxs.value}"},paddingBlockEnd:{value:"{space.xxs.value}"},paddingInlineStart:{value:"{space.small.value}"},paddingInlineEnd:{value:"{space.small.value}"}},large:{fontSize:{value:"{components.field.large.fontSize.value}"},paddingBlockStart:{value:"{space.xs.value}"},paddingBlockEnd:{value:"{space.xs.value}"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"}},quiet:{borderStyle:{value:"none"},borderInlineStart:{value:"none"},borderInlineEnd:{value:"none"},borderBlockStart:{value:"none"},borderRadius:{value:"0"},_focus:{borderBlockEndColor:{value:"transparent"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_error:{borderBlockEndColor:{value:"{colors.border.error.value}"},_focus:{borderBlockEndColor:{value:"transparent"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.focus.value}"}}},_disabled:{color:{value:"{colors.font.disabled.value}"},cursor:{value:"not-allowed"},borderColor:{value:"{colors.transparent.value}"},backgroundColor:{value:"{colors.background.disabled.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},color:{value:"{colors.font.error.value}"},_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.error.value}"}}}},info:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.blue.100.value}"}}}},warning:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.orange.100.value}"}}}},success:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.green.100.value}"}}}},overlay:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.overlay.90.value}"}}}}},fieldgroup:{gap:{value:"{space.zero.value}"},vertical:{alignItems:{value:"center"}},outer:{alignItems:{value:"center"}}},fieldmessages:{error:{color:{value:"{colors.font.error.value}"},fontSize:{value:"{fontSizes.small.value}"}},description:{color:{value:"{colors.font.secondary.value}"},fontStyle:{value:"italic"},fontSize:{value:"{fontSizes.small.value}"}}},fieldset:{backgroundColor:{value:"transparent"},borderRadius:{value:"{radii.xs.value}"},flexDirection:{value:"column"},gap:{value:"{components.field.gap.value}"},legend:{color:{value:"{colors.font.primary.value}"},fontSize:{value:"{components.field.fontSize.value}"},fontWeight:{value:"{fontWeights.bold.value}"},lineHeight:{value:"{lineHeights.medium.value}"},small:{fontSize:"{components.field.small.fontSize.value}"},large:{fontSize:"{components.field.large.fontSize.value}"}},outlined:{padding:"{space.medium.value}",borderColor:"{colors.neutral.40.value}",borderWidth:"{borderWidths.small.value}",borderStyle:"solid",small:{padding:"{space.small.value}"},large:{padding:"{space.large.value}"}},small:{gap:"{components.field.small.gap.value}"},large:{gap:"{components.field.large.gap.value}"}},fileuploader:{dropzone:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.fileuploader.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.fileuploader.dropzone.borderStyle}"},borderWidth:{value:"{borderWidths.medium}"}},icon:{color:{value:"{colors.border.primary}"},fontSize:{value:"{fontSizes.xxl}"}},text:{color:{value:"{colors.font.tertiary}"},fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"}}},file:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"},gap:{value:"{space.small}"},alignItems:{value:"baseline"},name:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},size:{fontSize:{value:"{fontSizes.small}"},fontWeight:{value:"{fontWeights.normal}"},color:{value:"{colors.font.tertiary}"}},image:{width:{value:"{space.xxl}"},height:{value:"{space.xxl}"},backgroundColor:{value:"{colors.background.secondary}"},color:{value:"{colors.font.tertiary}"},borderRadius:{value:"{radii.small}"}}},filelist:{flexDirection:{value:"column"},gap:{value:"{space.small}"}},loader:{strokeLinecap:{value:"round"},strokeEmpty:{value:"{colors.border.secondary}"},strokeFilled:{value:"{components.loader.strokeFilled}"},strokeWidth:{value:"{borderWidths.large}"}},previewer:{backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},borderRadius:{value:"{radii.small}"},paddingBlock:{value:"{space.zero}"},paddingInline:{value:"{space.zero}"},maxHeight:{value:"40rem"},maxWidth:{value:"auto"},text:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},body:{paddingBlock:{value:"{space.medium}"},paddingInline:{value:"{space.medium}"},gap:{value:"{space.small}"}},footer:{justifyContent:{value:"flex-end"}}}},flex:{gap:{value:"{space.medium.value}"},justifyContent:{value:"normal"},alignItems:{value:"stretch"},alignContent:{value:"normal"},flexWrap:{value:"nowrap"}},heading:{color:{value:"{colors.font.primary.value}"},lineHeight:{value:"{lineHeights.small.value}"},1:{fontSize:{value:"{fontSizes.xxxxl.value}"},fontWeight:{value:"{fontWeights.light.value}"}},2:{fontSize:{value:"{fontSizes.xxxl.value}"},fontWeight:{value:"{fontWeights.normal.value}"}},3:{fontSize:{value:"{fontSizes.xxl.value}"},fontWeight:{value:"{fontWeights.medium.value}"}},4:{fontSize:{value:"{fontSizes.xl.value}"},fontWeight:{value:"{fontWeights.semibold.value}"}},5:{fontSize:{value:"{fontSizes.large.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},6:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.extrabold.value}"}}},icon:{lineHeight:{value:1},height:{value:"1em"}},highlightmatch:{highlighted:{fontWeight:{value:"{fontWeights.bold}"}}},image:{maxWidth:{value:"100%"},height:{value:"auto"},objectFit:{value:"initial"},objectPosition:{value:"initial"}},inappmessaging:{banner:{height:{value:"150px "},width:{value:"400px "}},button:{backgroundColor:{value:"#e8e8e8"},borderRadius:{value:"5px"},color:{value:"black"}},dialog:{height:{value:"50vh"},minHeight:{value:"400px"},minWidth:{value:"400px"},width:{value:"30vw"}},header:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.extrabold.value}"}}},input:{color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},link:{active:{color:{value:"{colors.font.active.value}"}},color:{value:"{colors.font.interactive.value}"},focus:{color:{value:"{colors.font.focus.value}"}},hover:{color:{value:"{colors.font.hover.value}"}},visited:{color:{value:"{colors.font.interactive.value}"}}},liveness:{cameraModule:{backgroundColor:{value:"{colors.background.primary.value}"}}},loader:{width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"},fontSize:{value:"{fontSizes.xs.value}"},strokeEmpty:{value:"{colors.neutral.20.value}"},strokeFilled:{value:"{colors.primary.80.value}"},strokeLinecap:{value:"round"},animationDuration:{value:"1s"},small:{width:{value:"{fontSizes.small.value}"},height:{value:"{fontSizes.small.value}"},fontSize:{value:"{fontSizes.xxs.value}"}},large:{width:{value:"{fontSizes.large.value}"},height:{value:"{fontSizes.large.value}"},fontSize:{value:"{fontSizes.small.value}"}},linear:{width:{value:"100%"},minWidth:{value:"5rem"},fontSize:{value:"{fontSizes.xxs.value}"},strokeWidth:{value:"{fontSizes.xxs.value}"},strokeFilled:{value:"{colors.primary.80.value}"},strokeEmpty:{value:"{colors.neutral.20.value}"},strokeLinecap:{value:"round"},animationDuration:{value:"1s"},small:{strokeWidth:{value:"{fontSizes.xxxs.value}"},fontSize:{value:"{fontSizes.xxxs.value}"}},large:{strokeWidth:{value:"{fontSizes.xs.value}"},fontSize:{value:"{fontSizes.xs.value}"}}},text:{fill:{value:"{colors.font.primary.value}"}}},menu:{backgroundColor:{value:"{colors.background.primary.value}"},borderRadius:{value:"{radii.medium.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},boxShadow:{value:"{shadows.large.value}"},flexDirection:{value:"column"},gap:{value:"{space.zero.value}"},maxWidth:{value:"30rem"},minWidth:{value:"14rem"},small:{width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"}},large:{width:{value:"{fontSizes.xxxl.value}"},height:{value:"{fontSizes.xxxl.value}"}},item:{minHeight:{value:"2.5rem"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"}}},message:{alignItems:{value:"center"},backgroundColor:{value:"{colors.background.tertiary.value}"},borderColor:{value:"transparent"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.xs.value}"},color:{value:"{colors.font.primary.value}"},justifyContent:{value:"flex-start"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.medium.value}"},lineHeight:{value:"{lineHeights.small.value}"},icon:{size:{value:"{fontSizes.xl.value}"}},heading:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},dismiss:{gap:{value:"{space.xxs.value}"}},plain:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}}},outlined:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.primary.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.info.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.error.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.success.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.warning.value}"}}},filled:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.secondary.value}"},borderColor:{value:"transparent"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"},borderColor:{value:"transparent"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"},borderColor:{value:"transparent"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"},borderColor:{value:"transparent"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"},borderColor:{value:"transparent"}}}},pagination:{current:{alignItems:{value:"center"},justifyContent:{value:"center"},color:{value:"{colors.font.inverse.value}"},fontSize:{value:"{fontSizes.small.value}"},backgroundColor:{value:"{colors.overlay.40.value}"}},button:{color:{value:"{colors.font.primary.value}"},paddingInlineStart:{value:"{space.xxs.value}"},paddingInlineEnd:{value:"{space.xxs.value}"},transitionProperty:{value:"background-color"},transitionDuration:{value:"{time.medium.value}"},hover:{backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.font.primary.value}"}},disabled:{color:{value:"{colors.font.disabled.value}"}}},ellipsis:{alignItems:{value:"baseline"},justifyContent:{value:"center"},paddingInlineStart:{value:"{space.xs.value}"},paddingInlineEnd:{value:"{space.xs.value}"}},itemContainer:{marginLeft:{value:"{space.xxxs.value}"},marginRight:{value:"{space.xxxs.value}"}},itemShared:{height:{value:"{fontSizes.xxl.value}"},minWidth:{value:"{fontSizes.xxl.value}"},borderRadius:{value:"{fontSizes.medium.value}"}}},passwordfield:{color:{value:"{components.fieldcontrol.color.value}"},button:{color:{value:"{components.button.color.value}"},_active:{backgroundColor:{value:"{components.button._active.backgroundColor.value}"},borderColor:{value:"{components.button._active.borderColor.value}"},color:{value:"{components.button._active.color.value}"}},_disabled:{backgroundColor:{value:"{components.button._disabled.backgroundColor.value}"},borderColor:{value:"{components.button._disabled.borderColor.value}"},color:{value:"{components.button._disabled.color.value}"}},_error:{color:{value:"{components.button.outlined.error.color.value}"},backgroundColor:{value:"{components.button.outlined.error.backgroundColor.value}"},borderColor:{value:"{components.button.outlined.error.borderColor.value}"},_active:{borderColor:{value:"{components.button.outlined.error._active.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._active.backgroundColor.value}"},color:{value:"{components.button.outlined.error._active.color.value}"}},_focus:{borderColor:{value:"{components.button.outlined.error._focus.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._focus.backgroundColor.value}"},color:{value:"{components.button.outlined.error._focus.color.value}"},boxShadow:{value:"{components.button.outlined.error._focus.boxShadow.value}"}},_hover:{borderColor:{value:"{components.button.outlined.error._hover.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._hover.backgroundColor.value}"},color:{value:"{components.button.outlined.error._hover.color.value}"}}},_focus:{backgroundColor:{value:"{components.button._focus.backgroundColor.value}"},borderColor:{value:"{components.button._focus.borderColor.value}"},color:{value:"{components.button._focus.color.value}"}},_hover:{backgroundColor:{value:"{components.button._hover.backgroundColor.value}"},borderColor:{value:"{components.button._hover.borderColor.value}"},color:{value:"{components.button._hover.color.value}"}}}},phonenumberfield:{color:{value:"{components.fieldcontrol.color}"},borderColor:{value:"{components.fieldcontrol.borderColor}"},fontSize:{value:"{components.fieldcontrol.fontSize}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor}"}}},placeholder:{borderRadius:{value:"{radii.small.value}"},transitionDuration:{value:"{time.long.value}"},startColor:{value:"{colors.background.secondary.value}"},endColor:{value:"{colors.background.tertiary.value}"},small:{height:{value:"{space.small.value}"}},default:{height:{value:"{space.medium.value}"}},large:{height:{value:"{space.large.value}"}}},radio:{alignItems:{value:"center"},justifyContent:{value:"flex-start"},gap:{value:"inherit"},_disabled:{cursor:{value:"not-allowed"}},button:{alignItems:{value:"center"},justifyContent:{value:"center"},width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"},boxSizing:{value:"border-box"},borderWidth:{value:"{borderWidths.medium.value}"},borderStyle:{value:"solid"},borderRadius:{value:"50%"},borderColor:{value:"{colors.border.primary.value}"},color:{value:"{colors.background.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},transitionProperty:{value:"all"},transitionDuration:{value:"{time.medium.value}"},outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},padding:{value:"{borderWidths.medium.value}"},small:{width:{value:"{fontSizes.small.value}"},height:{value:"{fontSizes.small.value}"}},large:{width:{value:"{fontSizes.large.value}"},height:{value:"{fontSizes.large.value}"}},_checked:{color:{value:"{colors.primary.80.value}"},_disabled:{color:{value:"{colors.background.disabled.value}"}}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},_focus:{boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"},backgroundColor:{value:"{colors.background.primary.value}"}}},label:{color:{value:"{components.text.color.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"}}}},radiogroup:{radio:{borderWidth:{value:"{components.radio.button.borderWidth}"},borderColor:{value:"{components.radio.button.borderColor}"},backgroundColor:{value:"{components.radio.button.backgroundColor}"},_checked:{color:{value:"{components.radio.button._checked.color}"}},label:{color:{value:"{components.radio.label.color}"}}},legend:{color:{value:"{components.fieldset.legend.color}"},fontWeight:{value:"{fontWeights.normal}"}}},rating:{large:{size:{value:"{fontSizes.xxxl.value}"}},default:{size:{value:"{fontSizes.xl.value}"}},small:{size:{value:"{fontSizes.small.value}"}},filled:{color:{value:"{colors.secondary.80.value}"}},empty:{color:{value:"{colors.background.tertiary.value}"}}},searchfield:{color:{value:"{components.fieldcontrol.color.value}"},button:{color:{value:"{components.button.color.value}"},backgroundColor:{value:"{colors.background.primary.value}"},_active:{backgroundColor:{value:"{components.button._active.backgroundColor.value}"},borderColor:{value:"{components.button._active.borderColor.value}"},color:{value:"{components.button._active.color.value}"}},_disabled:{backgroundColor:{value:"{components.button._disabled.backgroundColor.value}"},borderColor:{value:"{components.button._disabled.borderColor.value}"},color:{value:"{components.button._disabled.color.value}"}},_focus:{backgroundColor:{value:"{components.button._focus.backgroundColor.value}"},borderColor:{value:"{components.button._focus.borderColor.value}"},color:{value:"{components.button._focus.color.value}"}},_hover:{backgroundColor:{value:"{components.button._hover.backgroundColor.value}"},borderColor:{value:"{components.button._hover.borderColor.value}"},color:{value:"{components.button._hover.color.value}"}}}},select:{color:{value:"{components.fieldcontrol.color}"},backgroundColor:{value:"{colors.background.primary.value}"},paddingInlineEnd:{value:"{space.xxl.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"{colors.background.disabled.value}"}},wrapper:{flex:{value:"1"},display:{value:"block"},position:{value:"relative"},cursor:{value:"pointer"}},iconWrapper:{alignItems:{value:"center"},position:{value:"absolute"},top:{value:"50%"},right:{value:"{space.medium.value}"},transform:{value:"translateY(-50%)"},pointerEvents:{value:"none"},small:{right:{value:"{space.xs.value}"}},large:{right:{value:"{space.medium.value}"}}},option:{backgroundColor:{value:"transparent"},color:{value:"{colors.font.primary.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"}}},whiteSpace:{value:"nowrap"},minWidth:{value:"6.5rem"},small:{minWidth:{value:"5.5rem"},paddingInlineEnd:{value:"{space.xl.value}"}},large:{minWidth:{value:"7.5rem"},paddingInlineEnd:{value:"{space.xxl.value}"}},expanded:{paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"},option:{paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"}}}},selectfield:{borderColor:{value:"{components.fieldcontrol.borderColor}"},color:{value:"{components.fieldcontrol.color}"},flexDirection:{value:"column"},fontSize:{value:"{components.fieldcontrol.fontSize}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor}"}},label:{color:{value:"{components.field.label.color}"}}},sliderfield:{paddingBlock:{value:"{space.xs.value}"},track:{backgroundColor:{value:"{colors.background.quaternary.value}"},borderRadius:{value:"9999px"},height:{value:"0.375rem"},minWidth:{value:"10rem"}},range:{backgroundColor:{value:"{colors.primary.80.value}"},borderRadius:{value:"9999px"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}},thumb:{width:{value:"1.25rem"},height:{value:"1.25rem"},backgroundColor:{value:"{colors.background.primary.value}"},boxShadow:{value:"{shadows.small.value}"},borderRadius:{value:"50%"},borderWidth:{value:"{borderWidths.medium.value}"},borderColor:{value:"{colors.border.primary.value}"},borderStyle:{value:"solid"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"},borderColor:{value:"transparent"},boxShadow:{value:"none"}},_hover:{backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.focus.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}}},small:{track:{height:{value:"0.25rem"}},thumb:{width:{value:"1rem"},height:{value:"1rem"}}},large:{track:{height:{value:"0.625rem"}},thumb:{width:{value:"1.5rem"},height:{value:"1.5rem"}}}},stepperfield:{borderColor:{value:"{components.fieldcontrol.borderColor}"},flexDirection:{value:"column"},input:{color:{value:"{components.fieldcontrol.color}"},fontSize:{value:"{components.fieldcontrol.fontSize}"},textAlign:{value:"center"}},button:{color:{value:"{components.button.color}"},backgroundColor:{value:"{colors.transparent}"},_active:{color:{value:"{components.button._active.color}"},backgroundColor:{value:"{components.button._active.backgroundColor}"}},_focus:{color:{value:"{components.button._focus.color}"},backgroundColor:{value:"{components.button._focus.backgroundColor}"}},_disabled:{color:{value:"{components.button._disabled.color}"},backgroundColor:{value:"{components.fieldcontrol._disabled.backgroundColor}"}},_hover:{color:{value:"{components.button._hover.color}"},backgroundColor:{value:"{components.button._hover.backgroundColor}"}}}},storagemanager:{dropzone:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.storagemanager.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.storagemanager.dropzone.borderStyle}"},borderWidth:{value:"{borderWidths.medium}"}},icon:{color:{value:"{colors.border.primary}"},fontSize:{value:"{fontSizes.xxl}"}},text:{color:{value:"{colors.font.tertiary}"},fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"}}},file:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"},gap:{value:"{space.small}"},alignItems:{value:"baseline"},name:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},size:{fontSize:{value:"{fontSizes.small}"},fontWeight:{value:"{fontWeights.normal}"},color:{value:"{colors.font.tertiary}"}},image:{width:{value:"{space.xxl}"},height:{value:"{space.xxl}"},backgroundColor:{value:"{colors.background.secondary}"},color:{value:"{colors.font.tertiary}"},borderRadius:{value:"{radii.small}"}}},filelist:{flexDirection:{value:"column"},gap:{value:"{space.small}"}},loader:{strokeLinecap:{value:"round"},strokeEmpty:{value:"{colors.border.secondary}"},strokeFilled:{value:"{components.loader.strokeFilled}"},strokeWidth:{value:"{borderWidths.large}"}},previewer:{backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},borderRadius:{value:"{radii.small}"},paddingBlock:{value:"{space.zero}"},paddingInline:{value:"{space.zero}"},maxHeight:{value:"40rem"},maxWidth:{value:"auto"},text:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},body:{paddingBlock:{value:"{space.medium}"},paddingInline:{value:"{space.medium}"},gap:{value:"{space.small}"}},footer:{justifyContent:{value:"flex-end"}}}},switchfield:{_disabled:{opacity:{value:"{opacities.60.value}"}},_focused:{shadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},fontSize:{value:"{fontSizes.medium.value}"},large:{fontSize:{value:"{fontSizes.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"}},label:{padding:{value:"{space.xs.value}"}},thumb:{backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.xxxl.value}"},checked:{transform:{value:"{transforms.slideX.medium.value}"}},transition:{duration:{value:"{time.medium.value}"}},width:{value:"{space.relative.medium.value}"}},track:{backgroundColor:{value:"{colors.background.quaternary.value}"},borderRadius:{value:"{radii.xxxl.value}"},checked:{backgroundColor:{value:"{colors.primary.80.value}"}},height:{value:"{space.relative.medium.value}"},padding:{value:"{outlineWidths.medium.value}"},transition:{duration:{value:"{time.short.value}"}},width:{value:"{space.relative.xl.value}"},_error:{backgroundColor:{value:"{colors.background.error.value}"}}}},table:{borderCollapse:{value:"collapse"},display:{value:"table"},width:{value:"100%"},head:{display:{value:"table-header-group"},verticalAlign:{value:"middle"}},body:{display:{value:"table-row-group"},verticalAlign:{value:"middle"}},foot:{display:{value:"table-footer-group"},verticalAlign:{value:"middle"}},row:{display:{value:"table-row"},verticalAlign:{value:"middle"},hover:{backgroundColor:{value:"{colors.background.tertiary.value}"}},striped:{backgroundColor:{value:"{colors.background.secondary.value}"}}},header:{borderColor:{value:"{colors.border.tertiary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.primary.value}"},display:{value:"table-cell"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"},padding:{value:"{space.medium.value}"},verticalAlign:{value:"middle"},large:{fontSize:{value:"{fontSizes.large.value}"},padding:{value:"{space.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"},padding:{value:"{space.xs.value}"}}},data:{borderColor:{value:"{colors.border.tertiary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.primary.value}"},display:{value:"table-cell"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.normal.value}"},padding:{value:"{space.medium.value}"},verticalAlign:{value:"middle"},large:{fontSize:{value:"{fontSizes.large.value}"},padding:{value:"{space.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"},padding:{value:"{space.xs.value}"}}},caption:{captionSide:{value:"bottom"},color:{value:"{colors.font.primary.value}"},display:{value:"table-caption"},fontSize:{value:"{fontSizes.medium.value}"},textAlign:{value:"center"},wordBreak:{value:"break-all"},large:{fontSize:{value:"{fontSizes.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"}}}},tabs:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.secondary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.medium.value}"},gap:{value:"0"},item:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.secondary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.medium.value}"},color:{value:"{colors.font.secondary.value}"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"},paddingVertical:{value:"{space.small.value}"},paddingHorizontal:{value:"{space.medium.value}"},textAlign:{value:"center"},transitionDuration:{value:"{time.medium.value}"},_hover:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.hover.value}"}},_focus:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"{borderWidths.medium}",color:"{colors.border.focus.value}"}},color:{value:"{colors.font.focus.value}"}},_active:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.font.interactive.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.interactive.value}"}},_disabled:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.disabled.value}"}}},panel:{backgroundColor:{value:"transparent"},paddingInline:{value:"0"},paddingBlock:{value:"{space.small.value}"}}},text:{color:{value:"{colors.font.primary.value}"},primary:{color:{value:"{colors.font.primary.value}"}},secondary:{color:{value:"{colors.font.secondary.value}"}},tertiary:{color:{value:"{colors.font.tertiary.value}"}},error:{color:{value:"{colors.font.error.value}"}},warning:{color:{value:"{colors.font.warning.value}"}},success:{color:{value:"{colors.font.success.value}"}},info:{color:{value:"{colors.font.info.value}"}}},textareafield:{color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},textfield:{color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},togglebutton:{borderColor:{value:"{colors.border.primary.value}"},color:{value:"{colors.font.primary.value}"},_hover:{backgroundColor:{value:"{colors.overlay.10.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},color:{value:"{colors.font.primary.value}"}},_active:{backgroundColor:{value:"{colors.transparent.value}"}},_disabled:{backgroundColor:{value:"{colors.transparent.value}"},borderColor:{value:"{colors.border.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{borderColor:{value:"{colors.border.pressed.value}"},color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.overlay.20.value}"},_hover:{backgroundColor:{value:"{colors.overlay.30.value}"}}},primary:{backgroundColor:{value:"{colors.transparent.value}"},borderWidth:{value:"{borderWidths.small.value}"},_focus:{borderColor:{value:"{colors.border.focus.value}"},backgroundColor:{value:"{colors.transparent.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"},color:{value:"{colors.font.primary.value}"}},_hover:{backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.font.primary.value}"}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{backgroundColor:{value:"{colors.primary.80.value}"},borderColor:{value:"{colors.primary.80.value}"},color:{value:"{colors.background.primary.value}"},_focus:{backgroundColor:{value:"{colors.border.focus.value}"},borderColor:{value:"{colors.border.focus.value}"},color:{value:"{colors.background.primary.value}"}},_hover:{borderColor:{value:"{colors.primary.60.value}"},backgroundColor:{value:"{colors.primary.60.value}"},boxShadow:{value:"{colors.primary.60.value}"},color:{value:"{colors.background.primary.value}"}}}},link:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"},_hover:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"}},_focus:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"}},_disabled:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.90.value}"},_focus:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.90.value}"}},_hover:{color:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.transparent.value}"}}}}},togglebuttongroup:{alignItems:{value:"center"},alignContent:{value:"center"},justifyContent:{value:"flex-start"}}},borderWidths:{small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},colors:{red:{10:{value:"hsl(0, 75%, 95%)"},20:{value:"hsl(0, 75%, 85%)"},40:{value:"hsl(0, 75%, 75%)"},60:{value:"hsl(0, 50%, 50%)"},80:{value:"hsl(0, 95%, 30%)"},90:{value:"hsl(0, 100%, 20%)"},100:{value:"hsl(0, 100%, 15%)"}},orange:{10:{value:"hsl(30, 75%, 95%)"},20:{value:"hsl(30, 75%, 85%)"},40:{value:"hsl(30, 75%, 75%)"},60:{value:"hsl(30, 50%, 50%)"},80:{value:"hsl(30, 95%, 30%)"},90:{value:"hsl(30, 100%, 20%)"},100:{value:"hsl(30, 100%, 15%)"}},yellow:{10:{value:"hsl(60, 75%, 95%)"},20:{value:"hsl(60, 75%, 85%)"},40:{value:"hsl(60, 75%, 75%)"},60:{value:"hsl(60, 50%, 50%)"},80:{value:"hsl(60, 95%, 30%)"},90:{value:"hsl(60, 100%, 20%)"},100:{value:"hsl(60, 100%, 15%)"}},green:{10:{value:"hsl(130, 60%, 95%)"},20:{value:"hsl(130, 60%, 90%)"},40:{value:"hsl(130, 44%, 63%)"},60:{value:"hsl(130, 43%, 46%)"},80:{value:"hsl(130, 33%, 37%)"},90:{value:"hsl(130, 27%, 29%)"},100:{value:"hsl(130, 22%, 23%)"}},teal:{10:{value:"hsl(190, 75%, 95%)"},20:{value:"hsl(190, 75%, 85%)"},40:{value:"hsl(190, 70%, 70%)"},60:{value:"hsl(190, 50%, 50%)"},80:{value:"hsl(190, 95%, 30%)"},90:{value:"hsl(190, 100%, 20%)"},100:{value:"hsl(190, 100%, 15%)"}},blue:{10:{value:"hsl(220, 95%, 95%)"},20:{value:"hsl(220, 85%, 85%)"},40:{value:"hsl(220, 70%, 70%)"},60:{value:"hsl(220, 50%, 50%)"},80:{value:"hsl(220, 95%, 30%)"},90:{value:"hsl(220, 100%, 20%)"},100:{value:"hsl(220, 100%, 15%)"}},purple:{10:{value:"hsl(300, 95%, 95%)"},20:{value:"hsl(300, 85%, 85%)"},40:{value:"hsl(300, 70%, 70%)"},60:{value:"hsl(300, 50%, 50%)"},80:{value:"hsl(300, 95%, 30%)"},90:{value:"hsl(300, 100%, 20%)"},100:{value:"hsl(300, 100%, 15%)"}},pink:{10:{value:"hsl(340, 95%, 95%)"},20:{value:"hsl(340, 90%, 85%)"},40:{value:"hsl(340, 70%, 70%)"},60:{value:"hsl(340, 50%, 50%)"},80:{value:"hsl(340, 95%, 30%)"},90:{value:"hsl(340, 100%, 20%)"},100:{value:"hsl(340, 100%, 15%)"}},neutral:{10:{value:"hsl(210, 5%, 98%)"},20:{value:"hsl(210, 5%, 94%)"},40:{value:"hsl(210, 5%, 87%)"},60:{value:"hsl(210, 10%, 58%)"},80:{value:"hsl(210, 10%, 40%)"},90:{value:"hsl(210, 25%, 25%)"},100:{value:"hsl(210, 50%, 10%)"}},primary:{10:{value:"{colors.teal.10.value}"},20:{value:"{colors.teal.20.value}"},40:{value:"{colors.teal.40.value}"},60:{value:"{colors.teal.60.value}"},80:{value:"{colors.teal.80.value}"},90:{value:"{colors.teal.90.value}"},100:{value:"{colors.teal.100.value}"}},secondary:{10:{value:"{colors.purple.10.value}"},20:{value:"{colors.purple.20.value}"},40:{value:"{colors.purple.40.value}"},60:{value:"{colors.purple.60.value}"},80:{value:"{colors.purple.80.value}"},90:{value:"{colors.purple.90.value}"},100:{value:"{colors.purple.100.value}"}},font:{primary:{value:"{colors.neutral.100.value}"},secondary:{value:"{colors.neutral.90.value}"},tertiary:{value:"{colors.neutral.80.value}"},disabled:{value:"{colors.neutral.60.value}"},inverse:{value:"{colors.white.value}"},interactive:{value:"{colors.primary.80.value}"},hover:{value:"{colors.primary.90.value}"},focus:{value:"{colors.primary.100.value}"},active:{value:"{colors.primary.100.value}"},info:{value:"{colors.blue.90.value}"},warning:{value:"{colors.orange.90.value}"},error:{value:"{colors.red.90.value}"},success:{value:"{colors.green.90.value}"}},background:{primary:{value:"{colors.white.value}"},secondary:{value:"{colors.neutral.10.value}"},tertiary:{value:"{colors.neutral.20.value}"},quaternary:{value:"{colors.neutral.60.value}"},disabled:{value:"{colors.background.tertiary.value}"},info:{value:"{colors.blue.10.value}"},warning:{value:"{colors.orange.10.value}"},error:{value:"{colors.red.10.value}"},success:{value:"{colors.green.10.value}"}},border:{primary:{value:"{colors.neutral.60.value}"},secondary:{value:"{colors.neutral.40.value}"},tertiary:{value:"{colors.neutral.20.value}"},disabled:{value:"{colors.border.tertiary.value}"},pressed:{value:"{colors.primary.100.value}"},focus:{value:"{colors.primary.100.value}"},error:{value:"{colors.red.80.value}"},info:{value:"{colors.blue.80.value}"},success:{value:"{colors.green.80.value}"},warning:{value:"{colors.orange.80.value}"}},shadow:{primary:{value:"hsla(210, 50%, 10%, 0.25)"},secondary:{value:"hsla(210, 50%, 10%, 0.15)"},tertiary:{value:"hsla(210, 50%, 10%, 0.05)"}},overlay:{5:{value:"hsla(0, 0%, 0%, 0.05)"},10:{value:"hsla(0, 0%, 0%, 0.1)"},20:{value:"hsla(0, 0%, 0%, 0.2)"},30:{value:"hsla(0, 0%, 0%, 0.3)"},40:{value:"hsla(0, 0%, 0%, 0.4)"},50:{value:"hsla(0, 0%, 0%, 0.5)"},60:{value:"hsla(0, 0%, 0%, 0.6)"},70:{value:"hsla(0, 0%, 0%, 0.7)"},80:{value:"hsla(0, 0%, 0%, 0.8)"},90:{value:"hsla(0, 0%, 0%, 0.9)"}},black:{value:"hsl(0, 0%, 0%)"},white:{value:"hsl(0, 0%, 100%)"},transparent:{value:"transparent"}},fonts:n,fontSizes:a,fontWeights:{hairline:{value:100},thin:{value:200},light:{value:300},normal:{value:400},medium:{value:500},semibold:{value:600},bold:{value:700},extrabold:{value:800},black:{value:900}},lineHeights:{small:{value:"1.25"},medium:{value:"1.5"},large:{value:"2"}},opacities:{0:{value:"0"},10:{value:"0.1"},20:{value:"0.2"},30:{value:"0.3"},40:{value:"0.4"},50:{value:"0.5"},60:{value:"0.6"},70:{value:"0.7"},80:{value:"0.8"},90:{value:"0.9"},100:{value:"1"}},outlineOffsets:{small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},outlineWidths:{small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},radii:{xs:{value:"0.125rem"},small:{value:"0.25rem"},medium:{value:"0.5rem"},large:{value:"1rem"},xl:{value:"2rem"},xxl:{value:"4rem"},xxxl:{value:"8rem"}},shadows:{small:{value:{offsetX:"0px",offsetY:"2px",blurRadius:"4px",color:"{colors.shadow.tertiary.value}"}},medium:{value:{offsetX:"0px",offsetY:"2px",blurRadius:"6px",color:"{colors.shadow.secondary.value}"}},large:{value:{offsetX:"0px",offsetY:"4px",blurRadius:"12px",color:"{colors.shadow.primary.value}"}}},space:o,time:{short:{value:"100ms"},medium:{value:"250ms"},long:{value:"500ms"}},transforms:{slideX:{small:{value:"translateX(0.5em)"},medium:{value:"translateX(1em)"},large:{value:"translateX(2em)"}}}},breakpoints:{values:{base:0,small:480,medium:768,large:992,xl:1280,xxl:1536},defaultBreakpoint:"base"},name:"default-theme"}},53039:function(e,t,r){"use strict";r.d(t,{M:function(){return n}});let n={Accordion:"amplify-accordion",AccordionItem:"amplify-accordion__item",AccordionItemTrigger:"amplify-accordion__item__trigger",AccordionItemContent:"amplify-accordion__item__content",AccordionItemIcon:"amplify-accordion__item__icon",Alert:"amplify-alert",AlertIcon:"amplify-alert__icon",AlertHeading:"amplify-alert__heading",AlertBody:"amplify-alert__body",AlertDismiss:"amplify-alert__dismiss",Autocomplete:"amplify-autocomplete",AutocompleteMenu:"amplify-autocomplete__menu",AutocompleteMenuEmpty:"amplify-autocomplete__menu--empty",AutocompleteMenuFooter:"amplify-autocomplete__menu__footer",AutocompleteMenuHeader:"amplify-autocomplete__menu__header",AutocompleteMenuLoading:"amplify-autocomplete__menu--loading",AutocompleteMenuOption:"amplify-autocomplete__menu__option",AutocompleteMenuOptions:"amplify-autocomplete__menu__options",Avatar:"amplify-avatar",AvatarIcon:"amplify-avatar__icon",AvatarImage:"amplify-avatar__image",AvatarLoader:"amplify-avatar__loader",AIConversation:"amplify-ai-conversation",AIConversationScrollView:"amplify-ai-conversation__scrollview",AIConversationAttachment:"amplify-ai-conversation__attachment",AIConversationAttachmentList:"amplify-ai-conversation__attachment__list",AIConversationAttachmentImage:"amplify-ai-conversation__attachment__image",AIConversationAttachmentName:"amplify-ai-conversation__attachment__name",AIConversationAttachmentSize:"amplify-ai-conversation__attachment__size",AIConversationAttachmentRemove:"amplify-ai-conversation__attachment__remove",AIConversationForm:"amplify-ai-conversation__form",AIConversationFormAttach:"amplify-ai-conversation__form__attach",AIConversationFormError:"amplify-ai-conversation__form__error",AIConversationFormSend:"amplify-ai-conversation__form__send",AIConversationFormField:"amplify-ai-conversation__form__field",AIConversationFormDropzone:"amplify-ai-conversation__form__dropzone",AIConversationMessage:"amplify-ai-conversation__message",AIConversationMessageAvatar:"amplify-ai-conversation__message__avatar",AIConversationMessageSender:"amplify-ai-conversation__message__sender",AIConversationMessageSenderUsername:"amplify-ai-conversation__message__sender__username",AIConversationMessageSenderTimestamp:"amplify-ai-conversation__message__sender__timestamp",AIConversationMessageBody:"amplify-ai-conversation__message__body",AIConversationMessageContent:"amplify-ai-conversation__message__content",AIConversationMessageActions:"amplify-ai-conversation__message__actions",AIConversationMessageList:"amplify-ai-conversation__message__list",AIConversationPrompt:"amplify-ai-conversation__prompt",Badge:"amplify-badge",Breadcrumbs:"amplify-breadcrumbs",BreadcrumbsList:"amplify-breadcrumbs__list",BreadcrumbsItem:"amplify-breadcrumbs__item",BreadcrumbsSeparator:"amplify-breadcrumbs__separator",BreadcrumbsLink:"amplify-breadcrumbs__link",Button:"amplify-button",ButtonGroup:"amplify-buttongroup",ButtonLoaderWrapper:"amplify-button__loader-wrapper",Card:"amplify-card",Checkbox:"amplify-checkbox",CheckboxButton:"amplify-checkbox__button",CheckboxIcon:"amplify-checkbox__icon",CheckboxInput:"amplify-checkbox__input",CheckboxLabel:"amplify-checkbox__label",CheckboxField:"amplify-checkboxfield",Collection:"amplify-collection",CollectionItems:"amplify-collection-items",CollectionSearch:"amplify-collection-search",CollectionPagination:"amplify-collection-pagination",CountryCodeSelect:"amplify-countrycodeselect",DialCodeSelect:"amplify-dialcodeselect",Divider:"amplify-divider",DividerLabel:"amplify-divider--label",DropZone:"amplify-dropzone",Field:"amplify-field",FieldDescription:"amplify-field__description",FieldErrorMessage:"amplify-field__error-message",FieldGroup:"amplify-field-group",FieldGroupControl:"amplify-field-group__control",FieldGroupOuterEnd:"amplify-field-group__outer-end",FieldGroupOuterStart:"amplify-field-group__outer-start",FieldGroupInnerEnd:"amplify-field-group__inner-end",FieldGroupInnerStart:"amplify-field-group__inner-start",FieldGroupIcon:"amplify-field-group__icon",FieldGroupIconButton:"amplify-field-group__icon-button",FieldGroupHasInnerEnd:"amplify-field-group--has-inner-end",FieldGroupHasInnerStart:"amplify-field-group--has-inner-start",FieldShowPassword:"amplify-field__show-password",FieldGroupFieldWrapper:"amplify-field-group__field-wrapper",Fieldset:"amplify-fieldset",FieldsetLegend:"amplify-fieldset__legend",FileUploader:"amplify-fileuploader",FileUploaderDropZone:"amplify-fileuploader__dropzone",FileUploaderDropZoneIcon:"amplify-fileuploader__dropzone__icon",FileUploaderDropZoneText:"amplify-fileuploader__dropzone__text",FileUploaderFilePicker:"amplify-fileuploader__file__picker",FileUploaderFile:"amplify-fileuploader__file",FileUploaderFileWrapper:"amplify-fileuploader__file__wrapper",FileUploaderFileList:"amplify-fileuploader__file__list",FileUploaderFileName:"amplify-fileuploader__file__name",FileUploaderFileSize:"amplify-fileuploader__file__size",FileUploaderFileInfo:"amplify-fileuploader__file__info",FileUploaderFileImage:"amplify-fileuploader__file__image",FileUploaderFileMain:"amplify-fileuploader__file__main",FileUploaderFileStatus:"amplify-fileuploader__file__status",FileUploaderLoader:"amplify-fileuploader__loader",FileUploaderPreviewer:"amplify-fileuploader__previewer",FileUploaderPreviewerText:"amplify-fileuploader__previewer__text",FileUploaderPreviewerActions:"amplify-fileuploader__previewer__actions",FileUploaderPreviewerFooter:"amplify-fileuploader__previewer__footer",Flex:"amplify-flex",Grid:"amplify-grid",Heading:"amplify-heading",HighlightMatch:"amplify-highlightmatch",HighlightMatchHighlighted:"amplify-highlightmatch__highlighted",Icon:"amplify-icon",Image:"amplify-image",Input:"amplify-input",Label:"amplify-label",Link:"amplify-link",Loader:"amplify-loader",LoaderLabel:"amplify-loader__label",MenuContent:"amplify-menu__content",MenuItem:"amplify-menu__content__item",MenuTrigger:"amplify-menu__trigger",MenuWrapper:"amplify-menu__wrapper",Message:"amplify-message",MessageIcon:"amplify-message__icon",MessageHeading:"amplify-message__heading",MessageBody:"amplify-message__body",MessageContent:"amplify-message__content",MessageDismiss:"amplify-message__dismiss",Pagination:"amplify-pagination",PaginationItem:"amplify-pagination__item",PasswordField:"amplify-passwordfield",PhoneNumberField:"amplify-phonenumberfield",Placeholder:"amplify-placeholder",Radio:"amplify-radio",RadioButton:"amplify-radio__button",RadioInput:"amplify-radio__input",RadioLabel:"amplify-radio__label",RadioGroupField:"amplify-radiogroupfield",RadioGroup:"amplify-radiogroup",Rating:"amplify-rating",RatingItem:"amplify-rating__item",RatingIcon:"amplify-rating__icon",RatingLabel:"amplify-rating__label",ScrollView:"amplify-scrollview",SearchField:"amplify-searchfield",SearchFieldClear:"amplify-searchfield__clear",SearchFieldSearch:"amplify-searchfield__search",Select:"amplify-select",SelectField:"amplify-selectfield",SelectWrapper:"amplify-select__wrapper",SelectIcon:"amplify-select__icon",SliderField:"amplify-sliderfield",SliderFieldGroup:"amplify-sliderfield__group",SliderFieldLabel:"amplify-sliderfield__label",SliderFieldRange:"amplify-sliderfield__range",SliderFieldRoot:"amplify-sliderfield__root",SliderFieldThumb:"amplify-sliderfield__thumb",SliderFieldTrack:"amplify-sliderfield__track",StepperField:"amplify-stepperfield",StepperFieldButtonDecrease:"amplify-stepperfield__button--decrease",StepperFieldButtonIncrease:"amplify-stepperfield__button--increase",StepperFieldInput:"amplify-stepperfield__input",StorageImage:"amplify-storageimage",StorageManager:"amplify-storagemanager",StorageManagerDropZone:"amplify-storagemanager__dropzone",StorageManagerDropZoneIcon:"amplify-storagemanager__dropzone__icon",StorageManagerDropZoneText:"amplify-storagemanager__dropzone__text",StorageManagerFilePicker:"amplify-storagemanager__file__picker",StorageManagerFile:"amplify-storagemanager__file",StorageManagerFileWrapper:"amplify-storagemanager__file__wrapper",StorageManagerFileList:"amplify-storagemanager__file__list",StorageManagerFileName:"amplify-storagemanager__file__name",StorageManagerFileSize:"amplify-storagemanager__file__size",StorageManagerFileInfo:"amplify-storagemanager__file__info",StorageManagerFileImage:"amplify-storagemanager__file__image",StorageManagerFileMain:"amplify-storagemanager__file__main",StorageManagerFileStatus:"amplify-storagemanager__file__status",StorageManagerLoader:"amplify-storagemanager__loader",StorageManagerPreviewer:"amplify-storagemanager__previewer",StorageManagerPreviewerText:"amplify-storagemanager__previewer__text",StorageManagerPreviewerActions:"amplify-storagemanager__previewer__actions",StorageManagerPreviewerFooter:"amplify-storagemanager__previewer__footer",SwitchField:"amplify-switchfield",SwitchLabel:"amplify-switch__label",SwitchThumb:"amplify-switch__thumb",SwitchTrack:"amplify-switch__track",SwitchWrapper:"amplify-switch__wrapper",Table:"amplify-table",TableCaption:"amplify-table__caption",TableBody:"amplify-table__body",TableTd:"amplify-table__td",TableTh:"amplify-table__th",TableFoot:"amplify-table__foot",TableHead:"amplify-table__head",TableRow:"amplify-table__row",Tabs:"amplify-tabs",TabsList:"amplify-tabs__list",TabsItem:"amplify-tabs__item",TabsPanel:"amplify-tabs__panel",Text:"amplify-text",Textarea:"amplify-textarea",TextAreaField:"amplify-textareafield",TextField:"amplify-textfield",ToggleButton:"amplify-togglebutton",ToggleButtonGroup:"amplify-togglebuttongroup",VisuallyHidden:"amplify-visually-hidden"}},4167:function(e,t,r){"use strict";r.d(t,{A:function(){return a}});var n=r(93646);let a=(...e)=>{let t=[];for(let r of e)if(r){if((0,n.HD)(r)){t.push(r);continue}if("number"==typeof r){t.push(r.toString());continue}if(Array.isArray(r)){t.push(a(...r));continue}if((0,n.Kn)(r)){if(r.toString!==Object.prototype.toString&&"[object Object]"!==r.toString()){t.push(r.toString());continue}for(let e in r)(0,n.e$)(r,e)&&r[e]&&t.push(e)}}return t.join(" ")}},93646:function(e,t,r){"use strict";function n(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function a(e){return"string"==typeof e||"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)}function o(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function i(e){return"function"==typeof e}r.d(t,{HD:function(){return a},Kn:function(){return n},MO:function(){return u},T2:function(){return l},e$:function(){return o},mf:function(){return i},wq:function(){return s}});let s=(e,t)=>t?`${e}--${t}`:"",l=(e,t,r)=>r?`${e}--${t}`:"";function u(e,t){let r={},n={};return Object.entries(e).forEach(([e,a])=>{t(e)?r[e]=a:n[e]=a}),[r,n]}},37213:function(e,t,r){"use strict";let n;r.d(t,{V:function(){return tn}});var a,o,i,s,l,u,c=r(79722);function d(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var p=function e(t,r){function n(e,n,a){if("undefined"!=typeof document){"number"==typeof(a=d({},r,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in a)a[i]&&(o+="; "+i,!0!==a[i]&&(o+="="+a[i].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var o=r[a].split("="),i=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=t.read(i,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",d({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,d({},this.attributes,t))},withConverter:function(t){return e(d({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class h{constructor(e={}){let{path:t,domain:r,expires:n,sameSite:a,secure:o}=e;if(this.domain=r,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?n:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||o,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!a||!["strict","lax","none"].includes(a))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===a&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=a}}async setItem(e,t){p.set(e,t,this.getData())}async getItem(e){return p.get(e)??null}async removeItem(e){p.remove(e,this.getData())}async clear(){let e=Object.keys(p.get()).map(e=>this.removeItem(e));await Promise.all(e)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}(a=s||(s={})).NoEndpointId="NoEndpointId",a.PlatformNotSupported="PlatformNotSupported",a.Unknown="Unknown",a.NetworkError="NetworkError";var f=r(75638);class m extends f._{constructor(){super({name:s.PlatformNotSupported,message:"Function not supported on current platform"})}}class g{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new m;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new m;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new m;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new m;this.storage.clear()}}var y=r(53110);class v{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}let b=new y.k("CoreStorageUtils"),w=()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){b.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new v},k=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw Error("sessionStorage is not defined")}catch(e){return b.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new v}};class S extends g{constructor(){super(w())}}class x extends g{constructor(){super(k())}}class _{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new m;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}class I extends _{constructor(){super(k())}}let E=new S;new x,new I,new g(new v);var T=r(64686);let N=()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new f._({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},A={convert(e,t){let r=e;return t?.urlSafe&&(r=r.replace(/-/g,"+").replace(/_/g,"/")),N()(r)}},C=(e,t=f._)=>(r,n,a)=>{let{message:o,recoverySuggestion:i}=e[n];if(!r)throw new t({name:n,message:a?`${o} ${a}`:o,recoverySuggestion:i})};(o=l||(l={})).AuthTokenConfigException="AuthTokenConfigException",o.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",o.AuthUserPoolException="AuthUserPoolException",o.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",o.OAuthNotConfigureException="OAuthNotConfigureException";let M=C({[l.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[l.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[l.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[l.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[l.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}});function R(e){M(!!e&&!!e.userPoolId&&!!e.userPoolClientId,l.AuthUserPoolException)}function O(e){M(!!e?.identityPoolId,l.InvalidIdentityPoolIdException)}function F(e){let t=e.split(".");if(3!==t.length)throw Error("Invalid token");try{let r=t[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(A.convert(r).split("").map(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),a=JSON.parse(n);return{toString:()=>e,payload:a}}catch(e){throw Error("Invalid token payload")}}class D extends f._{constructor(e){super(e),this.constructor=D,Object.setPrototypeOf(this,D.prototype)}}function P(e){if(!e||!e.includes(":"))throw new D({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}let $="UserUnAuthenticatedException";new D({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),new D({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),new D({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),new D({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});let L=new D({name:"TokenRefreshException",message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),B=new D({name:$,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."}),z={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function W(e){return e?.accessToken||e?.idToken}let U=(e,t,r,n)=>async(a,o)=>{let i={...n,...a},s=await i.endpointResolver(i,o),l=await t(o,s);return r(await e(l,{...i}))},j=e=>(t,r)=>H(r,V(e),JSON.stringify(t)),V=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),H=({url:e},t,r)=>({headers:t,url:e,body:r,method:"POST"}),G=e=>{let{headers:t,statusCode:r}=e;return{...q(e)?e.$metadata:{},httpStatusCode:r,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},q=e=>"object"==typeof e?.$metadata,K=async e=>{if(!e||e.statusCode<300)return;let t=await Y(e),r=(e=>{let[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError");return Object.assign(Error(t.message??t.Message??"Unknown error"),{name:r,$metadata:G(e)})},Y=async e=>{if(!e.body)throw Error("Missing response payload");return Object.assign(await e.body.json(),{$metadata:G(e)})};function X(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new D({name:s.Unknown,message:"An unknown error has occurred.",underlyingError:e})}let Q=()=>async e=>{if(e.statusCode>=300){let t=await K(e);throw X(t),new D({name:t.name,message:t.message,metadata:t.$metadata})}return Y(e)},Z=(e,t)=>(r,n)=>{let a={},o=t=>e(t,n);for(let e=t.length-1;e>=0;e--)o=(0,t[e])(n)(o,a);return o(r)},J=3,ee="amz-sdk-invocation-id",et=(e,t)=>{let r,n;if(t?.aborted)return Promise.resolve();let a=new Promise(t=>{n=t,r=setTimeout(t,e)});return t?.addEventListener("abort",function e(a){clearTimeout(r),t?.removeEventListener("abort",e),n()}),a},er=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},en=r(49360).Z;r(80800),r(41162);let ea=e=>{let t;return()=>(t||(t=e()),t)},eo=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),ei=Z(async({url:e,method:t,headers:r,body:n},{abortSignal:a,cache:o,withCrossDomainCredentials:i})=>{let l;try{l=await fetch(e,{method:t,headers:r,body:eo(t)?n:void 0,signal:a,cache:o,credentials:i?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new f._({name:s.NetworkError,message:"A network error has occurred.",underlyingError:e});throw e}let u={};l.headers?.forEach((e,t)=>{u[t.toLowerCase()]=e});let c={statusCode:l.status,headers:u,body:null},d=Object.assign(l.body??{},{text:ea(()=>l.text()),blob:ea(()=>l.blob()),json:ea(()=>l.json())});return{...c,body:d}},[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>r=>async function(n){if(0===t.trim().length)return await r(n);{let a=e.toLowerCase();return n.headers[a]=n.headers[a]?`${n.headers[a]} ${t}`:t,await r(n)}},()=>e=>async function(t){return t.headers[ee]||(t.headers[ee]=en()),e(t)},({maxAttempts:e=J,retryDecider:t,computeDelay:r,abortSignal:n})=>{if(e<1)throw Error("maxAttempts must be greater than 0");return(a,o)=>async function(i){let s,l;let u=o.attemptsCount??0,c=()=>{if(l)return er(l,u),l;throw er(s,u),s};for(;!n?.aborted&&u<e;){try{l=await a(i),s=void 0}catch(e){s=e,l=void 0}u=(o.attemptsCount??0)>u?o.attemptsCount??0:u+1,o.attemptsCount=u;let{isCredentialsExpiredError:d,retryable:p}=await t(l,s,o);if(!p)return c();if(o.isCredentialsExpired=!!d,!n?.aborted&&u<e){let e=r(u);await et(e,n)}}if(!n?.aborted)return c();throw Error("Request aborted.")}},({maxAttempts:e=J})=>(t,r)=>async function(n){let a=r.attemptsCount??0;return n.headers["amz-sdk-request"]=`attempt=${a+1}; max=${e}`,t(n)}]),es=Z(ei,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),el=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],eu=e=>!!e&&el.includes(e),ec=e=>async(t,r)=>{let n=r??await e(t)??void 0,a=n?.code||n?.name,o=t?.statusCode;return{retryable:ef(r)||eh(o,a)||eu(a)||em(o,a)}},ed=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],ep=["TimeoutError","RequestTimeout","RequestTimeoutException"],eh=(e,t)=>429===e||!!t&&ed.includes(t),ef=e=>[s.NetworkError,"ERR_NETWORK"].includes(e?.name),em=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&ep.includes(t);var eg=r(79955);let ey=e=>{let t=(0,eg.k)(3e5)(e);return!1===t?3e5:t};var ev=r(52954);let eb="cognito-idp",ew={service:eb,retryDecider:ec(K),computeDelay:ey,userAgentValue:(0,ev.Zm)(),cache:"no-store"},ek=e=>U(es,j("InitiateAuth"),Q(),{...ew,...e}),eS=URL,ex={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},e_={partitions:[ex,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},eI=e=>{let{partitions:t}=e_;for(let{regions:r,outputs:n,regionRegex:a}of t){let t=new RegExp(a);if(r.includes(e)||t.test(e))return n.dnsSuffix}return ex.outputs.dnsSuffix},eE=({region:e})=>({url:new eS(`https://${eb}.${e}.${eI(e)}`)}),eT=({endpointOverride:e})=>t=>e?{url:new eS(e)}:eE(t),eN=(i=async({tokens:e,authConfig:t,username:r})=>{R(t?.Cognito);let{userPoolId:n,userPoolClientId:a,userPoolEndpoint:o}=t.Cognito,i=function(e){let t=e?.split("_")[0];if(!e||0>e.indexOf("_")||!t||"string"!=typeof t)throw new D({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}(n);!function(e){if(W(e)&&!e?.refreshToken)throw L;if(!(W(e)&&e?.refreshToken))throw B}(e);let s=e.refreshToken,l={REFRESH_TOKEN:s};e.deviceMetadata?.deviceKey&&(l.DEVICE_KEY=e.deviceMetadata.deviceKey);let u=function({username:e,userPoolId:t,userPoolClientId:r}){if("undefined"==typeof window)return;let n=window.AmazonCognitoAdvancedSecurityData;if(void 0===n)return;let a=n.getData(e,t,r);return a?{EncodedData:a}:{}}({username:r,userPoolId:n,userPoolClientId:a}),c=ek({endpointResolver:eT({endpointOverride:o})}),{AuthenticationResult:d}=await c({region:i},{ClientId:a,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:l,UserContextData:u}),p=F(d?.AccessToken??""),h=d?.IdToken?F(d.IdToken):void 0,{iat:f}=p.payload;if(!f)throw new D({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:p,idToken:h,clockDrift:1e3*f-new Date().getTime(),refreshToken:s,username:r}},async(...e)=>n||(n=new Promise((t,r)=>{i(...e).then(e=>{t(e)}).catch(e=>{r(e)}).finally(()=>{n=void 0})}))),eA={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};(u||(u={})).InvalidAuthTokens="InvalidAuthTokens";let eC=C({[u.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}}),eM="CognitoIdentityServiceProvider";class eR{getKeyValueStorage(){if(!this.keyValueStorage)throw new D({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{let e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new D({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let r=F(t),n=await this.getKeyValueStorage().getItem(e.idToken),a=n?F(n):void 0,o=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,i=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",s=Number.parseInt(i),l=await this.getKeyValueStorage().getItem(e.signInDetails),u={accessToken:r,idToken:a,refreshToken:o,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:s,username:await this.getLastAuthUser()};return l&&(u.signInDetails=JSON.parse(l)),u}catch(e){return null}}async storeTokens(e){eC(void 0!==e,u.InvalidAuthTokens);let t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);let r=await this.getAuthKeys();await this.getKeyValueStorage().setItem(r.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(r.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(r.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(r.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(r.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(r.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(r.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(r.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(r.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(r.signInDetails),await this.getKeyValueStorage().setItem(r.clockDrift,`${e.clockDrift}`)}async clearTokens(){let e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){let t=await this.getAuthKeys(e),r=await this.getKeyValueStorage().getItem(t.deviceKey),n=await this.getKeyValueStorage().getItem(t.deviceGroupKey),a=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return a&&n&&r?{deviceKey:r,deviceGroupKey:n,randomPassword:a}:null}async clearDeviceMetadata(e){let t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){R(this.authConfig?.Cognito);let t=e??await this.getLastAuthUser();return eO(eM,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){R(this.authConfig?.Cognito);let e=this.authConfig.Cognito.userPoolClientId;return`${eM}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){let{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){let{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}let eO=(e,t)=>eF(eA)(`${e}`,t);function eF(e){let t=Object.values({...e});return(e,r)=>t.reduce((t,n)=>({...t,[n]:`${e}.${r}.${n}`}),{})}var eD=r(85871);let eP=()=>"undefined"!=typeof window&&void 0!==window.document;function e$({expiresAt:e,clockDrift:t,tolerance:r=5e3}){return Date.now()+t+r>e}let eL="amplify-signin-with-hostedUI",eB="CognitoIdentityServiceProvider";class ez{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){R(this.cognitoConfig);let e=eW(eB,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){R(this.cognitoConfig);let e=eW(eB,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(eL),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){R(this.cognitoConfig);let e=eW(eB,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){R(this.cognitoConfig);let t=eW(eB,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){R(this.cognitoConfig);let e=eW(eB,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){R(this.cognitoConfig);let t=eW(eB,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){R(this.cognitoConfig);let e=eW(eB,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(e.inflightOAuth)==="true"}async storeOAuthInFlight(e){R(this.cognitoConfig);let t=eW(eB,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){R(this.cognitoConfig);let e=eW(eB,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(eL),[r,n]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===r||"true"===t,preferPrivateSession:"true"===n}}async storeOAuthSignIn(e,t=!1){R(this.cognitoConfig);let r=eW(eB,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(r.oauthSignIn,`${e},${t}`)}}let eW=(e,t)=>eF(z)(e,t),eU=new ez(E),ej=[],eV=e=>{ej.push(e)};class eH{constructor(){this.waitForInflightOAuth=eP()?async()=>await eU.loadOAuthInFlight()?(this.inflightPromise||(this.inflightPromise=new Promise((e,t)=>{eV(e)})),this.inflightPromise):void 0:async()=>{}}setAuthConfig(e){eU.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new D({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new D({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{R(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();let r=await this.getTokenStore().getLastAuthUser();if(null===t)return null;let n=!!t?.idToken&&e$({expiresAt:(t.idToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0}),a=e$({expiresAt:(t.accessToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0});return(e?.forceRefresh||n||a)&&null===(t=await this.refreshTokens({tokens:t,username:r}))?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{let{signInDetails:r}=e,n=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return n.signInDetails=r,await this.setTokens({tokens:n}),eD.Xb.dispatch("auth",{event:"tokenRefresh"},"Auth",eD.SQ),n}catch(e){return this.handleErrors(e)}}handleErrors(e){if(X(e),e.name!==s.NetworkError&&this.clearTokens(),eD.Xb.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",eD.SQ),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class eG{constructor(){this.authTokenStore=new eR,this.authTokenStore.setKeyValueStorage(E),this.tokenOrchestrator=new eH,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(eN)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}}let eq=new eG,{tokenOrchestrator:eK}=eq,eY={identityId:"identityId"},eX=new y.k("DefaultIdentityIdStore");class eQ{setAuthConfig(e){O(e.Cognito),this.authConfig=e,this._authKeys=eZ("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){O(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let e=await this.keyValueStorage.getItem(this._authKeys.identityId);if(e)return this._hasGuestIdentityId=!0,{id:e,type:"guest"};return null}}catch(e){return eX.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){O(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}let eZ=(e,t)=>eF(eY)(`com.amplify.${e}`,t);var eJ=r(63171);let e0=Z(ei,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),e1={service:"cognito-identity",endpointResolver:({region:e})=>({url:new eS(`https://cognito-identity.${e}.${eI(e)}`)}),retryDecider:ec(K),computeDelay:ey,userAgentValue:(0,ev.Zm)(),cache:"no-store"};(0,eJ.QW)(()=>{e1.userAgentValue=(0,ev.Zm)()});let e2=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),e3=({url:e},t,r)=>({headers:t,url:e,body:r,method:"POST"}),e4=({AccessKeyId:e,SecretKey:t,SessionToken:r,Expiration:n}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:r,Expiration:n&&new Date(1e3*n)}),e6=U(e0,(e,t)=>e3(t,e2("GetCredentialsForIdentity"),JSON.stringify(e)),async e=>{if(e.statusCode>=300)throw await K(e);{let t=await Y(e);return{IdentityId:t.IdentityId,Credentials:e4(t.Credentials),$metadata:G(e)}}},e1),e5=U(e0,(e,t)=>e3(t,e2("GetId"),JSON.stringify(e)),async e=>{if(!(e.statusCode>=300))return{IdentityId:(await Y(e)).IdentityId,$metadata:G(e)};throw await K(e)},e1);function e8(e){let t=F(e).payload.iss,r={};if(!t)throw new D({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return r[t.replace(/(^\w+:|^)\/\//,"")]=e,r}async function e7({tokens:e,authConfig:t,identityIdStore:r}){r.setAuthConfig({Cognito:t});let n=await r.loadIdentityId();if(n)return n.id;let a=e?.idToken?e8(e.idToken.toString()):{},o=await e9(a,t);return r.storeIdentityId({id:o,type:e?"primary":"guest"}),o}async function e9(e,t){let r;let n=t?.identityPoolId,a=P(n);try{r=(await e5({region:a},{IdentityPoolId:n,Logins:e})).IdentityId}catch(e){throw X(e),new D(e)}if(!r)throw new D({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return r}let te=new y.k("CognitoCredentialsProvider");class tt{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){te.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){te.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){let t=e.authenticated,{tokens:r}=e,{authConfig:n}=e;try{O(n?.Cognito)}catch{return}if(!t&&!n.Cognito.allowGuestAccess)return;let{forceRefresh:a}=e,o=this.hasTokenChanged(r),i=await e7({tokens:r,authConfig:n.Cognito,identityIdStore:this._identityIdStore});return((a||o)&&this.clearCredentials(),t)?(!function(e){if(!e||!e.idToken)throw new D({name:$,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(r),this.credsForOIDCTokens(n.Cognito,r,i)):this.getGuestCredentials(i,n.Cognito)}async getGuestCredentials(e,t){let r;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return te.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let n=P(t.identityPoolId);try{r=await e6({region:n},{IdentityId:e})}catch(e){throw X(e),new D(e)}if(r?.Credentials?.AccessKeyId&&r?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let t={credentials:{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration},identityId:e};return r.IdentityId&&(t.identityId=r.IdentityId,this._identityIdStore.storeIdentityId({id:r.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new D({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,r){let n;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return te.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let a=t.idToken?e8(t.idToken.toString()):{},o=P(e.identityPoolId);try{n=await e6({region:o},{IdentityId:r,Logins:a})}catch(e){throw X(e),new D(e)}if(n?.Credentials?.AccessKeyId&&n?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let e={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:r};return n.IdentityId&&(e.identityId=n.IdentityId,this._identityIdStore.storeIdentityId({id:n.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},e}throw new D({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}let tr=new tt(new eQ(E)),tn={configure(e,t){let r=(0,T.h)(e);if(!r.Auth||t?.Auth){c.d.configure(r,t);return}if(!c.d.libraryOptions.Auth){eq.setAuthConfig(r.Auth),eq.setKeyValueStorage(t?.ssr?new h({sameSite:"lax"}):E),c.d.configure(r,{...t,Auth:{tokenProvider:eq,credentialsProvider:tr}});return}if(t){void 0!==t.ssr&&eq.setKeyValueStorage(t.ssr?new h({sameSite:"lax"}):E),c.d.configure(r,{Auth:c.d.libraryOptions.Auth,...t});return}c.d.configure(r)},getConfig:()=>c.d.getConfig()}}}]);